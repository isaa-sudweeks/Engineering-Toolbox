"use strict";var HF=Object.create;var Oa=Object.defineProperty;var $F=Object.getOwnPropertyDescriptor;var WF=Object.getOwnPropertyNames;var GF=Object.getPrototypeOf,KF=Object.prototype.hasOwnProperty;var Dr=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Sp=(r,e)=>{for(var t in e)Oa(r,t,{get:e[t],enumerable:!0})},Ap=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of WF(e))!KF.call(r,i)&&i!==t&&Oa(r,i,{get:()=>e[i],enumerable:!(n=$F(e,i))||n.enumerable});return r};var fi=(r,e,t)=>(t=r!=null?HF(GF(r)):{},Ap(e||!r||!r.__esModule?Oa(t,"default",{value:r,enumerable:!0}):t,r)),YF=r=>Ap(Oa({},"__esModule",{value:!0}),r);var Za=Dr((qu,Uu)=>{(function(r,e){typeof qu=="object"&&typeof Uu<"u"?Uu.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis<"u"?globalThis:r||self,r["'typed'"]=e())})(qu,function(){"use strict";function r(){return!0}function e(){return!1}function t(){}let n="Argument is not a typed-function.";function i(){function a(H){return typeof H=="object"&&H!==null&&H.constructor===Object}let s=[{name:"number",test:function(H){return typeof H=="number"}},{name:"string",test:function(H){return typeof H=="string"}},{name:"boolean",test:function(H){return typeof H=="boolean"}},{name:"Function",test:function(H){return typeof H=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(H){return H instanceof Date}},{name:"RegExp",test:function(H){return H instanceof RegExp}},{name:"Object",test:a},{name:"null",test:function(H){return H===null}},{name:"undefined",test:function(H){return H===void 0}}],l={name:"any",test:r,isAny:!0},u,c,f=0,m={createCount:0};function p(H){let Q=u.get(H);if(Q)return Q;let oe='Unknown type "'+H+'"',ce=H.toLowerCase(),pe;for(pe of c)if(pe.toLowerCase()===ce){oe+='. Did you mean "'+pe+'" ?';break}throw new TypeError(oe)}function h(H){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",oe=Q?p(Q).index:c.length,ce=[];for(let me=0;me<H.length;++me){if(!H[me]||typeof H[me].name!="string"||typeof H[me].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");let ge=H[me].name;if(u.has(ge))throw new TypeError('Duplicate type name "'+ge+'"');ce.push(ge),u.set(ge,{name:ge,test:H[me].test,isAny:H[me].isAny,index:oe+me,conversionsTo:[]})}let pe=c.slice(oe);c=c.slice(0,oe).concat(ce).concat(pe);for(let me=oe+ce.length;me<c.length;++me)u.get(c[me]).index=me}function d(){u=new Map,c=[],f=0,h([l],!1)}d(),h(s);function v(){let H;for(H of c)u.get(H).conversionsTo=[];f=0}function x(H){let Q=c.filter(oe=>{let ce=u.get(oe);return!ce.isAny&&ce.test(H)});return Q.length?Q:["any"]}function D(H){return H&&typeof H=="function"&&"_typedFunctionData"in H}function g(H,Q,oe){if(!D(H))throw new TypeError(n);let ce=oe&&oe.exact,pe=Array.isArray(Q)?Q.join(","):Q,me=E(pe),ge=y(me);if(!ce||ge in H.signatures){let re=H._typedFunctionData.signatureMap.get(ge);if(re)return re}let ve=me.length,T;if(ce){T=[];let re;for(re in H.signatures)T.push(H._typedFunctionData.signatureMap.get(re))}else T=H._typedFunctionData.signatures;for(let re=0;re<ve;++re){let ue=me[re],Oe=[],Ie;for(Ie of T){let gt=I(Ie.params,re);if(!(!gt||ue.restParam&&!gt.restParam)){if(!gt.hasAny){let wr=A(gt);if(ue.types.some(Yr=>!wr.has(Yr.name)))continue}Oe.push(Ie)}}if(T=Oe,T.length===0)break}let L;for(L of T)if(L.params.length<=ve)return L;throw new TypeError("Signature not found (signature: "+(H.name||"unnamed")+"("+y(me,", ")+"))")}function w(H,Q,oe){return g(H,Q,oe).implementation}function b(H,Q){let oe=p(Q);if(oe.test(H))return H;let ce=oe.conversionsTo;if(ce.length===0)throw new Error("There are no conversions to "+Q+" defined.");for(let pe=0;pe<ce.length;pe++)if(p(ce[pe].from).test(H))return ce[pe].convert(H);throw new Error("Cannot convert "+H+" to "+Q)}function y(H){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return H.map(oe=>oe.name).join(Q)}function S(H){let Q=H.indexOf("...")===0,ce=(Q?H.length>3?H.slice(3):"any":H).split("|").map(ve=>p(ve.trim())),pe=!1,me=Q?"...":"";return{types:ce.map(function(ve){return pe=ve.isAny||pe,me+=ve.name+"|",{name:ve.name,typeIndex:ve.index,test:ve.test,isAny:ve.isAny,conversion:null,conversionIndex:-1}}),name:me.slice(0,-1),hasAny:pe,hasConversion:!1,restParam:Q}}function C(H){let Q=H.types.map(ge=>ge.name),oe=R(Q),ce=H.hasAny,pe=H.name,me=oe.map(function(ge){let ve=p(ge.from);return ce=ve.isAny||ce,pe+="|"+ge.from,{name:ge.from,typeIndex:ve.index,test:ve.test,isAny:ve.isAny,conversion:ge,conversionIndex:ge.index}});return{types:H.types.concat(me),name:pe,hasAny:ce,hasConversion:me.length>0,restParam:H.restParam}}function A(H){return H.typeSet||(H.typeSet=new Set,H.types.forEach(Q=>H.typeSet.add(Q.name))),H.typeSet}function E(H){let Q=[];if(typeof H!="string")throw new TypeError("Signatures must be strings");let oe=H.trim();if(oe==="")return Q;let ce=oe.split(",");for(let pe=0;pe<ce.length;++pe){let me=S(ce[pe].trim());if(me.restParam&&pe!==ce.length-1)throw new SyntaxError('Unexpected rest parameter "'+ce[pe]+'": only allowed for the last parameter');if(me.types.length===0)return null;Q.push(me)}return Q}function M(H){let Q=z(H);return Q?Q.restParam:!1}function F(H){if(!H||H.types.length===0)return r;if(H.types.length===1)return p(H.types[0].name).test;if(H.types.length===2){let Q=p(H.types[0].name).test,oe=p(H.types[1].name).test;return function(pe){return Q(pe)||oe(pe)}}else{let Q=H.types.map(function(oe){return p(oe.name).test});return function(ce){for(let pe=0;pe<Q.length;pe++)if(Q[pe](ce))return!0;return!1}}}function k(H){let Q,oe,ce;if(M(H)){Q=de(H).map(F);let pe=Q.length,me=F(z(H)),ge=function(ve){for(let T=pe;T<ve.length;T++)if(!me(ve[T]))return!1;return!0};return function(T){for(let L=0;L<Q.length;L++)if(!Q[L](T[L]))return!1;return ge(T)&&T.length>=pe+1}}else return H.length===0?function(me){return me.length===0}:H.length===1?(oe=F(H[0]),function(me){return oe(me[0])&&me.length===1}):H.length===2?(oe=F(H[0]),ce=F(H[1]),function(me){return oe(me[0])&&ce(me[1])&&me.length===2}):(Q=H.map(F),function(me){for(let ge=0;ge<Q.length;ge++)if(!Q[ge](me[ge]))return!1;return me.length===Q.length})}function I(H,Q){return Q<H.length?H[Q]:M(H)?z(H):null}function P(H,Q){let oe=I(H,Q);return oe?A(oe):new Set}function B(H){return H.conversion===null||H.conversion===void 0}function O(H,Q){let oe=new Set;return H.forEach(ce=>{let pe=P(ce.params,Q),me;for(me of pe)oe.add(me)}),oe.has("any")?["any"]:Array.from(oe)}function q(H,Q,oe){let ce,pe,me=H||"unnamed",ge=oe,ve;for(ve=0;ve<Q.length;ve++){let ue=[];if(ge.forEach(Oe=>{let Ie=I(Oe.params,ve),gt=F(Ie);(ve<Oe.params.length||M(Oe.params))&&gt(Q[ve])&&ue.push(Oe)}),ue.length===0){if(pe=O(ge,ve),pe.length>0){let Oe=x(Q[ve]);return ce=new TypeError("Unexpected type of argument in function "+me+" (expected: "+pe.join(" or ")+", actual: "+Oe.join(" | ")+", index: "+ve+")"),ce.data={category:"wrongType",fn:me,index:ve,actual:Oe,expected:pe},ce}}else ge=ue}let T=ge.map(function(ue){return M(ue.params)?1/0:ue.params.length});if(Q.length<Math.min.apply(null,T))return pe=O(ge,ve),ce=new TypeError("Too few arguments in function "+me+" (expected: "+pe.join(" or ")+", index: "+Q.length+")"),ce.data={category:"tooFewArgs",fn:me,index:Q.length,expected:pe},ce;let L=Math.max.apply(null,T);if(Q.length>L)return ce=new TypeError("Too many arguments in function "+me+" (expected: "+L+", actual: "+Q.length+")"),ce.data={category:"tooManyArgs",fn:me,index:Q.length,expectedLength:L},ce;let re=[];for(let ue=0;ue<Q.length;++ue)re.push(x(Q[ue]).join("|"));return ce=new TypeError('Arguments of type "'+re.join(", ")+'" do not match any of the defined signatures of function '+me+"."),ce.data={category:"mismatch",actual:re},ce}function _(H){let Q=c.length+1;for(let oe=0;oe<H.types.length;oe++)B(H.types[oe])&&(Q=Math.min(Q,H.types[oe].typeIndex));return Q}function K(H){let Q=f+1;for(let oe=0;oe<H.types.length;oe++)B(H.types[oe])||(Q=Math.min(Q,H.types[oe].conversionIndex));return Q}function Z(H,Q){if(H.hasAny){if(!Q.hasAny)return 1}else if(Q.hasAny)return-1;if(H.restParam){if(!Q.restParam)return 1}else if(Q.restParam)return-1;if(H.hasConversion){if(!Q.hasConversion)return 1}else if(Q.hasConversion)return-1;let oe=_(H)-_(Q);if(oe<0)return-1;if(oe>0)return 1;let ce=K(H)-K(Q);return ce<0?-1:ce>0?1:0}function W(H,Q){let oe=H.params,ce=Q.params,pe=z(oe),me=z(ce),ge=M(oe),ve=M(ce);if(ge&&pe.hasAny){if(!ve||!me.hasAny)return 1}else if(ve&&me.hasAny)return-1;let T=0,L=0,re;for(re of oe)re.hasAny&&++T,re.hasConversion&&++L;let ue=0,Oe=0;for(re of ce)re.hasAny&&++ue,re.hasConversion&&++Oe;if(T!==ue)return T-ue;if(ge&&pe.hasConversion){if(!ve||!me.hasConversion)return 1}else if(ve&&me.hasConversion)return-1;if(L!==Oe)return L-Oe;if(ge){if(!ve)return 1}else if(ve)return-1;let Ie=(oe.length-ce.length)*(ge?-1:1);if(Ie!==0)return Ie;let gt=[],wr=0;for(let Li=0;Li<oe.length;++Li){let Ta=Z(oe[Li],ce[Li]);gt.push(Ta),wr+=Ta}if(wr!==0)return wr;let Yr;for(Yr of gt)if(Yr!==0)return Yr;return 0}function R(H){if(H.length===0)return[];let Q=H.map(p);H.length>1&&Q.sort((pe,me)=>pe.index-me.index);let oe=Q[0].conversionsTo;if(H.length===1)return oe;oe=oe.concat([]);let ce=new Set(H);for(let pe=1;pe<Q.length;++pe){let me;for(me of Q[pe].conversionsTo)ce.has(me.from)||(oe.push(me),ce.add(me.from))}return oe}function X(H,Q){let oe=Q;if(H.some(pe=>pe.hasConversion)){let pe=M(H),me=H.map(ae);oe=function(){let ve=[],T=pe?arguments.length-1:arguments.length;for(let L=0;L<T;L++)ve[L]=me[L](arguments[L]);return pe&&(ve[T]=arguments[T].map(me[T])),Q.apply(this,ve)}}let ce=oe;if(M(H)){let pe=H.length-1;ce=function(){return oe.apply(this,V(arguments,0,pe).concat([V(arguments,pe)]))}}return ce}function ae(H){let Q,oe,ce,pe,me=[],ge=[];switch(H.types.forEach(function(ve){ve.conversion&&(me.push(p(ve.conversion.from).test),ge.push(ve.conversion.convert))}),ge.length){case 0:return function(T){return T};case 1:return Q=me[0],ce=ge[0],function(T){return Q(T)?ce(T):T};case 2:return Q=me[0],oe=me[1],ce=ge[0],pe=ge[1],function(T){return Q(T)?ce(T):oe(T)?pe(T):T};default:return function(T){for(let L=0;L<ge.length;L++)if(me[L](T))return ge[L](T);return T}}}function j(H){function Q(oe,ce,pe){if(ce<oe.length){let me=oe[ce],ge=[];if(me.restParam){let ve=me.types.filter(B);ve.length<me.types.length&&ge.push({types:ve,name:"..."+ve.map(T=>T.name).join("|"),hasAny:ve.some(T=>T.isAny),hasConversion:!1,restParam:!0}),ge.push(me)}else ge=me.types.map(function(ve){return{types:[ve],name:ve.name,hasAny:ve.isAny,hasConversion:ve.conversion,restParam:!1}});return ne(ge,function(ve){return Q(oe,ce+1,pe.concat([ve]))})}else return[pe]}return Q(H,0,[])}function U(H,Q){let oe=Math.max(H.length,Q.length);for(let ve=0;ve<oe;ve++){let T=P(H,ve),L=P(Q,ve),re=!1,ue;for(ue of L)if(T.has(ue)){re=!0;break}if(!re)return!1}let ce=H.length,pe=Q.length,me=M(H),ge=M(Q);return me?ge?ce===pe:pe>=ce:ge?ce>=pe:ce===pe}function $(H){return H.map(Q=>Ue(Q)?ye(Q.referToSelf.callback):Se(Q)?fe(Q.referTo.references,Q.referTo.callback):Q)}function G(H,Q,oe){let ce=[],pe;for(pe of H){let me=oe[pe];if(typeof me!="number")throw new TypeError('No definition for referenced signature "'+pe+'"');if(me=Q[me],typeof me!="function")return!1;ce.push(me)}return ce}function Y(H,Q,oe){let ce=$(H),pe=new Array(ce.length).fill(!1),me=!0;for(;me;){me=!1;let ge=!0;for(let ve=0;ve<ce.length;++ve){if(pe[ve])continue;let T=ce[ve];if(Ue(T))ce[ve]=T.referToSelf.callback(oe),ce[ve].referToSelf=T.referToSelf,pe[ve]=!0,ge=!1;else if(Se(T)){let L=G(T.referTo.references,ce,Q);L?(ce[ve]=T.referTo.callback.apply(this,L),ce[ve].referTo=T.referTo,pe[ve]=!0,ge=!1):me=!0}}if(ge&&me)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return ce}function J(H){let Q=/\bthis(\(|\.signatures\b)/;Object.keys(H).forEach(oe=>{let ce=H[oe];if(Q.test(ce.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function te(H,Q){if(m.createCount++,Object.keys(Q).length===0)throw new SyntaxError("No signatures provided");m.warnAgainstDeprecatedThis&&J(Q);let oe=[],ce=[],pe={},me=[],ge;for(ge in Q){if(!Object.prototype.hasOwnProperty.call(Q,ge))continue;let mt=E(ge);if(!mt)continue;oe.forEach(function(Oo){if(U(Oo,mt))throw new TypeError('Conflicting signatures "'+y(Oo)+'" and "'+y(mt)+'".')}),oe.push(mt);let pr=ce.length;ce.push(Q[ge]);let UF=mt.map(C),Fa;for(Fa of j(UF)){let Oo=y(Fa);me.push({params:Fa,name:Oo,fn:pr}),Fa.every(VF=>!VF.hasConversion)&&(pe[Oo]=pr)}}me.sort(W);let ve=Y(ce,pe,Fo),T;for(T in pe)Object.prototype.hasOwnProperty.call(pe,T)&&(pe[T]=ve[pe[T]]);let L=[],re=new Map;for(T of me)re.has(T.name)||(T.fn=ve[T.fn],L.push(T),re.set(T.name,T));let ue=L[0]&&L[0].params.length<=2&&!M(L[0].params),Oe=L[1]&&L[1].params.length<=2&&!M(L[1].params),Ie=L[2]&&L[2].params.length<=2&&!M(L[2].params),gt=L[3]&&L[3].params.length<=2&&!M(L[3].params),wr=L[4]&&L[4].params.length<=2&&!M(L[4].params),Yr=L[5]&&L[5].params.length<=2&&!M(L[5].params),Li=ue&&Oe&&Ie&&gt&&wr&&Yr;for(let mt=0;mt<L.length;++mt)L[mt].test=k(L[mt].params);let Ta=ue?F(L[0].params[0]):e,pF=Oe?F(L[1].params[0]):e,hF=Ie?F(L[2].params[0]):e,dF=gt?F(L[3].params[0]):e,gF=wr?F(L[4].params[0]):e,vF=Yr?F(L[5].params[0]):e,yF=ue?F(L[0].params[1]):e,xF=Oe?F(L[1].params[1]):e,bF=Ie?F(L[2].params[1]):e,wF=gt?F(L[3].params[1]):e,DF=wr?F(L[4].params[1]):e,SF=Yr?F(L[5].params[1]):e;for(let mt=0;mt<L.length;++mt)L[mt].implementation=X(L[mt].params,L[mt].fn);let AF=ue?L[0].implementation:t,NF=Oe?L[1].implementation:t,CF=Ie?L[2].implementation:t,EF=gt?L[3].implementation:t,MF=wr?L[4].implementation:t,TF=Yr?L[5].implementation:t,FF=ue?L[0].params.length:-1,OF=Oe?L[1].params.length:-1,BF=Ie?L[2].params.length:-1,_F=gt?L[3].params.length:-1,kF=wr?L[4].params.length:-1,PF=Yr?L[5].params.length:-1,IF=Li?6:0,RF=L.length,LF=L.map(mt=>mt.test),zF=L.map(mt=>mt.implementation),qF=function(){for(let pr=IF;pr<RF;pr++)if(LF[pr](arguments))return zF[pr].apply(this,arguments);return m.onMismatch(H,arguments,L)};function Fo(mt,pr){return arguments.length===FF&&Ta(mt)&&yF(pr)?AF.apply(this,arguments):arguments.length===OF&&pF(mt)&&xF(pr)?NF.apply(this,arguments):arguments.length===BF&&hF(mt)&&bF(pr)?CF.apply(this,arguments):arguments.length===_F&&dF(mt)&&wF(pr)?EF.apply(this,arguments):arguments.length===kF&&gF(mt)&&DF(pr)?MF.apply(this,arguments):arguments.length===PF&&vF(mt)&&SF(pr)?TF.apply(this,arguments):qF.apply(this,arguments)}try{Object.defineProperty(Fo,"name",{value:H})}catch{}return Fo.signatures=pe,Fo._typedFunctionData={signatures:L,signatureMap:re},Fo}function ie(H,Q,oe){throw q(H,Q,oe)}function de(H){return V(H,0,H.length-1)}function z(H){return H[H.length-1]}function V(H,Q,oe){return Array.prototype.slice.call(H,Q,oe)}function ee(H,Q){for(let oe=0;oe<H.length;oe++)if(Q(H[oe]))return H[oe]}function ne(H,Q){return Array.prototype.concat.apply([],H.map(Q))}function le(){let H=de(arguments).map(oe=>y(E(oe))),Q=z(arguments);if(typeof Q!="function")throw new TypeError("Callback function expected as last argument");return fe(H,Q)}function fe(H,Q){return{referTo:{references:H,callback:Q}}}function ye(H){if(typeof H!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:H}}}function Se(H){return H&&typeof H.referTo=="object"&&Array.isArray(H.referTo.references)&&typeof H.referTo.callback=="function"}function Ue(H){return H&&typeof H.referToSelf=="object"&&typeof H.referToSelf.callback=="function"}function Pe(H,Q){if(!H)return Q;if(Q&&Q!==H){let oe=new Error("Function names do not match (expected: "+H+", actual: "+Q+")");throw oe.data={actual:Q,expected:H},oe}return H}function ut(H){let Q;for(let oe in H)Object.prototype.hasOwnProperty.call(H,oe)&&(D(H[oe])||typeof H[oe].signature=="string")&&(Q=Pe(Q,H[oe].name));return Q}function Xe(H,Q){let oe;for(oe in Q)if(Object.prototype.hasOwnProperty.call(Q,oe)){if(oe in H&&Q[oe]!==H[oe]){let ce=new Error('Signature "'+oe+'" is defined twice');throw ce.data={signature:oe,sourceFunction:Q[oe],destFunction:H[oe]},ce}H[oe]=Q[oe]}}let Ot=m;m=function(H){let Q=typeof H=="string",oe=Q?1:0,ce=Q?H:"",pe={};for(let me=oe;me<arguments.length;++me){let ge=arguments[me],ve={},T;if(typeof ge=="function"?(T=ge.name,typeof ge.signature=="string"?ve[ge.signature]=ge:D(ge)&&(ve=ge.signatures)):a(ge)&&(ve=ge,Q||(T=ut(ge))),Object.keys(ve).length===0){let L=new TypeError("Argument to 'typed' at index "+me+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw L.data={index:me,argument:ge},L}Q||(ce=Pe(ce,T)),Xe(pe,ve)}return te(ce||"",pe)},m.create=i,m.createCount=Ot.createCount,m.onMismatch=ie,m.throwMismatchError=ie,m.createError=q,m.clear=d,m.clearConversions=v,m.addTypes=h,m._findType=p,m.referTo=le,m.referToSelf=ye,m.convert=b,m.findSignature=g,m.find=w,m.isTypedFunction=D,m.warnAgainstDeprecatedThis=!0,m.addType=function(H,Q){let oe="any";Q!==!1&&u.has("Object")&&(oe="Object"),m.addTypes([H],oe)};function It(H){if(!H||typeof H.from!="string"||typeof H.to!="string"||typeof H.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(H.to===H.from)throw new SyntaxError('Illegal to define conversion from "'+H.from+'" to itself.')}return m.addConversion=function(H){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};It(H);let oe=p(H.to),ce=oe.conversionsTo.find(pe=>pe.from===H.from);if(ce)if(Q&&Q.override)m.removeConversion({from:ce.from,to:H.to,convert:ce.convert});else throw new Error('There is already a conversion from "'+H.from+'" to "'+oe.name+'"');oe.conversionsTo.push({from:H.from,convert:H.convert,index:f++})},m.addConversions=function(H,Q){H.forEach(oe=>m.addConversion(oe,Q))},m.removeConversion=function(H){It(H);let Q=p(H.to),oe=ee(Q.conversionsTo,pe=>pe.from===H.from);if(!oe)throw new Error("Attempt to remove nonexistent conversion from "+H.from+" to "+H.to);if(oe.convert!==H.convert)throw new Error("Conversion to remove does not match existing conversion");let ce=Q.conversionsTo.indexOf(oe);Q.conversionsTo.splice(ce,1)},m.resolve=function(H,Q){if(!D(H))throw new TypeError(n);let oe=H._typedFunctionData.signatures;for(let ce=0;ce<oe.length;++ce)if(oe[ce].test(Q))return oe[ce];return null},m}var o=i();return o})});var V0=Dr((GZ,U0)=>{U0.exports=function r(e,t){"use strict";var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,a=/^0x[0-9a-f]+$/i,s=/^0/,l=function(g){return r.insensitive&&(""+g).toLowerCase()||""+g},u=l(e).replace(i,"")||"",c=l(t).replace(i,"")||"",f=u.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=parseInt(u.match(a),16)||f.length!==1&&u.match(o)&&Date.parse(u),h=parseInt(c.match(a),16)||p&&c.match(o)&&Date.parse(c)||null,d,v;if(h){if(p<h)return-1;if(p>h)return 1}for(var x=0,D=Math.max(f.length,m.length);x<D;x++){if(d=!(f[x]||"").match(s)&&parseFloat(f[x])||f[x]||0,v=!(m[x]||"").match(s)&&parseFloat(m[x])||m[x]||0,isNaN(d)!==isNaN(v))return isNaN(d)?1:-1;if(typeof d!=typeof v&&(d+="",v+=""),d<v)return-1;if(d>v)return 1}return 0}});var o1=Dr((hte,i1)=>{"use strict";var ff=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Y8={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},Z8={"\u2013":"\\--","\u2014":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},X8=function(e,t){return ff({},e,t)};i1.exports=function(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.preserveFormatting,n=t===void 0?!1:t,i=e.escapeMapFn,o=i===void 0?X8:i,a=String(r),s="",l=o(ff({},Y8),n?ff({},Z8):{}),u=Object.keys(l),c=function(){var m=!1;u.forEach(function(p,h){m||a.length>=p.length&&a.slice(0,p.length)===p&&(s+=l[u[h]],a=a.slice(p.length,a.length),m=!0)}),m||(s+=a.slice(0,1),a=a.slice(1,a.length))};a;)c();return s}});var TN=Dr((MN,xf)=>{(function(r,e,t){function n(s){var l=this,u=a();l.next=function(){var c=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=c-(l.c=c|0)},l.c=1,l.s0=u(" "),l.s1=u(" "),l.s2=u(" "),l.s0-=u(s),l.s0<0&&(l.s0+=1),l.s1-=u(s),l.s1<0&&(l.s1+=1),l.s2-=u(s),l.s2<0&&(l.s2+=1),u=null}function i(s,l){return l.c=s.c,l.s0=s.s0,l.s1=s.s1,l.s2=s.s2,l}function o(s,l){var u=new n(s),c=l&&l.state,f=u.next;return f.int32=function(){return u.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}function a(){var s=4022871197,l=function(u){u=String(u);for(var c=0;c<u.length;c++){s+=u.charCodeAt(c);var f=.02519603282416938*s;s=f>>>0,f-=s,f*=s,s=f>>>0,f-=s,s+=f*4294967296}return(s>>>0)*23283064365386963e-26};return l}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.alea=o})(MN,typeof xf=="object"&&xf,typeof define=="function"&&define)});var ON=Dr((FN,bf)=>{(function(r,e,t){function n(a){var s=this,l="";s.x=0,s.y=0,s.z=0,s.w=0,s.next=function(){var c=s.x^s.x<<11;return s.x=s.y,s.y=s.z,s.z=s.w,s.w^=s.w>>>19^c^c>>>8},a===(a|0)?s.x=a:l+=a;for(var u=0;u<l.length+64;u++)s.x^=l.charCodeAt(u)|0,s.next()}function i(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s}function o(a,s){var l=new n(a),u=s&&s.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=l.next()>>>11,m=(l.next()>>>0)/4294967296,p=(f+m)/(1<<21);while(p===0);return p},c.int32=l.next,c.quick=c,u&&(typeof u=="object"&&i(u,l),c.state=function(){return i(l,{})}),c}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor128=o})(FN,typeof bf=="object"&&bf,typeof define=="function"&&define)});var _N=Dr((BN,wf)=>{(function(r,e,t){function n(a){var s=this,l="";s.next=function(){var c=s.x^s.x>>>2;return s.x=s.y,s.y=s.z,s.z=s.w,s.w=s.v,(s.d=s.d+362437|0)+(s.v=s.v^s.v<<4^(c^c<<1))|0},s.x=0,s.y=0,s.z=0,s.w=0,s.v=0,a===(a|0)?s.x=a:l+=a;for(var u=0;u<l.length+64;u++)s.x^=l.charCodeAt(u)|0,u==l.length&&(s.d=s.x<<10^s.x>>>4),s.next()}function i(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s.v=a.v,s.d=a.d,s}function o(a,s){var l=new n(a),u=s&&s.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=l.next()>>>11,m=(l.next()>>>0)/4294967296,p=(f+m)/(1<<21);while(p===0);return p},c.int32=l.next,c.quick=c,u&&(typeof u=="object"&&i(u,l),c.state=function(){return i(l,{})}),c}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorwow=o})(BN,typeof wf=="object"&&wf,typeof define=="function"&&define)});var PN=Dr((kN,Df)=>{(function(r,e,t){function n(a){var s=this;s.next=function(){var u=s.x,c=s.i,f,m,p;return f=u[c],f^=f>>>7,m=f^f<<24,f=u[c+1&7],m^=f^f>>>10,f=u[c+3&7],m^=f^f>>>3,f=u[c+4&7],m^=f^f<<7,f=u[c+7&7],f=f^f<<13,m^=f^f<<9,u[c]=m,s.i=c+1&7,m};function l(u,c){var f,m,p=[];if(c===(c|0))m=p[0]=c;else for(c=""+c,f=0;f<c.length;++f)p[f&7]=p[f&7]<<15^c.charCodeAt(f)+p[f+1&7]<<13;for(;p.length<8;)p.push(0);for(f=0;f<8&&p[f]===0;++f);for(f==8?m=p[7]=-1:m=p[f],u.x=p,u.i=0,f=256;f>0;--f)u.next()}l(s,a)}function i(a,s){return s.x=a.x.slice(),s.i=a.i,s}function o(a,s){a==null&&(a=+new Date);var l=new n(a),u=s&&s.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=l.next()>>>11,m=(l.next()>>>0)/4294967296,p=(f+m)/(1<<21);while(p===0);return p},c.int32=l.next,c.quick=c,u&&(u.x&&i(u,l),c.state=function(){return i(l,{})}),c}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorshift7=o})(kN,typeof Df=="object"&&Df,typeof define=="function"&&define)});var RN=Dr((IN,Sf)=>{(function(r,e,t){function n(a){var s=this;s.next=function(){var u=s.w,c=s.X,f=s.i,m,p;return s.w=u=u+1640531527|0,p=c[f+34&127],m=c[f=f+1&127],p^=p<<13,m^=m<<17,p^=p>>>15,m^=m>>>12,p=c[f]=p^m,s.i=f,p+(u^u>>>16)|0};function l(u,c){var f,m,p,h,d,v=[],x=128;for(c===(c|0)?(m=c,c=null):(c=c+"\0",m=0,x=Math.max(x,c.length)),p=0,h=-32;h<x;++h)c&&(m^=c.charCodeAt((h+32)%c.length)),h===0&&(d=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,h>=0&&(d=d+1640531527|0,f=v[h&127]^=m+d,p=f==0?p+1:0);for(p>=128&&(v[(c&&c.length||0)&127]=-1),p=127,h=4*128;h>0;--h)m=v[p+34&127],f=v[p=p+1&127],m^=m<<13,f^=f<<17,m^=m>>>15,f^=f>>>12,v[p]=m^f;u.w=d,u.X=v,u.i=p}l(s,a)}function i(a,s){return s.i=a.i,s.w=a.w,s.X=a.X.slice(),s}function o(a,s){a==null&&(a=+new Date);var l=new n(a),u=s&&s.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=l.next()>>>11,m=(l.next()>>>0)/4294967296,p=(f+m)/(1<<21);while(p===0);return p},c.int32=l.next,c.quick=c,u&&(u.X&&i(u,l),c.state=function(){return i(l,{})}),c}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor4096=o})(IN,typeof Sf=="object"&&Sf,typeof define=="function"&&define)});var zN=Dr((LN,Af)=>{(function(r,e,t){function n(a){var s=this,l="";s.next=function(){var c=s.b,f=s.c,m=s.d,p=s.a;return c=c<<25^c>>>7^f,f=f-m|0,m=m<<24^m>>>8^p,p=p-c|0,s.b=c=c<<20^c>>>12^f,s.c=f=f-m|0,s.d=m<<16^f>>>16^p,s.a=p-c|0},s.a=0,s.b=0,s.c=-1640531527,s.d=1367130551,a===Math.floor(a)?(s.a=a/4294967296|0,s.b=a|0):l+=a;for(var u=0;u<l.length+20;u++)s.b^=l.charCodeAt(u)|0,s.next()}function i(a,s){return s.a=a.a,s.b=a.b,s.c=a.c,s.d=a.d,s}function o(a,s){var l=new n(a),u=s&&s.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=l.next()>>>11,m=(l.next()>>>0)/4294967296,p=(f+m)/(1<<21);while(p===0);return p},c.int32=l.next,c.quick=c,u&&(typeof u=="object"&&i(u,l),c.state=function(){return i(l,{})}),c}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.tychei=o})(LN,typeof Af=="object"&&Af,typeof define=="function"&&define)});var qN=Dr(()=>{});var VN=Dr((UN,Tl)=>{(function(r,e,t){var n=256,i=6,o=52,a="random",s=t.pow(n,i),l=t.pow(2,o),u=l*2,c=n-1,f;function m(g,w,b){var y=[];w=w==!0?{entropy:!0}:w||{};var S=v(d(w.entropy?[g,D(e)]:g??x(),3),y),C=new p(y),A=function(){for(var E=C.g(i),M=s,F=0;E<l;)E=(E+F)*n,M*=n,F=C.g(1);for(;E>=u;)E/=2,M/=2,F>>>=1;return(E+F)/M};return A.int32=function(){return C.g(4)|0},A.quick=function(){return C.g(4)/4294967296},A.double=A,v(D(C.S),e),(w.pass||b||function(E,M,F,k){return k&&(k.S&&h(k,C),E.state=function(){return h(C,{})}),F?(t[a]=E,M):E})(A,S,"global"in w?w.global:this==t,w.state)}function p(g){var w,b=g.length,y=this,S=0,C=y.i=y.j=0,A=y.S=[];for(b||(g=[b++]);S<n;)A[S]=S++;for(S=0;S<n;S++)A[S]=A[C=c&C+g[S%b]+(w=A[S])],A[C]=w;(y.g=function(E){for(var M,F=0,k=y.i,I=y.j,P=y.S;E--;)M=P[k=c&k+1],F=F*n+P[c&(P[k]=P[I=c&I+M])+(P[I]=M)];return y.i=k,y.j=I,F})(n)}function h(g,w){return w.i=g.i,w.j=g.j,w.S=g.S.slice(),w}function d(g,w){var b=[],y=typeof g,S;if(w&&y=="object")for(S in g)try{b.push(d(g[S],w-1))}catch{}return b.length?b:y=="string"?g:g+"\0"}function v(g,w){for(var b=g+"",y,S=0;S<b.length;)w[c&S]=c&(y^=w[c&S]*19)+b.charCodeAt(S++);return D(w)}function x(){try{var g;return f&&(g=f.randomBytes)?g=g(n):(g=new Uint8Array(n),(r.crypto||r.msCrypto).getRandomValues(g)),D(g)}catch{var w=r.navigator,b=w&&w.plugins;return[+new Date,r,b,r.screen,D(e)]}}function D(g){return String.fromCharCode.apply(0,g)}if(v(t.random(),e),typeof Tl=="object"&&Tl.exports){Tl.exports=m;try{f=qN()}catch{}}else typeof define=="function"&&define.amd?define(function(){return m}):t["seed"+a]=m})(typeof self<"u"?self:UN,[],Math)});var $N=Dr((zde,HN)=>{var pI=TN(),hI=ON(),dI=_N(),gI=PN(),vI=RN(),yI=zN(),Si=VN();Si.alea=pI;Si.xor128=hI;Si.xorwow=dI;Si.xorshift7=gI;Si.xor4096=vI;Si.tychei=yI;HN.exports=Si});var bE=Dr((iSe,Of)=>{function Ff(){}Ff.prototype={on:function(r,e,t){var n=this.e||(this.e={});return(n[r]||(n[r]=[])).push({fn:e,ctx:t}),this},once:function(r,e,t){var n=this;function i(){n.off(r,i),e.apply(t,arguments)}return i._=e,this.on(r,i,t)},emit:function(r){var e=[].slice.call(arguments,1),t=((this.e||(this.e={}))[r]||[]).slice(),n=0,i=t.length;for(n;n<i;n++)t[n].fn.apply(t[n].ctx,e);return this},off:function(r,e){var t=this.e||(this.e={}),n=t[r],i=[];if(n&&e)for(var o=0,a=n.length;o<a;o++)n[o].fn!==e&&n[o].fn._!==e&&i.push(n[o]);return i.length?t[r]=i:delete t[r],this}};Of.exports=Ff;Of.exports.TinyEmitter=Ff});var E9={};Sp(E9,{default:()=>Ru});module.exports=YF(E9);var it=require("obsidian");var Qe=require("obsidian");var Bo=[{id:"detailed",name:"Detailed (default)",template:`---
experiment_id: {{experiment_id}}
date: {{date}}
tags: lab
---

# {{title}}

**Date:** {{date}}
**Researchers:**

## Objective
-

## Procedure
1.

## Data & Calculations
\`\`\`calc
# Define inputs
mass = 5 kg
accel = 9.81 m/s^2
force = mass * accel

# Convert example
force -> lbf
\`\`\`

## Results
-

## Conclusion
-
`},{id:"minimal",name:"Minimal",template:`---
date: {{date}}
tags: lab
---

# {{title}}

## Notes
-`}],Lu="detailed",zi="custom",_o=Bo.find(r=>r.id===Lu).template;var hr={autoRecalc:!0,defaultUnitSystem:"SI",sigFigs:4,labNotesFolder:"Lab Journal",labIndexPath:"Lab Journal/index.md",labNoteTemplate:_o,labNoteTemplatePresetId:Lu,globalVarsEnabled:!1,variablesPanelEnabled:!0,labJournalEnabled:!0,diagramHelpersEnabled:!0,modelEmbedsEnabled:!0,autocompleteEnabled:!0,evaluationThrottleMs:200,latexFormatting:!0,modelViewerDefaults:{altText:"3D model",cameraControls:!0,autoRotate:!1,backgroundColor:"#ffffff",environmentImage:"",exposure:"1"},exportFormat:"script",exportOutputFolder:"Exports",exportVariableStyle:"snake_case"},Ba=class extends Qe.PluginSettingTab{constructor(e,t){super(e,t),this.plugin=t}display(){let{containerEl:e}=this;e.empty(),this.plugin.refreshModelViewerAvailability(),e.createEl("h2",{text:"Engineering Toolkit Settings"}),new Qe.Setting(e).setName("Auto recalc").setDesc("Recalculate calc blocks on change/open").addToggle(s=>s.setValue(this.plugin.settings.autoRecalc).onChange(async l=>{this.plugin.settings.autoRecalc=l,await this.plugin.saveSettings()})),new Qe.Setting(e).setName("Default unit system").setDesc("Preferred display").addDropdown(s=>s.addOptions({SI:"SI",US:"US"}).setValue(this.plugin.settings.defaultUnitSystem).onChange(async l=>{this.plugin.settings.defaultUnitSystem=l,await this.plugin.saveSettings()})),new Qe.Setting(e).setName("Significant figures").setDesc("Displayed precision for results").addSlider(s=>s.setLimits(3,8,1).setDynamicTooltip().setValue(this.plugin.settings.sigFigs).onChange(async l=>{this.plugin.settings.sigFigs=l,await this.plugin.saveSettings()})),new Qe.Setting(e).setName("Lab notes folder").setDesc("Folder for new experiment notes").addText(s=>s.setPlaceholder("Lab Journal").setValue(this.plugin.settings.labNotesFolder).onChange(async l=>{this.plugin.settings.labNotesFolder=l||"Lab Journal",await this.plugin.saveSettings()})),new Qe.Setting(e).setName("Lab index").setDesc("Path to an index note or folder for experiment listings").addText(s=>s.setPlaceholder("Lab Journal/index.md").setValue(this.plugin.settings.labIndexPath).onChange(async l=>{this.plugin.settings.labIndexPath=l?.trim()||"",await this.plugin.saveSettings()})),e.createEl("h3",{text:"Lab journal templates"});let t,n,i=!1;new Qe.Setting(e).setName("Template preset").setDesc("Start from a pre-defined layout").addDropdown(s=>{t=s,Bo.forEach(f=>s.addOption(f.id,f.name)),s.addOption(zi,"Custom");let l=Bo.find(f=>f.id===this.plugin.settings.labNoteTemplatePresetId),c=l?.template===this.plugin.settings.labNoteTemplate&&l?l.id:zi;s.setValue(c).onChange(async f=>{if(f===zi){this.plugin.settings.labNoteTemplatePresetId=f,await this.plugin.saveSettings();return}let m=Bo.find(p=>p.id===f);if(m){i=!0;try{this.plugin.settings.labNoteTemplatePresetId=m.id,this.plugin.settings.labNoteTemplate=m.template,n?.setValue(m.template),await this.plugin.saveSettings()}finally{i=!1}}})}),new Qe.Setting(e).setName("Lab note template").setDesc("Supports variables like {{title}}, {{date}}, {{time}}, {{datetime}}, {{experiment_id}}, {{folder}}, and {{filename}}.").addTextArea(s=>{n=s,s.setValue(this.plugin.settings.labNoteTemplate||_o),s.inputEl.rows=14,s.onChange(async l=>{i||(this.plugin.settings.labNoteTemplate=l,this.plugin.settings.labNoteTemplatePresetId=zi,t?.setValue(zi),await this.plugin.saveSettings())})});let o=null,a=()=>{if(!o)return;o.empty(),o.createEl("h3",{text:"Global constants"}),o.createEl("p",{text:"Define constants that can be used in any calc block."});let s=this.plugin.getCalcEngine();if(!this.plugin.settings.globalVarsEnabled){o.createEl("p",{text:"Enable global variables to manage shared constants."});return}if(!s){o.createEl("p",{text:"Calculator engine not available."});return}let l=s.getGlobalVarsSnapshot();l.length||o.createEl("p",{text:"No global constants defined yet."});for(let[p,h]of l){let d=o.createEl("div",{cls:"global-var-row"});d.createEl("span",{cls:"global-var-name",text:p});let v=d.createEl("input",{type:"text",value:h.source,cls:"global-var-input"});d.createEl("span",{cls:"global-var-display",text:h.display});let x=d.createEl("button",{text:"Save",cls:"global-var-save"});x.onclick=async()=>{try{await s.upsertGlobalVar(p,v.value),new Qe.Notice(`Updated ${p}`),a()}catch(g){new Qe.Notice(g?.message??String(g))}};let D=d.createEl("button",{text:"Delete",cls:"global-var-delete"});D.onclick=async()=>{try{await s.deleteGlobalVar(p),new Qe.Notice(`Deleted ${p}`),a()}catch(g){new Qe.Notice(g?.message??String(g))}}}let u=o.createEl("div",{cls:"global-var-row add"}),c=u.createEl("input",{type:"text",placeholder:"Name",cls:"global-var-input"}),f=u.createEl("input",{type:"text",placeholder:"Expression",cls:"global-var-input"}),m=u.createEl("button",{text:"Add",cls:"global-var-add"});m.onclick=async()=>{try{let p=c.value.trim();await s.upsertGlobalVar(p,f.value),new Qe.Notice(`Added ${p}`),c.value="",f.value="",a()}catch(p){new Qe.Notice(p?.message??String(p))}}};new Qe.Setting(e).setName("Global variables").setDesc("Make variables available across notes (experimental)").addToggle(s=>s.setValue(this.plugin.settings.globalVarsEnabled).onChange(async l=>{this.plugin.settings.globalVarsEnabled=l,await this.plugin.saveSettings(),a()})),o=e.createEl("div",{cls:"global-vars-section"}),a(),new Qe.Setting(e).setName("Recalc debounce").setDesc("Delay (ms) before running calc blocks after edits").addSlider(s=>s.setLimits(50,1e3,10).setDynamicTooltip().setValue(this.plugin.settings.evaluationThrottleMs).onChange(async l=>{this.plugin.settings.evaluationThrottleMs=l,await this.plugin.saveSettings()})),e.createEl("h3",{text:"Optional modules"}),new Qe.Setting(e).setName("Variables panel").setDesc("Enable the right-side variables view and related refresh events").addToggle(s=>s.setValue(this.plugin.settings.variablesPanelEnabled).onChange(async l=>{this.plugin.settings.variablesPanelEnabled=l,await this.plugin.saveSettings(),await this.plugin.applyFeatureToggles()})),new Qe.Setting(e).setName("Lab journal helpers").setDesc("Offer commands that scaffold experiment notes").addToggle(s=>s.setValue(this.plugin.settings.labJournalEnabled).onChange(async l=>{this.plugin.settings.labJournalEnabled=l,await this.plugin.saveSettings(),await this.plugin.applyFeatureToggles()})),new Qe.Setting(e).setName("Diagram helpers").setDesc("Expose commands that prepare diagram placeholders").addToggle(s=>s.setValue(this.plugin.settings.diagramHelpersEnabled).onChange(async l=>{this.plugin.settings.diagramHelpersEnabled=l,await this.plugin.saveSettings(),await this.plugin.applyFeatureToggles()})),new Qe.Setting(e).setName("Model embeds").setDesc("Allow inserting <model-viewer> helpers and related defaults").addToggle(s=>s.setValue(this.plugin.settings.modelEmbedsEnabled).onChange(async l=>{this.plugin.settings.modelEmbedsEnabled=l,await this.plugin.saveSettings(),await this.plugin.applyFeatureToggles()})),new Qe.Setting(e).setName("Calc block autocomplete").setDesc("Suggest scope variables and units while editing calc blocks").addToggle(s=>s.setValue(this.plugin.settings.autocompleteEnabled).onChange(async l=>{this.plugin.settings.autocompleteEnabled=l,await this.plugin.saveSettings(),this.plugin.updateAutocompleteSetting()})),e.createEl("h3",{text:"Export"}),new Qe.Setting(e).setName("Export format").setDesc("Choose between Python script or Jupyter notebook output").addDropdown(s=>s.addOptions({script:"Python script",notebook:"Jupyter notebook"}).setValue(this.plugin.settings.exportFormat).onChange(async l=>{this.plugin.settings.exportFormat=l,await this.plugin.saveSettings()})),new Qe.Setting(e).setName("Export folder").setDesc("Vault folder where exports will be saved").addText(s=>s.setPlaceholder("Exports").setValue(this.plugin.settings.exportOutputFolder).onChange(async l=>{this.plugin.settings.exportOutputFolder=l||"",await this.plugin.saveSettings()})),new Qe.Setting(e).setName("Variable naming").setDesc("Adjust how variable names are converted to Python identifiers").addDropdown(s=>s.addOptions({preserve:"Preserve spacing",snake_case:"snake_case",camelCase:"camelCase"}).setValue(this.plugin.settings.exportVariableStyle).onChange(async l=>{this.plugin.settings.exportVariableStyle=l,await this.plugin.saveSettings()})),new Qe.Setting(e).setName("Model Viewer").setHeading(),new Qe.Setting(e).setName("Dependency status").setDesc(this.plugin.modelViewerAvailable?"Model Viewer plugin detected. Inserted embeds will render in preview.":"Model Viewer plugin not detected. Install and enable it to render embeds."),new Qe.Setting(e).setName("Default alt text").setDesc("Alt text applied to inserted <model-viewer> elements.").addText(s=>s.setPlaceholder("3D model").setValue(this.plugin.settings.modelViewerDefaults.altText).onChange(async l=>{this.plugin.settings.modelViewerDefaults.altText=l,await this.plugin.saveSettings()})),new Qe.Setting(e).setName("Camera controls").setDesc("Enable orbit controls by default.").addToggle(s=>s.setValue(this.plugin.settings.modelViewerDefaults.cameraControls).onChange(async l=>{this.plugin.settings.modelViewerDefaults.cameraControls=l,await this.plugin.saveSettings()})),new Qe.Setting(e).setName("Auto rotate").setDesc("Automatically rotate models when inserted embeds load.").addToggle(s=>s.setValue(this.plugin.settings.modelViewerDefaults.autoRotate).onChange(async l=>{this.plugin.settings.modelViewerDefaults.autoRotate=l,await this.plugin.saveSettings()})),new Qe.Setting(e).setName("Background color").setDesc("CSS color applied to the viewer background (leave blank for default).").addText(s=>s.setPlaceholder("#ffffff").setValue(this.plugin.settings.modelViewerDefaults.backgroundColor).onChange(async l=>{this.plugin.settings.modelViewerDefaults.backgroundColor=l,await this.plugin.saveSettings()})),new Qe.Setting(e).setName("Environment image").setDesc("Default environment-image attribute value (optional).").addText(s=>s.setPlaceholder("URL or vault path").setValue(this.plugin.settings.modelViewerDefaults.environmentImage).onChange(async l=>{this.plugin.settings.modelViewerDefaults.environmentImage=l,await this.plugin.saveSettings()})),new Qe.Setting(e).setName("Exposure").setDesc("Default exposure attribute (leave blank to omit).").addText(s=>s.setPlaceholder("1").setValue(this.plugin.settings.modelViewerDefaults.exposure).onChange(async l=>{this.plugin.settings.modelViewerDefaults.exposure=l,await this.plugin.saveSettings()})),new Qe.Setting(e).setName("LaTeX formatting").setDesc("Render calculator results with MathJax (disable for plain text)").addToggle(s=>s.setValue(this.plugin.settings.latexFormatting).onChange(async l=>{this.plugin.settings.latexFormatting=l,await this.plugin.saveSettings()}))}};function Mt(){return Mt=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Mt.apply(null,arguments)}var _a={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function vt(r,e){if(ko(r,e))return r[e];throw typeof r[e]=="function"&&ka(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function an(r,e,t){if(ko(r,e))return r[e]=t,t;throw new Error('No access to property "'+e+'"')}function ko(r,e){return!ZF(r)&&!Array.isArray(r)?!1:be(XF,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Np(r,e){if(!ka(r,e))throw new Error('No access to method "'+e+'"');return r[e]}function ka(r,e){return r==null||typeof r[e]!="function"||be(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:be(JF,e)?!0:!(e in Object.prototype||e in Function.prototype)}function ZF(r){return typeof r=="object"&&r&&r.constructor===Object}var XF={length:!0,name:!0},JF={toString:!0,valueOf:!0,toLocaleString:!0};var qn=class{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return vt(this.wrappedObject,e)}set(e,t){return an(this.wrappedObject,e,t),this}has(e){return ko(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return Cp(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){ko(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}},qi=class{constructor(e,t,n){this.a=e,this.b=t,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return Cp(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}};function Cp(r,e){return{next:()=>{var t=r.next();return t.done?t:{value:e(t.value),done:!1}}}}function Un(){return new Map}function Cn(r){if(!r)return Un();if(sn(r))return r;if(Zr(r))return new qn(r);throw new Error("createMap can create maps from objects or Maps")}function Ep(r){if(r instanceof qn)return r.wrappedObject;var e={};for(var t of r.keys()){var n=r.get(t);an(e,t,n)}return e}function Fe(r){return typeof r=="number"}function Ne(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function Pa(r){return typeof r=="bigint"}function qt(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function Sr(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function Bt(r){return r&&r.constructor.prototype.isUnit===!0||!1}function bt(r){return typeof r=="string"}var Ze=Array.isArray;function we(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function Dt(r){return Array.isArray(r)||we(r)}function En(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Ar(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Vn(r){return r&&r.constructor.prototype.isRange===!0||!1}function ln(r){return r&&r.constructor.prototype.isIndex===!0||!1}function Ia(r){return typeof r=="boolean"}function Ra(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function Ui(r){return r&&r.constructor.prototype.isHelp===!0||!1}function La(r){return typeof r=="function"}function za(r){return r instanceof Date}function qa(r){return r instanceof RegExp}function Zr(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!qt(r)&&!Sr(r))}function sn(r){return r?r instanceof Map||r instanceof qn||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}function Mp(r){return sn(r)&&sn(r.a)&&sn(r.b)}function Tp(r){return sn(r)&&Zr(r.wrappedObject)}function Ua(r){return r===null}function Va(r){return r===void 0}function sr(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ut(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ha(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function $a(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function Wa(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function ze(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function Po(r){return ze(r)||lt(r)&&r.args.length===1&&ze(r.args[0])&&"-+~".includes(r.op)}function kr(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function Xt(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function dr(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function $e(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function un(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function lt(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function Vt(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ga(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ka(r){return r&&r.isRelationalNode===!0&&r.constructor.prototype.isNode===!0||!1}function ot(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function Vi(r){return r&&r.constructor.prototype.isChain===!0||!1}function Ye(r){var e=typeof r;return e==="object"?r===null?"null":Ne(r)?"BigNumber":r.constructor&&r.constructor.name?r.constructor.name:"Object":e}function Ee(r){var e=typeof r;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(t){return Ee(t)});if(r instanceof Date)return new Date(r.valueOf());if(Ne(r))return r;if(Zr(r))return jF(r,Ee);if(e==="function")return r;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(r,")"))}function jF(r,e){var t={};for(var n in r)be(r,n)&&(t[n]=e(r[n]));return t}function Ya(r,e){for(var t in e)be(e,t)&&(r[t]=e[t]);return r}function zu(r,e){if(Array.isArray(e))throw new TypeError("Arrays are not supported by deepExtend");for(var t in e)if(be(e,t)&&!(t in Object.prototype)&&!(t in Function.prototype))if(e[t]&&e[t].constructor===Object)r[t]===void 0&&(r[t]={}),r[t]&&r[t].constructor===Object?zu(r[t],e[t]):r[t]=e[t];else{if(Array.isArray(e[t]))throw new TypeError("Arrays are not supported by deepExtend");r[t]=e[t]}return r}function gr(r,e){var t,n,i;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(n=0,i=r.length;n<i;n++)if(!gr(r[n],e[n]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in r)if(!(t in e)||!gr(r[t],e[t]))return!1;for(t in e)if(!(t in r))return!1;return!0}else return r===e}}function Fp(r){var e={};return Op(r,e),e}function Op(r,e){for(var t in r)if(be(r,t)){var n=r[t];typeof n=="object"&&n!==null?Op(n,e):e[t]=n}}function Hi(r,e,t){var n=!0,i;Object.defineProperty(r,e,{get:function(){return n&&(i=t(),n=!1),i},set:function(a){i=a,n=!1},configurable:!0,enumerable:!0})}function be(r,e){return r&&Object.hasOwnProperty.call(r,e)}function Bp(r){return r&&typeof r.factory=="function"}function _p(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],o=r[i];o!==void 0&&(t[i]=o)}return t}var kp=["Matrix","Array"],Pp=["number","BigNumber","Fraction"];function Rp(r,e){function t(n){if(n){if(n.epsilon!==void 0){console.warn('Warning: The configuration option "epsilon" is deprecated. Use "relTol" and "absTol" instead.');var i=Ee(n);return i.relTol=n.epsilon,i.absTol=n.epsilon*.001,delete i.epsilon,t(i)}var o=Ee(r);Ip(n,"matrix",kp),Ip(n,"number",Pp),zu(r,n);var a=Ee(r),s=Ee(n);return e("config",a,o,s),a}else return Ee(r)}return t.MATRIX_OPTIONS=kp,t.NUMBER_OPTIONS=Pp,Object.keys(_a).forEach(n=>{Object.defineProperty(t,n,{get:()=>r[n],enumerable:!0,configurable:!0})}),t}function Ip(r,e,t){r[e]!==void 0&&!t.includes(r[e])&&console.warn('Warning: Unknown value "'+r[e]+'" for configuration option "'+e+'". Available options: '+t.map(n=>JSON.stringify(n)).join(", ")+".")}var Mf={};Sp(Mf,{createAbs:()=>Bd,createAccessorNode:()=>Jx,createAcos:()=>Ey,createAcosh:()=>Ty,createAcot:()=>Oy,createAcoth:()=>_y,createAcsc:()=>Py,createAcsch:()=>Ry,createAdd:()=>qx,createAddScalar:()=>Pd,createAnd:()=>Hs,createAndTransform:()=>gE,createApply:()=>ro,createApplyTransform:()=>UC,createArg:()=>Pg,createArrayNode:()=>jx,createAsec:()=>zy,createAsech:()=>Uy,createAsin:()=>Hy,createAsinh:()=>$y,createAssignmentNode:()=>t1,createAtan:()=>Wy,createAtan2:()=>Ky,createAtanh:()=>Zy,createAtomicMass:()=>bC,createAvogadro:()=>wC,createBellNumbers:()=>e2,createBigNumberClass:()=>hh,createBigint:()=>ud,createBignumber:()=>hd,createBin:()=>Jv,createBitAnd:()=>Es,createBitAndTransform:()=>yE,createBitNot:()=>Fg,createBitOr:()=>Ms,createBitOrTransform:()=>xE,createBitXor:()=>_g,createBlockNode:()=>r1,createBohrMagneton:()=>eC,createBohrRadius:()=>aC,createBoltzmann:()=>DC,createBoolean:()=>pd,createCatalan:()=>r2,createCbrt:()=>zd,createCeil:()=>qd,createChain:()=>MA,createChainClass:()=>J1,createClassicalElectronRadius:()=>sC,createClone:()=>Ih,createColumn:()=>Os,createColumnTransform:()=>VC,createCombinations:()=>fN,createCombinationsWithRep:()=>hN,createCompare:()=>q0,createCompareNatural:()=>$0,createCompareText:()=>G0,createCompile:()=>D1,createComplex:()=>dd,createComplexClass:()=>dh,createComposition:()=>i2,createConcat:()=>Fs,createConcatTransform:()=>nE,createConditionalNode:()=>n1,createConductanceQuantum:()=>tC,createConj:()=>Rg,createConstantNode:()=>u1,createCorr:()=>lN,createCos:()=>Jy,createCosh:()=>Qy,createCot:()=>tx,createCoth:()=>nx,createCoulomb:()=>j2,createCount:()=>Xg,createCreateUnit:()=>Ny,createCross:()=>jg,createCsc:()=>ox,createCsch:()=>sx,createCtranspose:()=>Fv,createCube:()=>Vd,createCumSum:()=>Al,createCumSumTransform:()=>fE,createDeepEqual:()=>ty,createDenseMatrixClass:()=>kh,createDerivative:()=>g2,createDet:()=>FA,createDeuteronMass:()=>pC,createDiag:()=>ev,createDiff:()=>Ps,createDiffTransform:()=>oE,createDistance:()=>XA,createDivide:()=>YA,createDivideScalar:()=>c0,createDot:()=>Gx,createDotDivide:()=>A0,createDotMultiply:()=>Dg,createDotPow:()=>D0,createE:()=>_2,createEfimovFactor:()=>xC,createEigs:()=>RA,createElectricConstant:()=>X2,createElectronMass:()=>lC,createElementaryCharge:()=>Q2,createEqual:()=>K0,createEqualScalar:()=>ad,createEqualText:()=>Z0,createErf:()=>Uv,createEvaluate:()=>A1,createExp:()=>$d,createExpm:()=>zA,createExpm1:()=>Gd,createFactorial:()=>bN,createFalse:()=>E2,createFaraday:()=>SC,createFermiCoupling:()=>uC,createFft:()=>kv,createFibonacciHeapClass:()=>my,createFilter:()=>Bs,createFilterTransform:()=>WC,createFineStructure:()=>cC,createFirstRadiation:()=>AC,createFix:()=>Kd,createFlatten:()=>nv,createFloor:()=>Ss,createForEach:()=>_s,createForEachTransform:()=>GC,createFormat:()=>Zv,createFraction:()=>gd,createFractionClass:()=>vh,createFreqz:()=>D2,createFunctionAssignmentNode:()=>c1,createFunctionNode:()=>y1,createGamma:()=>gN,createGasConstant:()=>CC,createGcd:()=>jd,createGetMatrixDataType:()=>ov,createGravitationConstant:()=>G2,createGravity:()=>PC,createHartreeEnergy:()=>fC,createHasNumericValue:()=>Xh,createHelp:()=>CA,createHelpClass:()=>X1,createHex:()=>t0,createHypot:()=>Vx,createI:()=>U2,createIdentity:()=>sv,createIfft:()=>Iv,createIm:()=>zg,createImmutableDenseMatrixClass:()=>uy,createIndex:()=>Zx,createIndexClass:()=>fy,createIndexNode:()=>f1,createIndexTransform:()=>KC,createInfinity:()=>T2,createIntersect:()=>JA,createInv:()=>BA,createInverseConductanceQuantum:()=>rC,createInvmod:()=>bg,createIsInteger:()=>Lh,createIsNaN:()=>rd,createIsNegative:()=>Gh,createIsNumeric:()=>Yh,createIsPositive:()=>jh,createIsPrime:()=>s0,createIsZero:()=>ed,createKldivergence:()=>DN,createKlitzing:()=>oC,createKron:()=>uv,createLN10:()=>I2,createLN2:()=>P2,createLOG10E:()=>L2,createLOG2E:()=>R2,createLarger:()=>j0,createLargerEq:()=>Q0,createLcm:()=>eg,createLeafCount:()=>a2,createLeftShift:()=>k0,createLgamma:()=>yN,createLog:()=>g0,createLog10:()=>rg,createLog1p:()=>y0,createLog2:()=>ig,createLoschmidt:()=>NC,createLsolve:()=>C0,createLsolveAll:()=>F0,createLup:()=>T1,createLusolve:()=>K1,createLyap:()=>KA,createMad:()=>nN,createMagneticConstant:()=>Z2,createMagneticFluxQuantum:()=>nC,createMap:()=>ks,createMapTransform:()=>YC,createMatrix:()=>yd,createMatrixClass:()=>xh,createMatrixFromColumns:()=>Ad,createMatrixFromFunction:()=>bd,createMatrixFromRows:()=>Dd,createMax:()=>Js,createMaxTransform:()=>JC,createMean:()=>Nl,createMeanTransform:()=>jC,createMedian:()=>tN,createMin:()=>js,createMinTransform:()=>QC,createMod:()=>As,createMode:()=>Wv,createMolarMass:()=>_C,createMolarMassC12:()=>kC,createMolarPlanckConstant:()=>EC,createMolarVolume:()=>MC,createMultinomial:()=>AN,createMultiply:()=>sg,createMultiplyScalar:()=>og,createNaN:()=>F2,createNeutronMass:()=>hC,createNode:()=>Xx,createNorm:()=>$x,createNot:()=>Hg,createNthRoot:()=>ug,createNthRoots:()=>b0,createNuclearMagneton:()=>iC,createNull:()=>M2,createNumber:()=>ld,createNumeric:()=>l0,createObjectNode:()=>m1,createOct:()=>Qv,createOnes:()=>fv,createOperatorNode:()=>p1,createOr:()=>Ts,createOrTransform:()=>vE,createParenthesisNode:()=>h1,createParse:()=>b1,createParser:()=>E1,createParserClass:()=>N1,createPartitionSelect:()=>iy,createPermutations:()=>EN,createPhi:()=>k2,createPi:()=>O2,createPickRandom:()=>GN,createPinv:()=>kA,createPlanckCharge:()=>zC,createPlanckConstant:()=>K2,createPlanckLength:()=>IC,createPlanckMass:()=>RC,createPlanckTemperature:()=>qC,createPlanckTime:()=>LC,createPolynomialRoot:()=>Z1,createPow:()=>m0,createPrint:()=>Vs,createPrintTransform:()=>dE,createProd:()=>Kv,createProtonMass:()=>mC,createQr:()=>O1,createQuantileSeq:()=>El,createQuantileSeqTransform:()=>uE,createQuantumOfCirculation:()=>dC,createRandom:()=>YN,createRandomInt:()=>XN,createRange:()=>Ls,createRangeClass:()=>yh,createRangeNode:()=>d1,createRangeTransform:()=>eE,createRationalize:()=>y2,createRe:()=>Ug,createReducedPlanckConstant:()=>Y2,createRelationalNode:()=>g1,createReplacer:()=>A2,createReshape:()=>hv,createResize:()=>dv,createResolve:()=>m2,createResultSet:()=>Qp,createReviver:()=>S2,createRightArithShift:()=>I0,createRightLogShift:()=>L0,createRotate:()=>vv,createRotationMatrix:()=>xv,createRound:()=>h0,createRow:()=>zs,createRowTransform:()=>tE,createRydberg:()=>gC,createSQRT1_2:()=>z2,createSQRT2:()=>q2,createSackurTetrode:()=>TC,createSchur:()=>WA,createSec:()=>ux,createSech:()=>fx,createSecondRadiation:()=>FC,createSetCartesian:()=>bx,createSetDifference:()=>Dx,createSetDistinct:()=>Ax,createSetIntersect:()=>Cx,createSetIsSubset:()=>Mx,createSetMultiplicity:()=>Fx,createSetPowerset:()=>Bx,createSetSize:()=>kx,createSetSymDifference:()=>Ix,createSetUnion:()=>Lx,createSign:()=>fg,createSimplify:()=>l2,createSimplifyConstant:()=>u2,createSimplifyCore:()=>f2,createSin:()=>px,createSinh:()=>dx,createSize:()=>Dv,createSlu:()=>W1,createSmaller:()=>X0,createSmallerEq:()=>J0,createSolveODE:()=>qv,createSort:()=>ay,createSpaClass:()=>py,createSparse:()=>Sy,createSparseMatrixClass:()=>sd,createSpeedOfLight:()=>W2,createSplitUnit:()=>Cd,createSqrt:()=>mg,createSqrtm:()=>UA,createSquare:()=>hg,createSqueeze:()=>Av,createStd:()=>Ml,createStdTransform:()=>aE,createStefanBoltzmann:()=>OC,createStirlingS2:()=>jN,createString:()=>fd,createSubset:()=>qs,createSubsetTransform:()=>rE,createSubtract:()=>gg,createSubtractScalar:()=>Rd,createSum:()=>Dl,createSumTransform:()=>lE,createSylvester:()=>HA,createSymbolNode:()=>v1,createSymbolicEqual:()=>h2,createTan:()=>vx,createTanh:()=>yx,createTau:()=>B2,createThomsonCrossSection:()=>vC,createTo:()=>o0,createTrace:()=>Kx,createTranspose:()=>Mv,createTrue:()=>C2,createTypeOf:()=>id,createTyped:()=>jp,createUnaryMinus:()=>Md,createUnaryPlus:()=>Fd,createUnequal:()=>ry,createUnitClass:()=>xy,createUnitFunction:()=>wy,createUppercaseE:()=>H2,createUppercasePi:()=>V2,createUsolve:()=>M0,createUsolveAll:()=>B0,createVacuumImpedance:()=>J2,createVariance:()=>Cl,createVarianceTransform:()=>pE,createVersion:()=>$2,createWeakMixingAngle:()=>yC,createWienDisplacement:()=>BC,createXgcd:()=>yg,createXor:()=>Gg,createZeros:()=>Bv,createZeta:()=>Hv,createZpk2tf:()=>b2});var Gu=fi(Za(),1);function N(r,e,t,n){function i(o){var a=_p(o,e.map(Vu));return QF(r,e,o),t(a)}return i.isFactory=!0,i.fn=r,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function mi(r){return typeof r=="function"&&typeof r.fn=="string"&&Array.isArray(r.dependencies)}function QF(r,e,t){var n=e.filter(o=>!eO(o)).every(o=>t[o]!==void 0);if(!n){var i=e.filter(o=>t[o]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(i.map(o=>'"'.concat(o,'"')).join(", "),"."))}}function eO(r){return r&&r[0]==="?"}function Vu(r){return r&&r[0]==="?"?r.slice(1):r}function xe(r){return typeof r=="boolean"?!0:isFinite(r)?r===Math.round(r):!1}function tO(r){return/^-?\d+$/.test(r)}function Qt(r,e){return e.number==="bigint"&&!tO(r)?e.numberFallback:e.number}var Pr=Math.sign||function(r){return r>0?1:r<0?-1:0},qp=Math.log2||function(e){return Math.log(e)/Math.LN2},Up=Math.log10||function(e){return Math.log(e)/Math.LN10},Xa=Math.log1p||function(r){return Math.log(r+1)},Vp=Math.cbrt||function(e){if(e===0)return e;var t=e<0,n;return t&&(e=-e),isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,t?-n:n},Hp=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function Hu(r,e,t){var n={2:"0b",8:"0o",16:"0x"},i=n[e],o="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!xe(t))throw new Error("size must be an integer");if(r>2**(t-1)-1||r<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!xe(r))throw new Error("Value must be an integer");r<0&&(r=r+2**t),o="i".concat(t)}var a="";return r<0&&(r=-r,a="-"),"".concat(a).concat(i).concat(r.toString(e)).concat(o)}function Xr(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var{notation:t,precision:n,wordSize:i}=$u(e);switch(t){case"fixed":return Wu(r,n);case"exponential":return $p(r,n);case"engineering":return rO(r,n);case"bin":return Hu(r,2,i);case"oct":return Hu(r,8,i);case"hex":return Hu(r,16,i);case"auto":return nO(r,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],a=arguments[4];return o!=="."?o+a:a});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function $u(r){var e="auto",t,n;if(r!==void 0)if(Fe(r))t=r;else if(Ne(r))t=r.toNumber();else if(Zr(r))r.precision!==void 0&&(t=Lp(r.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),r.wordSize!==void 0&&(n=Lp(r.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),r.notation&&(e=r.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:t,wordSize:n}}function Wi(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var t=e[1],n=e[2],i=parseFloat(e[4]||"0"),o=n.indexOf(".");i+=o!==-1?o-1:n.length-1;var a=n.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return a.length===0&&(a.push(0),i++),{sign:t,coefficients:a,exponent:i}}function rO(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Wi(r),n=Ja(t,e),i=n.exponent,o=n.coefficients,a=i%3===0?i:i<0?i-3-i%3:i-i%3;if(Fe(e))for(;e>o.length||i-a+1>o.length;)o.push(0);else for(var s=Math.abs(i-a)-(o.length-1),l=0;l<s;l++)o.push(0);for(var u=Math.abs(i-a),c=1;u>0;)c++,u--;var f=o.slice(c).join(""),m=Fe(e)&&f.length||f.match(/[1-9]/)?"."+f:"",p=o.slice(0,c).join("")+m+"e"+(i>=0?"+":"")+a.toString();return n.sign+p}function Wu(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Wi(r),n=typeof e=="number"?Ja(t,t.exponent+1+e):t,i=n.coefficients,o=n.exponent+1,a=o+(e||0);return i.length<a&&(i=i.concat($i(a-i.length))),o<0&&(i=$i(-o+1).concat(i),o=1),o<i.length&&i.splice(o,0,o===0?"0.":"."),n.sign+i.join("")}function $p(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Wi(r),n=e?Ja(t,e):t,i=n.coefficients,o=n.exponent;i.length<e&&(i=i.concat($i(e-i.length)));var a=i.shift();return n.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(o>=0?"+":"")+o}function nO(r,e,t){if(isNaN(r)||!isFinite(r))return String(r);var n=zp(t?.lowerExp,-3),i=zp(t?.upperExp,5),o=Wi(r),a=e?Ja(o,e):o;if(a.exponent<n||a.exponent>=i)return $p(r,e);var s=a.coefficients,l=a.exponent;s.length<e&&(s=s.concat($i(e-s.length))),s=s.concat($i(l-s.length+1+(s.length<e?e-s.length:0))),s=$i(-l).concat(s);var u=l>0?l:0;return u<s.length-1&&s.splice(u+1,0,"."),a.sign+s.join("")}function Ja(r,e){for(var t={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},n=t.coefficients;e<=0;)n.unshift(0),t.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var o=e-1;for(n[o]++;n[o]===10;)n.pop(),o===0&&(n.unshift(0),t.exponent++,o++),o--,n[o]++}}return t}function $i(r){for(var e=[],t=0;t<r;t++)e.push(0);return e}function Wp(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var j9=Number.EPSILON||2220446049250313e-31;function pt(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(r)||isNaN(e)?!1:!isFinite(r)||!isFinite(e)?r===e:r===e?!0:Math.abs(r-e)<=Math.max(t*Math.max(Math.abs(r),Math.abs(e)),n)}var Gp=Math.acosh||function(r){return Math.log(Math.sqrt(r*r-1)+r)},Kp=Math.asinh||function(r){return Math.log(Math.sqrt(r*r+1)+r)},Yp=Math.atanh||function(r){return Math.log((1+r)/(1-r))/2},ja=Math.cosh||function(r){return(Math.exp(r)+Math.exp(-r))/2},Zp=Math.sinh||function(r){return(Math.exp(r)-Math.exp(-r))/2},Qa=Math.tanh||function(r){var e=Math.exp(2*r);return(e-1)/(e+1)};function Xp(r,e){var t=r>0?!0:r<0?!1:1/r===1/0,n=e>0?!0:e<0?!1:1/e===1/0;return t^n?-r:r}function Lp(r,e){if(Fe(r))return r;if(Ne(r))return r.toNumber();e()}function zp(r,e){return Fe(r)?r:Ne(r)?r.toNumber():e}var Jp=function(){return Jp=Gu.default.create,Gu.default},iO=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],jp=N("typed",iO,function(e){var{BigNumber:t,Complex:n,DenseMatrix:i,Fraction:o}=e,a=Jp();return a.clear(),a.addTypes([{name:"number",test:Fe},{name:"Complex",test:qt},{name:"BigNumber",test:Ne},{name:"bigint",test:Pa},{name:"Fraction",test:Sr},{name:"Unit",test:Bt},{name:"identifier",test:s=>bt&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(s)},{name:"string",test:bt},{name:"Chain",test:Vi},{name:"Array",test:Ze},{name:"Matrix",test:we},{name:"DenseMatrix",test:En},{name:"SparseMatrix",test:Ar},{name:"Range",test:Vn},{name:"Index",test:ln},{name:"boolean",test:Ia},{name:"ResultSet",test:Ra},{name:"Help",test:Ui},{name:"function",test:La},{name:"Date",test:za},{name:"RegExp",test:qa},{name:"null",test:Ua},{name:"undefined",test:Va},{name:"AccessorNode",test:sr},{name:"ArrayNode",test:Ut},{name:"AssignmentNode",test:Ha},{name:"BlockNode",test:$a},{name:"ConditionalNode",test:Wa},{name:"ConstantNode",test:ze},{name:"FunctionNode",test:Xt},{name:"FunctionAssignmentNode",test:kr},{name:"IndexNode",test:dr},{name:"Node",test:$e},{name:"ObjectNode",test:un},{name:"OperatorNode",test:lt},{name:"ParenthesisNode",test:Vt},{name:"RangeNode",test:Ga},{name:"RelationalNode",test:Ka},{name:"SymbolNode",test:ot},{name:"Map",test:sn},{name:"Object",test:Zr}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(t||es(l),Wp(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new t(l)}},{from:"number",to:"Complex",convert:function(l){return n||ts(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||ts(l),new n(l.toNumber(),0)}},{from:"bigint",to:"number",convert:function(l){if(l>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+l+")");return Number(l)}},{from:"bigint",to:"BigNumber",convert:function(l){return t||es(l),new t(l.toString())}},{from:"bigint",to:"Fraction",convert:function(l){return o||rs(l),new o(l.toString())}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||ts(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){o||rs(l);var u=new o(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){t||es(l);try{return new t(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(l){try{return BigInt(l)}catch{throw new Error('Cannot convert "'+l+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(l){o||rs(l);try{return new o(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||ts(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return t||es(l),new t(+l)}},{from:"boolean",to:"bigint",convert:function(l){return BigInt(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return o||rs(l),new o(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||oO(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),a.onMismatch=(s,l,u)=>{var c=a.createError(s,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Dt(l[0])&&u.some(m=>!m.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},a.onMismatch=(s,l,u)=>{var c=a.createError(s,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Dt(l[0])&&u.some(m=>!m.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},a});function es(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function ts(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function oO(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function rs(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}var aO="ResultSet",sO=[],Qp=N(aO,sO,()=>{function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return r.prototype.type="ResultSet",r.prototype.isResultSet=!0,r.prototype.valueOf=function(){return this.entries},r.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},r.fromJSON=function(e){return new r(e.entries)},r},{isClass:!0});var Gi=9e15,Gn=1e9,Ku="0123456789abcdef",os="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",as="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Yu={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Gi,maxE:Gi,crypto:!1},nh,Mn,We=!0,ls="[DecimalError] ",Wn=ls+"Invalid argument: ",ih=ls+"Precision limit exceeded",oh=ls+"crypto unavailable",ah="[object Decimal]",er=Math.floor,Ht=Math.pow,lO=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,uO=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,cO=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,sh=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Jr=1e7,Ve=7,fO=9007199254740991,mO=os.length-1,Zu=as.length-1,he={toStringTag:ah};he.absoluteValue=he.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),Re(r)};he.ceil=function(){return Re(new this.constructor(this),this.e+1,2)};he.clampedTo=he.clamp=function(r,e){var t,n=this,i=n.constructor;if(r=new i(r),e=new i(e),!r.s||!e.s)return new i(NaN);if(r.gt(e))throw Error(Wn+e);return t=n.cmp(r),t<0?r:n.cmp(e)>0?e:new i(n)};he.comparedTo=he.cmp=function(r){var e,t,n,i,o=this,a=o.d,s=(r=new o.constructor(r)).d,l=o.s,u=r.s;if(!a||!s)return!l||!u?NaN:l!==u?l:a===s?0:!a^l<0?1:-1;if(!a[0]||!s[0])return a[0]?l:s[0]?-u:0;if(l!==u)return l;if(o.e!==r.e)return o.e>r.e^l<0?1:-1;for(n=a.length,i=s.length,e=0,t=n<i?n:i;e<t;++e)if(a[e]!==s[e])return a[e]>s[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};he.cosine=he.cos=function(){var r,e,t=this,n=t.constructor;return t.d?t.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+Ve,n.rounding=1,t=pO(n,mh(n,t)),n.precision=r,n.rounding=e,Re(Mn==2||Mn==3?t.neg():t,r,e,!0)):new n(1):new n(NaN)};he.cubeRoot=he.cbrt=function(){var r,e,t,n,i,o,a,s,l,u,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(We=!1,o=c.s*Ht(c.s*c,1/3),!o||Math.abs(o)==1/0?(t=Jt(c.d),r=c.e,(o=(r-t.length+1)%3)&&(t+=o==1||o==-2?"0":"00"),o=Ht(t,1/3),r=er((r+1)/3)-(r%3==(r<0?-1:2)),o==1/0?t="5e"+r:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new f(t),n.s=c.s):n=new f(o.toString()),a=(r=f.precision)+3;;)if(s=n,l=s.times(s).times(s),u=l.plus(c),n=yt(u.plus(c).times(s),u.plus(l),a+2,1),Jt(s.d).slice(0,a)===(t=Jt(n.d)).slice(0,a))if(t=t.slice(a-3,a+1),t=="9999"||!i&&t=="4999"){if(!i&&(Re(s,r+1,0),s.times(s).times(s).eq(c))){n=s;break}a+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Re(n,r+1,1),e=!n.times(n).times(n).eq(c));break}return We=!0,Re(n,r,f.rounding,e)};he.decimalPlaces=he.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-er(this.e/Ve))*Ve,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};he.dividedBy=he.div=function(r){return yt(this,new this.constructor(r))};he.dividedToIntegerBy=he.divToInt=function(r){var e=this,t=e.constructor;return Re(yt(e,new t(r),0,1,1),t.precision,t.rounding)};he.equals=he.eq=function(r){return this.cmp(r)===0};he.floor=function(){return Re(new this.constructor(this),this.e+1,3)};he.greaterThan=he.gt=function(r){return this.cmp(r)>0};he.greaterThanOrEqualTo=he.gte=function(r){var e=this.cmp(r);return e==1||e===0};he.hyperbolicCosine=he.cosh=function(){var r,e,t,n,i,o=this,a=o.constructor,s=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return s;t=a.precision,n=a.rounding,a.precision=t+Math.max(o.e,o.sd())+4,a.rounding=1,i=o.d.length,i<32?(r=Math.ceil(i/3),e=(1/cs(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),o=Ki(a,1,o.times(e),new a(1),!0);for(var l,u=r,c=new a(8);u--;)l=o.times(o),o=s.minus(l.times(c.minus(l.times(c))));return Re(o,a.precision=t,a.rounding=n,!0)};he.hyperbolicSine=he.sinh=function(){var r,e,t,n,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,t=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,n=i.d.length,n<3)i=Ki(o,2,i,i,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,i=i.times(1/cs(5,r)),i=Ki(o,2,i,i,!0);for(var a,s=new o(5),l=new o(16),u=new o(20);r--;)a=i.times(i),i=i.times(s.plus(a.times(l.times(a).plus(u))))}return o.precision=e,o.rounding=t,Re(i,e,t,!0)};he.hyperbolicTangent=he.tanh=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,yt(t.sinh(),t.cosh(),n.precision=r,n.rounding=e)):new n(t.s)};he.inverseCosine=he.acos=function(){var r=this,e=r.constructor,t=r.abs().cmp(1),n=e.precision,i=e.rounding;return t!==-1?t===0?r.isNeg()?cn(e,n,i):new e(0):new e(NaN):r.isZero()?cn(e,n+4,i).times(.5):(e.precision=n+6,e.rounding=1,r=new e(1).minus(r).div(r.plus(1)).sqrt().atan(),e.precision=n,e.rounding=i,r.times(2))};he.inverseHyperbolicCosine=he.acosh=function(){var r,e,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,We=!1,t=t.times(t).minus(1).sqrt().plus(t),We=!0,n.precision=r,n.rounding=e,t.ln()):new n(t)};he.inverseHyperbolicSine=he.asinh=function(){var r,e,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,We=!1,t=t.times(t).plus(1).sqrt().plus(t),We=!0,n.precision=r,n.rounding=e,t.ln())};he.inverseHyperbolicTangent=he.atanh=function(){var r,e,t,n,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=o.precision,e=o.rounding,n=i.sd(),Math.max(n,r)<2*-i.e-1?Re(new o(i),r,e,!0):(o.precision=t=n-i.e,i=yt(i.plus(1),new o(1).minus(i),t+r,1),o.precision=r+4,o.rounding=1,i=i.ln(),o.precision=r,o.rounding=e,i.times(.5))):new o(NaN)};he.inverseSine=he.asin=function(){var r,e,t,n,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),t=o.precision,n=o.rounding,e!==-1?e===0?(r=cn(o,t+4,n).times(.5),r.s=i.s,r):new o(NaN):(o.precision=t+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=t,o.rounding=n,i.times(2)))};he.inverseTangent=he.atan=function(){var r,e,t,n,i,o,a,s,l,u=this,c=u.constructor,f=c.precision,m=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&f+4<=Zu)return a=cn(c,f+4,m).times(.25),a.s=u.s,a}else{if(!u.s)return new c(NaN);if(f+4<=Zu)return a=cn(c,f+4,m).times(.5),a.s=u.s,a}for(c.precision=s=f+10,c.rounding=1,t=Math.min(28,s/Ve+2|0),r=t;r;--r)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(We=!1,e=Math.ceil(s/Ve),n=1,l=u.times(u),a=new c(u),i=u;r!==-1;)if(i=i.times(l),o=a.minus(i.div(n+=2)),i=i.times(l),a=o.plus(i.div(n+=2)),a.d[e]!==void 0)for(r=e;a.d[r]===o.d[r]&&r--;);return t&&(a=a.times(2<<t-1)),We=!0,Re(a,c.precision=f,c.rounding=m,!0)};he.isFinite=function(){return!!this.d};he.isInteger=he.isInt=function(){return!!this.d&&er(this.e/Ve)>this.d.length-2};he.isNaN=function(){return!this.s};he.isNegative=he.isNeg=function(){return this.s<0};he.isPositive=he.isPos=function(){return this.s>0};he.isZero=function(){return!!this.d&&this.d[0]===0};he.lessThan=he.lt=function(r){return this.cmp(r)<0};he.lessThanOrEqualTo=he.lte=function(r){return this.cmp(r)<1};he.logarithm=he.log=function(r){var e,t,n,i,o,a,s,l,u=this,c=u.constructor,f=c.precision,m=c.rounding,p=5;if(r==null)r=new c(10),e=!0;else{if(r=new c(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new c(NaN);e=r.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new c(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)o=!0;else{for(i=t[0];i%10===0;)i/=10;o=i!==1}if(We=!1,s=f+p,a=$n(u,s),n=e?ss(c,s+10):$n(r,s),l=yt(a,n,s,1),Io(l.d,i=f,m))do if(s+=10,a=$n(u,s),n=e?ss(c,s+10):$n(r,s),l=yt(a,n,s,1),!o){+Jt(l.d).slice(i+1,i+15)+1==1e14&&(l=Re(l,f+1,0));break}while(Io(l.d,i+=10,m));return We=!0,Re(l,f,m)};he.minus=he.sub=function(r){var e,t,n,i,o,a,s,l,u,c,f,m,p=this,h=p.constructor;if(r=new h(r),!p.d||!r.d)return!p.s||!r.s?r=new h(NaN):p.d?r.s=-r.s:r=new h(r.d||p.s!==r.s?p:NaN),r;if(p.s!=r.s)return r.s=-r.s,p.plus(r);if(u=p.d,m=r.d,s=h.precision,l=h.rounding,!u[0]||!m[0]){if(m[0])r.s=-r.s;else if(u[0])r=new h(p);else return new h(l===3?-0:0);return We?Re(r,s,l):r}if(t=er(r.e/Ve),c=er(p.e/Ve),u=u.slice(),o=c-t,o){for(f=o<0,f?(e=u,o=-o,a=m.length):(e=m,t=c,a=u.length),n=Math.max(Math.ceil(s/Ve),a)+2,o>n&&(o=n,e.length=1),e.reverse(),n=o;n--;)e.push(0);e.reverse()}else{for(n=u.length,a=m.length,f=n<a,f&&(a=n),n=0;n<a;n++)if(u[n]!=m[n]){f=u[n]<m[n];break}o=0}for(f&&(e=u,u=m,m=e,r.s=-r.s),a=u.length,n=m.length-a;n>0;--n)u[a++]=0;for(n=m.length;n>o;){if(u[--n]<m[n]){for(i=n;i&&u[--i]===0;)u[i]=Jr-1;--u[i],u[n]+=Jr}u[n]-=m[n]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(r.d=u,r.e=us(u,t),We?Re(r,s,l):r):new h(l===3?-0:0)};he.modulo=he.mod=function(r){var e,t=this,n=t.constructor;return r=new n(r),!t.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||t.d&&!t.d[0]?Re(new n(t),n.precision,n.rounding):(We=!1,n.modulo==9?(e=yt(t,r.abs(),0,3,1),e.s*=r.s):e=yt(t,r,0,n.modulo,1),e=e.times(r),We=!0,t.minus(e))};he.naturalExponential=he.exp=function(){return Xu(this)};he.naturalLogarithm=he.ln=function(){return $n(this)};he.negated=he.neg=function(){var r=new this.constructor(this);return r.s=-r.s,Re(r)};he.plus=he.add=function(r){var e,t,n,i,o,a,s,l,u,c,f=this,m=f.constructor;if(r=new m(r),!f.d||!r.d)return!f.s||!r.s?r=new m(NaN):f.d||(r=new m(r.d||f.s===r.s?f:NaN)),r;if(f.s!=r.s)return r.s=-r.s,f.minus(r);if(u=f.d,c=r.d,s=m.precision,l=m.rounding,!u[0]||!c[0])return c[0]||(r=new m(f)),We?Re(r,s,l):r;if(o=er(f.e/Ve),n=er(r.e/Ve),u=u.slice(),i=o-n,i){for(i<0?(t=u,i=-i,a=c.length):(t=c,n=o,a=u.length),o=Math.ceil(s/Ve),a=o>a?o+1:a+1,i>a&&(i=a,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(a=u.length,i=c.length,a-i<0&&(i=a,t=c,c=u,u=t),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/Jr|0,u[i]%=Jr;for(e&&(u.unshift(e),++n),a=u.length;u[--a]==0;)u.pop();return r.d=u,r.e=us(u,n),We?Re(r,s,l):r};he.precision=he.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(Wn+r);return t.d?(e=lh(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};he.round=function(){var r=this,e=r.constructor;return Re(new e(r),r.e+1,e.rounding)};he.sine=he.sin=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+Ve,n.rounding=1,t=dO(n,mh(n,t)),n.precision=r,n.rounding=e,Re(Mn>2?t.neg():t,r,e,!0)):new n(NaN)};he.squareRoot=he.sqrt=function(){var r,e,t,n,i,o,a=this,s=a.d,l=a.e,u=a.s,c=a.constructor;if(u!==1||!s||!s[0])return new c(!u||u<0&&(!s||s[0])?NaN:s?a:1/0);for(We=!1,u=Math.sqrt(+a),u==0||u==1/0?(e=Jt(s),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=er((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new c(e)):n=new c(u.toString()),t=(l=c.precision)+3;;)if(o=n,n=o.plus(yt(a,o,t+2,1)).times(.5),Jt(o.d).slice(0,t)===(e=Jt(n.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(Re(o,l+1,0),o.times(o).eq(a))){n=o;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Re(n,l+1,1),r=!n.times(n).eq(a));break}return We=!0,Re(n,l,c.rounding,r)};he.tangent=he.tan=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,t=t.sin(),t.s=1,t=yt(t,new n(1).minus(t.times(t)).sqrt(),r+10,0),n.precision=r,n.rounding=e,Re(Mn==2||Mn==4?t.neg():t,r,e,!0)):new n(NaN)};he.times=he.mul=function(r){var e,t,n,i,o,a,s,l,u,c=this,f=c.constructor,m=c.d,p=(r=new f(r)).d;if(r.s*=c.s,!m||!m[0]||!p||!p[0])return new f(!r.s||m&&!m[0]&&!p||p&&!p[0]&&!m?NaN:!m||!p?r.s/0:r.s*0);for(t=er(c.e/Ve)+er(r.e/Ve),l=m.length,u=p.length,l<u&&(o=m,m=p,p=o,a=l,l=u,u=a),o=[],a=l+u,n=a;n--;)o.push(0);for(n=u;--n>=0;){for(e=0,i=l+n;i>n;)s=o[i]+p[n]*m[i-n-1]+e,o[i--]=s%Jr|0,e=s/Jr|0;o[i]=(o[i]+e)%Jr|0}for(;!o[--a];)o.pop();return e?++t:o.shift(),r.d=o,r.e=us(o,t),We?Re(r,f.precision,f.rounding):r};he.toBinary=function(r,e){return Ju(this,2,r,e)};he.toDecimalPlaces=he.toDP=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(vr(r,0,Gn),e===void 0?e=n.rounding:vr(e,0,8),Re(t,r+t.e+1,e))};he.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=fn(n,!0):(vr(r,0,Gn),e===void 0?e=i.rounding:vr(e,0,8),n=Re(new i(n),r+1,e),t=fn(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+t:t};he.toFixed=function(r,e){var t,n,i=this,o=i.constructor;return r===void 0?t=fn(i):(vr(r,0,Gn),e===void 0?e=o.rounding:vr(e,0,8),n=Re(new o(i),r+i.e+1,e),t=fn(n,!1,r+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};he.toFraction=function(r){var e,t,n,i,o,a,s,l,u,c,f,m,p=this,h=p.d,d=p.constructor;if(!h)return new d(p);if(u=t=new d(1),n=l=new d(0),e=new d(n),o=e.e=lh(h)-p.e-1,a=o%Ve,e.d[0]=Ht(10,a<0?Ve+a:a),r==null)r=o>0?e:u;else{if(s=new d(r),!s.isInt()||s.lt(u))throw Error(Wn+s);r=s.gt(e)?o>0?e:u:s}for(We=!1,s=new d(Jt(h)),c=d.precision,d.precision=o=h.length*Ve*2;f=yt(s,e,0,1,1),i=t.plus(f.times(n)),i.cmp(r)!=1;)t=n,n=i,i=u,u=l.plus(f.times(i)),l=i,i=e,e=s.minus(f.times(i)),s=i;return i=yt(r.minus(t),n,0,1,1),l=l.plus(i.times(u)),t=t.plus(i.times(n)),l.s=u.s=p.s,m=yt(u,n,o,1).minus(p).abs().cmp(yt(l,t,o,1).minus(p).abs())<1?[u,n]:[l,t],d.precision=c,We=!0,m};he.toHexadecimal=he.toHex=function(r,e){return Ju(this,16,r,e)};he.toNearest=function(r,e){var t=this,n=t.constructor;if(t=new n(t),r==null){if(!t.d)return t;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:vr(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(We=!1,t=yt(t,r,0,e,1).times(r),We=!0,Re(t)):(r.s=t.s,t=r),t};he.toNumber=function(){return+this};he.toOctal=function(r,e){return Ju(this,8,r,e)};he.toPower=he.pow=function(r){var e,t,n,i,o,a,s=this,l=s.constructor,u=+(r=new l(r));if(!s.d||!r.d||!s.d[0]||!r.d[0])return new l(Ht(+s,u));if(s=new l(s),s.eq(1))return s;if(n=l.precision,o=l.rounding,r.eq(1))return Re(s,n,o);if(e=er(r.e/Ve),e>=r.d.length-1&&(t=u<0?-u:u)<=fO)return i=uh(l,s,t,n),r.s<0?new l(1).div(i):Re(i,n,o);if(a=s.s,a<0){if(e<r.d.length-1)return new l(NaN);if(r.d[e]&1||(a=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=a,s}return t=Ht(+s,u),e=t==0||!isFinite(t)?er(u*(Math.log("0."+Jt(s.d))/Math.LN10+s.e+1)):new l(t+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?a/0:0):(We=!1,l.rounding=s.s=1,t=Math.min(12,(e+"").length),i=Xu(r.times($n(s,n+t)),n),i.d&&(i=Re(i,n+5,1),Io(i.d,n,o)&&(e=n+10,i=Re(Xu(r.times($n(s,e+t)),e),e+5,1),+Jt(i.d).slice(n+1,n+15)+1==1e14&&(i=Re(i,n+1,0)))),i.s=a,We=!0,l.rounding=o,Re(i,n,o))};he.toPrecision=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=fn(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(vr(r,1,Gn),e===void 0?e=i.rounding:vr(e,0,8),n=Re(new i(n),r,e),t=fn(n,r<=n.e||n.e<=i.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+t:t};he.toSignificantDigits=he.toSD=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(vr(r,1,Gn),e===void 0?e=n.rounding:vr(e,0,8)),Re(new n(t),r,e)};he.toString=function(){var r=this,e=r.constructor,t=fn(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};he.truncated=he.trunc=function(){return Re(new this.constructor(this),this.e+1,1)};he.valueOf=he.toJSON=function(){var r=this,e=r.constructor,t=fn(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function Jt(r){var e,t,n,i=r.length-1,o="",a=r[0];if(i>0){for(o+=a,e=1;e<i;e++)n=r[e]+"",t=Ve-n.length,t&&(o+=Hn(t)),o+=n;a=r[e],n=a+"",t=Ve-n.length,t&&(o+=Hn(t))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}function vr(r,e,t){if(r!==~~r||r<e||r>t)throw Error(Wn+r)}function Io(r,e,t,n){var i,o,a,s;for(o=r[0];o>=10;o/=10)--e;return--e<0?(e+=Ve,i=0):(i=Math.ceil((e+1)/Ve),e%=Ve),o=Ht(10,Ve-e),s=r[i]%o|0,n==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),a=t<4&&s==99999||t>3&&s==49999||s==5e4||s==0):a=(t<4&&s+1==o||t>3&&s+1==o/2)&&(r[i+1]/o/100|0)==Ht(10,e-2)-1||(s==o/2||s==0)&&(r[i+1]/o/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),a=(n||t<4)&&s==9999||!n&&t>3&&s==4999):a=((n||t<4)&&s+1==o||!n&&t>3&&s+1==o/2)&&(r[i+1]/o/1e3|0)==Ht(10,e-3)-1,a}function ns(r,e,t){for(var n,i=[0],o,a=0,s=r.length;a<s;){for(o=i.length;o--;)i[o]*=e;for(i[0]+=Ku.indexOf(r.charAt(a++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function pO(r,e){var t,n,i;if(e.isZero())return e;n=e.d.length,n<32?(t=Math.ceil(n/3),i=(1/cs(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),r.precision+=t,e=Ki(r,1,e.times(i),new r(1));for(var o=t;o--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return r.precision-=t,e}var yt=function(){function r(n,i,o){var a,s=0,l=n.length;for(n=n.slice();l--;)a=n[l]*i+s,n[l]=a%o|0,s=a/o|0;return s&&n.unshift(s),n}function e(n,i,o,a){var s,l;if(o!=a)l=o>a?1:-1;else for(s=l=0;s<o;s++)if(n[s]!=i[s]){l=n[s]>i[s]?1:-1;break}return l}function t(n,i,o,a){for(var s=0;o--;)n[o]-=s,s=n[o]<i[o]?1:0,n[o]=s*a+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,a,s,l){var u,c,f,m,p,h,d,v,x,D,g,w,b,y,S,C,A,E,M,F,k=n.constructor,I=n.s==i.s?1:-1,P=n.d,B=i.d;if(!P||!P[0]||!B||!B[0])return new k(!n.s||!i.s||(P?B&&P[0]==B[0]:!B)?NaN:P&&P[0]==0||!B?I*0:I/0);for(l?(p=1,c=n.e-i.e):(l=Jr,p=Ve,c=er(n.e/p)-er(i.e/p)),M=B.length,A=P.length,x=new k(I),D=x.d=[],f=0;B[f]==(P[f]||0);f++);if(B[f]>(P[f]||0)&&c--,o==null?(y=o=k.precision,a=k.rounding):s?y=o+(n.e-i.e)+1:y=o,y<0)D.push(1),h=!0;else{if(y=y/p+2|0,f=0,M==1){for(m=0,B=B[0],y++;(f<A||m)&&y--;f++)S=m*l+(P[f]||0),D[f]=S/B|0,m=S%B|0;h=m||f<A}else{for(m=l/(B[0]+1)|0,m>1&&(B=r(B,m,l),P=r(P,m,l),M=B.length,A=P.length),C=M,g=P.slice(0,M),w=g.length;w<M;)g[w++]=0;F=B.slice(),F.unshift(0),E=B[0],B[1]>=l/2&&++E;do m=0,u=e(B,g,M,w),u<0?(b=g[0],M!=w&&(b=b*l+(g[1]||0)),m=b/E|0,m>1?(m>=l&&(m=l-1),d=r(B,m,l),v=d.length,w=g.length,u=e(d,g,v,w),u==1&&(m--,t(d,M<v?F:B,v,l))):(m==0&&(u=m=1),d=B.slice()),v=d.length,v<w&&d.unshift(0),t(g,d,w,l),u==-1&&(w=g.length,u=e(B,g,M,w),u<1&&(m++,t(g,M<w?F:B,w,l))),w=g.length):u===0&&(m++,g=[0]),D[f++]=m,u&&g[0]?g[w++]=P[C]||0:(g=[P[C]],w=1);while((C++<A||g[0]!==void 0)&&y--);h=g[0]!==void 0}D[0]||D.shift()}if(p==1)x.e=c,nh=h;else{for(f=1,m=D[0];m>=10;m/=10)f++;x.e=f+c*p-1,Re(x,s?o+x.e+1:o,a,h)}return x}}();function Re(r,e,t,n){var i,o,a,s,l,u,c,f,m,p=r.constructor;e:if(e!=null){if(f=r.d,!f)return r;for(i=1,s=f[0];s>=10;s/=10)i++;if(o=e-i,o<0)o+=Ve,a=e,c=f[m=0],l=c/Ht(10,i-a-1)%10|0;else if(m=Math.ceil((o+1)/Ve),s=f.length,m>=s)if(n){for(;s++<=m;)f.push(0);c=l=0,i=1,o%=Ve,a=o-Ve+1}else break e;else{for(c=s=f[m],i=1;s>=10;s/=10)i++;o%=Ve,a=o-Ve+i,l=a<0?0:c/Ht(10,i-a-1)%10|0}if(n=n||e<0||f[m+1]!==void 0||(a<0?c:c%Ht(10,i-a-1)),u=t<4?(l||n)&&(t==0||t==(r.s<0?3:2)):l>5||l==5&&(t==4||n||t==6&&(o>0?a>0?c/Ht(10,i-a):0:f[m-1])%10&1||t==(r.s<0?8:7)),e<1||!f[0])return f.length=0,u?(e-=r.e+1,f[0]=Ht(10,(Ve-e%Ve)%Ve),r.e=-e||0):f[0]=r.e=0,r;if(o==0?(f.length=m,s=1,m--):(f.length=m+1,s=Ht(10,Ve-o),f[m]=a>0?(c/Ht(10,i-a)%Ht(10,a)|0)*s:0),u)for(;;)if(m==0){for(o=1,a=f[0];a>=10;a/=10)o++;for(a=f[0]+=s,s=1;a>=10;a/=10)s++;o!=s&&(r.e++,f[0]==Jr&&(f[0]=1));break}else{if(f[m]+=s,f[m]!=Jr)break;f[m--]=0,s=1}for(o=f.length;f[--o]===0;)f.pop()}return We&&(r.e>p.maxE?(r.d=null,r.e=NaN):r.e<p.minE&&(r.e=0,r.d=[0])),r}function fn(r,e,t){if(!r.isFinite())return fh(r);var n,i=r.e,o=Jt(r.d),a=o.length;return e?(t&&(n=t-a)>0?o=o.charAt(0)+"."+o.slice(1)+Hn(n):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(r.e<0?"e":"e+")+r.e):i<0?(o="0."+Hn(-i-1)+o,t&&(n=t-a)>0&&(o+=Hn(n))):i>=a?(o+=Hn(i+1-a),t&&(n=t-i-1)>0&&(o=o+"."+Hn(n))):((n=i+1)<a&&(o=o.slice(0,n)+"."+o.slice(n)),t&&(n=t-a)>0&&(i+1===a&&(o+="."),o+=Hn(n))),o}function us(r,e){var t=r[0];for(e*=Ve;t>=10;t/=10)e++;return e}function ss(r,e,t){if(e>mO)throw We=!0,t&&(r.precision=t),Error(ih);return Re(new r(os),e,1,!0)}function cn(r,e,t){if(e>Zu)throw Error(ih);return Re(new r(as),e,t,!0)}function lh(r){var e=r.length-1,t=e*Ve+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function Hn(r){for(var e="";r--;)e+="0";return e}function uh(r,e,t,n){var i,o=new r(1),a=Math.ceil(n/Ve+4);for(We=!1;;){if(t%2&&(o=o.times(e),th(o.d,a)&&(i=!0)),t=er(t/2),t===0){t=o.d.length-1,i&&o.d[t]===0&&++o.d[t];break}e=e.times(e),th(e.d,a)}return We=!0,o}function eh(r){return r.d[r.d.length-1]&1}function ch(r,e,t){for(var n,i,o=new r(e[0]),a=0;++a<e.length;){if(i=new r(e[a]),!i.s){o=i;break}n=o.cmp(i),(n===t||n===0&&o.s===t)&&(o=i)}return o}function Xu(r,e){var t,n,i,o,a,s,l,u=0,c=0,f=0,m=r.constructor,p=m.rounding,h=m.precision;if(!r.d||!r.d[0]||r.e>17)return new m(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:NaN);for(e==null?(We=!1,l=h):l=e,s=new m(.03125);r.e>-2;)r=r.times(s),f+=5;for(n=Math.log(Ht(2,f))/Math.LN10*2+5|0,l+=n,t=o=a=new m(1),m.precision=l;;){if(o=Re(o.times(r),l,1),t=t.times(++c),s=a.plus(yt(o,t,l,1)),Jt(s.d).slice(0,l)===Jt(a.d).slice(0,l)){for(i=f;i--;)a=Re(a.times(a),l,1);if(e==null)if(u<3&&Io(a.d,l-n,p,u))m.precision=l+=10,t=o=s=new m(1),c=0,u++;else return Re(a,m.precision=h,p,We=!0);else return m.precision=h,a}a=s}}function $n(r,e){var t,n,i,o,a,s,l,u,c,f,m,p=1,h=10,d=r,v=d.d,x=d.constructor,D=x.rounding,g=x.precision;if(d.s<0||!v||!v[0]||!d.e&&v[0]==1&&v.length==1)return new x(v&&!v[0]?-1/0:d.s!=1?NaN:v?0:d);if(e==null?(We=!1,c=g):c=e,x.precision=c+=h,t=Jt(v),n=t.charAt(0),Math.abs(o=d.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)d=d.times(r),t=Jt(d.d),n=t.charAt(0),p++;o=d.e,n>1?(d=new x("0."+t),o++):d=new x(n+"."+t.slice(1))}else return u=ss(x,c+2,g).times(o+""),d=$n(new x(n+"."+t.slice(1)),c-h).plus(u),x.precision=g,e==null?Re(d,g,D,We=!0):d;for(f=d,l=a=d=yt(d.minus(1),d.plus(1),c,1),m=Re(d.times(d),c,1),i=3;;){if(a=Re(a.times(m),c,1),u=l.plus(yt(a,new x(i),c,1)),Jt(u.d).slice(0,c)===Jt(l.d).slice(0,c))if(l=l.times(2),o!==0&&(l=l.plus(ss(x,c+2,g).times(o+""))),l=yt(l,new x(p),c,1),e==null)if(Io(l.d,c-h,D,s))x.precision=c+=h,u=a=d=yt(f.minus(1),f.plus(1),c,1),m=Re(d.times(d),c,1),i=s=1;else return Re(l,x.precision=g,D,We=!0);else return x.precision=g,l;l=u,i+=2}}function fh(r){return String(r.s*r.s/0)}function is(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,r.e=t=t-n-1,r.d=[],n=(t+1)%Ve,t<0&&(n+=Ve),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=Ve;n<i;)r.d.push(+e.slice(n,n+=Ve));e=e.slice(n),n=Ve-e.length}else n-=i;for(;n--;)e+="0";r.d.push(+e),We&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function hO(r,e){var t,n,i,o,a,s,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),sh.test(e))return is(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(uO.test(e))t=16,e=e.toLowerCase();else if(lO.test(e))t=2;else if(cO.test(e))t=8;else throw Error(Wn+e);for(o=e.search(/p/i),o>0?(l=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),a=o>=0,n=r.constructor,a&&(e=e.replace(".",""),s=e.length,o=s-o,i=uh(n,new n(t),o,o*2)),u=ns(e,t,Jr),c=u.length-1,o=c;u[o]===0;--o)u.pop();return o<0?new n(r.s*0):(r.e=us(u,c),r.d=u,We=!1,a&&(r=yt(r,i,s*4)),l&&(r=r.times(Math.abs(l)<54?Ht(2,l):Ro.pow(2,l))),We=!0,r)}function dO(r,e){var t,n=e.d.length;if(n<3)return e.isZero()?e:Ki(r,2,e,e);t=1.4*Math.sqrt(n),t=t>16?16:t|0,e=e.times(1/cs(5,t)),e=Ki(r,2,e,e);for(var i,o=new r(5),a=new r(16),s=new r(20);t--;)i=e.times(e),e=e.times(o.plus(i.times(a.times(i).minus(s))));return e}function Ki(r,e,t,n,i){var o,a,s,l,u=1,c=r.precision,f=Math.ceil(c/Ve);for(We=!1,l=t.times(t),s=new r(n);;){if(a=yt(s.times(l),new r(e++*e++),c,1),s=i?n.plus(a):n.minus(a),n=yt(a.times(l),new r(e++*e++),c,1),a=s.plus(n),a.d[f]!==void 0){for(o=f;a.d[o]===s.d[o]&&o--;);if(o==-1)break}o=s,s=n,n=a,a=o,u++}return We=!0,a.d.length=f+1,a}function cs(r,e){for(var t=r;--e;)t*=r;return t}function mh(r,e){var t,n=e.s<0,i=cn(r,r.precision,1),o=i.times(.5);if(e=e.abs(),e.lte(o))return Mn=n?4:1,e;if(t=e.divToInt(i),t.isZero())Mn=n?3:2;else{if(e=e.minus(t.times(i)),e.lte(o))return Mn=eh(t)?n?2:3:n?4:1,e;Mn=eh(t)?n?1:4:n?3:2}return e.minus(i).abs()}function Ju(r,e,t,n){var i,o,a,s,l,u,c,f,m,p=r.constructor,h=t!==void 0;if(h?(vr(t,1,Gn),n===void 0?n=p.rounding:vr(n,0,8)):(t=p.precision,n=p.rounding),!r.isFinite())c=fh(r);else{for(c=fn(r),a=c.indexOf("."),h?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,a>=0&&(c=c.replace(".",""),m=new p(1),m.e=c.length-a,m.d=ns(fn(m),10,i),m.e=m.d.length),f=ns(c,10,i),o=l=f.length;f[--l]==0;)f.pop();if(!f[0])c=h?"0p+0":"0";else{if(a<0?o--:(r=new p(r),r.d=f,r.e=o,r=yt(r,m,t,n,0,i),f=r.d,o=r.e,u=nh),a=f[t],s=i/2,u=u||f[t+1]!==void 0,u=n<4?(a!==void 0||u)&&(n===0||n===(r.s<0?3:2)):a>s||a===s&&(n===4||u||n===6&&f[t-1]&1||n===(r.s<0?8:7)),f.length=t,u)for(;++f[--t]>i-1;)f[t]=0,t||(++o,f.unshift(1));for(l=f.length;!f[l-1];--l);for(a=0,c="";a<l;a++)c+=Ku.charAt(f[a]);if(h){if(l>1)if(e==16||e==8){for(a=e==16?4:3,--l;l%a;l++)c+="0";for(f=ns(c,i,e),l=f.length;!f[l-1];--l);for(a=1,c="1.";a<l;a++)c+=Ku.charAt(f[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)c="0"+c;c="0."+c}else if(++o>l)for(o-=l;o--;)c+="0";else o<l&&(c=c.slice(0,o)+"."+c.slice(o))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return r.s<0?"-"+c:c}function th(r,e){if(r.length>e)return r.length=e,!0}function gO(r){return new this(r).abs()}function vO(r){return new this(r).acos()}function yO(r){return new this(r).acosh()}function xO(r,e){return new this(r).plus(e)}function bO(r){return new this(r).asin()}function wO(r){return new this(r).asinh()}function DO(r){return new this(r).atan()}function SO(r){return new this(r).atanh()}function AO(r,e){r=new this(r),e=new this(e);var t,n=this.precision,i=this.rounding,o=n+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=cn(this,o,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?cn(this,n,i):new this(0),t.s=r.s):!r.d||e.isZero()?(t=cn(this,o,1).times(.5),t.s=r.s):e.s<0?(this.precision=o,this.rounding=1,t=this.atan(yt(r,e,o,1)),e=cn(this,o,1),this.precision=n,this.rounding=i,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(yt(r,e,o,1)),t}function NO(r){return new this(r).cbrt()}function CO(r){return Re(r=new this(r),r.e+1,2)}function EO(r,e,t){return new this(r).clamp(e,t)}function MO(r){if(!r||typeof r!="object")throw Error(ls+"Object expected");var e,t,n,i=r.defaults===!0,o=["precision",1,Gn,"rounding",0,8,"toExpNeg",-Gi,0,"toExpPos",0,Gi,"maxE",0,Gi,"minE",-Gi,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(t=o[e],i&&(this[t]=Yu[t]),(n=r[t])!==void 0)if(er(n)===n&&n>=o[e+1]&&n<=o[e+2])this[t]=n;else throw Error(Wn+t+": "+n);if(t="crypto",i&&(this[t]=Yu[t]),(n=r[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(oh);else this[t]=!1;else throw Error(Wn+t+": "+n);return this}function TO(r){return new this(r).cos()}function FO(r){return new this(r).cosh()}function ph(r){var e,t,n;function i(o){var a,s,l,u=this;if(!(u instanceof i))return new i(o);if(u.constructor=i,rh(o)){u.s=o.s,We?!o.d||o.e>i.maxE?(u.e=NaN,u.d=null):o.e<i.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d);return}if(l=typeof o,l==="number"){if(o===0){u.s=1/o<0?-1:1,u.e=0,u.d=[0];return}if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(a=0,s=o;s>=10;s/=10)a++;We?a>i.maxE?(u.e=NaN,u.d=null):a<i.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[o]):(u.e=a,u.d=[o]);return}if(o*0!==0){o||(u.s=NaN),u.e=NaN,u.d=null;return}return is(u,o.toString())}if(l==="string")return(s=o.charCodeAt(0))===45?(o=o.slice(1),u.s=-1):(s===43&&(o=o.slice(1)),u.s=1),sh.test(o)?is(u,o):hO(u,o);if(l==="bigint")return o<0?(o=-o,u.s=-1):u.s=1,is(u,o.toString());throw Error(Wn+o)}if(i.prototype=he,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=MO,i.clone=ph,i.isDecimal=rh,i.abs=gO,i.acos=vO,i.acosh=yO,i.add=xO,i.asin=bO,i.asinh=wO,i.atan=DO,i.atanh=SO,i.atan2=AO,i.cbrt=NO,i.ceil=CO,i.clamp=EO,i.cos=TO,i.cosh=FO,i.div=OO,i.exp=BO,i.floor=_O,i.hypot=kO,i.ln=PO,i.log=IO,i.log10=LO,i.log2=RO,i.max=zO,i.min=qO,i.mod=UO,i.mul=VO,i.pow=HO,i.random=$O,i.round=WO,i.sign=GO,i.sin=KO,i.sinh=YO,i.sqrt=ZO,i.sub=XO,i.sum=JO,i.tan=jO,i.tanh=QO,i.trunc=eB,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function OO(r,e){return new this(r).div(e)}function BO(r){return new this(r).exp()}function _O(r){return Re(r=new this(r),r.e+1,3)}function kO(){var r,e,t=new this(0);for(We=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return We=!0,new this(1/0);t=e}return We=!0,t.sqrt()}function rh(r){return r instanceof Ro||r&&r.toStringTag===ah||!1}function PO(r){return new this(r).ln()}function IO(r,e){return new this(r).log(e)}function RO(r){return new this(r).log(2)}function LO(r){return new this(r).log(10)}function zO(){return ch(this,arguments,-1)}function qO(){return ch(this,arguments,1)}function UO(r,e){return new this(r).mod(e)}function VO(r,e){return new this(r).mul(e)}function HO(r,e){return new this(r).pow(e)}function $O(r){var e,t,n,i,o=0,a=new this(1),s=[];if(r===void 0?r=this.precision:vr(r,1,Gn),n=Math.ceil(r/Ve),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));o<n;)i=e[o],i>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:s[o++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);o<n;)i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,o):(s.push(i%1e7),o+=4);o=n/4}else throw Error(oh);else for(;o<n;)s[o++]=Math.random()*1e7|0;for(n=s[--o],r%=Ve,n&&r&&(i=Ht(10,Ve-r),s[o]=(n/i|0)*i);s[o]===0;o--)s.pop();if(o<0)t=0,s=[0];else{for(t=-1;s[0]===0;t-=Ve)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<Ve&&(t-=Ve-n)}return a.e=t,a.d=s,a}function WO(r){return Re(r=new this(r),r.e+1,this.rounding)}function GO(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function KO(r){return new this(r).sin()}function YO(r){return new this(r).sinh()}function ZO(r){return new this(r).sqrt()}function XO(r,e){return new this(r).sub(e)}function JO(){var r=0,e=arguments,t=new this(e[r]);for(We=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return We=!0,Re(t,this.precision,this.rounding)}function jO(r){return new this(r).tan()}function QO(r){return new this(r).tanh()}function eB(r){return Re(r=new this(r),r.e+1,1)}he[Symbol.for("nodejs.util.inspect.custom")]=he.toString;he[Symbol.toStringTag]="Decimal";var Ro=he.constructor=ph(Yu);os=new Ro(os);as=new Ro(as);var pi=Ro;var tB="BigNumber",rB=["?on","config"],hh=N(tB,rB,r=>{var{on:e,config:t}=r,n=pi.clone({precision:t.precision,modulo:pi.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,o){i.precision!==o.precision&&n.config({precision:i.precision})}),n},{isClass:!0});var tr=Math.cosh||function(r){return Math.abs(r)<1e-9?1-r:(Math.exp(r)+Math.exp(-r))*.5},Ir=Math.sinh||function(r){return Math.abs(r)<1e-9?r:(Math.exp(r)-Math.exp(-r))*.5},nB=function(r){let e=Math.PI/4;if(-e>r||r>e)return Math.cos(r)-1;let t=r*r;return t*(t*(t*(t*(t*(t*(t*(t/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},ju=function(r,e){return r=Math.abs(r),e=Math.abs(e),r<e&&([r,e]=[e,r]),r<1e8?Math.sqrt(r*r+e*e):(e/=r,r*Math.sqrt(1+e*e))},Yi=function(){throw SyntaxError("Invalid Param")};function Qu(r,e){let t=Math.abs(r),n=Math.abs(e);return r===0?Math.log(n):e===0?Math.log(t):t<3e3&&n<3e3?Math.log(r*r+e*e)*.5:(r=r*.5,e=e*.5,.5*Math.log(r*r+e*e)+Math.LN2)}var iB={re:0,im:0},hi=function(r,e){let t=iB;if(r==null)t.re=t.im=0;else if(e!==void 0)t.re=r,t.im=e;else switch(typeof r){case"object":if("im"in r&&"re"in r)t.re=r.re,t.im=r.im;else if("abs"in r&&"arg"in r){if(!isFinite(r.abs)&&isFinite(r.arg))return se.INFINITY;t.re=r.abs*Math.cos(r.arg),t.im=r.abs*Math.sin(r.arg)}else if("r"in r&&"phi"in r){if(!isFinite(r.r)&&isFinite(r.phi))return se.INFINITY;t.re=r.r*Math.cos(r.phi),t.im=r.r*Math.sin(r.phi)}else r.length===2?(t.re=r[0],t.im=r[1]):Yi();break;case"string":t.im=t.re=0;let n=r.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),i=1,o=0;n===null&&Yi();for(let a=0;a<n.length;a++){let s=n[a];s===" "||s==="	"||s===`
`||(s==="+"?i++:s==="-"?o++:s==="i"||s==="I"?(i+o===0&&Yi(),n[a+1]!==" "&&!isNaN(n[a+1])?(t.im+=parseFloat((o%2?"-":"")+n[a+1]),a++):t.im+=parseFloat((o%2?"-":"")+"1"),i=o=0):((i+o===0||isNaN(s))&&Yi(),n[a+1]==="i"||n[a+1]==="I"?(t.im+=parseFloat((o%2?"-":"")+s),a++):t.re+=parseFloat((o%2?"-":"")+s),i=o=0))}i+o>0&&Yi();break;case"number":t.im=0,t.re=r;break;default:Yi()}return isNaN(t.re)||isNaN(t.im),t};function se(r,e){if(!(this instanceof se))return new se(r,e);let t=hi(r,e);this.re=t.re,this.im=t.im}se.prototype={re:0,im:0,sign:function(){let r=ju(this.re,this.im);return new se(this.re/r,this.im/r)},add:function(r,e){let t=hi(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im));return n||i?n&&i?se.NAN:se.INFINITY:new se(this.re+t.re,this.im+t.im)},sub:function(r,e){let t=hi(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im));return n||i?n&&i?se.NAN:se.INFINITY:new se(this.re-t.re,this.im-t.im)},mul:function(r,e){let t=hi(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im)),o=this.re===0&&this.im===0,a=t.re===0&&t.im===0;return n&&a||i&&o?se.NAN:n||i?se.INFINITY:t.im===0&&this.im===0?new se(this.re*t.re,0):new se(this.re*t.re-this.im*t.im,this.re*t.im+this.im*t.re)},div:function(r,e){let t=hi(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im)),o=this.re===0&&this.im===0,a=t.re===0&&t.im===0;if(o&&a||n&&i)return se.NAN;if(a||n)return se.INFINITY;if(o||i)return se.ZERO;if(t.im===0)return new se(this.re/t.re,this.im/t.re);if(Math.abs(t.re)<Math.abs(t.im)){let s=t.re/t.im,l=t.re*s+t.im;return new se((this.re*s+this.im)/l,(this.im*s-this.re)/l)}else{let s=t.im/t.re,l=t.im*s+t.re;return new se((this.re+this.im*s)/l,(this.im-this.re*s)/l)}},pow:function(r,e){let t=hi(r,e),n=this.re===0&&this.im===0;if(t.re===0&&t.im===0)return se.ONE;if(t.im===0){if(this.im===0&&this.re>0)return new se(Math.pow(this.re,t.re),0);if(this.re===0)switch((t.re%4+4)%4){case 0:return new se(Math.pow(this.im,t.re),0);case 1:return new se(0,Math.pow(this.im,t.re));case 2:return new se(-Math.pow(this.im,t.re),0);case 3:return new se(0,-Math.pow(this.im,t.re))}}if(n&&t.re>0)return se.ZERO;let o=Math.atan2(this.im,this.re),a=Qu(this.re,this.im),s=Math.exp(t.re*a-t.im*o),l=t.im*a+t.re*o;return new se(s*Math.cos(l),s*Math.sin(l))},sqrt:function(){let r=this.re,e=this.im;if(e===0)return r>=0?new se(Math.sqrt(r),0):new se(0,Math.sqrt(-r));let t=ju(r,e),n=Math.sqrt(.5*(t+Math.abs(r))),i=Math.abs(e)/(2*n);return r>=0?new se(n,e<0?-i:i):new se(i,e<0?-n:n)},exp:function(){let r=Math.exp(this.re);return this.im===0?new se(r,0):new se(r*Math.cos(this.im),r*Math.sin(this.im))},expm1:function(){let r=this.re,e=this.im;return new se(Math.expm1(r)*Math.cos(e)+nB(e),Math.exp(r)*Math.sin(e))},log:function(){let r=this.re,e=this.im;return e===0&&r>0?new se(Math.log(r),0):new se(Qu(r,e),Math.atan2(e,r))},abs:function(){return ju(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){let r=this.re,e=this.im;return new se(Math.sin(r)*tr(e),Math.cos(r)*Ir(e))},cos:function(){let r=this.re,e=this.im;return new se(Math.cos(r)*tr(e),-Math.sin(r)*Ir(e))},tan:function(){let r=2*this.re,e=2*this.im,t=Math.cos(r)+tr(e);return new se(Math.sin(r)/t,Ir(e)/t)},cot:function(){let r=2*this.re,e=2*this.im,t=Math.cos(r)-tr(e);return new se(-Math.sin(r)/t,Ir(e)/t)},sec:function(){let r=this.re,e=this.im,t=.5*tr(2*e)+.5*Math.cos(2*r);return new se(Math.cos(r)*tr(e)/t,Math.sin(r)*Ir(e)/t)},csc:function(){let r=this.re,e=this.im,t=.5*tr(2*e)-.5*Math.cos(2*r);return new se(Math.sin(r)*tr(e)/t,-Math.cos(r)*Ir(e)/t)},asin:function(){let r=this.re,e=this.im,t=new se(e*e-r*r+1,-2*r*e).sqrt(),n=new se(t.re-e,t.im+r).log();return new se(n.im,-n.re)},acos:function(){let r=this.re,e=this.im,t=new se(e*e-r*r+1,-2*r*e).sqrt(),n=new se(t.re-e,t.im+r).log();return new se(Math.PI/2-n.im,n.re)},atan:function(){let r=this.re,e=this.im;if(r===0){if(e===1)return new se(0,1/0);if(e===-1)return new se(0,-1/0)}let t=r*r+(1-e)*(1-e),n=new se((1-e*e-r*r)/t,-2*r/t).log();return new se(-.5*n.im,.5*n.re)},acot:function(){let r=this.re,e=this.im;if(e===0)return new se(Math.atan2(1,r),0);let t=r*r+e*e;return t!==0?new se(r/t,-e/t).atan():new se(r!==0?r/0:0,e!==0?-e/0:0).atan()},asec:function(){let r=this.re,e=this.im;if(r===0&&e===0)return new se(0,1/0);let t=r*r+e*e;return t!==0?new se(r/t,-e/t).acos():new se(r!==0?r/0:0,e!==0?-e/0:0).acos()},acsc:function(){let r=this.re,e=this.im;if(r===0&&e===0)return new se(Math.PI/2,1/0);let t=r*r+e*e;return t!==0?new se(r/t,-e/t).asin():new se(r!==0?r/0:0,e!==0?-e/0:0).asin()},sinh:function(){let r=this.re,e=this.im;return new se(Ir(r)*Math.cos(e),tr(r)*Math.sin(e))},cosh:function(){let r=this.re,e=this.im;return new se(tr(r)*Math.cos(e),Ir(r)*Math.sin(e))},tanh:function(){let r=2*this.re,e=2*this.im,t=tr(r)+Math.cos(e);return new se(Ir(r)/t,Math.sin(e)/t)},coth:function(){let r=2*this.re,e=2*this.im,t=tr(r)-Math.cos(e);return new se(Ir(r)/t,-Math.sin(e)/t)},csch:function(){let r=this.re,e=this.im,t=Math.cos(2*e)-tr(2*r);return new se(-2*Ir(r)*Math.cos(e)/t,2*tr(r)*Math.sin(e)/t)},sech:function(){let r=this.re,e=this.im,t=Math.cos(2*e)+tr(2*r);return new se(2*tr(r)*Math.cos(e)/t,-2*Ir(r)*Math.sin(e)/t)},asinh:function(){let r=this.im;this.im=-this.re,this.re=r;let e=this.asin();return this.re=-this.im,this.im=r,r=e.re,e.re=-e.im,e.im=r,e},acosh:function(){let r=this.acos();if(r.im<=0){let e=r.re;r.re=-r.im,r.im=e}else{let e=r.im;r.im=-r.re,r.re=e}return r},atanh:function(){let r=this.re,e=this.im,t=r>1&&e===0,n=1-r,i=1+r,o=n*n+e*e,a=o!==0?new se((i*n-e*e)/o,(e*n+i*e)/o):new se(r!==-1?r/0:0,e!==0?e/0:0),s=a.re;return a.re=Qu(a.re,a.im)/2,a.im=Math.atan2(a.im,s)/2,t&&(a.im=-a.im),a},acoth:function(){let r=this.re,e=this.im;if(r===0&&e===0)return new se(0,Math.PI/2);let t=r*r+e*e;return t!==0?new se(r/t,-e/t).atanh():new se(r!==0?r/0:0,e!==0?-e/0:0).atanh()},acsch:function(){let r=this.re,e=this.im;if(e===0)return new se(r!==0?Math.log(r+Math.sqrt(r*r+1)):1/0,0);let t=r*r+e*e;return t!==0?new se(r/t,-e/t).asinh():new se(r!==0?r/0:0,e!==0?-e/0:0).asinh()},asech:function(){let r=this.re,e=this.im;if(this.isZero())return se.INFINITY;let t=r*r+e*e;return t!==0?new se(r/t,-e/t).acosh():new se(r!==0?r/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return se.INFINITY;if(this.isInfinite())return se.ZERO;let r=this.re,e=this.im,t=r*r+e*e;return new se(r/t,-e/t)},conjugate:function(){return new se(this.re,-this.im)},neg:function(){return new se(-this.re,-this.im)},ceil:function(r){return r=Math.pow(10,r||0),new se(Math.ceil(this.re*r)/r,Math.ceil(this.im*r)/r)},floor:function(r){return r=Math.pow(10,r||0),new se(Math.floor(this.re*r)/r,Math.floor(this.im*r)/r)},round:function(r){return r=Math.pow(10,r||0),new se(Math.round(this.re*r)/r,Math.round(this.im*r)/r)},equals:function(r,e){let t=hi(r,e);return Math.abs(t.re-this.re)<=se.EPSILON&&Math.abs(t.im-this.im)<=se.EPSILON},clone:function(){return new se(this.re,this.im)},toString:function(){let r=this.re,e=this.im,t="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(r)<se.EPSILON&&(r=0),Math.abs(e)<se.EPSILON&&(e=0),e===0?t+r:(r!==0?(t+=r,t+=" ",e<0?(e=-e,t+="-"):t+="+",t+=" "):e<0&&(e=-e,t+="-"),e!==1&&(t+=e),t+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};se.ZERO=new se(0,0);se.ONE=new se(1,0);se.I=new se(0,1);se.PI=new se(Math.PI,0);se.E=new se(Math.E,0);se.INFINITY=new se(1/0,1/0);se.NAN=new se(NaN,NaN);se.EPSILON=1e-15;var oB="Complex",aB=[],dh=N(oB,aB,()=>(Object.defineProperty(se,"name",{value:"Complex"}),se.prototype.constructor=se,se.prototype.type="Complex",se.prototype.isComplex=!0,se.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},se.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},se.prototype.format=function(r){var e="",t=this.im,n=this.re,i=Xr(this.re,r),o=Xr(this.im,r),a=Fe(r)?r:r?r.precision:null;if(a!==null){var s=Math.pow(10,-a);Math.abs(n/t)<s&&(n=0),Math.abs(t/n)<s&&(t=0)}return t===0?e=i:n===0?t===1?e="i":t===-1?e="-i":e=o+"i":t<0?t===-1?e=i+" - i":e=i+" - "+o.substring(1)+"i":t===1?e=i+" + i":e=i+" + "+o+"i",e},se.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return se(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],n=arguments[1];if(Fe(t)){if(Bt(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),Fe(n))return new se({r:t,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},se.prototype.valueOf=se.prototype.toString,se.fromJSON=function(r){return new se(r)},se.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},se),{isClass:!0});var sB=2e3,Be={s:1,n:0,d:1};function Tn(r,e){if(isNaN(r=parseInt(r,10)))throw fs();return r*e}function Et(r,e){if(e===0)throw ec();var t=Object.create(Kt.prototype);t.s=r<0?-1:1,r=r<0?-r:r;var n=Zi(r,e);return t.n=r/n,t.d=e/n,t}function gh(r){for(var e={},t=r,n=2,i=4;i<=t;){for(;t%n===0;)t/=n,e[n]=(e[n]||0)+1;i+=1+2*n++}return t!==r?t>1&&(e[t]=(e[t]||0)+1):e[r]=(e[r]||0)+1,e}var Nr=function(r,e){var t=0,n=1,i=1,o=0,a=0,s=0,l=1,u=1,c=0,f=1,m=1,p=1,h=1e7,d;if(r!=null)if(e!==void 0){if(t=r,n=e,i=t*n,t%1!==0||n%1!==0)throw fB()}else switch(typeof r){case"object":{if("d"in r&&"n"in r)t=r.n,n=r.d,"s"in r&&(t*=r.s);else if(0 in r)t=r[0],1 in r&&(n=r[1]);else throw fs();i=t*n;break}case"number":{if(r<0&&(i=r,r=-r),r%1===0)t=r;else if(r>0){for(r>=1&&(u=Math.pow(10,Math.floor(1+Math.log(r)/Math.LN10)),r/=u);f<=h&&p<=h;)if(d=(c+m)/(f+p),r===d){f+p<=h?(t=c+m,n=f+p):p>f?(t=m,n=p):(t=c,n=f);break}else r>d?(c+=m,f+=p):(m+=c,p+=f),f>h?(t=m,n=p):(t=c,n=f);t*=u}else(isNaN(r)||isNaN(e))&&(n=t=NaN);break}case"string":{if(f=r.match(/\d+|./g),f===null)throw fs();if(f[c]==="-"?(i=-1,c++):f[c]==="+"&&c++,f.length===c+1?a=Tn(f[c++],i):f[c+1]==="."||f[c]==="."?(f[c]!=="."&&(o=Tn(f[c++],i)),c++,(c+1===f.length||f[c+1]==="("&&f[c+3]===")"||f[c+1]==="'"&&f[c+3]==="'")&&(a=Tn(f[c],i),l=Math.pow(10,f[c].length),c++),(f[c]==="("&&f[c+2]===")"||f[c]==="'"&&f[c+2]==="'")&&(s=Tn(f[c+1],i),u=Math.pow(10,f[c+1].length)-1,c+=3)):f[c+1]==="/"||f[c+1]===":"?(a=Tn(f[c],i),l=Tn(f[c+2],1),c+=3):f[c+3]==="/"&&f[c+1]===" "&&(o=Tn(f[c],i),a=Tn(f[c+2],i),l=Tn(f[c+4],1),c+=5),f.length<=c){n=l*u,i=t=s+n*o+u*a;break}}default:throw fs()}if(n===0)throw ec();Be.s=i<0?-1:1,Be.n=Math.abs(t),Be.d=Math.abs(n)};function lB(r,e,t){for(var n=1;e>0;r=r*r%t,e>>=1)e&1&&(n=n*r%t);return n}function uB(r,e){for(;e%2===0;e/=2);for(;e%5===0;e/=5);if(e===1)return 0;for(var t=10%e,n=1;t!==1;n++)if(t=t*10%e,n>sB)return 0;return n}function cB(r,e,t){for(var n=1,i=lB(10,t,e),o=0;o<300;o++){if(n===i)return o;n=n*10%e,i=i*10%e}return 0}function Zi(r,e){if(!r)return e;if(!e)return r;for(;;){if(r%=e,!r)return e;if(e%=r,!e)return r}}function Kt(r,e){if(Nr(r,e),this instanceof Kt)r=Zi(Be.d,Be.n),this.s=Be.s,this.n=Be.n/r,this.d=Be.d/r;else return Et(Be.s*Be.n,Be.d)}var ec=function(){return new Error("Division by Zero")},fs=function(){return new Error("Invalid argument")},fB=function(){return new Error("Parameters must be integer")};Kt.prototype={s:1,n:0,d:1,abs:function(){return Et(this.n,this.d)},neg:function(){return Et(-this.s*this.n,this.d)},add:function(r,e){return Nr(r,e),Et(this.s*this.n*Be.d+Be.s*this.d*Be.n,this.d*Be.d)},sub:function(r,e){return Nr(r,e),Et(this.s*this.n*Be.d-Be.s*this.d*Be.n,this.d*Be.d)},mul:function(r,e){return Nr(r,e),Et(this.s*Be.s*this.n*Be.n,this.d*Be.d)},div:function(r,e){return Nr(r,e),Et(this.s*Be.s*this.n*Be.d,this.d*Be.n)},clone:function(){return Et(this.s*this.n,this.d)},mod:function(r,e){if(isNaN(this.n)||isNaN(this.d))return new Kt(NaN);if(r===void 0)return Et(this.s*this.n%this.d,1);if(Nr(r,e),Be.n===0&&this.d===0)throw ec();return Et(this.s*(Be.d*this.n)%(Be.n*this.d),Be.d*this.d)},gcd:function(r,e){return Nr(r,e),Et(Zi(Be.n,this.n)*Zi(Be.d,this.d),Be.d*this.d)},lcm:function(r,e){return Nr(r,e),Be.n===0&&this.n===0?Et(0,1):Et(Be.n*this.n,Zi(Be.n,this.n)*Zi(Be.d,this.d))},ceil:function(r){return r=Math.pow(10,r||0),isNaN(this.n)||isNaN(this.d)?new Kt(NaN):Et(Math.ceil(r*this.s*this.n/this.d),r)},floor:function(r){return r=Math.pow(10,r||0),isNaN(this.n)||isNaN(this.d)?new Kt(NaN):Et(Math.floor(r*this.s*this.n/this.d),r)},round:function(r){return r=Math.pow(10,r||0),isNaN(this.n)||isNaN(this.d)?new Kt(NaN):Et(Math.round(r*this.s*this.n/this.d),r)},roundTo:function(r,e){return Nr(r,e),Et(this.s*Math.round(this.n*Be.d/(this.d*Be.n))*Be.n,Be.d)},inverse:function(){return Et(this.s*this.d,this.n)},pow:function(r,e){if(Nr(r,e),Be.d===1)return Be.s<0?Et(Math.pow(this.s*this.d,Be.n),Math.pow(this.n,Be.n)):Et(Math.pow(this.s*this.n,Be.n),Math.pow(this.d,Be.n));if(this.s<0)return null;var t=gh(this.n),n=gh(this.d),i=1,o=1;for(var a in t)if(a!=="1"){if(a==="0"){i=0;break}if(t[a]*=Be.n,t[a]%Be.d===0)t[a]/=Be.d;else return null;i*=Math.pow(a,t[a])}for(var a in n)if(a!=="1"){if(n[a]*=Be.n,n[a]%Be.d===0)n[a]/=Be.d;else return null;o*=Math.pow(a,n[a])}return Be.s<0?Et(o,i):Et(i,o)},equals:function(r,e){return Nr(r,e),this.s*this.n*Be.d===Be.s*Be.n*this.d},compare:function(r,e){Nr(r,e);var t=this.s*this.n*Be.d-Be.s*Be.n*this.d;return(0<t)-(t<0)},simplify:function(r){if(isNaN(this.n)||isNaN(this.d))return this;r=r||.001;for(var e=this.abs(),t=e.toContinued(),n=1;n<t.length;n++){for(var i=Et(t[n-1],1),o=n-2;o>=0;o--)i=i.inverse().add(t[o]);if(Math.abs(i.sub(e).valueOf())<r)return i.mul(this.s)}return this},divisible:function(r,e){return Nr(r,e),!(!(Be.n*this.d)||this.n*Be.d%(Be.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(r){var e,t="",n=this.n,i=this.d;return this.s<0&&(t+="-"),i===1?t+=n:(r&&(e=Math.floor(n/i))>0&&(t+=e,t+=" ",n%=i),t+=n,t+="/",t+=i),t},toLatex:function(r){var e,t="",n=this.n,i=this.d;return this.s<0&&(t+="-"),i===1?t+=n:(r&&(e=Math.floor(n/i))>0&&(t+=e,n%=i),t+="\\frac{",t+=n,t+="}{",t+=i,t+="}"),t},toContinued:function(){var r,e=this.n,t=this.d,n=[];if(isNaN(e)||isNaN(t))return n;do n.push(Math.floor(e/t)),r=e%t,e=t,t=r;while(e!==1);return n},toString:function(r){var e=this.n,t=this.d;if(isNaN(e)||isNaN(t))return"NaN";r=r||15;var n=uB(e,t),i=cB(e,t,n),o=this.s<0?"-":"";if(o+=e/t|0,e%=t,e*=10,e&&(o+="."),n){for(var a=i;a--;)o+=e/t|0,e%=t,e*=10;o+="(";for(var a=n;a--;)o+=e/t|0,e%=t,e*=10;o+=")"}else for(var a=r;e&&a--;)o+=e/t|0,e%=t,e*=10;return o}};var mB="Fraction",pB=[],vh=N(mB,pB,()=>(Object.defineProperty(Kt,"name",{value:"Fraction"}),Kt.prototype.constructor=Kt,Kt.prototype.type="Fraction",Kt.prototype.isFraction=!0,Kt.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Kt.fromJSON=function(r){return new Kt(r)},Kt),{isClass:!0});var hB="Range",dB=[],yh=N(hB,dB,()=>{function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,o=t!=null,a=n!=null;if(i){if(Ne(e))e=e.toNumber();else if(typeof e!="number")throw new TypeError("Parameter start must be a number")}if(o){if(Ne(t))t=t.toNumber();else if(typeof t!="number")throw new TypeError("Parameter end must be a number")}if(a){if(Ne(n))n=n.toNumber();else if(typeof n!="number")throw new TypeError("Parameter step must be a number")}this.start=i?parseFloat(e):0,this.end=o?parseFloat(t):0,this.step=a?parseFloat(n):1}return r.prototype.type="Range",r.prototype.isRange=!0,r.parse=function(e){if(typeof e!="string")return null;var t=e.split(":"),n=t.map(function(o){return parseFloat(o)}),i=n.some(function(o){return isNaN(o)});if(i)return null;switch(n.length){case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[2],n[1]);default:return null}},r.prototype.clone=function(){return new r(this.start,this.end,this.step)},r.prototype.size=function(){var e=0,t=this.start,n=this.step,i=this.end,o=i-t;return Pr(n)===Pr(o)?e=Math.ceil(o/n):o===0&&(e=0),isNaN(e)&&(e=0),[e]},r.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},r.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},r.prototype.forEach=function(e){var t=this.start,n=this.step,i=this.end,o=0;if(n>0)for(;t<i;)e(t,[o],this),t+=n,o++;else if(n<0)for(;t>i;)e(t,[o],this),t+=n,o++},r.prototype.map=function(e){var t=[];return this.forEach(function(n,i,o){t[i[0]]=e(n,i,o)}),t},r.prototype.toArray=function(){var e=[];return this.forEach(function(t,n){e[n[0]]=t}),e},r.prototype.valueOf=function(){return this.toArray()},r.prototype.format=function(e){var t=Xr(this.start,e);return this.step!==1&&(t+=":"+Xr(this.step,e)),t+=":"+Xr(this.end,e),t},r.prototype.toString=function(){return this.format()},r.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},r.fromJSON=function(e){return new r(e.start,e.end,e.step)},r},{isClass:!0});var gB="Matrix",vB=[],xh=N(gB,vB,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0});function tc(r,e,t){var n=r.constructor,i=new n(2),o="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!xe(t))throw new Error("size must be an integer");if(r.greaterThan(i.pow(t-1).sub(1))||r.lessThan(i.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(i.pow(t))),o="i".concat(t)}switch(e){case 2:return"".concat(r.toBinary()).concat(o);case 8:return"".concat(r.toOctal()).concat(o);case 16:return"".concat(r.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(e," not supported "))}}function Dh(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var{notation:t,precision:n,wordSize:i}=$u(e);switch(t){case"fixed":return xB(r,n);case"exponential":return bh(r,n);case"engineering":return yB(r,n);case"bin":return tc(r,2,i);case"oct":return tc(r,8,i);case"hex":return tc(r,16,i);case"auto":{var o=wh(e?.lowerExp,-3),a=wh(e?.upperExp,5);if(r.isZero())return"0";var s,l=r.toSignificantDigits(n),u=l.e;return u>=o&&u<a?s=l.toFixed():s=bh(r,n),s.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function yB(r,e){var t=r.e,n=t%3===0?t:t<0?t-3-t%3:t-t%3,i=r.mul(Math.pow(10,-n)),o=i.toPrecision(e);if(o.includes("e")){var a=r.constructor;o=new a(o).toFixed()}return o+"e"+(t>=0?"+":"")+n.toString()}function bh(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function xB(r,e){return r.toFixed(e)}function wh(r,e){return Fe(r)?r:Ne(r)?r.toNumber():e}function Ah(r,e){var t=r.length-e.length,n=r.length;return r.substring(t,n)===e}function _e(r,e){var t=bB(r,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function bB(r,e){if(typeof r=="number")return Xr(r,e);if(Ne(r))return Dh(r,e);if(wB(r))return!e||e.fraction!=="decimal"?r.s*r.n+"/"+r.d:r.toString();if(Array.isArray(r))return Nh(r,e);if(bt(r))return di(r);if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var t=Object.keys(r).map(n=>di(n)+": "+_e(r[n],e));return"{"+t.join(", ")+"}"}return String(r)}function di(r){for(var e=String(r),t="",n=0;n<e.length;){var i=e.charAt(n);t+=i in Sh?Sh[i]:i,n++}return'"'+t+'"'}var Sh={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function $t(r){var e=String(r);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function Nh(r,e){if(Array.isArray(r)){for(var t="[",n=r.length,i=0;i<n;i++)i!==0&&(t+=", "),t+=Nh(r[i],e);return t+="]",t}else return _e(r,e)}function wB(r){return r&&typeof r=="object"&&typeof r.s=="number"&&typeof r.n=="number"&&typeof r.d=="number"||!1}function ms(r,e){if(!bt(r))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Ye(r)+", index: 0)");if(!bt(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Ye(e)+", index: 1)");return r===e?0:r>e?1:-1}function ke(r,e,t){if(!(this instanceof ke))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}ke.prototype=new RangeError;ke.prototype.constructor=RangeError;ke.prototype.name="DimensionError";ke.prototype.isDimensionError=!0;function Wt(r,e,t){if(!(this instanceof Wt))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Wt.prototype=new RangeError;Wt.prototype.constructor=RangeError;Wt.prototype.name="IndexError";Wt.prototype.isIndexError=!0;function Me(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function Ch(r,e,t){var n,i=r.length;if(i!==e[t])throw new ke(i,e[t]);if(t<e.length-1){var o=t+1;for(n=0;n<i;n++){var a=r[n];if(!Array.isArray(a))throw new ke(e.length-1,e.length,"<");Ch(r[n],e,o)}}else for(n=0;n<i;n++)if(Array.isArray(r[n]))throw new ke(e.length+1,e.length,">")}function nc(r,e){var t=e.length===0;if(t){if(Array.isArray(r))throw new ke(r.length,0)}else Ch(r,e,0)}function Lo(r,e){var t=r.isMatrix?r._size:Me(r),n=e._sourceSize;n.forEach((i,o)=>{if(i!==null&&i!==t[o])throw new ke(i,t[o])})}function at(r,e){if(r!==void 0){if(!Fe(r)||!xe(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new Wt(r,e)}}function gi(r){for(var e=0;e<r._dimensions.length;++e){var t=r._dimensions[e];if(t._data&&Ze(t._data)){if(t._size[0]===0)return!0}else if(t.isRange){if(t.start===t.end)return!0}else if(bt(t)&&t.length===0)return!0}return!1}function jr(r,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!Fe(i)||!xe(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+_e(e)+")")}),(Fe(r)||Ne(r))&&(r=[r]);var n=t!==void 0?t:0;return rc(r,e,0,n),r}function rc(r,e,t,n){var i,o,a=r.length,s=e[t],l=Math.min(a,s);if(r.length=s,t<e.length-1){var u=t+1;for(i=0;i<l;i++)o=r[i],Array.isArray(o)||(o=[o],r[i]=o),rc(o,e,u,n);for(i=l;i<s;i++)o=[],r[i]=o,rc(o,e,u,n)}else{for(i=0;i<l;i++)for(;Array.isArray(r[i]);)r[i]=r[i][0];for(i=l;i<s;i++)r[i]=n}}function zo(r,e){var t=qe(r),n=t.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new ke(0,n,"!=");e=qo(e,n);var i=Eh(e);if(n!==i)throw new ke(i,n,"!=");try{return DB(t,e)}catch(o){throw o instanceof ke?new ke(i,n,"!="):o}}function qo(r,e){var t=Eh(r),n=r.slice(),i=-1,o=r.indexOf(i),a=r.indexOf(i,o+1)>=0;if(a)throw new Error("More than one wildcard in sizes");var s=o>=0,l=e%t===0;if(s)if(l)n[o]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return n}function Eh(r){return r.reduce((e,t)=>e*t,1)}function DB(r,e){for(var t=r,n,i=e.length-1;i>0;i--){var o=e[i];n=[];for(var a=t.length/o,s=0;s<a;s++)n.push(t.slice(s*o,(s+1)*o));t=n}return t}function Xi(r,e){for(var t=e||Me(r);Array.isArray(r)&&r.length===1;)r=r[0],t.shift();for(var n=t.length;t[n-1]===1;)n--;return n<t.length&&(r=Mh(r,n,0),t.length=n),r}function Mh(r,e,t){var n,i;if(t<e){var o=t+1;for(n=0,i=r.length;n<i;n++)r[n]=Mh(r[n],e,o)}else for(;Array.isArray(r);)r=r[0];return r}function ps(r,e,t,n){var i=n||Me(r);if(t)for(var o=0;o<t;o++)r=[r],i.unshift(1);for(r=Th(r,e,0);i.length<e;)i.push(1);return r}function Th(r,e,t){var n,i;if(Array.isArray(r)){var o=t+1;for(n=0,i=r.length;n<i;n++)r[n]=Th(r[n],e,o)}else for(var a=t;a<e;a++)r=[r];return r}function qe(r){if(!Array.isArray(r))return r;var e=[];return r.forEach(function t(n){Array.isArray(n)?n.forEach(t):e.push(n)}),e}function Rr(r,e){return Array.prototype.map.call(r,e)}function hs(r,e){Array.prototype.forEach.call(r,e)}function Fh(r,e){if(Me(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,e)}function ic(r,e){if(Me(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,t=>e.test(t))}function oc(r,e){return Array.prototype.join.call(r,e)}function Fn(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;var e=[],t=0;e[0]={value:r[0],identifier:0};for(var n=1;n<r.length;n++)r[n]===r[n-1]?t++:t=0,e.push({value:r[n],identifier:t});return e}function Ji(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;for(var e=[],t=0;t<r.length;t++)e.push(r[t].value);return e}function vi(r,e){for(var t,n=0,i=0;i<r.length;i++){var o=r[i],a=Array.isArray(o);if(i===0&&a&&(n=o.length),a&&o.length!==n)return;var s=a?vi(o,e):e(o);if(t===void 0)t=s;else if(t!==s)return"mixed"}return t}function Oh(r,e,t,n){if(n<t){if(r.length!==e.length)throw new ke(r.length,e.length);for(var i=[],o=0;o<r.length;o++)i[o]=Oh(r[o],e[o],t,n+1);return i}else return r.concat(e)}function ac(){var r=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(r.length===1)return r[0];if(r.length>1)return r.slice(1).reduce(function(t,n){return Oh(t,n,e,0)},r[0]);throw new Error("Wrong number of arguments in function concat")}function Uo(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];for(var n=e.map(m=>m.length),i=Math.max(...n),o=new Array(i).fill(null),a=0;a<e.length;a++)for(var s=e[a],l=n[a],u=0;u<l;u++){var c=i-l+u;s[u]>o[c]&&(o[c]=s[u])}for(var f=0;f<e.length;f++)Bh(e[f],o);return o}function Bh(r,e){for(var t=e.length,n=r.length,i=0;i<n;i++){var o=t-n+i;if(r[i]<e[o]&&r[i]>1||r[i]>e[o])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(r,") not possible to broadcast dimension ").concat(n," with size ").concat(r[i]," to size ").concat(e[o]))}}function mn(r,e){var t=Me(r);if(gr(t,e))return r;Bh(t,e);var n=Uo(t,e),i=n.length,o=[...Array(i-t.length).fill(1),...t],a=AB(r);t.length<i&&(a=zo(a,o),t=Me(a));for(var s=0;s<i;s++)t[s]<n[s]&&(a=SB(a,n[s],s),t=Me(a));return a}function SB(r,e,t){return ac(...Array(e).fill(r),t)}function ji(r,e){if(!Array.isArray(r))throw new Error("Array expected");var t=Me(r);if(e.length!==t.length)throw new ke(e.length,t.length);for(var n=0;n<e.length;n++)at(e[n],t[n]);return e.reduce((i,o)=>i[o],r)}function Vo(r,e,t,n){return Array.isArray(r)?r.map(function(i,o){return Vo(i,e.concat(o),t,n)}):n(r,e,t)}function AB(r){return Mt([],r)}var sc=fi(Za(),1);function Lr(r,e,t){if(sc.default.isTypedFunction(r)){var n=(e.isMatrix?e.size():Me(e)).map(()=>0),i=e.isMatrix?e.get(n):ji(e,n),o=Object.keys(r.signatures).length===1,a=NB(r,i,n,e),s=o?Object.values(r.signatures)[0]:r;return a>=1&&a<=3?function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return _h(s,u.slice(0,a),t,r.name)}:function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return _h(s,u,t,r.name)}}return r}function NB(r,e,t,n){for(var i=[e,t,n],o=3;o>0;o--){var a=i.slice(0,o);if(sc.default.resolve(r,a)!==null)return o}}function _h(r,e,t,n){try{return r(...e)}catch(i){CB(i,e,t,n)}}function CB(r,e,t,n){var i;if(r instanceof TypeError&&((i=r.data)===null||i===void 0?void 0:i.category)==="wrongType"){var o=[];throw o.push("value: ".concat(Ye(e[0]))),e.length>=2&&o.push("index: ".concat(Ye(e[1]))),e.length>=3&&o.push("array: ".concat(Ye(e[2]))),new TypeError("Function ".concat(t," cannot apply callback arguments ")+"".concat(n,"(").concat(o.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(t," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(r.message))}var EB="DenseMatrix",MB=["Matrix"],kh=N(EB,MB,r=>{var{Matrix:e}=r;function t(c,f){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!bt(f))throw new Error("Invalid datatype: "+f);if(we(c))c.type==="DenseMatrix"?(this._data=Ee(c._data),this._size=Ee(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&Ze(c.data)&&Ze(c.size))this._data=c.data,this._size=c.size,nc(this._data,this._size),this._datatype=f||c.datatype;else if(Ze(c))this._data=u(c),this._size=Me(this._data),nc(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+Ye(c)+")");this._data=[],this._size=[0],this._datatype=f}}t.prototype=new e,t.prototype.createDenseMatrix=function(c,f){return new t(c,f)},Object.defineProperty(t,"name",{value:"DenseMatrix"}),t.prototype.constructor=t,t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return vi(this._data,Ye)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(c,f){return new t(c,f)},t.prototype.subset=function(c,f,m){switch(arguments.length){case 1:return n(this,c);case 2:case 3:return o(this,c,f,m);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(c){return ji(this._data,c)},t.prototype.set=function(c,f,m){if(!Ze(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new ke(c.length,this._size.length,"<");var p,h,d,v=c.map(function(D){return D+1});l(this,v,m);var x=this._data;for(p=0,h=c.length-1;p<h;p++)d=c[p],at(d,x.length),x=x[d];return d=c[c.length-1],at(d,x.length),x[d]=f,this};function n(c,f){if(!ln(f))throw new TypeError("Invalid index");var m=f.isScalar();if(m)return c.get(f.min());var p=f.size();if(p.length!==c._size.length)throw new ke(p.length,c._size.length);for(var h=f.min(),d=f.max(),v=0,x=c._size.length;v<x;v++)at(h[v],c._size[v]),at(d[v],c._size[v]);return new t(i(c._data,f,p.length,0),c._datatype)}function i(c,f,m,p){var h=p===m-1,d=f.dimension(p);return h?d.map(function(v){return at(v,c.length),c[v]}).valueOf():d.map(function(v){at(v,c.length);var x=c[v];return i(x,f,m,p+1)}).valueOf()}function o(c,f,m,p){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var h=f.size(),d=f.isScalar(),v;if(we(m)?(v=m.size(),m=m.valueOf()):v=Me(m),d){if(v.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),m,p)}else{if(!gr(v,h))try{v.length===0?m=mn([m],h):m=mn(m,h),v=Me(m)}catch{}if(h.length<c._size.length)throw new ke(h.length,c._size.length,"<");if(v.length<h.length){for(var x=0,D=0;h[x]===1&&v[x]===1;)x++;for(;h[x]===1;)D++,x++;m=ps(m,h.length,D,v)}if(!gr(h,v))throw new ke(h,v,">");var g=f.max().map(function(y){return y+1});l(c,g,p);var w=h.length,b=0;a(c._data,f,m,w,b)}return c}function a(c,f,m,p,h){var d=h===p-1,v=f.dimension(h);d?v.forEach(function(x,D){at(x),c[x]=m[D[0]]}):v.forEach(function(x,D){at(x),a(c[x],f,m[D[0]],p,h+1)})}t.prototype.resize=function(c,f,m){if(!Dt(c))throw new TypeError("Array or Matrix expected");var p=c.valueOf().map(d=>Array.isArray(d)&&d.length===1?d[0]:d),h=m?this.clone():this;return s(h,p,f)};function s(c,f,m){if(f.length===0){for(var p=c._data;Ze(p);)p=p[0];return p}return c._size=f.slice(0),c._data=jr(c._data,c._size,m),c}t.prototype.reshape=function(c,f){var m=f?this.clone():this;m._data=zo(m._data,c);var p=m._size.reduce((h,d)=>h*d);return m._size=qo(c,p),m};function l(c,f,m){for(var p=c._size.slice(0),h=!1;p.length<f.length;)p.push(0),h=!0;for(var d=0,v=f.length;d<v;d++)f[d]>p[d]&&(p[d]=f[d],h=!0);h&&s(c,p,m)}t.prototype.clone=function(){var c=new t({data:Ee(this._data),size:Ee(this._size),datatype:this._datatype});return c},t.prototype.size=function(){return this._size.slice(0)},t.prototype._forEach=function(c){var f=this,m=f.size();if(m.length===1){for(var p=0;p<m[0];p++)c(f._data,p,[p]);return}var h=Array(m.length).fill(0),d=Array(m.length-1),v=d.length-1;d[0]=f._data[0];for(var x=0;x<v;x++)d[x+1]=d[x][0];for(h[v]=-1;;){var D=void 0;for(D=v;D>=0;D--){if(h[D]++,h[D]===m[D]){h[D]=0;continue}d[D]=D===0?f._data[h[D]]:d[D-1][h[D]];for(var g=D;g<v;g++)d[g+1]=d[g][0];for(var w=0;w<m[d.length];w++)h[d.length]=w,c(d[v],w,h.slice(0));break}if(D===-1)break}},t.prototype.map=function(c){var f=this,m=new t(f),p=Lr(c,f._data,"map");return m._forEach(function(h,d,v){h[d]=p(h[d],v,f)}),m},t.prototype.forEach=function(c){var f=this,m=Lr(c,f._data,"map");f._forEach(function(p,h,d){m(p[h],d,f)})},t.prototype[Symbol.iterator]=function*(){var c=function*(m,p){if(Ze(m))for(var h=0;h<m.length;h++)yield*c(m[h],p.concat(h));else yield{value:m,index:p}};yield*c(this._data,[])},t.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var m=this._data;for(var p of m)c.push(new t([p],this._datatype));return c},t.prototype.columns=function(){var c=this,f=[],m=this.size();if(m.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var p=this._data,h=function(x){var D=p.map(g=>[g[x]]);f.push(new t(D,c._datatype))},d=0;d<m[1];d++)h(d);return f},t.prototype.toArray=function(){return Ee(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(c){return _e(this._data,c)},t.prototype.toString=function(){return _e(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(c){if(c){if(Ne(c)&&(c=c.toNumber()),!Fe(c)||!xe(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,m=c<0?-c:0,p=this._size[0],h=this._size[1],d=Math.min(p-m,h-f),v=[],x=0;x<d;x++)v[x]=this._data[x+m][x+f];return new t({data:v,size:[d],datatype:this._datatype})},t.diagonal=function(c,f,m,p){if(!Ze(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(S){if(Ne(S)&&(S=S.toNumber()),!Fe(S)||!xe(S)||S<1)throw new Error("Size values must be positive integers");return S}),m){if(Ne(m)&&(m=m.toNumber()),!Fe(m)||!xe(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var h=m>0?m:0,d=m<0?-m:0,v=c[0],x=c[1],D=Math.min(v-d,x-h),g;if(Ze(f)){if(f.length!==D)throw new Error("Invalid value array length");g=function(C){return f[C]}}else if(we(f)){var w=f.size();if(w.length!==1||w[0]!==D)throw new Error("Invalid matrix length");g=function(C){return f.get([C])}}else g=function(){return f};p||(p=Ne(g(0))?g(0).mul(0):0);var b=[];if(c.length>0){b=jr(b,c,p);for(var y=0;y<D;y++)b[y+d][y+h]=g(y)}return new t({data:b,size:[v,x]})},t.fromJSON=function(c){return new t(c)},t.prototype.swapRows=function(c,f){if(!Fe(c)||!xe(c)||!Fe(f)||!xe(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return at(c,this._size[0]),at(f,this._size[0]),t._swapRows(c,f,this._data),this},t._swapRows=function(c,f,m){var p=m[c];m[c]=m[f],m[f]=p};function u(c){return we(c)?u(c.valueOf()):Ze(c)?c.map(u):c}return t},{isClass:!0});var Ph="clone",TB=["typed"],Ih=N(Ph,TB,r=>{var{typed:e}=r;return e(Ph,{any:Ee})});function ds(r){var e=r.length,t=r[0].length,n,i,o=[];for(i=0;i<t;i++){var a=[];for(n=0;n<e;n++)a.push(r[n][i]);o.push(a)}return o}function zr(r){for(var e=0;e<r.length;e++)if(Dt(r[e]))return!0;return!1}function rr(r,e){we(r)&&(r=r.valueOf());for(var t=0,n=r.length;t<n;t++){var i=r[t];Array.isArray(i)?rr(i,e):e(i)}}function De(r,e,t){return r&&typeof r.map=="function"?r.map(function(n){return De(n,e,t)}):e(r)}function Kn(r,e,t){var n=Array.isArray(r)?Me(r):r.size();if(e<0||e>=n.length)throw new Wt(e,n.length);return we(r)?r.create(gs(r.valueOf(),e,t),r.datatype()):gs(r,e,t)}function gs(r,e,t){var n,i,o,a;if(e<=0)if(Array.isArray(r[0])){for(a=ds(r),i=[],n=0;n<a.length;n++)i[n]=gs(a[n],e-1,t);return i}else{for(o=r[0],n=1;n<r.length;n++)o=t(o,r[n]);return o}else{for(i=[],n=0;n<r.length;n++)i[n]=gs(r[n],e-1,t);return i}}function lc(r,e,t,n,i,o,a,s,l,u,c){var f=r._values,m=r._index,p=r._ptr,h,d,v,x;if(n)for(d=p[e],v=p[e+1],h=d;h<v;h++)x=m[h],t[x]!==o?(t[x]=o,a.push(x),u?(n[x]=l?s(f[h],c):s(c,f[h]),i[x]=o):n[x]=f[h]):(n[x]=l?s(f[h],n[x]):s(n[x],f[h]),i[x]=o);else for(d=p[e],v=p[e+1],h=d;h<v;h++)x=m[h],t[x]!==o?(t[x]=o,a.push(x)):i[x]=o}var Rh="isInteger",FB=["typed"],Lh=N(Rh,FB,r=>{var{typed:e}=r;return e(Rh,{number:xe,BigNumber:function(n){return n.isInt()},bigint:function(n){return!0},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":e.referToSelf(t=>n=>De(n,t))})});var yr="number",On="number, number";function uc(r){return Math.abs(r)}uc.signature=yr;function cc(r,e){return r+e}cc.signature=On;function fc(r,e){return r-e}fc.signature=On;function mc(r,e){return r*e}mc.signature=On;function OB(r,e){return r/e}OB.signature=On;function pc(r){return-r}pc.signature=yr;function hc(r){return r}hc.signature=yr;function Qi(r){return Vp(r)}Qi.signature=yr;function dc(r){return r*r*r}dc.signature=yr;function gc(r){return Math.exp(r)}gc.signature=yr;function vc(r){return Hp(r)}vc.signature=yr;function BB(r,e){if(!xe(r)||!xe(e))throw new Error("Parameters in function gcd must be integer numbers");for(var t;e!==0;)t=r%e,r=e,e=t;return r<0?-r:r}BB.signature=On;function yc(r,e){if(!xe(r)||!xe(e))throw new Error("Parameters in function lcm must be integer numbers");if(r===0||e===0)return 0;for(var t,n=r*e;e!==0;)t=e,e=r%t,r=t;return Math.abs(n/r)}yc.signature=On;function zh(r,e){return e?Math.log(r)/Math.log(e):Math.log(r)}function xc(r){return Up(r)}xc.signature=yr;function bc(r){return qp(r)}bc.signature=yr;function _B(r){return Xa(r)}_B.signature=yr;function kB(r,e){return e===0?r:r-e*Math.floor(r/e)}kB.signature=On;function wc(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,t=e<0;if(t&&(e=-e),e===0)throw new Error("Root must be non-zero");if(r<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(r===0)return t?1/0:0;if(!isFinite(r))return t?0:r;var n=Math.pow(Math.abs(r),1/e);return n=r<0?-n:n,t?1/n:n}function vs(r){return Pr(r)}vs.signature=yr;function PB(r){return Math.sqrt(r)}PB.signature=yr;function Dc(r){return r*r}Dc.signature=yr;function Sc(r,e){var t,n,i,o=0,a=1,s=1,l=0;if(!xe(r)||!xe(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(r/e),i=r-n*e,t=o,o=a-n*o,a=t,t=s,s=l-n*s,l=t,r=e,e=i;var u;return r<0?u=[-r,-a,-l]:u=[r,r?a:0,l],u}Sc.signature=On;function Ac(r,e){return r*r<1&&e===1/0||r*r>1&&e===-1/0?0:Math.pow(r,e)}Ac.signature=On;function eo(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!xe(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(Wu(r,e))}function IB(r){return Math.abs(r)}IB.signature=yr;var RB="number",to="number, number";function Nc(r,e){if(!xe(r)||!xe(e))throw new Error("Integers expected in function bitAnd");return r&e}Nc.signature=to;function Cc(r){if(!xe(r))throw new Error("Integer expected in function bitNot");return~r}Cc.signature=RB;function Ec(r,e){if(!xe(r)||!xe(e))throw new Error("Integers expected in function bitOr");return r|e}Ec.signature=to;function Mc(r,e){if(!xe(r)||!xe(e))throw new Error("Integers expected in function bitXor");return r^e}Mc.signature=to;function Tc(r,e){if(!xe(r)||!xe(e))throw new Error("Integers expected in function leftShift");return r<<e}Tc.signature=to;function Fc(r,e){if(!xe(r)||!xe(e))throw new Error("Integers expected in function rightArithShift");return r>>e}Fc.signature=to;function Oc(r,e){if(!xe(r)||!xe(e))throw new Error("Integers expected in function rightLogShift");return r>>>e}Oc.signature=to;function Cr(r,e){if(e<r)return 1;if(e===r)return e;var t=e+r>>1;return Cr(r,t)*Cr(t+1,e)}function Bc(r,e){if(!xe(r)||r<0)throw new TypeError("Positive integer value expected in function combinations");if(!xe(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>r)throw new TypeError("k must be less than or equal to n");for(var t=r-e,n=1,i=e<t?t+1:e+1,o=2,a=e<t?e:t,s=i;s<=r;++s)for(n*=s;o<=a&&n%o===0;)n/=o,++o;return o<=a&&(n/=Cr(o,a)),n}Bc.signature="number, number";var qh=Math.PI,Uh=2*Math.PI,Vh=Math.E,Hh=1.618033988749895;var LB="number",_c="number, number";function kc(r){return!r}kc.signature=LB;function ys(r,e){return!!(r||e)}ys.signature=_c;function xs(r,e){return!!r!=!!e}xs.signature=_c;function bs(r,e){return!!(r&&e)}bs.signature=_c;function Ho(r){var e;if(xe(r))return r<=0?isFinite(r)?1/0:NaN:r>171?1/0:Cr(1,r-1);if(r<.5)return Math.PI/(Math.sin(Math.PI*r)*Ho(1-r));if(r>=171.35)return 1/0;if(r>85){var t=r*r,n=t*r,i=n*r,o=i*r;return Math.sqrt(2*Math.PI/r)*Math.pow(r/Math.E,r)*(1+1/(12*r)+1/(288*t)-139/(51840*n)-571/(2488320*i)+163879/(209018880*o)+5246819/(75246796800*o*r))}--r,e=yi[0];for(var a=1;a<yi.length;++a)e+=yi[a]/(r+a);var s=r+Pc+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,r+.5)*Math.exp(-s)*e}Ho.signature="number";var Pc=4.7421875,yi=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Ic=.9189385332046728,zB=5,qB=7,$h=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function $o(r){if(r<0)return NaN;if(r===0)return 1/0;if(!isFinite(r))return r;if(r<.5)return Math.log(Math.PI/Math.sin(Math.PI*r))-$o(1-r);r=r-1;for(var e=r+zB+.5,t=$h[0],n=qB-1;n>=1;n--)t+=$h[n]/(r+n);return Ic+(r+.5)*Math.log(e)-e+Math.log(t)}$o.signature="number";var Nt="number",UB="number, number";function VB(r){return Math.acos(r)}VB.signature=Nt;function Rc(r){return Gp(r)}Rc.signature=Nt;function Lc(r){return Math.atan(1/r)}Lc.signature=Nt;function zc(r){return isFinite(r)?(Math.log((r+1)/r)+Math.log(r/(r-1)))/2:0}zc.signature=Nt;function qc(r){return Math.asin(1/r)}qc.signature=Nt;function Uc(r){var e=1/r;return Math.log(e+Math.sqrt(e*e+1))}Uc.signature=Nt;function Vc(r){return Math.acos(1/r)}Vc.signature=Nt;function Hc(r){var e=1/r,t=Math.sqrt(e*e-1);return Math.log(t+e)}Hc.signature=Nt;function HB(r){return Math.asin(r)}HB.signature=Nt;function $c(r){return Kp(r)}$c.signature=Nt;function $B(r){return Math.atan(r)}$B.signature=Nt;function WB(r,e){return Math.atan2(r,e)}WB.signature=UB;function Wc(r){return Yp(r)}Wc.signature=Nt;function GB(r){return Math.cos(r)}GB.signature=Nt;function KB(r){return ja(r)}KB.signature=Nt;function Gc(r){return 1/Math.tan(r)}Gc.signature=Nt;function Kc(r){var e=Math.exp(2*r);return(e+1)/(e-1)}Kc.signature=Nt;function Yc(r){return 1/Math.sin(r)}Yc.signature=Nt;function Zc(r){return r===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(r)-Math.exp(-r)))*Pr(r)}Zc.signature=Nt;function Xc(r){return 1/Math.cos(r)}Xc.signature=Nt;function Jc(r){return 2/(Math.exp(r)+Math.exp(-r))}Jc.signature=Nt;function YB(r){return Math.sin(r)}YB.signature=Nt;function jc(r){return Zp(r)}jc.signature=Nt;function ZB(r){return Math.tan(r)}ZB.signature=Nt;function XB(r){return Qa(r)}XB.signature=Nt;var Wo="number";function JB(r){return xe(r)}JB.signature=Wo;function Qc(r){return r<0}Qc.signature=Wo;function ef(r){return r>0}ef.signature=Wo;function jB(r){return r===0}jB.signature=Wo;function tf(r){return Number.isNaN(r)}tf.signature=Wo;function St(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return r.isNaN()||e.isNaN()?!1:!r.isFinite()||!e.isFinite()?r.eq(e):r.eq(e)?!0:r.minus(e).abs().lte(r.constructor.max(r.constructor.max(r.abs(),e.abs()).mul(t),n))}var Wh="isNegative",QB=["typed","config"],Gh=N(Wh,QB,r=>{var{typed:e,config:t}=r;return e(Wh,{number:n=>pt(n,0,t.relTol,t.absTol)?!1:Qc(n),BigNumber:n=>St(n,new n.constructor(0),t.relTol,t.absTol)?!1:n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n<0n,Fraction:n=>n.s<0,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>De(i,n))})});var Kh="isNumeric",e3=["typed"],Yh=N(Kh,e3,r=>{var{typed:e}=r;return e(Kh,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(t=>n=>De(n,t))})});var Zh="hasNumericValue",t3=["typed","isNumeric"],Xh=N(Zh,t3,r=>{var{typed:e,isNumeric:t}=r;return e(Zh,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return t(i)}})});var Jh="isPositive",r3=["typed","config"],jh=N(Jh,r3,r=>{var{typed:e,config:t}=r;return e(Jh,{number:n=>pt(n,0,t.relTol,t.absTol)?!1:ef(n),BigNumber:n=>St(n,new n.constructor(0),t.relTol,t.absTol)?!1:!n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n>0n,Fraction:n=>n.s>0&&n.n>0,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>De(i,n))})});var Qh="isZero",n3=["typed","equalScalar"],ed=N(Qh,n3,r=>{var{typed:e,equalScalar:t}=r;return e(Qh,{"number | BigNumber | Complex | Fraction":n=>t(n,0),bigint:n=>n===0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>De(i,n))})});var td="isNaN",i3=["typed"],rd=N(td,i3,r=>{var{typed:e}=r;return e(td,{number:tf,BigNumber:function(n){return n.isNaN()},bigint:function(n){return!1},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":e.referToSelf(t=>n=>De(n,t))})});var nd="typeOf",o3=["typed"],id=N(nd,o3,r=>{var{typed:e}=r;return e(nd,{any:Ye})});function od(r,e,t,n){return pt(r.re,e.re,t,n)&&pt(r.im,e.im,t,n)}var qr=N("compareUnits",["typed"],r=>{var{typed:e}=r;return{"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(t,[n.valueType(),i.valueType()])(n.value,i.value)})}});var ws="equalScalar",a3=["typed","config"],ad=N(ws,a3,r=>{var{typed:e,config:t}=r,n=qr({typed:e});return e(ws,{"boolean, boolean":function(o,a){return o===a},"number, number":function(o,a){return pt(o,a,t.relTol,t.absTol)},"BigNumber, BigNumber":function(o,a){return o.eq(a)||St(o,a,t.relTol,t.absTol)},"bigint, bigint":function(o,a){return o===a},"Fraction, Fraction":function(o,a){return o.equals(a)},"Complex, Complex":function(o,a){return od(o,a,t.relTol,t.absTol)}},n)}),hz=N(ws,["typed","config"],r=>{var{typed:e,config:t}=r;return e(ws,{"number, number":function(i,o){return pt(i,o,t.relTol,t.absTol)}})});var s3="SparseMatrix",l3=["typed","equalScalar","Matrix"],sd=N(s3,l3,r=>{var{typed:e,equalScalar:t,Matrix:n}=r;function i(d,v){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(v&&!bt(v))throw new Error("Invalid datatype: "+v);if(we(d))o(this,d,v);else if(d&&Ze(d.index)&&Ze(d.ptr)&&Ze(d.size))this._values=d.values,this._index=d.index,this._ptr=d.ptr,this._size=d.size,this._datatype=v||d.datatype;else if(Ze(d))a(this,d,v);else{if(d)throw new TypeError("Unsupported type of data ("+Ye(d)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=v}}function o(d,v,x){v.type==="SparseMatrix"?(d._values=v._values?Ee(v._values):void 0,d._index=Ee(v._index),d._ptr=Ee(v._ptr),d._size=Ee(v._size),d._datatype=x||v._datatype):a(d,v.valueOf(),x||v._datatype)}function a(d,v,x){d._values=[],d._index=[],d._ptr=[],d._datatype=x;var D=v.length,g=0,w=t,b=0;if(bt(x)&&(w=e.find(t,[x,x])||t,b=e.convert(0,x)),D>0){var y=0;do{d._ptr.push(d._index.length);for(var S=0;S<D;S++){var C=v[S];if(Ze(C)){if(y===0&&g<C.length&&(g=C.length),y<C.length){var A=C[y];w(A,b)||(d._values.push(A),d._index.push(S))}}else y===0&&g<1&&(g=1),w(C,b)||(d._values.push(C),d._index.push(S))}y++}while(y<g)}d._ptr.push(d._index.length),d._size=[D,g]}i.prototype=new n,i.prototype.createSparseMatrix=function(d,v){return new i(d,v)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return vi(this._values,Ye)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(d,v){return new i(d,v)},i.prototype.density=function(){var d=this._size[0],v=this._size[1];return d!==0&&v!==0?this._index.length/(d*v):0},i.prototype.subset=function(d,v,x){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,d);case 2:case 3:return l(this,d,v,x);default:throw new SyntaxError("Wrong number of arguments")}};function s(d,v){if(!ln(v))throw new TypeError("Invalid index");var x=v.isScalar();if(x)return d.get(v.min());var D=v.size();if(D.length!==d._size.length)throw new ke(D.length,d._size.length);var g,w,b,y,S=v.min(),C=v.max();for(g=0,w=d._size.length;g<w;g++)at(S[g],d._size[g]),at(C[g],d._size[g]);var A=d._values,E=d._index,M=d._ptr,F=v.dimension(0),k=v.dimension(1),I=[],P=[];F.forEach(function(_,K){P[_]=K[0],I[_]=!0});var B=A?[]:void 0,O=[],q=[];return k.forEach(function(_){for(q.push(O.length),b=M[_],y=M[_+1];b<y;b++)g=E[b],I[g]===!0&&(O.push(P[g]),B&&B.push(A[b]))}),q.push(O.length),new i({values:B,index:O,ptr:q,size:D,datatype:d._datatype})}function l(d,v,x,D){if(!v||v.isIndex!==!0)throw new TypeError("Invalid index");var g=v.size(),w=v.isScalar(),b;if(we(x)?(b=x.size(),x=x.toArray()):b=Me(x),w){if(b.length!==0)throw new TypeError("Scalar expected");d.set(v.min(),x,D)}else{if(g.length!==1&&g.length!==2)throw new ke(g.length,d._size.length,"<");if(b.length<g.length){for(var y=0,S=0;g[y]===1&&b[y]===1;)y++;for(;g[y]===1;)S++,y++;x=ps(x,g.length,S,b)}if(!gr(g,b))throw new ke(g,b,">");if(g.length===1){var C=v.dimension(0);C.forEach(function(M,F){at(M),d.set([M,0],x[F[0]],D)})}else{var A=v.dimension(0),E=v.dimension(1);A.forEach(function(M,F){at(M),E.forEach(function(k,I){at(k),d.set([M,k],x[F[0]][I[0]],D)})})}}return d}i.prototype.get=function(d){if(!Ze(d))throw new TypeError("Array expected");if(d.length!==this._size.length)throw new ke(d.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var v=d[0],x=d[1];at(v,this._size[0]),at(x,this._size[1]);var D=u(v,this._ptr[x],this._ptr[x+1],this._index);return D<this._ptr[x+1]&&this._index[D]===v?this._values[D]:0},i.prototype.set=function(d,v,x){if(!Ze(d))throw new TypeError("Array expected");if(d.length!==this._size.length)throw new ke(d.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var D=d[0],g=d[1],w=this._size[0],b=this._size[1],y=t,S=0;bt(this._datatype)&&(y=e.find(t,[this._datatype,this._datatype])||t,S=e.convert(0,this._datatype)),(D>w-1||g>b-1)&&(m(this,Math.max(D+1,w),Math.max(g+1,b),x),w=this._size[0],b=this._size[1]),at(D,w),at(g,b);var C=u(D,this._ptr[g],this._ptr[g+1],this._index);return C<this._ptr[g+1]&&this._index[C]===D?y(v,S)?c(C,g,this._values,this._index,this._ptr):this._values[C]=v:y(v,S)||f(C,D,g,v,this._values,this._index,this._ptr),this};function u(d,v,x,D){if(x-v===0)return x;for(var g=v;g<x;g++)if(D[g]===d)return g;return v}function c(d,v,x,D,g){x.splice(d,1),D.splice(d,1);for(var w=v+1;w<g.length;w++)g[w]--}function f(d,v,x,D,g,w,b){g.splice(d,0,D),w.splice(d,0,v);for(var y=x+1;y<b.length;y++)b[y]++}i.prototype.resize=function(d,v,x){if(!Dt(d))throw new TypeError("Array or Matrix expected");var D=d.valueOf().map(w=>Array.isArray(w)&&w.length===1?w[0]:w);if(D.length!==2)throw new Error("Only two dimensions matrix are supported");D.forEach(function(w){if(!Fe(w)||!xe(w)||w<0)throw new TypeError("Invalid size, must contain positive integers (size: "+_e(D)+")")});var g=x?this.clone():this;return m(g,D[0],D[1],v)};function m(d,v,x,D){var g=D||0,w=t,b=0;bt(d._datatype)&&(w=e.find(t,[d._datatype,d._datatype])||t,b=e.convert(0,d._datatype),g=e.convert(g,d._datatype));var y=!w(g,b),S=d._size[0],C=d._size[1],A,E,M;if(x>C){for(E=C;E<x;E++)if(d._ptr[E]=d._values.length,y)for(A=0;A<S;A++)d._values.push(g),d._index.push(A);d._ptr[x]=d._values.length}else x<C&&(d._ptr.splice(x+1,C-x),d._values.splice(d._ptr[x],d._values.length),d._index.splice(d._ptr[x],d._index.length));if(C=x,v>S){if(y){var F=0;for(E=0;E<C;E++){d._ptr[E]=d._ptr[E]+F,M=d._ptr[E+1]+F;var k=0;for(A=S;A<v;A++,k++)d._values.splice(M+k,0,g),d._index.splice(M+k,0,A),F++}d._ptr[C]=d._values.length}}else if(v<S){var I=0;for(E=0;E<C;E++){d._ptr[E]=d._ptr[E]-I;var P=d._ptr[E],B=d._ptr[E+1]-I;for(M=P;M<B;M++)A=d._index[M],A>v-1&&(d._values.splice(M,1),d._index.splice(M,1),I++)}d._ptr[E]=d._values.length}return d._size[0]=v,d._size[1]=x,d}i.prototype.reshape=function(d,v){if(!Ze(d))throw new TypeError("Array expected");if(d.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");d.forEach(function(_){if(!Fe(_)||!xe(_)||_<=-2||_===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+_e(d)+")")});var x=this._size[0]*this._size[1];d=qo(d,x);var D=d[0]*d[1];if(x!==D)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var g=v?this.clone():this;if(this._size[0]===d[0]&&this._size[1]===d[1])return g;for(var w=[],b=0;b<g._ptr.length;b++)for(var y=0;y<g._ptr[b+1]-g._ptr[b];y++)w.push(b);for(var S=g._values.slice(),C=g._index.slice(),A=0;A<g._index.length;A++){var E=C[A],M=w[A],F=E*g._size[1]+M;w[A]=F%d[1],C[A]=Math.floor(F/d[1])}g._values.length=0,g._index.length=0,g._ptr.length=d[1]+1,g._size=d.slice();for(var k=0;k<g._ptr.length;k++)g._ptr[k]=0;for(var I=0;I<S.length;I++){var P=C[I],B=w[I],O=S[I],q=u(P,g._ptr[B],g._ptr[B+1],g._index);f(q,P,B,O,g._values,g._index,g._ptr)}return g},i.prototype.clone=function(){var d=new i({values:this._values?Ee(this._values):void 0,index:Ee(this._index),ptr:Ee(this._ptr),size:Ee(this._size),datatype:this._datatype});return d},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(d,v){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var x=this,D=this._size[0],g=this._size[1],w=Lr(d,x,"map"),b=function(S,C,A){return w(S,[C,A],x)};return p(this,0,D-1,0,g-1,b,v)};function p(d,v,x,D,g,w,b){var y=[],S=[],C=[],A=t,E=0;bt(d._datatype)&&(A=e.find(t,[d._datatype,d._datatype])||t,E=e.convert(0,d._datatype));for(var M=function(R,X,ae){var j=w(R,X,ae);A(j,E)||(y.push(j),S.push(X))},F=D;F<=g;F++){C.push(y.length);var k=d._ptr[F],I=d._ptr[F+1];if(b)for(var P=k;P<I;P++){var B=d._index[P];B>=v&&B<=x&&M(d._values[P],B-v,F-D)}else{for(var O={},q=k;q<I;q++){var _=d._index[q];O[_]=d._values[q]}for(var K=v;K<=x;K++){var Z=K in O?O[K]:0;M(Z,K-v,F-D)}}}return C.push(y.length),new i({values:y,index:S,ptr:C,size:[x-v+1,g-D+1]})}i.prototype.forEach=function(d,v){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var x=this,D=this._size[0],g=this._size[1],w=Lr(d,x,"forEach"),b=0;b<g;b++){var y=this._ptr[b],S=this._ptr[b+1];if(v)for(var C=y;C<S;C++){var A=this._index[C];w(this._values[C],[A,b],x)}else{for(var E={},M=y;M<S;M++){var F=this._index[M];E[F]=this._values[M]}for(var k=0;k<D;k++){var I=k in E?E[k]:0;w(I,[k,b],x)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var d=this._size[1],v=0;v<d;v++)for(var x=this._ptr[v],D=this._ptr[v+1],g=x;g<D;g++){var w=this._index[g];yield{value:this._values[g],index:[w,v]}}},i.prototype.toArray=function(){return h(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return h(this._values,this._index,this._ptr,this._size,!1)};function h(d,v,x,D,g){var w=D[0],b=D[1],y=[],S,C;for(S=0;S<w;S++)for(y[S]=[],C=0;C<b;C++)y[S][C]=0;for(C=0;C<b;C++)for(var A=x[C],E=x[C+1],M=A;M<E;M++)S=v[M],y[S][C]=d?g?Ee(d[M]):d[M]:1;return y}return i.prototype.format=function(d){for(var v=this._size[0],x=this._size[1],D=this.density(),g="Sparse Matrix ["+_e(v,d)+" x "+_e(x,d)+"] density: "+_e(D,d)+`
`,w=0;w<x;w++)for(var b=this._ptr[w],y=this._ptr[w+1],S=b;S<y;S++){var C=this._index[S];g+=`
    (`+_e(C,d)+", "+_e(w,d)+") ==> "+(this._values?_e(this._values[S],d):"X")}return g},i.prototype.toString=function(){return _e(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(d){if(d){if(Ne(d)&&(d=d.toNumber()),!Fe(d)||!xe(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var v=d>0?d:0,x=d<0?-d:0,D=this._size[0],g=this._size[1],w=Math.min(D-x,g-v),b=[],y=[],S=[];S[0]=0;for(var C=v;C<g&&b.length<w;C++)for(var A=this._ptr[C],E=this._ptr[C+1],M=A;M<E;M++){var F=this._index[M];if(F===C-v+x){b.push(this._values[M]),y[b.length-1]=F-x;break}}return S.push(b.length),new i({values:b,index:y,ptr:S,size:[w,1]})},i.fromJSON=function(d){return new i(d)},i.diagonal=function(d,v,x,D,g){if(!Ze(d))throw new TypeError("Array expected, size parameter");if(d.length!==2)throw new Error("Only two dimensions matrix are supported");if(d=d.map(function(_){if(Ne(_)&&(_=_.toNumber()),!Fe(_)||!xe(_)||_<1)throw new Error("Size values must be positive integers");return _}),x){if(Ne(x)&&(x=x.toNumber()),!Fe(x)||!xe(x))throw new TypeError("The parameter k must be an integer number")}else x=0;var w=t,b=0;bt(g)&&(w=e.find(t,[g,g])||t,b=e.convert(0,g));var y=x>0?x:0,S=x<0?-x:0,C=d[0],A=d[1],E=Math.min(C-S,A-y),M;if(Ze(v)){if(v.length!==E)throw new Error("Invalid value array length");M=function(K){return v[K]}}else if(we(v)){var F=v.size();if(F.length!==1||F[0]!==E)throw new Error("Invalid matrix length");M=function(K){return v.get([K])}}else M=function(){return v};for(var k=[],I=[],P=[],B=0;B<A;B++){P.push(k.length);var O=B-y;if(O>=0&&O<E){var q=M(O);w(q,b)||(I.push(O+S),k.push(q))}}return P.push(k.length),new i({values:k,index:I,ptr:P,size:[C,A]})},i.prototype.swapRows=function(d,v){if(!Fe(d)||!xe(d)||!Fe(v)||!xe(v))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return at(d,this._size[0]),at(v,this._size[0]),i._swapRows(d,v,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(d,v,x,D,g){for(var w=D[d],b=D[d+1],y=w;y<b;y++)g(x[y],v[y])},i._swapRows=function(d,v,x,D,g,w){for(var b=0;b<x;b++){var y=w[b],S=w[b+1],C=u(d,y,S,g),A=u(v,y,S,g);if(C<S&&A<S&&g[C]===d&&g[A]===v){if(D){var E=D[C];D[C]=D[A],D[A]=E}continue}if(C<S&&g[C]===d&&(A>=S||g[A]!==v)){var M=D?D[C]:void 0;g.splice(A,0,v),D&&D.splice(A,0,M),g.splice(A<=C?C+1:C,1),D&&D.splice(A<=C?C+1:C,1);continue}if(A<S&&g[A]===v&&(C>=S||g[C]!==d)){var F=D?D[A]:void 0;g.splice(C,0,d),D&&D.splice(C,0,F),g.splice(C<=A?A+1:A,1),D&&D.splice(C<=A?A+1:A,1)}}},i},{isClass:!0});var u3="number",c3=["typed"];function f3(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:r,radix:t,integerPart:n,fractionalPart:i}}else return null}function m3(r){for(var e=parseInt(r.integerPart,r.radix),t=0,n=0;n<r.fractionalPart.length;n++){var i=parseInt(r.fractionalPart[n],r.radix);t+=i/Math.pow(r.radix,n+1)}var o=e+t;if(isNaN(o))throw new SyntaxError('String "'+r.input+'" is not a valid number');return o}var ld=N(u3,c3,r=>{var{typed:e}=r,t=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var o=f3(i);if(o)return m3(o);var a=0,s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);s&&(a=Number(s[2]),i=s[1]);var l=Number(i);if(isNaN(l))throw new SyntaxError('String "'+i+'" is not a valid number');if(s){if(l>2**a-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));l>=2**(a-1)&&(l=l-2**a)}return l},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(n=>i=>{var o=i.clone();return o.value=n(i.value),o}),null:function(i){return 0},"Unit, string | Unit":function(i,o){return i.toNumber(o)},"Array | Matrix":e.referToSelf(n=>i=>De(i,n))});return t.fromJSON=function(n){return parseFloat(n.value)},t});var p3="bigint",h3=["typed"],ud=N(p3,h3,r=>{var{typed:e}=r,t=e("bigint",{"":function(){return 0n},bigint:function(i){return i},number:function(i){return BigInt(i.toFixed())},BigNumber:function(i){return BigInt(i.round().toString())},Fraction:function(i){return BigInt(i.valueOf().toFixed())},"string | boolean":function(i){return BigInt(i)},null:function(i){return 0n},"Array | Matrix":e.referToSelf(n=>i=>De(i,n))});return t.fromJSON=function(n){return BigInt(n.value)},t});var cd="string",d3=["typed"],fd=N(cd,d3,r=>{var{typed:e}=r;return e(cd,{"":function(){return""},number:Xr,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":e.referToSelf(t=>n=>De(n,t)),any:function(n){return String(n)}})});var md="boolean",g3=["typed"],pd=N(md,g3,r=>{var{typed:e}=r;return e(md,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var i=n.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var o=Number(n);if(n!==""&&!isNaN(o))return!!o;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":e.referToSelf(t=>n=>De(n,t))})});var v3="bignumber",y3=["typed","BigNumber"],hd=N(v3,y3,r=>{var{typed:e,BigNumber:t}=r;return e("bignumber",{"":function(){return new t(0)},number:function(i){return new t(i+"")},string:function(i){var o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var a=o[2],s=t(o[1]),l=new t(2).pow(Number(a));if(s.gt(l.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new t(2).pow(Number(a)-1);return s.gte(u)?s.sub(l):s}return new t(i)},BigNumber:function(i){return i},bigint:function(i){return new t(i.toString())},Unit:e.referToSelf(n=>i=>{var o=i.clone();return o.value=n(i.value),o}),Fraction:function(i){return new t(i.n).div(i.d).times(i.s)},null:function(i){return new t(0)},"Array | Matrix":e.referToSelf(n=>i=>De(i,n))})});var x3="complex",b3=["typed","Complex"],dd=N(x3,b3,r=>{var{typed:e,Complex:t}=r;return e("complex",{"":function(){return t.ZERO},number:function(i){return new t(i,0)},"number, number":function(i,o){return new t(i,o)},"BigNumber, BigNumber":function(i,o){return new t(i.toNumber(),o.toNumber())},Fraction:function(i){return new t(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return t(i)},null:function(i){return t(0)},Object:function(i){if("re"in i&&"im"in i)return new t(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new t(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>i=>De(i,n))})});var w3="fraction",D3=["typed","Fraction"],gd=N(w3,D3,r=>{var{typed:e,Fraction:t}=r;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new t(i)},string:function(i){return new t(i)},"number, number":function(i,o){return new t(i,o)},null:function(i){return new t(0)},BigNumber:function(i){return new t(i.toString())},bigint:function(i){return new t(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(n=>i=>{var o=i.clone();return o.value=n(i.value),o}),Object:function(i){return new t(i)},"Array | Matrix":e.referToSelf(n=>i=>De(i,n))})});var vd="matrix",S3=["typed","Matrix","DenseMatrix","SparseMatrix"],yd=N(vd,S3,r=>{var{typed:e,Matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(vd,{"":function(){return o([])},string:function(s){return o([],s)},"string, string":function(s,l){return o([],s,l)},Array:function(s){return o(s)},Matrix:function(s){return o(s,s.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(a,s,l){if(s==="dense"||s==="default"||s===void 0)return new n(a,l);if(s==="sparse")return new i(a,l);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}});var xd="matrixFromFunction",A3=["typed","matrix","isZero"],bd=N(xd,A3,r=>{var{typed:e,matrix:t,isZero:n}=r;return e(xd,{"Array | Matrix, function, string, string":function(a,s,l,u){return i(a,s,l,u)},"Array | Matrix, function, string":function(a,s,l){return i(a,s,l)},"Matrix, function":function(a,s){return i(a,s,"dense")},"Array, function":function(a,s){return i(a,s,"dense").toArray()},"Array | Matrix, string, function":function(a,s,l){return i(a,l,s)},"Array | Matrix, string, string, function":function(a,s,l,u){return i(a,u,s,l)}});function i(o,a,s,l){var u;return l!==void 0?u=t(s,l):u=t(s),u.resize(o),u.forEach(function(c,f){var m=a(f);n(m)||u.set(f,m)}),u}});var wd="matrixFromRows",N3=["typed","matrix","flatten","size"],Dd=N(wd,N3,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(wd,{"...Array":function(l){return o(l)},"...Matrix":function(l){return t(o(l.map(u=>u.toArray())))}});function o(s){if(s.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var l=a(s[0]),u=[];for(var c of s){var f=a(c);if(f!==l)throw new TypeError("The vectors had different length: "+(l|0)+" \u2260 "+(f|0));u.push(n(c))}return u}function a(s){var l=i(s);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}});var Sd="matrixFromColumns",C3=["typed","matrix","flatten","size"],Ad=N(Sd,C3,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(Sd,{"...Array":function(l){return o(l)},"...Matrix":function(l){return t(o(l.map(u=>u.toArray())))}});function o(s){if(s.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=a(s[0]),u=[],c=0;c<l;c++)u[c]=[];for(var f of s){var m=a(f);if(m!==l)throw new TypeError("The vectors had different length: "+(l|0)+" \u2260 "+(m|0));for(var p=n(f),h=0;h<l;h++)u[h].push(p[h])}return u}function a(s){var l=i(s);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}});var Nd="splitUnit",E3=["typed"],Cd=N(Nd,E3,r=>{var{typed:e}=r;return e(Nd,{"Unit, Array":function(n,i){return n.splitUnit(i)}})});var Ed="unaryMinus",M3=["typed"],Md=N(Ed,M3,r=>{var{typed:e}=r;return e(Ed,{number:pc,"Complex | BigNumber | Fraction":t=>t.neg(),bigint:t=>-t,Unit:e.referToSelf(t=>n=>{var i=n.clone();return i.value=e.find(t,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(t=>n=>De(n,t,!0))})});var Td="unaryPlus",T3=["typed","config","numeric"],Fd=N(Td,T3,r=>{var{typed:e,config:t,numeric:n}=r;return e(Td,{number:hc,Complex:function(o){return o},BigNumber:function(o){return o},bigint:function(o){return o},Fraction:function(o){return o},Unit:function(o){return o.clone()},"Array | Matrix":e.referToSelf(i=>o=>De(o,i,!0)),boolean:function(o){return n(o?1:0,t.number)},string:function(o){return n(o,Qt(o,t))}})});var Od="abs",F3=["typed"],Bd=N(Od,F3,r=>{var{typed:e}=r;return e(Od,{number:uc,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),bigint:t=>t<0n?-t:t,"Array | Matrix":e.referToSelf(t=>n=>De(n,t,!0))})});var _d="apply",O3=["typed","isInteger"],ro=N(_d,O3,r=>{var{typed:e,isInteger:t}=r;return e(_d,{"Array | Matrix, number | BigNumber, function":function(i,o,a){if(!t(o))throw new TypeError("Integer number expected for dimension");var s=Array.isArray(i)?Me(i):i.size();if(o<0||o>=s.length)throw new Wt(o,s.length);return we(i)?i.create(Ds(i.valueOf(),o,a),i.datatype()):Ds(i,o,a)}})});function Ds(r,e,t){var n,i,o;if(e<=0)if(Array.isArray(r[0])){for(o=B3(r),i=[],n=0;n<o.length;n++)i[n]=Ds(o[n],e-1,t);return i}else return t(r);else{for(i=[],n=0;n<r.length;n++)i[n]=Ds(r[n],e-1,t);return i}}function B3(r){var e=r.length,t=r[0].length,n,i,o=[];for(i=0;i<t;i++){var a=[];for(n=0;n<e;n++)a.push(r[n][i]);o.push(a)}return o}var kd="addScalar",_3=["typed"],Pd=N(kd,_3,r=>{var{typed:e}=r;return e(kd,{"number, number":cc,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"bigint, bigint":function(n,i){return n+i},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var o=n.clone();return o.value=e.find(t,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})});var Id="subtractScalar",k3=["typed"],Rd=N(Id,k3,r=>{var{typed:e}=r;return e(Id,{"number, number":fc,"Complex, Complex":function(n,i){return n.sub(i)},"BigNumber, BigNumber":function(n,i){return n.minus(i)},"bigint, bigint":function(n,i){return n-i},"Fraction, Fraction":function(n,i){return n.sub(i)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var o=n.clone();return o.value=e.find(t,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})});var Ld="cbrt",P3=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],zd=N(Ld,P3,r=>{var{config:e,typed:t,isNegative:n,unaryMinus:i,matrix:o,Complex:a,BigNumber:s,Fraction:l}=r;return t(Ld,{number:Qi,Complex:u,"Complex, boolean":u,BigNumber:function(m){return m.cbrt()},Unit:c});function u(f,m){var p=f.arg()/3,h=f.abs(),d=new a(Qi(h),0).mul(new a(0,p).exp());if(m){var v=[d,new a(Qi(h),0).mul(new a(0,p+Math.PI*2/3).exp()),new a(Qi(h),0).mul(new a(0,p-Math.PI*2/3).exp())];return e.matrix==="Array"?v:o(v)}else return d}function c(f){if(f.value&&qt(f.value)){var m=f.clone();return m.value=1,m=m.pow(1/3),m.value=u(f.value),m}else{var p=n(f.value);p&&(f.value=i(f.value));var h;Ne(f.value)?h=new s(1).div(3):Sr(f.value)?h=new l(1,3):h=1/3;var d=f.pow(h);return p&&(d.value=i(d.value)),d}}});var I3="matAlgo11xS0s",R3=["typed","equalScalar"],nt=N(I3,R3,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,a,s){var l=i._values,u=i._index,c=i._ptr,f=i._size,m=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p=f[0],h=f[1],d,v=t,x=0,D=a;typeof m=="string"&&(d=m,v=e.find(t,[d,d]),x=e.convert(0,d),o=e.convert(o,d),D=e.find(a,[d,d]));for(var g=[],w=[],b=[],y=0;y<h;y++){b[y]=w.length;for(var S=c[y],C=c[y+1],A=S;A<C;A++){var E=u[A],M=s?D(o,l[A]):D(l[A],o);v(M,x)||(w.push(E),g.push(M))}}return b[h]=w.length,i.createSparseMatrix({values:g,index:w,ptr:b,size:[p,h],datatype:d})}});var L3="matAlgo12xSfs",z3=["typed","DenseMatrix"],Je=N(L3,z3,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,o,a,s){var l=i._values,u=i._index,c=i._ptr,f=i._size,m=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p=f[0],h=f[1],d,v=a;typeof m=="string"&&(d=m,o=e.convert(o,d),v=e.find(a,[d,d]));for(var x=[],D=[],g=[],w=0;w<h;w++){for(var b=w+1,y=c[w],S=c[w+1],C=y;C<S;C++){var A=u[C];D[A]=l[C],g[A]=b}for(var E=0;E<p;E++)w===0&&(x[E]=[]),g[E]===b?x[E][w]=s?v(o,D[E]):v(D[E],o):x[E][w]=s?v(o,0):v(0,o)}return new t({data:x,size:[p,h],datatype:d})}});var q3="matAlgo14xDs",U3=["typed"],Tt=N(q3,U3,r=>{var{typed:e}=r;return function(i,o,a,s){var l=i._data,u=i._size,c=i._datatype,f,m=a;typeof c=="string"&&(f=c,o=e.convert(o,f),m=e.find(a,[f,f]));var p=u.length>0?t(m,0,u,u[0],l,o,s):[];return i.createDenseMatrix({data:p,size:Ee(u),datatype:f})};function t(n,i,o,a,s,l,u){var c=[];if(i===o.length-1)for(var f=0;f<a;f++)c[f]=u?n(l,s[f]):n(s[f],l);else for(var m=0;m<a;m++)c[m]=t(n,i+1,o,o[i+1],s[m],l,u);return c}});var rf="ceil",V3=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],H3=N(rf,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;return e(rf,{number:function(o){return pt(o,n(o),t.relTol,t.absTol)?n(o):Math.ceil(o)},"number, number":function(o,a){if(pt(o,n(o,a),t.relTol,t.absTol))return n(o,a);var[s,l]="".concat(o,"e").split("e"),u=Math.ceil(Number("".concat(s,"e").concat(Number(l)+a)));return[s,l]="".concat(u,"e").split("e"),Number("".concat(s,"e").concat(Number(l)-a))}})}),qd=N(rf,V3,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:o,zeros:a,DenseMatrix:s}=r,l=nt({typed:e,equalScalar:o}),u=Je({typed:e,DenseMatrix:s}),c=Tt({typed:e}),f=H3({typed:e,config:t,round:n});return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(p){return p.ceil()},"Complex, number":function(p,h){return p.ceil(h)},"Complex, BigNumber":function(p,h){return p.ceil(h.toNumber())},BigNumber:function(p){return St(p,n(p),t.relTol,t.absTol)?n(p):p.ceil()},"BigNumber, BigNumber":function(p,h){return St(p,n(p,h),t.relTol,t.absTol)?n(p,h):p.toDecimalPlaces(h.toNumber(),pi.ROUND_CEIL)},Fraction:function(p){return p.ceil()},"Fraction, number":function(p,h){return p.ceil(h)},"Fraction, BigNumber":function(p,h){return p.ceil(h.toNumber())},"Array | Matrix":e.referToSelf(m=>p=>De(p,m,!0)),"Array, number | BigNumber":e.referToSelf(m=>(p,h)=>De(p,d=>m(d,h),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(m=>(p,h)=>l(p,h,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(p,h)=>c(p,h,m,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(m=>(p,h)=>c(i(h),p,m,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(m=>(p,h)=>o(p,0)?a(h.size(),h.storage()):h.storage()==="dense"?c(h,p,m,!0):u(h,p,m,!0))})});var Ud="cube",$3=["typed"],Vd=N(Ud,$3,r=>{var{typed:e}=r;return e(Ud,{number:dc,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},bigint:function(n){return n*n*n},Fraction:function(n){return n.pow(3)},Unit:function(n){return n.pow(3)}})});var Hd="exp",W3=["typed"],$d=N(Hd,W3,r=>{var{typed:e}=r;return e(Hd,{number:gc,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()}})});var Wd="expm1",G3=["typed","Complex"],Gd=N(Wd,G3,r=>{var{typed:e,Complex:t}=r;return e(Wd,{number:vc,Complex:function(i){var o=Math.exp(i.re);return new t(o*Math.cos(i.im)-1,o*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})});var nf="fix",K3=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],Y3=N(nf,["typed","ceil","floor"],r=>{var{typed:e,ceil:t,floor:n}=r;return e(nf,{number:function(o){return o>0?n(o):t(o)},"number, number":function(o,a){return o>0?n(o,a):t(o,a)}})}),Kd=N(nf,K3,r=>{var{typed:e,Complex:t,matrix:n,ceil:i,floor:o,equalScalar:a,zeros:s,DenseMatrix:l}=r,u=Je({typed:e,DenseMatrix:l}),c=Tt({typed:e}),f=Y3({typed:e,ceil:i,floor:o});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(p){return new t(p.re>0?Math.floor(p.re):Math.ceil(p.re),p.im>0?Math.floor(p.im):Math.ceil(p.im))},"Complex, number":function(p,h){return new t(p.re>0?o(p.re,h):i(p.re,h),p.im>0?o(p.im,h):i(p.im,h))},"Complex, BigNumber":function(p,h){var d=h.toNumber();return new t(p.re>0?o(p.re,d):i(p.re,d),p.im>0?o(p.im,d):i(p.im,d))},BigNumber:function(p){return p.isNegative()?i(p):o(p)},"BigNumber, number | BigNumber":function(p,h){return p.isNegative()?i(p,h):o(p,h)},Fraction:function(p){return p.s<0?p.ceil():p.floor()},"Fraction, number | BigNumber":function(p,h){return p.s<0?i(p,h):o(p,h)},"Array | Matrix":e.referToSelf(m=>p=>De(p,m,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(m=>(p,h)=>De(p,d=>m(d,h),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(m=>(p,h)=>c(n(h),p,m,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(m=>(p,h)=>a(p,0)?s(h.size(),h.storage()):h.storage()==="dense"?c(h,p,m,!0):u(h,p,m,!0))})});var of="floor",Z3=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],X3=N(of,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;return e(of,{number:function(o){return pt(o,n(o),t.relTol,t.absTol)?n(o):Math.floor(o)},"number, number":function(o,a){if(pt(o,n(o,a),t.relTol,t.absTol))return n(o,a);var[s,l]="".concat(o,"e").split("e"),u=Math.floor(Number("".concat(s,"e").concat(Number(l)+a)));return[s,l]="".concat(u,"e").split("e"),Number("".concat(s,"e").concat(Number(l)-a))}})}),Ss=N(of,Z3,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:o,zeros:a,DenseMatrix:s}=r,l=nt({typed:e,equalScalar:o}),u=Je({typed:e,DenseMatrix:s}),c=Tt({typed:e}),f=X3({typed:e,config:t,round:n});return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(p){return p.floor()},"Complex, number":function(p,h){return p.floor(h)},"Complex, BigNumber":function(p,h){return p.floor(h.toNumber())},BigNumber:function(p){return St(p,n(p),t.relTol,t.absTol)?n(p):p.floor()},"BigNumber, BigNumber":function(p,h){return St(p,n(p,h),t.relTol,t.absTol)?n(p,h):p.toDecimalPlaces(h.toNumber(),pi.ROUND_FLOOR)},Fraction:function(p){return p.floor()},"Fraction, number":function(p,h){return p.floor(h)},"Fraction, BigNumber":function(p,h){return p.floor(h.toNumber())},"Array | Matrix":e.referToSelf(m=>p=>De(p,m,!0)),"Array, number | BigNumber":e.referToSelf(m=>(p,h)=>De(p,d=>m(d,h),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(m=>(p,h)=>l(p,h,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(p,h)=>c(p,h,m,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(m=>(p,h)=>c(i(h),p,m,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(m=>(p,h)=>o(p,0)?a(h.size(),h.storage()):h.storage()==="dense"?c(h,p,m,!0):u(h,p,m,!0))})});var J3="matAlgo02xDS0",j3=["typed","equalScalar"],Ft=N(J3,j3,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,a,s){var l=i._data,u=i._size,c=i._datatype||i.getDataType(),f=o._values,m=o._index,p=o._ptr,h=o._size,d=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(u.length!==h.length)throw new ke(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=u[0],x=u[1],D,g=t,w=0,b=a;typeof c=="string"&&c===d&&c!=="mixed"&&(D=c,g=e.find(t,[D,D]),w=e.convert(0,D),b=e.find(a,[D,D]));for(var y=[],S=[],C=[],A=0;A<x;A++){C[A]=S.length;for(var E=p[A],M=p[A+1],F=E;F<M;F++){var k=m[F],I=s?b(f[F],l[k][A]):b(l[k][A],f[F]);g(I,w)||(S.push(k),y.push(I))}}return C[x]=S.length,o.createSparseMatrix({values:y,index:S,ptr:C,size:[v,x],datatype:c===i._datatype&&d===o._datatype?D:void 0})}});var Q3="matAlgo03xDSf",e_=["typed"],ct=N(Q3,e_,r=>{var{typed:e}=r;return function(n,i,o,a){var s=n._data,l=n._size,u=n._datatype||n.getDataType(),c=i._values,f=i._index,m=i._ptr,p=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==p.length)throw new ke(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d=l[0],v=l[1],x,D=0,g=o;typeof u=="string"&&u===h&&u!=="mixed"&&(x=u,D=e.convert(0,x),g=e.find(o,[x,x]));for(var w=[],b=0;b<d;b++)w[b]=[];for(var y=[],S=[],C=0;C<v;C++){for(var A=C+1,E=m[C],M=m[C+1],F=E;F<M;F++){var k=f[F];y[k]=a?g(c[F],s[k][C]):g(s[k][C],c[F]),S[k]=A}for(var I=0;I<d;I++)S[I]===A?w[I][C]=y[I]:w[I][C]=a?g(D,s[I][C]):g(s[I][C],D)}return n.createDenseMatrix({data:w,size:[d,v],datatype:u===n._datatype&&h===i._datatype?x:void 0})}});var t_="matAlgo05xSfSf",r_=["typed","equalScalar"],Yn=N(t_,r_,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,a){var s=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),m=o._values,p=o._index,h=o._ptr,d=o._size,v=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==d.length)throw new ke(c.length,d.length);if(c[0]!==d[0]||c[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+d+")");var x=c[0],D=c[1],g,w=t,b=0,y=a;typeof f=="string"&&f===v&&f!=="mixed"&&(g=f,w=e.find(t,[g,g]),b=e.convert(0,g),y=e.find(a,[g,g]));var S=s&&m?[]:void 0,C=[],A=[],E=S?[]:void 0,M=S?[]:void 0,F=[],k=[],I,P,B,O;for(P=0;P<D;P++){A[P]=C.length;var q=P+1;for(B=u[P],O=u[P+1];B<O;B++)I=l[B],C.push(I),F[I]=q,E&&(E[I]=s[B]);for(B=h[P],O=h[P+1];B<O;B++)I=p[B],F[I]!==q&&C.push(I),k[I]=q,M&&(M[I]=m[B]);if(S)for(B=A[P];B<C.length;){I=C[B];var _=F[I],K=k[I];if(_===q||K===q){var Z=_===q?E[I]:b,W=K===q?M[I]:b,R=y(Z,W);w(R,b)?C.splice(B,1):(S.push(R),B++)}}}return A[D]=C.length,i.createSparseMatrix({values:S,index:C,ptr:A,size:[x,D],datatype:f===i._datatype&&v===o._datatype?g:void 0})}});var n_="matAlgo13xDD",i_=["typed"],Yd=N(n_,i_,r=>{var{typed:e}=r;return function(i,o,a){var s=i._data,l=i._size,u=i._datatype,c=o._data,f=o._size,m=o._datatype,p=[];if(l.length!==f.length)throw new ke(l.length,f.length);for(var h=0;h<l.length;h++){if(l[h]!==f[h])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");p[h]=l[h]}var d,v=a;typeof u=="string"&&u===m&&(d=u,v=e.find(a,[d,d]));var x=p.length>0?t(v,0,p,p[0],s,c):[];return i.createDenseMatrix({data:x,size:p,datatype:d})};function t(n,i,o,a,s,l){var u=[];if(i===o.length-1)for(var c=0;c<a;c++)u[c]=n(s[c],l[c]);else for(var f=0;f<a;f++)u[f]=t(n,i+1,o,o[i+1],s[f],l[f]);return u}});function Gt(r,e){if(gr(r.size(),e.size()))return[r,e];var t=Uo(r.size(),e.size());return[r,e].map(n=>o_(n,t))}function o_(r,e){return gr(r.size(),e)?r:r.create(mn(r.valueOf(),e),r.datatype())}var a_="matrixAlgorithmSuite",s_=["typed","matrix"],Le=N(a_,s_,r=>{var{typed:e,matrix:t}=r,n=Yd({typed:e}),i=Tt({typed:e});return function(a){var s=a.elop,l=a.SD||a.DS,u;s?(u={"DenseMatrix, DenseMatrix":(p,h)=>n(...Gt(p,h),s),"Array, Array":(p,h)=>n(...Gt(t(p),t(h)),s).valueOf(),"Array, DenseMatrix":(p,h)=>n(...Gt(t(p),h),s),"DenseMatrix, Array":(p,h)=>n(...Gt(p,t(h)),s)},a.SS&&(u["SparseMatrix, SparseMatrix"]=(p,h)=>a.SS(...Gt(p,h),s,!1)),a.DS&&(u["DenseMatrix, SparseMatrix"]=(p,h)=>a.DS(...Gt(p,h),s,!1),u["Array, SparseMatrix"]=(p,h)=>a.DS(...Gt(t(p),h),s,!1)),l&&(u["SparseMatrix, DenseMatrix"]=(p,h)=>l(...Gt(h,p),s,!0),u["SparseMatrix, Array"]=(p,h)=>l(...Gt(t(h),p),s,!0))):(u={"DenseMatrix, DenseMatrix":e.referToSelf(p=>(h,d)=>n(...Gt(h,d),p)),"Array, Array":e.referToSelf(p=>(h,d)=>n(...Gt(t(h),t(d)),p).valueOf()),"Array, DenseMatrix":e.referToSelf(p=>(h,d)=>n(...Gt(t(h),d),p)),"DenseMatrix, Array":e.referToSelf(p=>(h,d)=>n(...Gt(h,t(d)),p))},a.SS&&(u["SparseMatrix, SparseMatrix"]=e.referToSelf(p=>(h,d)=>a.SS(...Gt(h,d),p,!1))),a.DS&&(u["DenseMatrix, SparseMatrix"]=e.referToSelf(p=>(h,d)=>a.DS(...Gt(h,d),p,!1)),u["Array, SparseMatrix"]=e.referToSelf(p=>(h,d)=>a.DS(...Gt(t(h),d),p,!1))),l&&(u["SparseMatrix, DenseMatrix"]=e.referToSelf(p=>(h,d)=>l(...Gt(d,h),p,!0)),u["SparseMatrix, Array"]=e.referToSelf(p=>(h,d)=>l(...Gt(t(d),h),p,!0))));var c=a.scalar||"any",f=a.Ds||a.Ss;f&&(s?(u["DenseMatrix,"+c]=(p,h)=>i(p,h,s,!1),u[c+", DenseMatrix"]=(p,h)=>i(h,p,s,!0),u["Array,"+c]=(p,h)=>i(t(p),h,s,!1).valueOf(),u[c+", Array"]=(p,h)=>i(t(h),p,s,!0).valueOf()):(u["DenseMatrix,"+c]=e.referToSelf(p=>(h,d)=>i(h,d,p,!1)),u[c+", DenseMatrix"]=e.referToSelf(p=>(h,d)=>i(d,h,p,!0)),u["Array,"+c]=e.referToSelf(p=>(h,d)=>i(t(h),d,p,!1).valueOf()),u[c+", Array"]=e.referToSelf(p=>(h,d)=>i(t(d),h,p,!0).valueOf())));var m=a.sS!==void 0?a.sS:a.Ss;return s?(a.Ss&&(u["SparseMatrix,"+c]=(p,h)=>a.Ss(p,h,s,!1)),m&&(u[c+", SparseMatrix"]=(p,h)=>m(h,p,s,!0))):(a.Ss&&(u["SparseMatrix,"+c]=e.referToSelf(p=>(h,d)=>a.Ss(h,d,p,!1))),m&&(u[c+", SparseMatrix"]=e.referToSelf(p=>(h,d)=>m(d,h,p,!0)))),s&&s.signatures&&Ya(u,s.signatures),u}});var Zd="mod",l_=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],As=N(Zd,l_,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:o,zeros:a,DenseMatrix:s,concat:l}=r,u=Ss({typed:e,config:t,round:n,matrix:i,equalScalar:o,zeros:a,DenseMatrix:s}),c=Ft({typed:e,equalScalar:o}),f=ct({typed:e}),m=Yn({typed:e,equalScalar:o}),p=nt({typed:e,equalScalar:o}),h=Je({typed:e,DenseMatrix:s}),d=Le({typed:e,matrix:i,concat:l});return e(Zd,{"number, number":v,"BigNumber, BigNumber":function(D,g){return g.isZero()?D:D.sub(g.mul(u(D.div(g))))},"bigint, bigint":function(D,g){if(g===0n)return D;if(D<0){var w=D%g;return w===0n?w:w+g}return D%g},"Fraction, Fraction":function(D,g){return g.equals(0)?D:D.sub(g.mul(u(D.div(g))))}},d({SS:m,DS:f,SD:c,Ss:p,sS:h}));function v(x,D){return D===0?x:x-D*u(x/D)}});var u_="matAlgo01xDSid",c_=["typed"],nr=N(u_,c_,r=>{var{typed:e}=r;return function(n,i,o,a){var s=n._data,l=n._size,u=n._datatype||n.getDataType(),c=i._values,f=i._index,m=i._ptr,p=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==p.length)throw new ke(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d=l[0],v=l[1],x=typeof u=="string"&&u!=="mixed"&&u===h?u:void 0,D=x?e.find(o,[x,x]):o,g,w,b=[];for(g=0;g<d;g++)b[g]=[];var y=[],S=[];for(w=0;w<v;w++){for(var C=w+1,A=m[w],E=m[w+1],M=A;M<E;M++)g=f[M],y[g]=a?D(c[M],s[g][w]):D(s[g][w],c[M]),S[g]=C;for(g=0;g<d;g++)S[g]===C?b[g][w]=y[g]:b[g][w]=s[g][w]}return n.createDenseMatrix({data:b,size:[d,v],datatype:u===n._datatype&&h===i._datatype?x:void 0})}});var f_="matAlgo04xSidSid",m_=["typed","equalScalar"],no=N(f_,m_,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,a){var s=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),m=o._values,p=o._index,h=o._ptr,d=o._size,v=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==d.length)throw new ke(c.length,d.length);if(c[0]!==d[0]||c[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+d+")");var x=c[0],D=c[1],g,w=t,b=0,y=a;typeof f=="string"&&f===v&&f!=="mixed"&&(g=f,w=e.find(t,[g,g]),b=e.convert(0,g),y=e.find(a,[g,g]));var S=s&&m?[]:void 0,C=[],A=[],E=s&&m?[]:void 0,M=s&&m?[]:void 0,F=[],k=[],I,P,B,O,q;for(P=0;P<D;P++){A[P]=C.length;var _=P+1;for(O=u[P],q=u[P+1],B=O;B<q;B++)I=l[B],C.push(I),F[I]=_,E&&(E[I]=s[B]);for(O=h[P],q=h[P+1],B=O;B<q;B++)if(I=p[B],F[I]===_){if(E){var K=y(E[I],m[B]);w(K,b)?F[I]=null:E[I]=K}}else C.push(I),k[I]=_,M&&(M[I]=m[B]);if(E&&M)for(B=A[P];B<C.length;)I=C[B],F[I]===_?(S[B]=E[I],B++):k[I]===_?(S[B]=M[I],B++):C.splice(B,1)}return A[D]=C.length,i.createSparseMatrix({values:S,index:C,ptr:A,size:[x,D],datatype:f===i._datatype&&v===o._datatype?g:void 0})}});var p_="matAlgo10xSids",h_=["typed","DenseMatrix"],xr=N(p_,h_,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,o,a,s){var l=i._values,u=i._index,c=i._ptr,f=i._size,m=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p=f[0],h=f[1],d,v=a;typeof m=="string"&&(d=m,o=e.convert(o,d),v=e.find(a,[d,d]));for(var x=[],D=[],g=[],w=0;w<h;w++){for(var b=w+1,y=c[w],S=c[w+1],C=y;C<S;C++){var A=u[C];D[A]=l[C],g[A]=b}for(var E=0;E<p;E++)w===0&&(x[E]=[]),g[E]===b?x[E][w]=s?v(o,D[E]):v(D[E],o):x[E][w]=o}return new t({data:x,size:[p,h],datatype:d})}});function Er(r,e,t,n){if(!(this instanceof Er))throw new SyntaxError("Constructor must be called with the new operator");this.fn=r,this.count=e,this.min=t,this.max=n,this.message="Wrong number of arguments in function "+r+" ("+e+" provided, "+t+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}Er.prototype=new Error;Er.prototype.constructor=Error;Er.prototype.name="ArgumentsError";Er.prototype.isArgumentsError=!0;var Xd="gcd",d_=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],af="number | BigNumber | Fraction | Matrix | Array",g_="".concat(af,", ").concat(af,", ...").concat(af);function Jd(r){return!r.some(e=>Array.isArray(e))}var jd=N(Xd,d_,r=>{var{typed:e,matrix:t,config:n,round:i,equalScalar:o,zeros:a,BigNumber:s,DenseMatrix:l,concat:u}=r,c=As({typed:e,config:n,round:i,matrix:t,equalScalar:o,zeros:a,DenseMatrix:l,concat:u}),f=nr({typed:e}),m=no({typed:e,equalScalar:o}),p=xr({typed:e,DenseMatrix:l}),h=Le({typed:e,matrix:t,concat:u});return e(Xd,{"number, number":d,"BigNumber, BigNumber":v,"Fraction, Fraction":(x,D)=>x.gcd(D)},h({SS:m,DS:f,Ss:p}),{[g_]:e.referToSelf(x=>(D,g,w)=>{for(var b=x(D,g),y=0;y<w.length;y++)b=x(b,w[y]);return b}),Array:e.referToSelf(x=>D=>{if(D.length===1&&Array.isArray(D[0])&&Jd(D[0]))return x(...D[0]);if(Jd(D))return x(...D);throw new Er("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(x=>D=>x(D.toArray()))});function d(x,D){if(!xe(x)||!xe(D))throw new Error("Parameters in function gcd must be integer numbers");for(var g;D!==0;)g=c(x,D),x=D,D=g;return x<0?-x:x}function v(x,D){if(!x.isInt()||!D.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var g=new s(0);!D.isZero();){var w=c(x,D);x=D,D=w}return x.lt(g)?x.neg():x}});var v_="matAlgo06xS0S0",y_=["typed","equalScalar"],Zn=N(v_,y_,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,a){var s=i._values,l=i._size,u=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=o._values,f=o._size,m=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(l.length!==f.length)throw new ke(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");var p=l[0],h=l[1],d,v=t,x=0,D=a;typeof u=="string"&&u===m&&u!=="mixed"&&(d=u,v=e.find(t,[d,d]),x=e.convert(0,d),D=e.find(a,[d,d]));for(var g=s&&c?[]:void 0,w=[],b=[],y=g?[]:void 0,S=[],C=[],A=0;A<h;A++){b[A]=w.length;var E=A+1;if(lc(i,A,S,y,C,E,w,D),lc(o,A,S,y,C,E,w,D),y)for(var M=b[A];M<w.length;){var F=w[M];if(C[F]===E){var k=y[F];v(k,x)?w.splice(M,1):(g.push(k),M++)}else w.splice(M,1)}else for(var I=b[A];I<w.length;){var P=w[I];C[P]!==E?w.splice(I,1):I++}}return b[h]=w.length,i.createSparseMatrix({values:g,index:w,ptr:b,size:[p,h],datatype:u===i._datatype&&m===o._datatype?d:void 0})}});var Qd="lcm",x_=["typed","matrix","equalScalar","concat"],eg=N(Qd,x_,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,o=Ft({typed:e,equalScalar:n}),a=Zn({typed:e,equalScalar:n}),s=nt({typed:e,equalScalar:n}),l=Le({typed:e,matrix:t,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(u,", ").concat(u,", ...").concat(u)]=e.referToSelf(m=>(p,h,d)=>{for(var v=m(p,h),x=0;x<d.length;x++)v=m(v,d[x]);return v}),e(Qd,{"number, number":yc,"BigNumber, BigNumber":f,"Fraction, Fraction":(m,p)=>m.lcm(p)},l({SS:a,DS:o,Ss:s}),c);function f(m,p){if(!m.isInt()||!p.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(m.isZero())return m;if(p.isZero())return p;for(var h=m.times(p);!p.isZero();){var d=p;p=m.mod(d),m=d}return h.div(m).abs()}});var tg="log10",b_=["typed","config","Complex"],rg=N(tg,b_,r=>{var{typed:e,config:t,Complex:n}=r;return e(tg,{number:function(o){return o>=0||t.predictable?xc(o):new n(o,0).log().div(Math.LN10)},Complex:function(o){return new n(o).log().div(Math.LN10)},BigNumber:function(o){return!o.isNegative()||t.predictable?o.log():new n(o.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":e.referToSelf(i=>o=>De(o,i))})});var ng="log2",w_=["typed","config","Complex"],ig=N(ng,w_,r=>{var{typed:e,config:t,Complex:n}=r;return e(ng,{number:function(a){return a>=0||t.predictable?bc(a):i(new n(a,0))},Complex:i,BigNumber:function(a){return!a.isNegative()||t.predictable?a.log(2):i(new n(a.toNumber(),0))},"Array | Matrix":e.referToSelf(o=>a=>De(a,o))});function i(o){var a=Math.sqrt(o.re*o.re+o.im*o.im);return new n(Math.log2?Math.log2(a):Math.log(a)/Math.LN2,Math.atan2(o.im,o.re)/Math.LN2)}});var D_="multiplyScalar",S_=["typed"],og=N(D_,S_,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":mc,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"bigint, bigint":function(n,i){return n*i},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(t,n)=>n.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,n)=>t.multiply(n)})});var ag="multiply",A_=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],sg=N(ag,A_,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,equalScalar:o,dot:a}=r,s=nt({typed:e,equalScalar:o}),l=Tt({typed:e});function u(b,y){switch(b.length){case 1:switch(y.length){case 1:if(b[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(b[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+b[0]+") must match Matrix rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;case 2:switch(y.length){case 1:if(b[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+b[1]+") must match Vector length ("+y[0]+")");break;case 2:if(b[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+b[1]+") must match Matrix B rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+b.length+" dimensions)")}}function c(b,y,S){if(S===0)throw new Error("Cannot multiply two empty vectors");return a(b,y)}function f(b,y){if(y.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return m(b,y)}function m(b,y){var S=b._data,C=b._size,A=b._datatype||b.getDataType(),E=y._data,M=y._size,F=y._datatype||y.getDataType(),k=C[0],I=M[1],P,B=n,O=i;A&&F&&A===F&&typeof A=="string"&&A!=="mixed"&&(P=A,B=e.find(n,[P,P]),O=e.find(i,[P,P]));for(var q=[],_=0;_<I;_++){for(var K=O(S[0],E[0][_]),Z=1;Z<k;Z++)K=B(K,O(S[Z],E[Z][_]));q[_]=K}return b.createDenseMatrix({data:q,size:[I],datatype:A===b._datatype&&F===y._datatype?P:void 0})}var p=e("_multiplyMatrixVector",{"DenseMatrix, any":d,"SparseMatrix, any":D}),h=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":v,"DenseMatrix, SparseMatrix":x,"SparseMatrix, DenseMatrix":g,"SparseMatrix, SparseMatrix":w});function d(b,y){var S=b._data,C=b._size,A=b._datatype||b.getDataType(),E=y._data,M=y._datatype||y.getDataType(),F=C[0],k=C[1],I,P=n,B=i;A&&M&&A===M&&typeof A=="string"&&A!=="mixed"&&(I=A,P=e.find(n,[I,I]),B=e.find(i,[I,I]));for(var O=[],q=0;q<F;q++){for(var _=S[q],K=B(_[0],E[0]),Z=1;Z<k;Z++)K=P(K,B(_[Z],E[Z]));O[q]=K}return b.createDenseMatrix({data:O,size:[F],datatype:A===b._datatype&&M===y._datatype?I:void 0})}function v(b,y){var S=b._data,C=b._size,A=b._datatype||b.getDataType(),E=y._data,M=y._size,F=y._datatype||y.getDataType(),k=C[0],I=C[1],P=M[1],B,O=n,q=i;A&&F&&A===F&&typeof A=="string"&&A!=="mixed"&&A!=="mixed"&&(B=A,O=e.find(n,[B,B]),q=e.find(i,[B,B]));for(var _=[],K=0;K<k;K++){var Z=S[K];_[K]=[];for(var W=0;W<P;W++){for(var R=q(Z[0],E[0][W]),X=1;X<I;X++)R=O(R,q(Z[X],E[X][W]));_[K][W]=R}}return b.createDenseMatrix({data:_,size:[k,P],datatype:A===b._datatype&&F===y._datatype?B:void 0})}function x(b,y){var S=b._data,C=b._size,A=b._datatype||b.getDataType(),E=y._values,M=y._index,F=y._ptr,k=y._size,I=y._datatype||y._data===void 0?y._datatype:y.getDataType();if(!E)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var P=C[0],B=k[1],O,q=n,_=i,K=o,Z=0;A&&I&&A===I&&typeof A=="string"&&A!=="mixed"&&(O=A,q=e.find(n,[O,O]),_=e.find(i,[O,O]),K=e.find(o,[O,O]),Z=e.convert(0,O));for(var W=[],R=[],X=[],ae=y.createSparseMatrix({values:W,index:R,ptr:X,size:[P,B],datatype:A===b._datatype&&I===y._datatype?O:void 0}),j=0;j<B;j++){X[j]=R.length;var U=F[j],$=F[j+1];if($>U)for(var G=0,Y=0;Y<P;Y++){for(var J=Y+1,te=void 0,ie=U;ie<$;ie++){var de=M[ie];G!==J?(te=_(S[Y][de],E[ie]),G=J):te=q(te,_(S[Y][de],E[ie]))}G===J&&!K(te,Z)&&(R.push(Y),W.push(te))}}return X[B]=R.length,ae}function D(b,y){var S=b._values,C=b._index,A=b._ptr,E=b._datatype||b._data===void 0?b._datatype:b.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=y._data,F=y._datatype||y.getDataType(),k=b._size[0],I=y._size[0],P=[],B=[],O=[],q,_=n,K=i,Z=o,W=0;E&&F&&E===F&&typeof E=="string"&&E!=="mixed"&&(q=E,_=e.find(n,[q,q]),K=e.find(i,[q,q]),Z=e.find(o,[q,q]),W=e.convert(0,q));var R=[],X=[];O[0]=0;for(var ae=0;ae<I;ae++){var j=M[ae];if(!Z(j,W))for(var U=A[ae],$=A[ae+1],G=U;G<$;G++){var Y=C[G];X[Y]?R[Y]=_(R[Y],K(j,S[G])):(X[Y]=!0,B.push(Y),R[Y]=K(j,S[G]))}}for(var J=B.length,te=0;te<J;te++){var ie=B[te];P[te]=R[ie]}return O[1]=B.length,b.createSparseMatrix({values:P,index:B,ptr:O,size:[k,1],datatype:E===b._datatype&&F===y._datatype?q:void 0})}function g(b,y){var S=b._values,C=b._index,A=b._ptr,E=b._datatype||b._data===void 0?b._datatype:b.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=y._data,F=y._datatype||y.getDataType(),k=b._size[0],I=y._size[0],P=y._size[1],B,O=n,q=i,_=o,K=0;E&&F&&E===F&&typeof E=="string"&&E!=="mixed"&&(B=E,O=e.find(n,[B,B]),q=e.find(i,[B,B]),_=e.find(o,[B,B]),K=e.convert(0,B));for(var Z=[],W=[],R=[],X=b.createSparseMatrix({values:Z,index:W,ptr:R,size:[k,P],datatype:E===b._datatype&&F===y._datatype?B:void 0}),ae=[],j=[],U=0;U<P;U++){R[U]=W.length;for(var $=U+1,G=0;G<I;G++){var Y=M[G][U];if(!_(Y,K))for(var J=A[G],te=A[G+1],ie=J;ie<te;ie++){var de=C[ie];j[de]!==$?(j[de]=$,W.push(de),ae[de]=q(Y,S[ie])):ae[de]=O(ae[de],q(Y,S[ie]))}}for(var z=R[U],V=W.length,ee=z;ee<V;ee++){var ne=W[ee];Z[ee]=ae[ne]}}return R[P]=W.length,X}function w(b,y){var S=b._values,C=b._index,A=b._ptr,E=b._datatype||b._data===void 0?b._datatype:b.getDataType(),M=y._values,F=y._index,k=y._ptr,I=y._datatype||y._data===void 0?y._datatype:y.getDataType(),P=b._size[0],B=y._size[1],O=S&&M,q,_=n,K=i;E&&I&&E===I&&typeof E=="string"&&E!=="mixed"&&(q=E,_=e.find(n,[q,q]),K=e.find(i,[q,q]));for(var Z=O?[]:void 0,W=[],R=[],X=b.createSparseMatrix({values:Z,index:W,ptr:R,size:[P,B],datatype:E===b._datatype&&I===y._datatype?q:void 0}),ae=O?[]:void 0,j=[],U,$,G,Y,J,te,ie,de,z=0;z<B;z++){R[z]=W.length;var V=z+1;for(J=k[z],te=k[z+1],Y=J;Y<te;Y++)if(de=F[Y],O)for($=A[de],G=A[de+1],U=$;U<G;U++)ie=C[U],j[ie]!==V?(j[ie]=V,W.push(ie),ae[ie]=K(M[Y],S[U])):ae[ie]=_(ae[ie],K(M[Y],S[U]));else for($=A[de],G=A[de+1],U=$;U<G;U++)ie=C[U],j[ie]!==V&&(j[ie]=V,W.push(ie));if(O)for(var ee=R[z],ne=W.length,le=ee;le<ne;le++){var fe=W[le];Z[le]=ae[fe]}}return R[B]=W.length,X}return e(ag,i,{"Array, Array":e.referTo("Matrix, Matrix",b=>(y,S)=>{u(Me(y),Me(S));var C=b(t(y),t(S));return we(C)?C.valueOf():C}),"Matrix, Matrix":function(y,S){var C=y.size(),A=S.size();return u(C,A),C.length===1?A.length===1?c(y,S,C[0]):f(y,S):A.length===1?p(y,S):h(y,S)},"Matrix, Array":e.referTo("Matrix,Matrix",b=>(y,S)=>b(y,t(S))),"Array, Matrix":e.referToSelf(b=>(y,S)=>b(t(y,S.storage()),S)),"SparseMatrix, any":function(y,S){return s(y,S,i,!1)},"DenseMatrix, any":function(y,S){return l(y,S,i,!1)},"any, SparseMatrix":function(y,S){return s(S,y,i,!0)},"any, DenseMatrix":function(y,S){return l(S,y,i,!0)},"Array, any":function(y,S){return l(t(y),S,i,!1).valueOf()},"any, Array":function(y,S){return l(t(S),y,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(b=>(y,S,C)=>{for(var A=b(y,S),E=0;E<C.length;E++)A=b(A,C[E]);return A})})});var lg="nthRoot",N_=["typed","matrix","equalScalar","BigNumber","concat"],ug=N(lg,N_,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,concat:o}=r,a=nr({typed:e}),s=Ft({typed:e,equalScalar:n}),l=Zn({typed:e,equalScalar:n}),u=nt({typed:e,equalScalar:n}),c=Le({typed:e,matrix:t,concat:o});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(lg,{number:wc,"number, number":wc,BigNumber:p=>m(p,new i(2)),"BigNumber, BigNumber":m,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",p=>h=>p(t(h),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",p=>h=>p(h,2)),SparseMatrix:e.referTo("SparseMatrix,number",p=>h=>p(h,2)),"SparseMatrix, SparseMatrix":e.referToSelf(p=>(h,d)=>{if(d.density()===1)return l(h,d,p);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(p=>(h,d)=>{if(d.density()===1)return a(h,d,p,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",p=>(h,d)=>p(t(h),d)),"number | BigNumber, SparseMatrix":e.referToSelf(p=>(h,d)=>{if(d.density()===1)return u(d,h,p,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:s,Ss:u,sS:!1}));function m(p,h){var d=i.precision,v=i.clone({precision:d+2}),x=new i(0),D=new v(1),g=h.isNegative();if(g&&(h=h.neg()),h.isZero())throw new Error("Root must be non-zero");if(p.isNegative()&&!h.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(p.isZero())return g?new v(1/0):0;if(!p.isFinite())return g?x:p;var w=p.abs().pow(D.div(h));return w=p.isNeg()?w.neg():w,new i((g?D.div(w):w).toPrecision(d))}});var cg="sign",C_=["typed","BigNumber","Fraction","complex"],fg=N(cg,C_,r=>{var{typed:e,BigNumber:t,complex:n,Fraction:i}=r;return e(cg,{number:vs,Complex:function(a){return a.im===0?n(vs(a.re)):a.sign()},BigNumber:function(a){return new t(a.cmp(0))},bigint:function(a){return a>0n?1n:a<0n?-1n:0n},Fraction:function(a){return new i(a.s,1)},"Array | Matrix":e.referToSelf(o=>a=>De(a,o,!0)),Unit:e.referToSelf(o=>a=>{if(!a._isDerived()&&a.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(o,a.valueType())(a.value)})})});var E_="sqrt",M_=["config","typed","Complex"],mg=N(E_,M_,r=>{var{config:e,typed:t,Complex:n}=r;return t("sqrt",{number:i,Complex:function(a){return a.sqrt()},BigNumber:function(a){return!a.isNegative()||e.predictable?a.sqrt():i(a.toNumber())},Unit:function(a){return a.pow(.5)}});function i(o){return isNaN(o)?NaN:o>=0||e.predictable?Math.sqrt(o):new n(o,0).sqrt()}});var pg="square",T_=["typed"],hg=N(pg,T_,r=>{var{typed:e}=r;return e(pg,{number:Dc,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},bigint:function(n){return n*n},Fraction:function(n){return n.mul(n)},Unit:function(n){return n.pow(2)}})});var dg="subtract",F_=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],gg=N(dg,F_,r=>{var{typed:e,matrix:t,equalScalar:n,subtractScalar:i,unaryMinus:o,DenseMatrix:a,concat:s}=r,l=nr({typed:e}),u=ct({typed:e}),c=Yn({typed:e,equalScalar:n}),f=xr({typed:e,DenseMatrix:a}),m=Je({typed:e,DenseMatrix:a}),p=Le({typed:e,matrix:t,concat:s});return e(dg,{"any, any":i},p({elop:i,SS:c,DS:l,SD:u,Ss:m,sS:f}))});var vg="xgcd",O_=["typed","config","matrix","BigNumber"],yg=N(vg,O_,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(vg,{"number, number":function(s,l){var u=Sc(s,l);return t.matrix==="Array"?u:n(u)},"BigNumber, BigNumber":o});function o(a,s){var l,u,c,f=new i(0),m=new i(1),p=f,h=m,d=m,v=f;if(!a.isInt()||!s.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!s.isZero();)u=a.div(s).floor(),c=a.mod(s),l=p,p=h.minus(u.times(p)),h=l,l=d,d=v.minus(u.times(d)),v=l,a=s,s=c;var x;return a.lt(f)?x=[a.neg(),h.neg(),v.neg()]:x=[a,a.isZero()?0:h,v],t.matrix==="Array"?x:n(x)}});var xg="invmod",B_=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],bg=N(xg,B_,r=>{var{typed:e,config:t,BigNumber:n,xgcd:i,equal:o,smaller:a,mod:s,add:l,isInteger:u}=r;return e(xg,{"number, number":c,"BigNumber, BigNumber":c});function c(f,m){if(!u(f)||!u(m))throw new Error("Parameters in function invmod must be integer numbers");if(f=s(f,m),o(m,0))throw new Error("Divisor must be non zero");var p=i(f,m);p=p.valueOf();var[h,d]=p;return o(h,n(1))?(d=s(d,m),a(d,n(0))&&(d=l(d,m)),d):NaN}});var __="matAlgo09xS0Sf",k_=["typed","equalScalar"],Ns=N(__,k_,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,a){var s=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),m=o._values,p=o._index,h=o._ptr,d=o._size,v=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==d.length)throw new ke(c.length,d.length);if(c[0]!==d[0]||c[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+d+")");var x=c[0],D=c[1],g,w=t,b=0,y=a;typeof f=="string"&&f===v&&f!=="mixed"&&(g=f,w=e.find(t,[g,g]),b=e.convert(0,g),y=e.find(a,[g,g]));var S=s&&m?[]:void 0,C=[],A=[],E=S?[]:void 0,M=[],F,k,I,P,B;for(k=0;k<D;k++){A[k]=C.length;var O=k+1;if(E)for(P=h[k],B=h[k+1],I=P;I<B;I++)F=p[I],M[F]=O,E[F]=m[I];for(P=u[k],B=u[k+1],I=P;I<B;I++)if(F=l[I],E){var q=M[F]===O?E[F]:b,_=y(s[I],q);w(_,b)||(C.push(F),S.push(_))}else C.push(F)}return A[D]=C.length,i.createSparseMatrix({values:S,index:C,ptr:A,size:[x,D],datatype:f===i._datatype&&v===o._datatype?g:void 0})}});var wg="dotMultiply",P_=["typed","matrix","equalScalar","multiplyScalar","concat"],Dg=N(wg,P_,r=>{var{typed:e,matrix:t,equalScalar:n,multiplyScalar:i,concat:o}=r,a=Ft({typed:e,equalScalar:n}),s=Ns({typed:e,equalScalar:n}),l=nt({typed:e,equalScalar:n}),u=Le({typed:e,matrix:t,concat:o});return e(wg,u({elop:i,SS:s,DS:a,Ss:l}))});function Sg(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero()||e.eq(-1)||r.eq(e))return r;if(e.isZero()||r.eq(-1))return e;if(!r.isFinite()||!e.isFinite()){if(!r.isFinite()&&!e.isFinite())return r.isNegative()===e.isNegative()?r:new t(0);if(!r.isFinite())return e.isNegative()?r:r.isNegative()?new t(0):e;if(!e.isFinite())return r.isNegative()?e:e.isNegative()?new t(0):r}return sf(r,e,function(n,i){return n&i})}function io(r){if(r.isFinite()&&!r.isInteger())throw new Error("Integer expected in function bitNot");var e=r.constructor,t=e.precision;e.config({precision:1e9});var n=r.plus(new e(1));return n.s=-n.s||null,e.config({precision:t}),n}function Ag(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);var n=new t(-1);return r.isZero()||e.eq(n)||r.eq(e)?e:e.isZero()||r.eq(n)?r:!r.isFinite()||!e.isFinite()?!r.isFinite()&&!r.isNegative()&&e.isNegative()||r.isNegative()&&!e.isNegative()&&!e.isFinite()?n:r.isNegative()&&e.isNegative()?r.isFinite()?r:e:r.isFinite()?e:r:sf(r,e,function(i,o){return i|o})}function sf(r,e,t){var n=r.constructor,i,o,a=+(r.s<0),s=+(e.s<0);if(a){i=Cs(io(r));for(var l=0;l<i.length;++l)i[l]^=1}else i=Cs(r);if(s){o=Cs(io(e));for(var u=0;u<o.length;++u)o[u]^=1}else o=Cs(e);var c,f,m;i.length<=o.length?(c=i,f=o,m=a):(c=o,f=i,m=s);var p=c.length,h=f.length,d=t(a,s)^1,v=new n(d^1),x=new n(1),D=new n(2),g=n.precision;for(n.config({precision:1e9});p>0;)t(c[--p],f[--h])===d&&(v=v.plus(x)),x=x.times(D);for(;h>0;)t(m,f[--h])===d&&(v=v.plus(x)),x=x.times(D);return n.config({precision:g}),d===0&&(v.s=-v.s),v}function Cs(r){for(var e=r.d,t=e[0]+"",n=1;n<e.length;++n){for(var i=e[n]+"",o=7-i.length;o--;)i="0"+i;t+=i}for(var a=t.length;t.charAt(a)==="0";)a--;var s=r.e,l=t.slice(0,a+1||1),u=l.length;if(s>0)if(++s>u)for(s-=u;s--;)l+="0";else s<u&&(l=l.slice(0,s)+"."+l.slice(s));for(var c=[0],f=0;f<l.length;){for(var m=c.length;m--;)c[m]*=10;c[0]+=parseInt(l.charAt(f++));for(var p=0;p<c.length;++p)c[p]>1&&((c[p+1]===null||c[p+1]===void 0)&&(c[p+1]=0),c[p+1]+=c[p]>>1,c[p]&=1)}return c.reverse()}function Ng(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero())return e;if(e.isZero())return r;if(r.eq(e))return new t(0);var n=new t(-1);return r.eq(n)?io(e):e.eq(n)?io(r):!r.isFinite()||!e.isFinite()?!r.isFinite()&&!e.isFinite()?n:new t(r.isNegative()===e.isNegative()?1/0:-1/0):sf(r,e,function(i,o){return i^o})}function Cg(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:!r.isFinite()&&!e.isFinite()?new t(NaN):e.lt(55)?r.times(Math.pow(2,e.toNumber())+""):r.times(new t(2).pow(e))}function Eg(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:e.isFinite()?e.lt(55)?r.div(Math.pow(2,e.toNumber())+"").floor():r.div(new t(2).pow(e)).floor():r.isNegative()?new t(-1):r.isFinite()?new t(0):new t(NaN)}var Mg="bitAnd",I_=["typed","matrix","equalScalar","concat"],Es=N(Mg,I_,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,o=Ft({typed:e,equalScalar:n}),a=Zn({typed:e,equalScalar:n}),s=nt({typed:e,equalScalar:n}),l=Le({typed:e,matrix:t,concat:i});return e(Mg,{"number, number":Nc,"BigNumber, BigNumber":Sg,"bigint, bigint":(u,c)=>u&c},l({SS:a,DS:o,Ss:s}))});var Tg="bitNot",R_=["typed"],Fg=N(Tg,R_,r=>{var{typed:e}=r;return e(Tg,{number:Cc,BigNumber:io,bigint:t=>~t,"Array | Matrix":e.referToSelf(t=>n=>De(n,t))})});var Og="bitOr",L_=["typed","matrix","equalScalar","DenseMatrix","concat"],Ms=N(Og,L_,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:o}=r,a=nr({typed:e}),s=no({typed:e,equalScalar:n}),l=xr({typed:e,DenseMatrix:i}),u=Le({typed:e,matrix:t,concat:o});return e(Og,{"number, number":Ec,"BigNumber, BigNumber":Ag,"bigint, bigint":(c,f)=>c|f},u({SS:s,DS:a,Ss:l}))});var z_="matAlgo07xSSf",q_=["typed","DenseMatrix"],Rt=N(z_,q_,r=>{var{typed:e,DenseMatrix:t}=r;return function(o,a,s){var l=o._size,u=o._datatype||o._data===void 0?o._datatype:o.getDataType(),c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==c.length)throw new ke(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var m=l[0],p=l[1],h,d=0,v=s;typeof u=="string"&&u===f&&u!=="mixed"&&(h=u,d=e.convert(0,h),v=e.find(s,[h,h]));var x,D,g=[];for(x=0;x<m;x++)g[x]=[];var w=[],b=[],y=[],S=[];for(D=0;D<p;D++){var C=D+1;for(n(o,D,y,w,C),n(a,D,S,b,C),x=0;x<m;x++){var A=y[x]===C?w[x]:d,E=S[x]===C?b[x]:d;g[x][D]=v(A,E)}}return new t({data:g,size:[m,p],datatype:u===o._datatype&&f===a._datatype?h:void 0})};function n(i,o,a,s,l){for(var u=i._values,c=i._index,f=i._ptr,m=f[o],p=f[o+1];m<p;m++){var h=c[m];a[h]=l,s[h]=u[m]}}});var Bg="bitXor",U_=["typed","matrix","DenseMatrix","concat"],_g=N(Bg,U_,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i}=r,o=ct({typed:e}),a=Rt({typed:e,DenseMatrix:n}),s=Je({typed:e,DenseMatrix:n}),l=Le({typed:e,matrix:t,concat:i});return e(Bg,{"number, number":Mc,"BigNumber, BigNumber":Ng,"bigint, bigint":(u,c)=>u^c},l({SS:a,DS:o,Ss:s}))});var kg="arg",V_=["typed"],Pg=N(kg,V_,r=>{var{typed:e}=r;return e(kg,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":e.referToSelf(t=>n=>De(n,t))})});var Ig="conj",H_=["typed"],Rg=N(Ig,H_,r=>{var{typed:e}=r;return e(Ig,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf(t=>n=>De(n,t))})});var Lg="im",$_=["typed"],zg=N(Lg,$_,r=>{var{typed:e}=r;return e(Lg,{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>n=>De(n,t))})});var qg="re",W_=["typed"],Ug=N(qg,W_,r=>{var{typed:e}=r;return e(qg,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>n=>De(n,t))})});var Vg="not",G_=["typed"],Hg=N(Vg,G_,r=>{var{typed:e}=r;return e(Vg,{"null | undefined":()=>!0,number:kc,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},bigint:t=>!t,Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>De(n,t))})});var $g="or",K_=["typed","matrix","equalScalar","DenseMatrix","concat"],Ts=N($g,K_,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:o}=r,a=ct({typed:e}),s=Yn({typed:e,equalScalar:n}),l=Je({typed:e,DenseMatrix:i}),u=Le({typed:e,matrix:t,concat:o});return e($g,{"number, number":ys,"Complex, Complex":function(f,m){return f.re!==0||f.im!==0||m.re!==0||m.im!==0},"BigNumber, BigNumber":function(f,m){return!f.isZero()&&!f.isNaN()||!m.isZero()&&!m.isNaN()},"bigint, bigint":ys,"Unit, Unit":e.referToSelf(c=>(f,m)=>c(f.value||0,m.value||0))},u({SS:s,DS:a,Ss:l}))});var Wg="xor",Y_=["typed","matrix","DenseMatrix","concat"],Gg=N(Wg,Y_,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i}=r,o=ct({typed:e}),a=Rt({typed:e,DenseMatrix:n}),s=Je({typed:e,DenseMatrix:n}),l=Le({typed:e,matrix:t,concat:i});return e(Wg,{"number, number":xs,"Complex, Complex":function(c,f){return(c.re!==0||c.im!==0)!=(f.re!==0||f.im!==0)},"bigint, bigint":xs,"BigNumber, BigNumber":function(c,f){return(!c.isZero()&&!c.isNaN())!=(!f.isZero()&&!f.isNaN())},"Unit, Unit":e.referToSelf(u=>(c,f)=>u(c.value||0,f.value||0))},l({SS:a,DS:o,Ss:s}))});var Kg="concat",Z_=["typed","matrix","isInteger"],Fs=N(Kg,Z_,r=>{var{typed:e,matrix:t,isInteger:n}=r;return e(Kg,{"...Array | Matrix | number | BigNumber":function(o){var a,s=o.length,l=-1,u,c=!1,f=[];for(a=0;a<s;a++){var m=o[a];if(we(m)&&(c=!0),Fe(m)||Ne(m)){if(a!==s-1)throw new Error("Dimension must be specified as last argument");if(u=l,l=m.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||a>0&&l>u)throw new Wt(l,u+1)}else{var p=Ee(m).valueOf(),h=Me(p);if(f[a]=p,u=l,l=h.length-1,a>0&&l!==u)throw new ke(u+1,l+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var d=f.shift();f.length;)d=ac(d,f.shift(),l);return c?t(d):d},"...string":function(o){return o.join("")}})});var Yg="column",X_=["typed","Index","matrix","range"],Os=N(Yg,X_,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(Yg,{"Matrix, number":o,"Array, number":function(s,l){return o(n(Ee(s)),l).valueOf()}});function o(a,s){if(a.size().length!==2)throw new Error("Only two dimensional matrix is supported");at(s,a.size()[1]);var l=i(0,a.size()[0]),u=new t(l,s),c=a.subset(u);return we(c)?c:n([[c]])}});var Zg="count",J_=["typed","size","prod"],Xg=N(Zg,J_,r=>{var{typed:e,size:t,prod:n}=r;return e(Zg,{string:function(o){return o.length},"Matrix | Array":function(o){return n(t(o))}})});var Jg="cross",j_=["typed","matrix","subtract","multiply"],jg=N(Jg,j_,r=>{var{typed:e,matrix:t,subtract:n,multiply:i}=r;return e(Jg,{"Matrix, Matrix":function(s,l){return t(o(s.toArray(),l.toArray()))},"Matrix, Array":function(s,l){return t(o(s.toArray(),l))},"Array, Matrix":function(s,l){return t(o(s,l.toArray()))},"Array, Array":o});function o(a,s){var l=Math.max(Me(a).length,Me(s).length);a=Xi(a),s=Xi(s);var u=Me(a),c=Me(s);if(u.length!==1||c.length!==1||u[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+c.join(", ")+"])");var f=[n(i(a[1],s[2]),i(a[2],s[1])),n(i(a[2],s[0]),i(a[0],s[2])),n(i(a[0],s[1]),i(a[1],s[0]))];return l>1?[f]:f}});var Qg="diag",Q_=["typed","matrix","DenseMatrix","SparseMatrix"],ev=N(Qg,Q_,r=>{var{typed:e,matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(Qg,{Array:function(u){return o(u,0,Me(u),null)},"Array, number":function(u,c){return o(u,c,Me(u),null)},"Array, BigNumber":function(u,c){return o(u,c.toNumber(),Me(u),null)},"Array, string":function(u,c){return o(u,0,Me(u),c)},"Array, number, string":function(u,c,f){return o(u,c,Me(u),f)},"Array, BigNumber, string":function(u,c,f){return o(u,c.toNumber(),Me(u),f)},Matrix:function(u){return o(u,0,u.size(),u.storage())},"Matrix, number":function(u,c){return o(u,c,u.size(),u.storage())},"Matrix, BigNumber":function(u,c){return o(u,c.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,c){return o(u,0,u.size(),c)},"Matrix, number, string":function(u,c,f){return o(u,c,u.size(),f)},"Matrix, BigNumber, string":function(u,c,f){return o(u,c.toNumber(),u.size(),f)}});function o(l,u,c,f){if(!xe(u))throw new TypeError("Second parameter in function diag must be an integer");var m=u>0?u:0,p=u<0?-u:0;switch(c.length){case 1:return a(l,u,f,c[0],p,m);case 2:return s(l,u,f,c,p,m)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function a(l,u,c,f,m,p){var h=[f+m,f+p];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var d=c==="sparse"?i.diagonal(h,l,u):n.diagonal(h,l,u);return c!==null?d:d.valueOf()}function s(l,u,c,f,m,p){if(we(l)){var h=l.diagonal(u);return c!==null?c!==h.storage()?t(h,c):h:h.valueOf()}for(var d=Math.min(f[0]-m,f[1]-p),v=[],x=0;x<d;x++)v[x]=l[x+m][x+p];return c!==null?t(v):v}});var ek="filter",tk=["typed"],Bs=N(ek,tk,r=>{var{typed:e}=r;return e("filter",{"Array, function":tv,"Matrix, function":function(n,i){return n.create(tv(n.valueOf(),i),n.datatype())},"Array, RegExp":ic,"Matrix, RegExp":function(n,i){return n.create(ic(n.valueOf(),i),n.datatype())}})});function tv(r,e){var t=Lr(e,r,"filter");return Fh(r,function(n,i,o){return t(n,[i],o)})}var rv="flatten",rk=["typed"],nv=N(rv,rk,r=>{var{typed:e}=r;return e(rv,{Array:function(n){return qe(n)},Matrix:function(n){return n.create(qe(n.toArray()),n.datatype())}})});var lf="forEach",nk=["typed"],_s=N(lf,nk,r=>{var{typed:e}=r;return e(lf,{"Array, function":ik,"Matrix, function":function(n,i){n.forEach(i)}})});function ik(r,e){Vo(r,[],r,Lr(e,r,lf))}var iv="getMatrixDataType",ok=["typed"],ov=N(iv,ok,r=>{var{typed:e}=r;return e(iv,{Array:function(n){return vi(n,Ye)},Matrix:function(n){return n.getDataType()}})});var av="identity",ak=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],sv=N(av,ak,r=>{var{typed:e,config:t,matrix:n,BigNumber:i,DenseMatrix:o,SparseMatrix:a}=r;return e(av,{"":function(){return t.matrix==="Matrix"?n([]):[]},string:function(c){return n(c)},"number | BigNumber":function(c){return l(c,c,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return l(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return l(c,f,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,m){return l(c,f,m)},Array:function(c){return s(c)},"Array, string":function(c,f){return s(c,f)},Matrix:function(c){return s(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return s(c.valueOf(),f)}});function s(u,c){switch(u.length){case 0:return c?n(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,f){var m=Ne(u)||Ne(c)?i:null;if(Ne(u)&&(u=u.toNumber()),Ne(c)&&(c=c.toNumber()),!xe(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!xe(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var p=m?new i(1):1,h=m?new m(0):0,d=[u,c];if(f){if(f==="sparse")return a.diagonal(d,p,0,h);if(f==="dense")return o.diagonal(d,p,0,h);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var v=jr([],d,h),x=u<c?u:c,D=0;D<x;D++)v[D][D]=p;return v}});var lv="kron",sk=["typed","matrix","multiplyScalar"],uv=N(lv,sk,r=>{var{typed:e,matrix:t,multiplyScalar:n}=r;return e(lv,{"Matrix, Matrix":function(a,s){return t(i(a.toArray(),s.toArray()))},"Matrix, Array":function(a,s){return t(i(a.toArray(),s))},"Array, Matrix":function(a,s){return t(i(a,s.toArray()))},"Array, Array":i});function i(o,a){if(Me(o).length===1&&(o=[o]),Me(a).length===1&&(a=[a]),Me(o).length>2||Me(a).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(o.length)+", y = "+JSON.stringify(a.length)+")");var s=[],l=[];return o.map(function(u){return a.map(function(c){return l=[],s.push(l),u.map(function(f){return c.map(function(m){return l.push(n(f,m))})})})})&&s}});var uf="map",lk=["typed"],ks=N(uf,lk,r=>{var{typed:e}=r;return e(uf,{"Array, function":n,"Matrix, function":function(o,a){return o.map(a)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(i,o,a)=>t([i,o,...a.slice(0,a.length-1)],a[a.length-1])});function t(i,o){if(typeof o!="function")throw new Error("Last argument must be a callback function");var a=i[0].isMatrix,s=Uo(...i.map(w=>w.isMatrix?w.size():Me(w))),l=a?(w,b)=>w.get(b):ji,u=a?i.map(w=>w.isMatrix?w.create(mn(w.toArray(),s),w.datatype()):i[0].create(mn(w.valueOf(),s))):i.map(w=>w.isMatrix?mn(w.toArray(),s):mn(w,s)),c;if(e.isTypedFunction(o)){var f=s.map(()=>0),m=u.map(w=>l(w,f)),p=g(o,m,f,u);c=x(p)}else{var h=i.length,d=D(o,h);c=x(d)}var v=(w,b)=>c([w,...u.slice(1).map(y=>l(y,b))],b);if(a)return u[0].map(v);return n(u[0],v);function x(w){switch(w){case 0:return b=>o(...b);case 1:return(b,y)=>o(...b,y);case 2:return(b,y)=>o(...b,y,...u)}}function D(w,b){return w.length>b+1?2:w.length===b+1?1:0}function g(w,b,y,S){return e.resolve(w,[...b,y,...S])!==null?2:e.resolve(w,[...b,y])!==null?1:(e.resolve(w,b)!==null,0)}}function n(i,o){return Vo(i,[],i,Lr(o,i,uf))}});var cv="diff",uk=["typed","matrix","subtract","number"],Ps=N(cv,uk,r=>{var{typed:e,matrix:t,subtract:n,number:i}=r;return e(cv,{"Array | Matrix":function(c){return we(c)?t(a(c.toArray())):a(c)},"Array | Matrix, number":function(c,f){if(!xe(f))throw new RangeError("Dimension must be a whole number");return we(c)?t(o(c.toArray(),f)):o(c,f)},"Array, BigNumber":e.referTo("Array,number",u=>(c,f)=>u(c,i(f))),"Matrix, BigNumber":e.referTo("Matrix,number",u=>(c,f)=>u(c,i(f)))});function o(u,c){if(we(u)&&(u=u.toArray()),!Array.isArray(u))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return u.forEach(m=>{f.push(o(m,c-1))}),f}else{if(c===0)return a(u);throw RangeError("Cannot have negative dimension")}}function a(u){for(var c=[],f=u.length,m=1;m<f;m++)c.push(s(u[m-1],u[m]));return c}function s(u,c){we(u)&&(u=u.toArray()),we(c)&&(c=c.toArray());var f=Array.isArray(u),m=Array.isArray(c);if(f&&m)return l(u,c);if(!f&&!m)return n(c,u);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function l(u,c){if(u.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],m=u.length,p=0;p<m;p++)f.push(s(u[p],c[p]));return f}});var ck="ones",fk=["typed","config","matrix","BigNumber"],fv=N(ck,fk,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e("ones",{"":function(){return t.matrix==="Array"?o([]):o([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return o(u,f)}else return t.matrix==="Array"?o(u):o(u,"default")},Array:o,Matrix:function(u){var c=u.storage();return o(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return o(u.valueOf(),c)}});function o(l,u){var c=a(l),f=c?new i(1):1;if(s(l),u){var m=n(u);return l.length>0?m.resize(l,f):m}else{var p=[];return l.length>0?jr(p,l,f):p}}function a(l){var u=!1;return l.forEach(function(c,f,m){Ne(c)&&(u=!0,m[f]=c.toNumber())}),u}function s(l){l.forEach(function(u){if(typeof u!="number"||!xe(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function oo(){throw new Error('No "bignumber" implementation available')}function Is(){throw new Error('No "fraction" implementation available')}function Rs(){throw new Error('No "matrix" implementation available')}var mv="range",mk=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],Ls=N(mv,mk,r=>{var{typed:e,config:t,matrix:n,bignumber:i,smaller:o,smallerEq:a,larger:s,largerEq:l,add:u,isPositive:c}=r;return e(mv,{string:m,"string, boolean":m,"number, number":function(v,x){return f(p(v,x,1,!1))},"number, number, number":function(v,x,D){return f(p(v,x,D,!1))},"number, number, boolean":function(v,x,D){return f(p(v,x,1,D))},"number, number, number, boolean":function(v,x,D,g){return f(p(v,x,D,g))},"BigNumber, BigNumber":function(v,x){var D=v.constructor;return f(p(v,x,new D(1),!1))},"BigNumber, BigNumber, BigNumber":function(v,x,D){return f(p(v,x,D,!1))},"BigNumber, BigNumber, boolean":function(v,x,D){var g=v.constructor;return f(p(v,x,new g(1),D))},"BigNumber, BigNumber, BigNumber, boolean":function(v,x,D,g){return f(p(v,x,D,g))},"Unit, Unit, Unit":function(v,x,D){return f(p(v,x,D,!1))},"Unit, Unit, Unit, boolean":function(v,x,D,g){return f(p(v,x,D,g))}});function f(d){return t.matrix==="Matrix"?n?n(d):Rs():d}function m(d,v){var x=h(d);if(!x)throw new SyntaxError('String "'+d+'" is no valid range');return t.number==="BigNumber"?(i===void 0&&oo(),f(p(i(x.start),i(x.end),i(x.step)),v)):f(p(x.start,x.end,x.step,v))}function p(d,v,x,D){for(var g=[],w=c(x)?D?a:o:D?l:s,b=d;w(b,v);)g.push(b),b=u(b,x);return g}function h(d){var v=d.split(":"),x=v.map(function(g){return Number(g)}),D=x.some(function(g){return isNaN(g)});if(D)return null;switch(x.length){case 2:return{start:x[0],end:x[1],step:1};case 3:return{start:x[0],end:x[2],step:x[1]};default:return null}}});var pv="reshape",pk=["typed","isInteger","matrix"],hv=N(pv,pk,r=>{var{typed:e,isInteger:t}=r;return e(pv,{"Matrix, Array":function(i,o){return i.reshape(o,!0)},"Array, Array":function(i,o){return o.forEach(function(a){if(!t(a))throw new TypeError("Invalid size for dimension: "+a)}),zo(i,o)}})});var hk="resize",dk=["config","matrix"],dv=N(hk,dk,r=>{var{config:e,matrix:t}=r;return function(o,a,s){if(arguments.length!==2&&arguments.length!==3)throw new Er("resize",arguments.length,2,3);if(we(a)&&(a=a.valueOf()),Ne(a[0])&&(a=a.map(function(c){return Ne(c)?c.toNumber():c})),we(o))return o.resize(a,s,!0);if(typeof o=="string")return n(o,a,s);var l=Array.isArray(o)?!1:e.matrix!=="Array";if(a.length===0){for(;Array.isArray(o);)o=o[0];return Ee(o)}else{Array.isArray(o)||(o=[o]),o=Ee(o);var u=jr(o,a,s);return l?t(u):u}};function n(i,o,a){if(a!==void 0){if(typeof a!="string"||a.length!==1)throw new TypeError("Single character expected as defaultValue")}else a=" ";if(o.length!==1)throw new ke(o.length,1);var s=o[0];if(typeof s!="number"||!xe(s))throw new TypeError("Invalid size, must contain positive integers (size: "+_e(o)+")");if(i.length>s)return i.substring(0,s);if(i.length<s){for(var l=i,u=0,c=s-i.length;u<c;u++)l+=a;return l}else return i}});var gv="rotate",gk=["typed","multiply","rotationMatrix"],vv=N(gv,gk,r=>{var{typed:e,multiply:t,rotationMatrix:n}=r;return e(gv,{"Array , number | BigNumber | Complex | Unit":function(a,s){i(a,2);var l=t(n(s),a);return l.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(a,s){return i(a,2),t(n(s),a)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(a,s,l){i(a,3);var u=t(n(s,l),a);return u},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(a,s,l){return i(a,3),t(n(s,l),a)}});function i(o,a){var s=Array.isArray(o)?Me(o):o.size();if(s.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(a));if(s.length===2&&s[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(a));if(s[0]!==a)throw new RangeError("Vector must be of dimensions 1x".concat(a))}});var yv="rotationMatrix",vk=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],xv=N(yv,vk,r=>{var{typed:e,config:t,multiplyScalar:n,addScalar:i,unaryMinus:o,norm:a,BigNumber:s,matrix:l,DenseMatrix:u,SparseMatrix:c,cos:f,sin:m}=r;return e(yv,{"":function(){return t.matrix==="Matrix"?l([]):[]},string:function(g){return l(g)},"number | BigNumber | Complex | Unit":function(g){return p(g,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(g,w){return p(g,w)},"number | BigNumber | Complex | Unit, Array":function(g,w){var b=l(w);return h(b),x(g,b,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(g,w){h(w);var b=w.storage()||(t.matrix==="Matrix"?"dense":void 0);return x(g,w,b)},"number | BigNumber | Complex | Unit, Array, string":function(g,w,b){var y=l(w);return h(y),x(g,y,b)},"number | BigNumber | Complex | Unit, Matrix, string":function(g,w,b){return h(w),x(g,w,b)}});function p(D,g){var w=Ne(D),b=w?new s(-1):-1,y=f(D),S=m(D),C=[[y,n(b,S)],[S,y]];return v(C,g)}function h(D){var g=D.size();if(g.length<1||g[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function d(D){return D.reduce((g,w)=>n(g,w))}function v(D,g){if(g){if(g==="sparse")return new c(D);if(g==="dense")return new u(D);throw new TypeError('Unknown matrix type "'.concat(g,'"'))}return D}function x(D,g,w){var b=a(g);if(b===0)throw new RangeError("Rotation around zero vector");var y=Ne(D)?s:null,S=y?new y(1):1,C=y?new y(-1):-1,A=y?new y(g.get([0])/b):g.get([0])/b,E=y?new y(g.get([1])/b):g.get([1])/b,M=y?new y(g.get([2])/b):g.get([2])/b,F=f(D),k=i(S,o(F)),I=m(D),P=i(F,d([A,A,k])),B=i(d([A,E,k]),d([C,M,I])),O=i(d([A,M,k]),d([E,I])),q=i(d([A,E,k]),d([M,I])),_=i(F,d([E,E,k])),K=i(d([E,M,k]),d([C,A,I])),Z=i(d([A,M,k]),d([C,E,I])),W=i(d([E,M,k]),d([A,I])),R=i(F,d([M,M,k])),X=[[P,B,O],[q,_,K],[Z,W,R]];return v(X,w)}});var bv="row",yk=["typed","Index","matrix","range"],zs=N(bv,yk,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(bv,{"Matrix, number":o,"Array, number":function(s,l){return o(n(Ee(s)),l).valueOf()}});function o(a,s){if(a.size().length!==2)throw new Error("Only two dimensional matrix is supported");at(s,a.size()[0]);var l=i(0,a.size()[1]),u=new t(s,l),c=a.subset(u);return we(c)?c:n([[c]])}});var wv="size",xk=["typed","config","?matrix"],Dv=N(wv,xk,r=>{var{typed:e,config:t,matrix:n}=r;return e(wv,{Matrix:function(o){return o.create(o.size(),"number")},Array:Me,string:function(o){return t.matrix==="Array"?[o.length]:n([o.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(o){return t.matrix==="Array"?[]:n?n([],"dense","number"):Rs()}})});var Sv="squeeze",bk=["typed"],Av=N(Sv,bk,r=>{var{typed:e}=r;return e(Sv,{Array:function(n){return Xi(Ee(n))},Matrix:function(n){var i=Xi(n.toArray());return Array.isArray(i)?n.create(i,n.datatype()):i},any:function(n){return Ee(n)}})});var Nv="subset",wk=["typed","matrix","zeros","add"],qs=N(Nv,wk,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r;return e(Nv,{"Matrix, Index":function(s,l){return gi(l)?t():(Lo(s,l),s.subset(l))},"Array, Index":e.referTo("Matrix, Index",function(a){return function(s,l){var u=a(t(s),l);return l.isScalar()?u:u.valueOf()}}),"Object, Index":Sk,"string, Index":Dk,"Matrix, Index, any, any":function(s,l,u,c){return gi(l)?s:(Lo(s,l),s.clone().subset(l,o(u,l),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(a){return function(s,l,u,c){var f=a(t(s),l,u,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(a){return function(s,l,u){return a(t(s),l,u,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(a){return function(s,l,u){return a(s,l,u,void 0)}}),"string, Index, string":Cv,"string, Index, string, string":Cv,"Object, Index, any":Ak});function o(a,s){if(typeof a=="string")throw new Error("can't boradcast a string");if(s._isScalar)return a;var l=s.size();if(l.every(u=>u>0))try{return i(a,n(l))}catch{return a}else return a}});function Dk(r,e){if(!ln(e))throw new TypeError("Index expected");if(gi(e))return"";if(Lo(Array.from(r),e),e.size().length!==1)throw new ke(e.size().length,1);var t=r.length;at(e.min()[0],t),at(e.max()[0],t);var n=e.dimension(0),i="";return n.forEach(function(o){i+=r.charAt(o)}),i}function Cv(r,e,t,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(gi(e))return r;if(Lo(Array.from(r),e),e.size().length!==1)throw new ke(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=e.dimension(0),o=i.size()[0];if(o!==t.length)throw new ke(i.size()[0],t.length);var a=r.length;at(e.min()[0]),at(e.max()[0]);for(var s=[],l=0;l<a;l++)s[l]=r.charAt(l);if(i.forEach(function(f,m){s[f]=t.charAt(m[0])}),s.length>a)for(var u=a-1,c=s.length;u<c;u++)s[u]||(s[u]=n);return s.join("")}function Sk(r,e){if(!gi(e)){if(e.size().length!==1)throw new ke(e.size(),1);var t=e.dimension(0);if(typeof t!="string")throw new TypeError("String expected as index to retrieve an object property");return vt(r,t)}}function Ak(r,e,t){if(gi(e))return r;if(e.size().length!==1)throw new ke(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var i=Ee(r);return an(i,n,t),i}var Ev="transpose",Nk=["typed","matrix"],Mv=N(Ev,Nk,r=>{var{typed:e,matrix:t}=r;return e(Ev,{Array:a=>n(t(a)).valueOf(),Matrix:n,any:Ee});function n(a){var s=a.size(),l;switch(s.length){case 1:l=a.clone();break;case 2:{var u=s[0],c=s[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+_e(s)+")");switch(a.storage()){case"dense":l=i(a,u,c);break;case"sparse":l=o(a,u,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+_e(s)+")")}return l}function i(a,s,l){for(var u=a._data,c=[],f,m=0;m<l;m++){f=c[m]=[];for(var p=0;p<s;p++)f[p]=Ee(u[p][m])}return a.createDenseMatrix({data:c,size:[l,s],datatype:a._datatype})}function o(a,s,l){for(var u=a._values,c=a._index,f=a._ptr,m=u?[]:void 0,p=[],h=[],d=[],v=0;v<s;v++)d[v]=0;var x,D,g;for(x=0,D=c.length;x<D;x++)d[c[x]]++;for(var w=0,b=0;b<s;b++)h.push(w),w+=d[b],d[b]=h[b];for(h.push(w),g=0;g<l;g++)for(var y=f[g],S=f[g+1],C=y;C<S;C++){var A=d[c[C]]++;p[A]=g,u&&(m[A]=Ee(u[C]))}return a.createSparseMatrix({values:m,index:p,ptr:h,size:[l,s],datatype:a._datatype})}});var Tv="ctranspose",Ck=["typed","transpose","conj"],Fv=N(Tv,Ck,r=>{var{typed:e,transpose:t,conj:n}=r;return e(Tv,{any:function(o){return n(t(o))}})});var Ov="zeros",Ek=["typed","config","matrix","BigNumber"],Bv=N(Ov,Ek,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(Ov,{"":function(){return t.matrix==="Array"?o([]):o([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return o(u,f)}else return t.matrix==="Array"?o(u):o(u,"default")},Array:o,Matrix:function(u){var c=u.storage();return o(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return o(u.valueOf(),c)}});function o(l,u){var c=a(l),f=c?new i(0):0;if(s(l),u){var m=n(u);return l.length>0?m.resize(l,f):m}else{var p=[];return l.length>0?jr(p,l,f):p}}function a(l){var u=!1;return l.forEach(function(c,f,m){Ne(c)&&(u=!0,m[f]=c.toNumber())}),u}function s(l){l.forEach(function(u){if(typeof u!="number"||!xe(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}});var _v="fft",Mk=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],kv=N(_v,Mk,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,divideScalar:o,exp:a,tau:s,i:l,dotDivide:u,conj:c,pow:f,ceil:m,log2:p}=r;return e(_v,{Array:h,Matrix:function(g){return g.create(h(g.valueOf()),g.datatype())}});function h(D){var g=Me(D);return g.length===1?x(D,g[0]):d(D.map(w=>h(w,g.slice(1))),0)}function d(D,g){var w=Me(D);if(g!==0)return new Array(w[0]).fill(0).map((y,S)=>d(D[S],g-1));if(w.length===1)return x(D);function b(y){var S=Me(y);return new Array(S[1]).fill(0).map((C,A)=>new Array(S[0]).fill(0).map((E,M)=>y[M][A]))}return b(d(b(D),1))}function v(D){for(var g=D.length,w=a(o(i(-1,i(l,s)),g)),b=[],y=1-g;y<g;y++)b.push(f(w,o(f(y,2),2)));for(var S=f(2,m(p(g+g-1))),C=[...new Array(g).fill(0).map((B,O)=>i(D[O],b[g-1+O])),...new Array(S-g).fill(0)],A=[...new Array(g+g-1).fill(0).map((B,O)=>o(1,b[O])),...new Array(S-(g+g-1)).fill(0)],E=x(C),M=x(A),F=new Array(S).fill(0).map((B,O)=>i(E[O],M[O])),k=u(c(h(c(F))),S),I=[],P=g-1;P<g+g-1;P++)I.push(i(k[P],b[P]));return I}function x(D){var g=D.length;if(g===1)return[D[0]];if(g%2===0){for(var w=[...x(D.filter((C,A)=>A%2===0),g/2),...x(D.filter((C,A)=>A%2===1),g/2)],b=0;b<g/2;b++){var y=w[b],S=i(w[b+g/2],a(i(i(s,l),o(-b,g))));w[b]=n(y,S),w[b+g/2]=n(y,i(-1,S))}return w}else return v(D)}});var Pv="ifft",Tk=["typed","fft","dotDivide","conj"],Iv=N(Pv,Tk,r=>{var{typed:e,fft:t,dotDivide:n,conj:i}=r;return e(Pv,{"Array | Matrix":function(a){var s=we(a)?a.size():Me(a);return n(i(t(i(a))),s.reduce((l,u)=>l*u,1))}})});function xi(r){"@babel/helpers - typeof";return xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xi(r)}function Rv(r,e){if(xi(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(xi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Lv(r){var e=Rv(r,"string");return xi(e)=="symbol"?e:e+""}function et(r,e,t){return(e=Lv(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function zv(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Fk(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zv(Object(t),!0).forEach(function(n){et(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):zv(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Ok="solveODE",Bk=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],qv=N(Ok,Bk,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:o,max:a,map:s,abs:l,isPositive:u,isNegative:c,larger:f,smaller:m,matrix:p,bignumber:h,unaryMinus:d}=r;function v(C){return function(A,E,M,F){var k=!(E.length===2&&(E.every(y)||E.every(Bt)));if(k)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var I=E[0],P=E[1],B=f(P,I),O=F.firstStep;if(O!==void 0&&!u(O))throw new Error('"firstStep" must be positive');var q=F.maxStep;if(q!==void 0&&!u(q))throw new Error('"maxStep" must be positive');var _=F.minStep;if(_&&c(_))throw new Error('"minStep" must be positive or zero');var K=[I,P,O,_,q].filter(Ue=>Ue!==void 0);if(!(K.every(y)||K.every(Bt)))throw new Error('Inconsistent type of "t" dependant variables');for(var Z=1,W=F.tol?F.tol:1e-4,R=F.minDelta?F.minDelta:.2,X=F.maxDelta?F.maxDelta:5,ae=F.maxIter?F.maxIter:1e4,j=[I,P,...M,q,_].some(Ne),[U,$,G,Y]=j?[h(C.a),h(C.c),h(C.b),h(C.bp)]:[C.a,C.c,C.b,C.bp],J=O?B?O:d(O):o(n(P,I),Z),te=[I],ie=[M],de=n(G,Y),z=0,V=0,ee=w(B),ne=b(B);ee(te[z],P);){var le=[];J=ne(te[z],P,J),le.push(A(te[z],ie[z]));for(var fe=1;fe<$.length;++fe)le.push(A(t(te[z],i($[fe],J)),t(ie[z],i(J,U[fe],le))));var ye=a(l(s(i(de,le),Ue=>Bt(Ue)?Ue.value:Ue)));ye<W&&W/ye>1/4&&(te.push(t(te[z],J)),ie.push(t(ie[z],i(J,G,le))),z++);var Se=.84*(W/ye)**(1/5);if(m(Se,R)?Se=R:f(Se,X)&&(Se=X),Se=j?h(Se):Se,J=i(J,Se),q&&f(l(J),q)?J=B?q:d(q):_&&m(l(J),_)&&(J=B?_:d(_)),V++,V>ae)throw new Error("Maximum number of iterations reached, try changing options")}return{t:te,y:ie}}}function x(C,A,E,M){var F=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],k=[null,1/2,3/4,1],I=[2/9,1/3,4/9,0],P=[7/24,1/4,1/3,1/8],B={a:F,c:k,b:I,bp:P};return v(B)(C,A,E,M)}function D(C,A,E,M){var F=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],k=[null,1/5,3/10,4/5,8/9,1,1],I=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],P=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],B={a:F,c:k,b:I,bp:P};return v(B)(C,A,E,M)}function g(C,A,E,M){var F=M.method?M.method:"RK45",k={RK23:x,RK45:D};if(F.toUpperCase()in k){var I=Fk({},M);return delete I.method,k[F.toUpperCase()](C,A,E,I)}else{var P=Object.keys(k).map(O=>'"'.concat(O,'"')),B="".concat(P.slice(0,-1).join(", ")," and ").concat(P.slice(-1));throw new Error('Unavailable method "'.concat(F,'". Available methods are ').concat(B))}}function w(C){return C?m:f}function b(C){var A=C?f:m;return function(E,M,F){var k=t(E,F);return A(k,M)?n(M,E):F}}function y(C){return Ne(C)||Fe(C)}function S(C,A,E,M){var F=g(C,A.toArray(),E.toArray(),M);return{t:p(F.t),y:p(F.y)}}return e("solveODE",{"function, Array, Array, Object":g,"function, Matrix, Matrix, Object":S,"function, Array, Array":(C,A,E)=>g(C,A,E,{}),"function, Matrix, Matrix":(C,A,E)=>S(C,A,E,{}),"function, Array, number | BigNumber | Unit":(C,A,E)=>{var M=g(C,A,[E],{});return{t:M.t,y:M.y.map(F=>F[0])}},"function, Matrix, number | BigNumber | Unit":(C,A,E)=>{var M=g(C,A.toArray(),[E],{});return{t:p(M.t),y:p(M.y.map(F=>F[0]))}},"function, Array, number | BigNumber | Unit, Object":(C,A,E,M)=>{var F=g(C,A,[E],M);return{t:F.t,y:F.y.map(k=>k[0])}},"function, Matrix, number | BigNumber | Unit, Object":(C,A,E,M)=>{var F=g(C,A.toArray(),[E],M);return{t:p(F.t),y:p(F.y.map(k=>k[0]))}}})});var _k="erf",kk=["typed"],Uv=N(_k,kk,r=>{var{typed:e}=r;return e("name",{number:function(a){var s=Math.abs(a);return s>=Rk?Pr(a):s<=Pk?Pr(a)*t(s):s<=4?Pr(a)*(1-n(s)):Pr(a)*(1-i(s))},"Array | Matrix":e.referToSelf(o=>a=>De(a,o))});function t(o){var a=o*o,s=Bn[0][4]*a,l=a,u;for(u=0;u<3;u+=1)s=(s+Bn[0][u])*a,l=(l+ao[0][u])*a;return o*(s+Bn[0][3])/(l+ao[0][3])}function n(o){var a=Bn[1][8]*o,s=o,l;for(l=0;l<7;l+=1)a=(a+Bn[1][l])*o,s=(s+ao[1][l])*o;var u=(a+Bn[1][7])/(s+ao[1][7]),c=parseInt(o*16)/16,f=(o-c)*(o+c);return Math.exp(-c*c)*Math.exp(-f)*u}function i(o){var a=1/(o*o),s=Bn[2][5]*a,l=a,u;for(u=0;u<4;u+=1)s=(s+Bn[2][u])*a,l=(l+ao[2][u])*a;var c=a*(s+Bn[2][4])/(l+ao[2][4]);c=(Ik-c)/o,a=parseInt(o*16)/16;var f=(o-a)*(o+a);return Math.exp(-a*a)*Math.exp(-f)*c}}),Pk=.46875,Ik=.5641895835477563,Bn=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],ao=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],Rk=Math.pow(2,53);var Vv="zeta",Lk=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],Hv=N(Vv,Lk,r=>{var{typed:e,config:t,multiply:n,pow:i,divide:o,factorial:a,equal:s,smallerEq:l,isNegative:u,gamma:c,sin:f,subtract:m,add:p,Complex:h,BigNumber:d,pi:v}=r;return e(Vv,{number:y=>x(y,S=>S,()=>20),BigNumber:y=>x(y,S=>new d(S),()=>Math.abs(Math.log10(t.relTol))),Complex:D});function x(y,S,C){return s(y,0)?S(-.5):s(y,1)?S(NaN):isFinite(y)?g(y,S,C,A=>A):u(y)?S(NaN):S(1)}function D(y){return y.re===0&&y.im===0?new h(-.5):y.re===1?new h(NaN,NaN):y.re===1/0&&y.im===0?new h(1):y.im===1/0||y.re===-1/0?new h(NaN,NaN):g(y,S=>S,S=>Math.round(1.3*15+.9*Math.abs(S.im)),S=>S.re)}function g(y,S,C,A){var E=C(y);if(A(y)>-(E-1)/2)return b(y,S(E),S);var M=n(i(2,y),i(S(v),m(y,1)));return M=n(M,f(n(o(S(v),2),y))),M=n(M,c(m(1,y))),n(M,g(m(1,y),S,C,A))}function w(y,S){for(var C=y,A=y;l(A,S);A=p(A,1)){var E=o(n(a(p(S,m(A,1))),i(4,A)),n(a(m(S,A)),a(n(2,A))));C=p(C,E)}return n(S,C)}function b(y,S,C){for(var A=o(1,n(w(C(0),S),m(1,i(2,m(1,y))))),E=C(0),M=C(1);l(M,S);M=p(M,1))E=p(E,o(n((-1)**(M-1),w(M,S)),i(M,y)));return n(A,E)}});var $v="mode",zk=["typed","isNaN","isNumeric"],Wv=N($v,zk,r=>{var{typed:e,isNaN:t,isNumeric:n}=r;return e($v,{"Array | Matrix":i,"...":function(a){return i(a)}});function i(o){o=qe(o.valueOf());var a=o.length;if(a===0)throw new Error("Cannot calculate mode of an empty array");for(var s={},l=[],u=0,c=0;c<o.length;c++){var f=o[c];if(n(f)&&t(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in s||(s[f]=0),s[f]++,s[f]===u?l.push(f):s[f]>u&&(u=s[f],l=[f])}return l}});function Ct(r,e,t){var n;return String(r).includes("Unexpected type")?(n=arguments.length>2?" (type: "+Ye(t)+", value: "+JSON.stringify(t)+")":" (type: "+r.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(r).includes("complex numbers")?(n=arguments.length>2?" (type: "+Ye(t)+", value: "+JSON.stringify(t)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):r}var Gv="prod",qk=["typed","config","multiplyScalar","numeric"],Kv=N(Gv,qk,r=>{var{typed:e,config:t,multiplyScalar:n,numeric:i}=r;return e(Gv,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(s,l){throw new Error("prod(A, dim) is not yet supported")},"...":function(s){return o(s)}});function o(a){var s;if(rr(a,function(l){try{s=s===void 0?l:n(s,l)}catch(u){throw Ct(u,"prod",l)}}),typeof s=="string"&&(s=i(s,Qt(s,t))),s===void 0)throw new Error("Cannot calculate prod of an empty array");return s}});var Yv="format",Uk=["typed"],Zv=N(Yv,Uk,r=>{var{typed:e}=r;return e(Yv,{any:_e,"any, Object | function | number | BigNumber":_e})});var Xv="bin",Vk=["typed","format"],Jv=N(Xv,Vk,r=>{var{typed:e,format:t}=r;return e(Xv,{"number | BigNumber":function(i){return t(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,o){return t(i,{notation:"bin",wordSize:o})}})});var jv="oct",Hk=["typed","format"],Qv=N(jv,Hk,r=>{var{typed:e,format:t}=r;return e(jv,{"number | BigNumber":function(i){return t(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,o){return t(i,{notation:"oct",wordSize:o})}})});var e0="hex",$k=["typed","format"],t0=N(e0,$k,r=>{var{typed:e,format:t}=r;return e(e0,{"number | BigNumber":function(i){return t(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,o){return t(i,{notation:"hex",wordSize:o})}})});var Us=/\$([\w.]+)/g;var r0="print",Wk=["typed"],Vs=N(r0,Wk,r=>{var{typed:e}=r;return e(r0,{"string, Object | Array":n0,"string, Object | Array, number | Object":n0})});function n0(r,e,t){return r.replace(Us,function(n,i){var o=i.split("."),a=e[o.shift()];for(a!==void 0&&a.isMatrix&&(a=a.toArray());o.length&&a!==void 0;){var s=o.shift();a=s?a[s]:a+"."}return a!==void 0?bt(a)?a:_e(a,t):n})}var i0="to",Gk=["typed","matrix","concat"],o0=N(i0,Gk,r=>{var{typed:e,matrix:t,concat:n}=r,i=Le({typed:e,matrix:t,concat:n});return e(i0,{"Unit, Unit | string":(o,a)=>o.to(a)},i({Ds:!0}))});var a0="isPrime",Kk=["typed"],s0=N(a0,Kk,r=>{var{typed:e}=r;return e(a0,{number:function(n){if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var i=5;i*i<=n;i+=6)if(n%i===0||n%(i+2)===0)return!1;return!0},bigint:function(n){if(n<=3n)return n>1n;if(n%2n===0n||n%3n===0n)return!1;for(var i=5n;i*i<=n;i+=6n)if(n%i===0n||n%(i+2n)===0n)return!1;return!0},BigNumber:function(n){if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var i=n.toNumber(),o=5;o*o<=i;o+=6)if(i%o===0||i%(o+2)===0)return!1;return!0}function a(D,g,w){for(var b=1;!g.eq(0);)g.mod(2).eq(0)?(g=g.div(2),D=D.mul(D).mod(w)):(g=g.sub(1),b=D.mul(b).mod(w));return b}var s=n.constructor.clone({precision:n.toFixed(0).length*2});n=new s(n);for(var l=0,u=n.sub(1);u.mod(2).eq(0);)u=u.div(2),l+=1;var c=null;if(n.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(D=>D<n);else{var f=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));c=[];for(var m=2;m<=f;m+=1)c.push(f)}for(var p=0;p<c.length;p+=1){var h=c[p],d=a(n.sub(n).add(h),u,n);if(!d.eq(1)){for(var v=0,x=d;!x.eq(n.sub(1));v+=1,x=x.mul(x).mod(n))if(v===l-1)return!1}}return!0},"Array | Matrix":e.referToSelf(t=>n=>De(n,t))})});var Yk="numeric",Zk=["number","?bignumber","?fraction"],l0=N(Yk,Zk,r=>{var{number:e,bignumber:t,fraction:n}=r,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:a=>e(a),BigNumber:t?a=>t(a):oo,bigint:a=>BigInt(a),Fraction:n?a=>n(a):Is};return function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Ye(s);if(!(c in i))throw new TypeError("Cannot convert "+s+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(l in o))throw new TypeError("Cannot convert "+s+' to type "'+l+'"; valid output types are '+Object.keys(o).join(", "));return l===c?s:o[l](s)}});var u0="divideScalar",Xk=["typed","numeric"],c0=N(u0,Xk,r=>{var{typed:e,numeric:t}=r;return e(u0,{"number, number":function(i,o){return i/o},"Complex, Complex":function(i,o){return i.div(o)},"BigNumber, BigNumber":function(i,o){return i.div(o)},"bigint, bigint":function(i,o){return i/o},"Fraction, Fraction":function(i,o){return i.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})});var f0="pow",Jk=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],m0=N(f0,Jk,r=>{var{typed:e,config:t,identity:n,multiply:i,matrix:o,inv:a,number:s,fraction:l,Complex:u}=r;return e(f0,{"number, number":c,"Complex, Complex":function(h,d){return h.pow(d)},"BigNumber, BigNumber":function(h,d){return d.isInteger()||h>=0||t.predictable?h.pow(d):new u(h.toNumber(),0).pow(d.toNumber(),0)},"bigint, bigint":(p,h)=>p**h,"Fraction, Fraction":function(h,d){var v=h.pow(d);if(v!=null)return v;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(h.valueOf(),d.valueOf())},"Array, number":f,"Array, BigNumber":function(h,d){return f(h,d.toNumber())},"Matrix, number":m,"Matrix, BigNumber":function(h,d){return m(h,d.toNumber())},"Unit, number | BigNumber":function(h,d){return h.pow(d)}});function c(p,h){if(t.predictable&&!xe(h)&&p<0)try{var d=l(h),v=s(d);if((h===v||Math.abs((h-v)/h)<1e-14)&&d.d%2===1)return(d.n%2===0?1:-1)*Math.pow(-p,h)}catch{}return t.predictable&&(p<-1&&h===1/0||p>-1&&p<0&&h===-1/0)?NaN:xe(h)||p>=0||t.predictable?Ac(p,h):p*p<1&&h===1/0||p*p>1&&h===-1/0?0:new u(p,0).pow(h,0)}function f(p,h){if(!xe(h))throw new TypeError("For A^b, b must be an integer (value is "+h+")");var d=Me(p);if(d.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+d.length+" dimensions)");if(d[0]!==d[1])throw new Error("For A^b, A must be square (size is "+d[0]+"x"+d[1]+")");if(h<0)try{return f(a(p),-h)}catch(D){throw D.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+h+")"):D}for(var v=n(d[0]).valueOf(),x=p;h>=1;)(h&1)===1&&(v=i(x,v)),h>>=1,x=i(x,x);return v}function m(p,h){return o(f(p.valueOf(),h))}});var so="Number of decimals in function round must be an integer",p0="round",jk=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],h0=N(p0,jk,r=>{var{typed:e,config:t,matrix:n,equalScalar:i,zeros:o,BigNumber:a,DenseMatrix:s}=r,l=nt({typed:e,equalScalar:i}),u=Je({typed:e,DenseMatrix:s}),c=Tt({typed:e});function f(m){return Math.abs(Wi(m).exponent)}return e(p0,{number:function(p){var h=eo(p,f(t.relTol)),d=pt(p,h,t.relTol,t.absTol)?h:p;return eo(d)},"number, number":function(p,h){var d=f(t.relTol);if(h>=d)return eo(p,h);var v=eo(p,d),x=pt(p,v,t.relTol,t.absTol)?v:p;return eo(x,h)},"number, BigNumber":function(p,h){if(!h.isInteger())throw new TypeError(so);return new a(p).toDecimalPlaces(h.toNumber())},Complex:function(p){return p.round()},"Complex, number":function(p,h){if(h%1)throw new TypeError(so);return p.round(h)},"Complex, BigNumber":function(p,h){if(!h.isInteger())throw new TypeError(so);var d=h.toNumber();return p.round(d)},BigNumber:function(p){var h=new a(p).toDecimalPlaces(f(t.relTol)),d=St(p,h,t.relTol,t.absTol)?h:p;return d.toDecimalPlaces(0)},"BigNumber, BigNumber":function(p,h){if(!h.isInteger())throw new TypeError(so);var d=f(t.relTol);if(h>=d)return p.toDecimalPlaces(h.toNumber());var v=p.toDecimalPlaces(d),x=St(p,v,t.relTol,t.absTol)?v:p;return x.toDecimalPlaces(h.toNumber())},Fraction:function(p){return p.round()},"Fraction, number":function(p,h){if(h%1)throw new TypeError(so);return p.round(h)},"Fraction, BigNumber":function(p,h){if(!h.isInteger())throw new TypeError(so);return p.round(h.toNumber())},"Unit, number, Unit":e.referToSelf(m=>function(p,h,d){var v=p.toNumeric(d);return d.multiply(m(v,h))}),"Unit, BigNumber, Unit":e.referToSelf(m=>(p,h,d)=>m(p,h.toNumber(),d)),"Unit, Unit":e.referToSelf(m=>(p,h)=>m(p,0,h)),"Array | Matrix, number, Unit":e.referToSelf(m=>(p,h,d)=>De(p,v=>m(v,h,d),!0)),"Array | Matrix, BigNumber, Unit":e.referToSelf(m=>(p,h,d)=>m(p,h.toNumber(),d)),"Array | Matrix, Unit":e.referToSelf(m=>(p,h)=>m(p,0,h)),"Array | Matrix":e.referToSelf(m=>p=>De(p,m,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(m=>(p,h)=>l(p,h,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(p,h)=>c(p,h,m,!1)),"Array, number | BigNumber":e.referToSelf(m=>(p,h)=>c(n(p),h,m,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(m=>(p,h)=>i(p,0)?o(h.size(),h.storage()):u(h,p,m,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(m=>(p,h)=>i(p,0)?o(h.size(),h.storage()):c(h,p,m,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(m=>(p,h)=>c(n(h),p,m,!0).valueOf())})});var d0="log",Qk=["config","typed","divideScalar","Complex"],g0=N(d0,Qk,r=>{var{typed:e,config:t,divideScalar:n,Complex:i}=r;return e(d0,{number:function(a){return a>=0||t.predictable?zh(a):new i(a,0).log()},Complex:function(a){return a.log()},BigNumber:function(a){return!a.isNegative()||t.predictable?a.ln():new i(a.toNumber(),0).log()},"any, any":e.referToSelf(o=>(a,s)=>n(o(a),o(s)))})});var v0="log1p",e4=["typed","config","divideScalar","log","Complex"],y0=N(v0,e4,r=>{var{typed:e,config:t,divideScalar:n,log:i,Complex:o}=r;return e(v0,{number:function(l){return l>=-1||t.predictable?Xa(l):a(new o(l,0))},Complex:a,BigNumber:function(l){var u=l.plus(1);return!u.isNegative()||t.predictable?u.ln():a(new o(l.toNumber(),0))},"Array | Matrix":e.referToSelf(s=>l=>De(l,s)),"any, any":e.referToSelf(s=>(l,u)=>n(s(l),i(u)))});function a(s){var l=s.re+1;return new o(Math.log(Math.sqrt(l*l+s.im*s.im)),Math.atan2(s.im,l))}});var x0="nthRoots",t4=["config","typed","divideScalar","Complex"],b0=N(x0,t4,r=>{var{typed:e,config:t,divideScalar:n,Complex:i}=r,o=[function(l){return new i(l,0)},function(l){return new i(0,l)},function(l){return new i(-l,0)},function(l){return new i(0,-l)}];function a(s,l){if(l<0)throw new Error("Root must be greater than zero");if(l===0)throw new Error("Root must be non-zero");if(l%1!==0)throw new Error("Root must be an integer");if(s===0||s.abs()===0)return[new i(0,0)];var u=typeof s=="number",c;(u||s.re===0||s.im===0)&&(u?c=2*+(s<0):s.im===0?c=2*+(s.re<0):c=2*+(s.im<0)+1);for(var f=s.arg(),m=s.abs(),p=[],h=Math.pow(m,1/l),d=0;d<l;d++){var v=(c+4*d)/l;if(v===Math.round(v)){p.push(o[v%4](h));continue}p.push(new i({r:h,phi:(f+2*Math.PI*d)/l}))}return p}return e(x0,{Complex:function(l){return a(l,2)},"Complex, number":a})});var w0="dotPow",r4=["typed","equalScalar","matrix","pow","DenseMatrix","concat"],D0=N(w0,r4,r=>{var{typed:e,equalScalar:t,matrix:n,pow:i,DenseMatrix:o,concat:a}=r,s=ct({typed:e}),l=Rt({typed:e,DenseMatrix:o}),u=nt({typed:e,equalScalar:t}),c=Je({typed:e,DenseMatrix:o}),f=Le({typed:e,matrix:n,concat:a}),m={};for(var p in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,p)&&!p.includes("Matrix")&&!p.includes("Array")&&(m[p]=i.signatures[p]);var h=e(m);return e(w0,f({elop:h,SS:l,DS:s,Ss:u,sS:c}))});var S0="dotDivide",n4=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat"],A0=N(S0,n4,r=>{var{typed:e,matrix:t,equalScalar:n,divideScalar:i,DenseMatrix:o,concat:a}=r,s=Ft({typed:e,equalScalar:n}),l=ct({typed:e}),u=Rt({typed:e,DenseMatrix:o}),c=nt({typed:e,equalScalar:n}),f=Je({typed:e,DenseMatrix:o}),m=Le({typed:e,matrix:t,concat:a});return e(S0,m({elop:i,SS:u,DS:l,SD:s,Ss:c,sS:f}))});function pn(r){var{DenseMatrix:e}=r;return function(n,i,o){var a=n.size();if(a.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+_e(a)+")");var s=a[0],l=a[1];if(s!==l)throw new RangeError("Matrix must be square (size: "+_e(a)+")");var u=[];if(we(i)){var c=i.size(),f=i._data;if(c.length===1){if(c[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var m=0;m<s;m++)u[m]=[f[m]];return new e({data:u,size:[s,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==s||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(En(i)){if(o){u=[];for(var p=0;p<s;p++)u[p]=[f[p][0]];return new e({data:u,size:[s,1],datatype:i._datatype})}return i}if(Ar(i)){for(var h=0;h<s;h++)u[h]=[0];for(var d=i._values,v=i._index,x=i._ptr,D=x[1],g=x[0];g<D;g++){var w=v[g];u[w][0]=d[g]}return new e({data:u,size:[s,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Ze(i)){var b=Me(i);if(b.length===1){if(b[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var y=0;y<s;y++)u[y]=[i[y]];return new e({data:u,size:[s,1]})}if(b.length===2){if(b[0]!==s||b[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var S=0;S<s;S++)u[S]=[i[S][0]];return new e({data:u,size:[s,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var N0="lsolve",i4=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],C0=N(N0,i4,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:o,equalScalar:a,DenseMatrix:s}=r,l=pn({DenseMatrix:s});return e(N0,{"SparseMatrix, Array | Matrix":function(m,p){return c(m,p)},"DenseMatrix, Array | Matrix":function(m,p){return u(m,p)},"Array, Array | Matrix":function(m,p){var h=t(m),d=u(h,p);return d.valueOf()}});function u(f,m){m=l(f,m,!0);for(var p=m._data,h=f._size[0],d=f._size[1],v=[],x=f._data,D=0;D<d;D++){var g=p[D][0]||0,w=void 0;if(a(g,0))w=0;else{var b=x[D][D];if(a(b,0))throw new Error("Linear system cannot be solved since matrix is singular");w=n(g,b);for(var y=D+1;y<h;y++)p[y]=[o(p[y][0]||0,i(w,x[y][D]))]}v[D]=[w]}return new s({data:v,size:[h,1]})}function c(f,m){m=l(f,m,!0);for(var p=m._data,h=f._size[0],d=f._size[1],v=f._values,x=f._index,D=f._ptr,g=[],w=0;w<d;w++){var b=p[w][0]||0;if(a(b,0))g[w]=[0];else{for(var y=0,S=[],C=[],A=D[w],E=D[w+1],M=A;M<E;M++){var F=x[M];F===w?y=v[M]:F>w&&(S.push(v[M]),C.push(F))}if(a(y,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var k=n(b,y),I=0,P=C.length;I<P;I++){var B=C[I];p[B]=[o(p[B][0]||0,i(k,S[I]))]}g[w]=[k]}}return new s({data:g,size:[h,1]})}});var E0="usolve",o4=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],M0=N(E0,o4,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:o,equalScalar:a,DenseMatrix:s}=r,l=pn({DenseMatrix:s});return e(E0,{"SparseMatrix, Array | Matrix":function(m,p){return c(m,p)},"DenseMatrix, Array | Matrix":function(m,p){return u(m,p)},"Array, Array | Matrix":function(m,p){var h=t(m),d=u(h,p);return d.valueOf()}});function u(f,m){m=l(f,m,!0);for(var p=m._data,h=f._size[0],d=f._size[1],v=[],x=f._data,D=d-1;D>=0;D--){var g=p[D][0]||0,w=void 0;if(a(g,0))w=0;else{var b=x[D][D];if(a(b,0))throw new Error("Linear system cannot be solved since matrix is singular");w=n(g,b);for(var y=D-1;y>=0;y--)p[y]=[o(p[y][0]||0,i(w,x[y][D]))]}v[D]=[w]}return new s({data:v,size:[h,1]})}function c(f,m){m=l(f,m,!0);for(var p=m._data,h=f._size[0],d=f._size[1],v=f._values,x=f._index,D=f._ptr,g=[],w=d-1;w>=0;w--){var b=p[w][0]||0;if(a(b,0))g[w]=[0];else{for(var y=0,S=[],C=[],A=D[w],E=D[w+1],M=E-1;M>=A;M--){var F=x[M];F===w?y=v[M]:F<w&&(S.push(v[M]),C.push(F))}if(a(y,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var k=n(b,y),I=0,P=C.length;I<P;I++){var B=C[I];p[B]=[o(p[B][0],i(k,S[I]))]}g[w]=[k]}}return new s({data:g,size:[h,1]})}});var T0="lsolveAll",a4=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],F0=N(T0,a4,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:o,equalScalar:a,DenseMatrix:s}=r,l=pn({DenseMatrix:s});return e(T0,{"SparseMatrix, Array | Matrix":function(m,p){return c(m,p)},"DenseMatrix, Array | Matrix":function(m,p){return u(m,p)},"Array, Array | Matrix":function(m,p){var h=t(m),d=u(h,p);return d.map(v=>v.valueOf())}});function u(f,m){for(var p=[l(f,m,!0)._data.map(C=>C[0])],h=f._data,d=f._size[0],v=f._size[1],x=0;x<v;x++)for(var D=p.length,g=0;g<D;g++){var w=p[g];if(a(h[x][x],0))if(a(w[x],0)){if(g===0){var y=[...w];y[x]=1;for(var S=x+1;S<v;S++)y[S]=o(y[S],h[S][x]);p.push(y)}}else{if(g===0)return[];p.splice(g,1),g-=1,D-=1}else{w[x]=n(w[x],h[x][x]);for(var b=x+1;b<v;b++)w[b]=o(w[b],i(w[x],h[b][x]))}}return p.map(C=>new s({data:C.map(A=>[A]),size:[d,1]}))}function c(f,m){for(var p=[l(f,m,!0)._data.map(Z=>Z[0])],h=f._size[0],d=f._size[1],v=f._values,x=f._index,D=f._ptr,g=0;g<d;g++)for(var w=p.length,b=0;b<w;b++){for(var y=p[b],S=[],C=[],A=D[g],E=D[g+1],M=0,F=A;F<E;F++){var k=x[F];k===g?M=v[F]:k>g&&(S.push(v[F]),C.push(k))}if(a(M,0))if(a(y[g],0)){if(b===0){var O=[...y];O[g]=1;for(var q=0,_=C.length;q<_;q++){var K=C[q];O[K]=o(O[K],S[q])}p.push(O)}}else{if(b===0)return[];p.splice(b,1),b-=1,w-=1}else{y[g]=n(y[g],M);for(var I=0,P=C.length;I<P;I++){var B=C[I];y[B]=o(y[B],i(y[g],S[I]))}}}return p.map(Z=>new s({data:Z.map(W=>[W]),size:[h,1]}))}});var O0="usolveAll",s4=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],B0=N(O0,s4,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:o,equalScalar:a,DenseMatrix:s}=r,l=pn({DenseMatrix:s});return e(O0,{"SparseMatrix, Array | Matrix":function(m,p){return c(m,p)},"DenseMatrix, Array | Matrix":function(m,p){return u(m,p)},"Array, Array | Matrix":function(m,p){var h=t(m),d=u(h,p);return d.map(v=>v.valueOf())}});function u(f,m){for(var p=[l(f,m,!0)._data.map(C=>C[0])],h=f._data,d=f._size[0],v=f._size[1],x=v-1;x>=0;x--)for(var D=p.length,g=0;g<D;g++){var w=p[g];if(a(h[x][x],0))if(a(w[x],0)){if(g===0){var y=[...w];y[x]=1;for(var S=x-1;S>=0;S--)y[S]=o(y[S],h[S][x]);p.push(y)}}else{if(g===0)return[];p.splice(g,1),g-=1,D-=1}else{w[x]=n(w[x],h[x][x]);for(var b=x-1;b>=0;b--)w[b]=o(w[b],i(w[x],h[b][x]))}}return p.map(C=>new s({data:C.map(A=>[A]),size:[d,1]}))}function c(f,m){for(var p=[l(f,m,!0)._data.map(Z=>Z[0])],h=f._size[0],d=f._size[1],v=f._values,x=f._index,D=f._ptr,g=d-1;g>=0;g--)for(var w=p.length,b=0;b<w;b++){for(var y=p[b],S=[],C=[],A=D[g],E=D[g+1],M=0,F=E-1;F>=A;F--){var k=x[F];k===g?M=v[F]:k<g&&(S.push(v[F]),C.push(k))}if(a(M,0))if(a(y[g],0)){if(b===0){var O=[...y];O[g]=1;for(var q=0,_=C.length;q<_;q++){var K=C[q];O[K]=o(O[K],S[q])}p.push(O)}}else{if(b===0)return[];p.splice(b,1),b-=1,w-=1}else{y[g]=n(y[g],M);for(var I=0,P=C.length;I<P;I++){var B=C[I];y[B]=o(y[B],i(y[g],S[I]))}}}return p.map(Z=>new s({data:Z.map(W=>[W]),size:[h,1]}))}});var l4="matAlgo08xS0Sid",u4=["typed","equalScalar"],lo=N(l4,u4,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,a){var s=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),m=o._values,p=o._index,h=o._ptr,d=o._size,v=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==d.length)throw new ke(c.length,d.length);if(c[0]!==d[0]||c[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+d+")");if(!s||!m)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var x=c[0],D=c[1],g,w=t,b=0,y=a;typeof f=="string"&&f===v&&f!=="mixed"&&(g=f,w=e.find(t,[g,g]),b=e.convert(0,g),y=e.find(a,[g,g]));for(var S=[],C=[],A=[],E=[],M=[],F,k,I,P,B=0;B<D;B++){A[B]=C.length;var O=B+1;for(k=u[B],I=u[B+1],F=k;F<I;F++)P=l[F],M[P]=O,E[P]=s[F],C.push(P);for(k=h[B],I=h[B+1],F=k;F<I;F++)P=p[F],M[P]===O&&(E[P]=y(E[P],m[F]));for(F=A[B];F<C.length;){P=C[F];var q=E[P];w(q,b)?C.splice(F,1):(S.push(q),F++)}}return A[D]=C.length,i.createSparseMatrix({values:S,index:C,ptr:A,size:[x,D],datatype:f===i._datatype&&v===o._datatype?g:void 0})}});var uo=N("useMatrixForArrayScalar",["typed","matrix"],r=>{var{typed:e,matrix:t}=r;return{"Array, number":e.referTo("DenseMatrix, number",n=>(i,o)=>n(t(i),o).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",n=>(i,o)=>n(t(i),o).valueOf()),"number, Array":e.referTo("number, DenseMatrix",n=>(i,o)=>n(i,t(o)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",n=>(i,o)=>n(i,t(o)).valueOf())}});var _0="leftShift",c4=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],k0=N(_0,c4,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:o,concat:a}=r,s=nr({typed:e}),l=Ft({typed:e,equalScalar:n}),u=lo({typed:e,equalScalar:n}),c=xr({typed:e,DenseMatrix:o}),f=nt({typed:e,equalScalar:n}),m=Tt({typed:e}),p=Le({typed:e,matrix:t,concat:a}),h=uo({typed:e,matrix:t});return e(_0,{"number, number":Tc,"BigNumber, BigNumber":Cg,"bigint, bigint":(d,v)=>d<<v,"SparseMatrix, number | BigNumber":e.referToSelf(d=>(v,x)=>n(x,0)?v.clone():f(v,x,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(v,x)=>n(x,0)?v.clone():m(v,x,d,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(d=>(v,x)=>n(v,0)?i(x.size(),x.storage()):c(x,v,d,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(d=>(v,x)=>n(v,0)?i(x.size(),x.storage()):m(x,v,d,!0))},h,p({SS:u,DS:s,SD:l}))});var P0="rightArithShift",f4=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],I0=N(P0,f4,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:o,concat:a}=r,s=nr({typed:e}),l=Ft({typed:e,equalScalar:n}),u=lo({typed:e,equalScalar:n}),c=xr({typed:e,DenseMatrix:o}),f=nt({typed:e,equalScalar:n}),m=Tt({typed:e}),p=Le({typed:e,matrix:t,concat:a}),h=uo({typed:e,matrix:t});return e(P0,{"number, number":Fc,"BigNumber, BigNumber":Eg,"bigint, bigint":(d,v)=>d>>v,"SparseMatrix, number | BigNumber":e.referToSelf(d=>(v,x)=>n(x,0)?v.clone():f(v,x,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(v,x)=>n(x,0)?v.clone():m(v,x,d,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(d=>(v,x)=>n(v,0)?i(x.size(),x.storage()):c(x,v,d,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(d=>(v,x)=>n(v,0)?i(x.size(),x.storage()):m(x,v,d,!0))},h,p({SS:u,DS:s,SD:l}))});var R0="rightLogShift",m4=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],L0=N(R0,m4,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:o,concat:a}=r,s=nr({typed:e}),l=Ft({typed:e,equalScalar:n}),u=lo({typed:e,equalScalar:n}),c=xr({typed:e,DenseMatrix:o}),f=nt({typed:e,equalScalar:n}),m=Tt({typed:e}),p=Le({typed:e,matrix:t,concat:a}),h=uo({typed:e,matrix:t});return e(R0,{"number, number":Oc,"SparseMatrix, number | BigNumber":e.referToSelf(d=>(v,x)=>n(x,0)?v.clone():f(v,x,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(v,x)=>n(x,0)?v.clone():m(v,x,d,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(d=>(v,x)=>n(v,0)?i(x.size(),x.storage()):c(x,v,d,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(d=>(v,x)=>n(v,0)?i(x.size(),x.storage()):m(x,v,d,!0))},h,p({SS:u,DS:s,SD:l}))});var z0="and",p4=["typed","matrix","equalScalar","zeros","not","concat"],Hs=N(z0,p4,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:o,concat:a}=r,s=Ft({typed:e,equalScalar:n}),l=Zn({typed:e,equalScalar:n}),u=nt({typed:e,equalScalar:n}),c=Tt({typed:e}),f=Le({typed:e,matrix:t,concat:a});return e(z0,{"number, number":bs,"Complex, Complex":function(p,h){return(p.re!==0||p.im!==0)&&(h.re!==0||h.im!==0)},"BigNumber, BigNumber":function(p,h){return!p.isZero()&&!h.isZero()&&!p.isNaN()&&!h.isNaN()},"bigint, bigint":bs,"Unit, Unit":e.referToSelf(m=>(p,h)=>m(p.value||0,h.value||0)),"SparseMatrix, any":e.referToSelf(m=>(p,h)=>o(h)?i(p.size(),p.storage()):u(p,h,m,!1)),"DenseMatrix, any":e.referToSelf(m=>(p,h)=>o(h)?i(p.size(),p.storage()):c(p,h,m,!1)),"any, SparseMatrix":e.referToSelf(m=>(p,h)=>o(p)?i(p.size(),p.storage()):u(h,p,m,!0)),"any, DenseMatrix":e.referToSelf(m=>(p,h)=>o(p)?i(p.size(),p.storage()):c(h,p,m,!0)),"Array, any":e.referToSelf(m=>(p,h)=>m(t(p),h).valueOf()),"any, Array":e.referToSelf(m=>(p,h)=>m(p,t(h)).valueOf())},f({SS:l,DS:s}))});var $s="compare",h4=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],q0=N($s,h4,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,BigNumber:o,Fraction:a,DenseMatrix:s,concat:l}=r,u=ct({typed:e}),c=Yn({typed:e,equalScalar:n}),f=Je({typed:e,DenseMatrix:s}),m=Le({typed:e,matrix:i,concat:l}),p=qr({typed:e});return e($s,d4({typed:e,config:t}),{"boolean, boolean":function(d,v){return d===v?0:d>v?1:-1},"BigNumber, BigNumber":function(d,v){return St(d,v,t.relTol,t.absTol)?new o(0):new o(d.cmp(v))},"bigint, bigint":function(d,v){return d===v?0n:d>v?1n:-1n},"Fraction, Fraction":function(d,v){return new a(d.compare(v))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},p,m({SS:c,DS:u,Ss:f}))}),d4=N($s,["typed","config"],r=>{var{typed:e,config:t}=r;return e($s,{"number, number":function(i,o){return pt(i,o,t.relTol,t.absTol)?0:i>o?1:-1}})});var bi=fi(V0(),1);var H0="compareNatural",g4=["typed","compare"],$0=N(H0,g4,r=>{var{typed:e,compare:t}=r,n=t.signatures["boolean,boolean"];return e(H0,{"any, any":i});function i(l,u){var c=Ye(l),f=Ye(u),m;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return m=t(l,u),m.toString()!=="0"?m>0?1:-1:(0,bi.default)(c,f);var p=["Array","DenseMatrix","SparseMatrix"];if(p.includes(c)||p.includes(f))return m=o(i,l,u),m!==0?m:(0,bi.default)(c,f);if(c!==f)return(0,bi.default)(c,f);if(c==="Complex")return v4(l,u);if(c==="Unit")return l.equalBase(u)?i(l.value,u.value):a(i,l.formatUnits(),u.formatUnits());if(c==="boolean")return n(l,u);if(c==="string")return(0,bi.default)(l,u);if(c==="Object")return s(i,l,u);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function o(l,u,c){return Ar(u)&&Ar(c)?a(l,u.toJSON().values,c.toJSON().values):Ar(u)?o(l,u.toArray(),c):Ar(c)?o(l,u,c.toArray()):En(u)?o(l,u.toJSON().data,c):En(c)?o(l,u,c.toJSON().data):Array.isArray(u)?Array.isArray(c)?a(l,u,c):o(l,u,[c]):o(l,[u],c)}function a(l,u,c){for(var f=0,m=Math.min(u.length,c.length);f<m;f++){var p=l(u[f],c[f]);if(p!==0)return p}return u.length>c.length?1:u.length<c.length?-1:0}function s(l,u,c){var f=Object.keys(u),m=Object.keys(c);f.sort(bi.default),m.sort(bi.default);var p=a(l,f,m);if(p!==0)return p;for(var h=0;h<f.length;h++){var d=l(u[f[h]],c[m[h]]);if(d!==0)return d}return 0}});function v4(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0}var W0="compareText",y4=["typed","matrix","concat"];ms.signature="any, any";var G0=N(W0,y4,r=>{var{typed:e,matrix:t,concat:n}=r,i=Le({typed:e,matrix:t,concat:n});return e(W0,ms,i({elop:ms,Ds:!0}))});var Ws="equal",x4=["typed","matrix","equalScalar","DenseMatrix","concat"],K0=N(Ws,x4,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:o}=r,a=ct({typed:e}),s=Rt({typed:e,DenseMatrix:i}),l=Je({typed:e,DenseMatrix:i}),u=Le({typed:e,matrix:t,concat:o});return e(Ws,b4({typed:e,equalScalar:n}),u({elop:n,SS:s,DS:a,Ss:l}))}),b4=N(Ws,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(Ws,{"any, any":function(i,o){return i===null?o===null:o===null?i===null:i===void 0?o===void 0:o===void 0?i===void 0:t(i,o)}})});var Y0="equalText",w4=["typed","compareText","isZero"],Z0=N(Y0,w4,r=>{var{typed:e,compareText:t,isZero:n}=r;return e(Y0,{"any, any":function(o,a){return n(t(o,a))}})});var Gs="smaller",D4=["typed","config","matrix","DenseMatrix","concat"],X0=N(Gs,D4,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:o}=r,a=ct({typed:e}),s=Rt({typed:e,DenseMatrix:i}),l=Je({typed:e,DenseMatrix:i}),u=Le({typed:e,matrix:n,concat:o}),c=qr({typed:e});return e(Gs,S4({typed:e,config:t}),{"boolean, boolean":(f,m)=>f<m,"BigNumber, BigNumber":function(m,p){return m.lt(p)&&!St(m,p,t.relTol,t.absTol)},"bigint, bigint":(f,m)=>f<m,"Fraction, Fraction":(f,m)=>f.compare(m)===-1,"Complex, Complex":function(m,p){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:a,Ss:l}))}),S4=N(Gs,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Gs,{"number, number":function(i,o){return i<o&&!pt(i,o,t.relTol,t.absTol)}})});var Ks="smallerEq",A4=["typed","config","matrix","DenseMatrix","concat"],J0=N(Ks,A4,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:o}=r,a=ct({typed:e}),s=Rt({typed:e,DenseMatrix:i}),l=Je({typed:e,DenseMatrix:i}),u=Le({typed:e,matrix:n,concat:o}),c=qr({typed:e});return e(Ks,N4({typed:e,config:t}),{"boolean, boolean":(f,m)=>f<=m,"BigNumber, BigNumber":function(m,p){return m.lte(p)||St(m,p,t.relTol,t.absTol)},"bigint, bigint":(f,m)=>f<=m,"Fraction, Fraction":(f,m)=>f.compare(m)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:a,Ss:l}))}),N4=N(Ks,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Ks,{"number, number":function(i,o){return i<=o||pt(i,o,t.relTol,t.absTol)}})});var Ys="larger",C4=["typed","config","matrix","DenseMatrix","concat"],j0=N(Ys,C4,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:o}=r,a=ct({typed:e}),s=Rt({typed:e,DenseMatrix:i}),l=Je({typed:e,DenseMatrix:i}),u=Le({typed:e,matrix:n,concat:o}),c=qr({typed:e});return e(Ys,E4({typed:e,config:t}),{"boolean, boolean":(f,m)=>f>m,"BigNumber, BigNumber":function(m,p){return m.gt(p)&&!St(m,p,t.relTol,t.absTol)},"bigint, bigint":(f,m)=>f>m,"Fraction, Fraction":(f,m)=>f.compare(m)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:a,Ss:l}))}),E4=N(Ys,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Ys,{"number, number":function(i,o){return i>o&&!pt(i,o,t.relTol,t.absTol)}})});var Zs="largerEq",M4=["typed","config","matrix","DenseMatrix","concat"],Q0=N(Zs,M4,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:o}=r,a=ct({typed:e}),s=Rt({typed:e,DenseMatrix:i}),l=Je({typed:e,DenseMatrix:i}),u=Le({typed:e,matrix:n,concat:o}),c=qr({typed:e});return e(Zs,T4({typed:e,config:t}),{"boolean, boolean":(f,m)=>f>=m,"BigNumber, BigNumber":function(m,p){return m.gte(p)||St(m,p,t.relTol,t.absTol)},"bigint, bigint":function(m,p){return m>=p},"Fraction, Fraction":(f,m)=>f.compare(m)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:s,DS:a,Ss:l}))}),T4=N(Zs,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Zs,{"number, number":function(i,o){return i>=o||pt(i,o,t.relTol,t.absTol)}})});var ey="deepEqual",F4=["typed","equal"],ty=N(ey,F4,r=>{var{typed:e,equal:t}=r;return e(ey,{"any, any":function(o,a){return n(o.valueOf(),a.valueOf())}});function n(i,o){if(Array.isArray(i))if(Array.isArray(o)){var a=i.length;if(a!==o.length)return!1;for(var s=0;s<a;s++)if(!n(i[s],o[s]))return!1;return!0}else return!1;else return Array.isArray(o)?!1:t(i,o)}});var Xs="unequal",O4=["typed","config","equalScalar","matrix","DenseMatrix","concat"],ry=N(Xs,O4,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,DenseMatrix:o,concat:a}=r,s=ct({typed:e}),l=Rt({typed:e,DenseMatrix:o}),u=Je({typed:e,DenseMatrix:o}),c=Le({typed:e,matrix:i,concat:a});return e(Xs,B4({typed:e,equalScalar:n}),c({elop:f,SS:l,DS:s,Ss:u}));function f(m,p){return!n(m,p)}}),B4=N(Xs,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(Xs,{"any, any":function(i,o){return i===null?o!==null:o===null?i!==null:i===void 0?o!==void 0:o===void 0?i!==void 0:!t(i,o)}})});var ny="partitionSelect",_4=["typed","isNumeric","isNaN","compare"],iy=N(ny,_4,r=>{var{typed:e,isNumeric:t,isNaN:n,compare:i}=r,o=i,a=(u,c)=>-i(u,c);return e(ny,{"Array | Matrix, number":function(c,f){return s(c,f,o)},"Array | Matrix, number, string":function(c,f,m){if(m==="asc")return s(c,f,o);if(m==="desc")return s(c,f,a);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":s});function s(u,c,f){if(!xe(c)||c<0)throw new Error("k must be a non-negative integer");if(we(u)){var m=u.size();if(m.length>1)throw new Error("Only one dimensional matrices supported");return l(u.valueOf(),c,f)}if(Array.isArray(u))return l(u,c,f)}function l(u,c,f){if(c>=u.length)throw new Error("k out of bounds");for(var m=0;m<u.length;m++)if(t(u[m])&&n(u[m]))return u[m];for(var p=0,h=u.length-1;p<h;){for(var d=p,v=h,x=u[Math.floor(Math.random()*(h-p+1))+p];d<v;)if(f(u[d],x)>=0){var D=u[v];u[v]=u[d],u[d]=D,--v}else++d;f(u[d],x)>0&&--d,c<=d?h=d:p=d+1}return u[c]}});var oy="sort",k4=["typed","matrix","compare","compareNatural"],ay=N(oy,k4,r=>{var{typed:e,matrix:t,compare:n,compareNatural:i}=r,o=n,a=(c,f)=>-n(c,f);return e(oy,{Array:function(f){return l(f),f.sort(o)},Matrix:function(f){return u(f),t(f.toArray().sort(o),f.storage())},"Array, function":function(f,m){return l(f),f.sort(m)},"Matrix, function":function(f,m){return u(f),t(f.toArray().sort(m),f.storage())},"Array, string":function(f,m){return l(f),f.sort(s(m))},"Matrix, string":function(f,m){return u(f),t(f.toArray().sort(s(m)),f.storage())}});function s(c){if(c==="asc")return o;if(c==="desc")return a;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(Me(c).length!==1)throw new Error("One dimensional array expected")}function u(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}});var sy="max",P4=["typed","config","numeric","larger"],Js=N(sy,P4,r=>{var{typed:e,config:t,numeric:n,larger:i}=r;return e(sy,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(l,u){return Kn(l,u.valueOf(),o)},"...":function(l){if(zr(l))throw new TypeError("Scalar values expected in function max");return a(l)}});function o(s,l){try{return i(s,l)?s:l}catch(u){throw Ct(u,"max",l)}}function a(s){var l;if(rr(s,function(u){try{isNaN(u)&&typeof u=="number"?l=NaN:(l===void 0||i(u,l))&&(l=u)}catch(c){throw Ct(c,"max",u)}}),l===void 0)throw new Error("Cannot calculate max of an empty array");return typeof l=="string"&&(l=n(l,Qt(l,t))),l}});var ly="min",I4=["typed","config","numeric","smaller"],js=N(ly,I4,r=>{var{typed:e,config:t,numeric:n,smaller:i}=r;return e(ly,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(l,u){return Kn(l,u.valueOf(),o)},"...":function(l){if(zr(l))throw new TypeError("Scalar values expected in function min");return a(l)}});function o(s,l){try{return i(s,l)?s:l}catch(u){throw Ct(u,"min",l)}}function a(s){var l;if(rr(s,function(u){try{isNaN(u)&&typeof u=="number"?l=NaN:(l===void 0||i(u,l))&&(l=u)}catch(c){throw Ct(c,"min",u)}}),l===void 0)throw new Error("Cannot calculate min of an empty array");return typeof l=="string"&&(l=n(l,Qt(l,t))),l}});var R4="ImmutableDenseMatrix",L4=["smaller","DenseMatrix"],uy=N(R4,L4,r=>{var{smaller:e,DenseMatrix:t}=r;function n(i,o){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(o&&!bt(o))throw new Error("Invalid datatype: "+o);if(we(i)||Ze(i)){var a=new t(i,o);this._data=a._data,this._size=a._size,this._datatype=a._datatype,this._min=null,this._max=null}else if(i&&Ze(i.data)&&Ze(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+Ye(i)+")");this._data=[],this._size=[0],this._datatype=o,this._min=null,this._max=null}}return n.prototype=new t,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(i){switch(arguments.length){case 1:{var o=t.prototype.subset.call(this,i);return we(o)?new n({data:o._data,size:o._size,datatype:o._datatype}):o}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:Ee(this._data),size:Ee(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(i){return new n(i)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(o){(i===null||e(o,i))&&(i=o)}),this._min=i!==null?i:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(o){(i===null||e(i,o))&&(i=o)}),this._max=i!==null?i:void 0}return this._max},n},{isClass:!0});var z4="Index",q4=["ImmutableDenseMatrix","getMatrixDataType"],fy=N(z4,q4,r=>{var{ImmutableDenseMatrix:e,getMatrixDataType:t}=r;function n(o){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var a=0,s=arguments.length;a<s;a++){var l=arguments[a],u=Ze(l),c=we(l),f=null;if(Vn(l))this._dimensions.push(l),this._isScalar=!1;else if(u||c){var m=void 0;t(l)==="boolean"?(u&&(m=i(cy(l).valueOf())),c&&(m=i(cy(l._data).valueOf())),f=l.valueOf().length):m=i(l.valueOf()),this._dimensions.push(m);var p=m.size();(p.length!==1||p[0]!==1||f!==null)&&(this._isScalar=!1)}else if(typeof l=="number")this._dimensions.push(i([l]));else if(typeof l=="string")this._dimensions.push(l);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(f)}}n.prototype.type="Index",n.prototype.isIndex=!0;function i(o){for(var a=0,s=o.length;a<s;a++)if(typeof o[a]!="number"||!xe(o[a]))throw new TypeError("Index parameters must be positive integer numbers");return new e(o)}return n.prototype.clone=function(){var o=new n;return o._dimensions=Ee(this._dimensions),o._isScalar=this._isScalar,o._sourceSize=this._sourceSize,o},n.create=function(o){var a=new n;return n.apply(a,o),a},n.prototype.size=function(){for(var o=[],a=0,s=this._dimensions.length;a<s;a++){var l=this._dimensions[a];o[a]=typeof l=="string"?1:l.size()[0]}return o},n.prototype.max=function(){for(var o=[],a=0,s=this._dimensions.length;a<s;a++){var l=this._dimensions[a];o[a]=typeof l=="string"?l:l.max()}return o},n.prototype.min=function(){for(var o=[],a=0,s=this._dimensions.length;a<s;a++){var l=this._dimensions[a];o[a]=typeof l=="string"?l:l.min()}return o},n.prototype.forEach=function(o){for(var a=0,s=this._dimensions.length;a<s;a++)o(this._dimensions[a],a,this)},n.prototype.dimension=function(o){return typeof o!="number"?null:this._dimensions[o]||null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var o=[],a=0,s=this._dimensions.length;a<s;a++){var l=this._dimensions[a];o.push(typeof l=="string"?l:l.toArray())}return o},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var o=[],a=0,s=this._dimensions.length;a<s;a++){var l=this._dimensions[a];typeof l=="string"?o.push(JSON.stringify(l)):o.push(l.toString())}return"["+o.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(o){return n.create(o.dimensions)},n},{isClass:!0});function cy(r){var e=[];return r.forEach((t,n)=>{t&&e.push(n)}),e}var U4="FibonacciHeap",V4=["smaller","larger"],my=N(U4,V4,r=>{var{smaller:e,larger:t}=r,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,f){var m={key:c,value:f,degree:0};if(this._minimum){var p=this._minimum;m.left=p,m.right=p.right,p.right=m,m.right.left=m,e(c,p.key)&&(this._minimum=m)}else m.left=m,m.right=m,this._minimum=m;return this._size++,m},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,m=c.degree,p=c.child;m>0;){var h=p.right;p.left.right=p.right,p.right.left=p.left,p.left=f,p.right=f.right,f.right=p,p.right.left=p,p.parent=null,p=h,m--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=u(f,this._size)),this._size--,this._minimum=f,c},i.prototype.remove=function(c){this._minimum=o(this._minimum,c,-1),this.extractMinimum()};function o(c,f,m){f.key=m;var p=f.parent;return p&&e(f.key,p.key)&&(a(c,f,p),s(c,p)),e(f.key,c.key)&&(c=f),c}function a(c,f,m){f.left.right=f.right,f.right.left=f.left,m.degree--,m.child===f&&(m.child=f.right),m.degree===0&&(m.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function s(c,f){var m=f.parent;m&&(f.mark?(a(c,f,m),s(m)):f.mark=!0)}var l=function(f,m){f.left.right=f.right,f.right.left=f.left,f.parent=m,m.child?(f.left=m.child,f.right=m.child.right,m.child.right=f,f.right.left=f):(m.child=f,f.right=f,f.left=f),m.degree++,f.mark=!1};function u(c,f){var m=Math.floor(Math.log(f)*n)+1,p=new Array(m),h=0,d=c;if(d)for(h++,d=d.right;d!==c;)h++,d=d.right;for(var v;h>0;){for(var x=d.degree,D=d.right;v=p[x],!!v;){if(t(d.key,v.key)){var g=v;v=d,d=g}l(v,d),p[x]=null,x++}p[x]=d,d=D,h--}c=null;for(var w=0;w<m;w++)v=p[w],v&&(c?(v.left.right=v.right,v.right.left=v.left,v.left=c,v.right=c.right,c.right=v,v.right.left=v,e(v.key,c.key)&&(c=v)):c=v);return c}return i},{isClass:!0});var H4="Spa",$4=["addScalar","equalScalar","FibonacciHeap"],py=N(H4,$4,r=>{var{addScalar:e,equalScalar:t,FibonacciHeap:n}=r;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(o,a){if(this._values[o])this._values[o].value=a;else{var s=this._heap.insert(o,a);this._values[o]=s}},i.prototype.get=function(o){var a=this._values[o];return a?a.value:0},i.prototype.accumulate=function(o,a){var s=this._values[o];s?s.value=e(s.value,a):(s=this._heap.insert(o,a),this._values[o]=s)},i.prototype.forEach=function(o,a,s){var l=this._heap,u=this._values,c=[],f=l.extractMinimum();for(f&&c.push(f);f&&f.key<=a;)f.key>=o&&(t(f.value,0)||s(f.key,f.value,this)),f=l.extractMinimum(),f&&c.push(f);for(var m=0;m<c.length;m++){var p=c[m];f=l.insert(p.key,p.value),u[f.key]=f}},i.prototype.swap=function(o,a){var s=this._values[o],l=this._values[a];if(!s&&l)s=this._heap.insert(o,l.value),this._heap.remove(l),this._values[o]=s,this._values[a]=void 0;else if(s&&!l)l=this._heap.insert(a,s.value),this._heap.remove(s),this._values[a]=l,this._values[o]=void 0;else if(s&&l){var u=s.value;s.value=l.value,l.value=u}},i},{isClass:!0});function hy(r){var e=0,t=1,n=Object.create(null),i=Object.create(null),o=0,a=function(l){var u=i[l];if(u&&(delete n[u],delete i[l],--e,t===u)){if(!e){o=0,t=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++t););}};return r=Math.abs(r),{hit:function(l){var u=i[l],c=++o;if(n[c]=l,i[l]=c,!u)return++e,e<=r?void 0:(l=n[t],a(l),l);if(delete n[u],t===u)for(;!Object.prototype.hasOwnProperty.call(n,++t););},delete:a,clear:function(){e=o=0,t=1,n=Object.create(null),i=Object.create(null)}}}function wi(r){var{hasher:e,limit:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=t??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:hy(t||Number.POSITIVE_INFINITY)});for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=e(i);if(n.cache.values.has(a))return n.cache.lru.hit(a),n.cache.values.get(a);var s=r.apply(r,i);return n.cache.values.set(a,s),n.cache.values.delete(n.cache.lru.hit(a)),s}}var dy=wi(function(r){return new r(1).exp()},{hasher:Qs}),gy=wi(function(r){return new r(1).plus(new r(5).sqrt()).div(2)},{hasher:Qs}),Go=wi(function(r){return r.acos(-1)},{hasher:Qs}),vy=wi(function(r){return Go(r).times(2)},{hasher:Qs});function Qs(r){return r[0].precision}function yy(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function cf(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yy(Object(t),!0).forEach(function(n){et(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):yy(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var W4="Unit",G4=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],xy=N(W4,G4,r=>{var{on:e,config:t,addScalar:n,subtractScalar:i,multiplyScalar:o,divideScalar:a,pow:s,abs:l,fix:u,round:c,equal:f,isNumeric:m,format:p,number:h,Complex:d,BigNumber:v,Fraction:x}=r,D=h;function g(z,V){if(!(this instanceof g))throw new Error("Constructor must be called with the new operator");if(!(z==null||m(z)||qt(z)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,V===void 0)this.units=[],this.dimensions=q.map(ne=>0);else if(typeof V=="string"){var ee=g.parse(V);this.units=ee.units,this.dimensions=ee.dimensions}else if(Bt(V)&&V.value===null)this.fixPrefix=V.fixPrefix,this.skipAutomaticSimplification=V.skipAutomaticSimplification,this.dimensions=V.dimensions.slice(0),this.units=V.units.map(ne=>Mt({},ne));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(z)}Object.defineProperty(g,"name",{value:"Unit"}),g.prototype.constructor=g,g.prototype.type="Unit",g.prototype.isUnit=!0;var w,b,y;function S(){for(;y===" "||y==="	";)E()}function C(z){return z>="0"&&z<="9"||z==="."}function A(z){return z>="0"&&z<="9"}function E(){b++,y=w.charAt(b)}function M(z){b=z,y=w.charAt(b)}function F(){var z="",V=b;if(y==="+"?E():y==="-"&&(z+=y,E()),!C(y))return M(V),null;if(y==="."){if(z+=y,E(),!A(y))return M(V),null}else{for(;A(y);)z+=y,E();y==="."&&(z+=y,E())}for(;A(y);)z+=y,E();if(y==="E"||y==="e"){var ee="",ne=b;if(ee+=y,E(),(y==="+"||y==="-")&&(ee+=y,E()),!A(y))return M(ne),z;for(z=z+ee;A(y);)z+=y,E()}return z}function k(){for(var z="";A(y)||g.isValidAlpha(y);)z+=y,E();var V=z.charAt(0);return g.isValidAlpha(V)?z:null}function I(z){return y===z?(E(),z):null}g.parse=function(z,V){if(V=V||{},w=z,b=-1,y="",typeof w!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var ee=new g;ee.units=[];var ne=1,le=!1;E(),S();var fe=F(),ye=null;if(fe){if(t.number==="BigNumber")ye=new v(fe);else if(t.number==="Fraction")try{ye=new x(fe)}catch{ye=parseFloat(fe)}else ye=parseFloat(fe);S(),I("*")?(ne=1,le=!0):I("/")&&(ne=-1,le=!0)}for(var Se=[],Ue=1;;){for(S();y==="(";)Se.push(ne),Ue*=ne,ne=1,E(),S();var Pe=void 0;if(y){var ut=y;if(Pe=k(),Pe===null)throw new SyntaxError('Unexpected "'+ut+'" in "'+w+'" at index '+b.toString())}else break;var Xe=P(Pe);if(Xe===null)throw new SyntaxError('Unit "'+Pe+'" not found.');var Ot=ne*Ue;if(S(),I("^")){S();var It=F();if(It===null)throw new SyntaxError('In "'+z+'", "^" must be followed by a floating-point number');Ot*=It}ee.units.push({unit:Xe.unit,prefix:Xe.prefix,power:Ot});for(var H=0;H<q.length;H++)ee.dimensions[H]+=(Xe.unit.dimensions[H]||0)*Ot;for(S();y===")";){if(Se.length===0)throw new SyntaxError('Unmatched ")" in "'+w+'" at index '+b.toString());Ue/=Se.pop(),E(),S()}if(le=!1,I("*")?(ne=1,le=!0):I("/")?(ne=-1,le=!0):ne=1,Xe.unit.base){var Q=Xe.unit.base.key;j.auto[Q]={unit:Xe.unit,prefix:Xe.prefix}}}if(S(),y)throw new SyntaxError('Could not parse: "'+z+'"');if(le)throw new SyntaxError('Trailing characters: "'+z+'"');if(Se.length!==0)throw new SyntaxError('Unmatched "(" in "'+w+'"');if(ee.units.length===0&&!V.allowNoUnits)throw new SyntaxError('"'+z+'" contains no units');return ee.value=ye!==void 0?ee._normalize(ye):null,ee},g.prototype.clone=function(){var z=new g;z.fixPrefix=this.fixPrefix,z.skipAutomaticSimplification=this.skipAutomaticSimplification,z.value=Ee(this.value),z.dimensions=this.dimensions.slice(0),z.units=[];for(var V=0;V<this.units.length;V++){z.units[V]={};for(var ee in this.units[V])be(this.units[V],ee)&&(z.units[V][ee]=this.units[V][ee])}return z},g.prototype.valueType=function(){return Ye(this.value)},g.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},g.prototype._normalize=function(z){if(z==null||this.units.length===0)return z;for(var V=z,ee=g._getNumberConverter(Ye(z)),ne=0;ne<this.units.length;ne++){var le=ee(this.units[ne].unit.value),fe=ee(this.units[ne].prefix.value),ye=ee(this.units[ne].power);V=o(V,s(o(le,fe),ye))}return V},g.prototype._denormalize=function(z,V){if(z==null||this.units.length===0)return z;for(var ee=z,ne=g._getNumberConverter(Ye(z)),le=0;le<this.units.length;le++){var fe=ne(this.units[le].unit.value),ye=ne(this.units[le].prefix.value),Se=ne(this.units[le].power);ee=a(ee,s(o(fe,ye),Se))}return ee};var P=wi(z=>{if(be(R,z)){var V=R[z],ee=V.prefixes[""];return{unit:V,prefix:ee}}for(var ne in R)if(be(R,ne)&&Ah(z,ne)){var le=R[ne],fe=z.length-ne.length,ye=z.substring(0,fe),Se=be(le.prefixes,ye)?le.prefixes[ye]:void 0;if(Se!==void 0)return{unit:le,prefix:Se}}return null},{hasher:z=>z[0],limit:100});g.isValuelessUnit=function(z){return P(z)!==null},g.prototype.hasBase=function(z){if(typeof z=="string"&&(z=_[z]),!z)return!1;for(var V=0;V<q.length;V++)if(Math.abs((this.dimensions[V]||0)-(z.dimensions[V]||0))>1e-12)return!1;return!0},g.prototype.equalBase=function(z){for(var V=0;V<q.length;V++)if(Math.abs((this.dimensions[V]||0)-(z.dimensions[V]||0))>1e-12)return!1;return!0},g.prototype.equals=function(z){return this.equalBase(z)&&f(this.value,z.value)},g.prototype.multiply=function(z){for(var V=this.clone(),ee=Bt(z)?z:new g(z),ne=0;ne<q.length;ne++)V.dimensions[ne]=(this.dimensions[ne]||0)+(ee.dimensions[ne]||0);for(var le=0;le<ee.units.length;le++){var fe=cf({},ee.units[le]);V.units.push(fe)}if(this.value!==null||ee.value!==null){var ye=this.value===null?this._normalize(1):this.value,Se=ee.value===null?ee._normalize(1):ee.value;V.value=o(ye,Se)}else V.value=null;return Bt(z)&&(V.skipAutomaticSimplification=!1),B(V)},g.prototype.divideInto=function(z){return new g(z).divide(this)},g.prototype.divide=function(z){for(var V=this.clone(),ee=Bt(z)?z:new g(z),ne=0;ne<q.length;ne++)V.dimensions[ne]=(this.dimensions[ne]||0)-(ee.dimensions[ne]||0);for(var le=0;le<ee.units.length;le++){var fe=cf(cf({},ee.units[le]),{},{power:-ee.units[le].power});V.units.push(fe)}if(this.value!==null||ee.value!==null){var ye=this.value===null?this._normalize(1):this.value,Se=ee.value===null?ee._normalize(1):ee.value;V.value=a(ye,Se)}else V.value=null;return Bt(z)&&(V.skipAutomaticSimplification=!1),B(V)},g.prototype.pow=function(z){for(var V=this.clone(),ee=0;ee<q.length;ee++)V.dimensions[ee]=(this.dimensions[ee]||0)*z;for(var ne=0;ne<V.units.length;ne++)V.units[ne].power*=z;return V.value!==null?V.value=s(V.value,z):V.value=null,V.skipAutomaticSimplification=!1,B(V)};function B(z){return z.equalBase(_.NONE)&&z.value!==null&&!t.predictable?z.value:z}g.prototype.abs=function(){var z=this.clone();if(z.value!==null)if(z._isDerived()||z.units.length===0||z.units[0].unit.offset===0)z.value=l(z.value);else{var V=z._numberConverter(),ee=V(z.units[0].unit.value),ne=V(z.units[0].unit.offset),le=o(ee,ne);z.value=i(l(n(z.value,le)),le)}for(var fe in z.units)(z.units[fe].unit.name==="VA"||z.units[fe].unit.name==="VAR")&&(z.units[fe].unit=R.W);return z},g.prototype.to=function(z){var V=this.value===null?this._normalize(1):this.value,ee;if(typeof z=="string")ee=g.parse(z);else if(Bt(z))ee=z.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(ee))throw new Error("Units do not match ('".concat(ee.toString(),"' != '").concat(this.toString(),"')"));if(ee.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||ee.units.length===0||this.units[0].unit.offset===ee.units[0].unit.offset)ee.value=Ee(V);else{var ne=g._getNumberConverter(Ye(V)),le=this.units[0].unit.value,fe=this.units[0].unit.offset,ye=o(le,fe),Se=ee.units[0].unit.value,Ue=ee.units[0].unit.offset,Pe=o(Se,Ue);ee.value=n(V,ne(i(ye,Pe)))}return ee.fixPrefix=!0,ee.skipAutomaticSimplification=!0,ee},g.prototype.toNumber=function(z){return D(this.toNumeric(z))},g.prototype.toNumeric=function(z){var V;return z?V=this.to(z):V=this.clone(),V._isDerived()||V.units.length===0?V._denormalize(V.value):V._denormalize(V.value,V.units[0].prefix.value)},g.prototype.toString=function(){return this.format()},g.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},g.fromJSON=function(z){var V,ee=new g(z.value,(V=z.unit)!==null&&V!==void 0?V:void 0);return ee.fixPrefix=z.fixPrefix||!1,ee},g.prototype.valueOf=g.prototype.toString,g.prototype.simplify=function(){var z=this.clone(),V=[],ee;for(var ne in U)if(be(U,ne)&&z.hasBase(_[ne])){ee=ne;break}if(ee==="NONE")z.units=[];else{var le;if(ee&&be(U,ee)&&(le=U[ee]),le)z.units=[{unit:le.unit,prefix:le.prefix,power:1}];else{for(var fe=!1,ye=0;ye<q.length;ye++){var Se=q[ye];Math.abs(z.dimensions[ye]||0)>1e-12&&(be(U,Se)?V.push({unit:U[Se].unit,prefix:U[Se].prefix,power:z.dimensions[ye]||0}):fe=!0)}V.length<z.units.length&&!fe&&(z.units=V)}}return z},g.prototype.toSI=function(){for(var z=this.clone(),V=[],ee=0;ee<q.length;ee++){var ne=q[ee];if(Math.abs(z.dimensions[ee]||0)>1e-12)if(be(j.si,ne))V.push({unit:j.si[ne].unit,prefix:j.si[ne].prefix,power:z.dimensions[ee]||0});else throw new Error("Cannot express custom unit "+ne+" in SI units")}return z.units=V,z.fixPrefix=!0,z.skipAutomaticSimplification=!0,this.value!==null?(z.value=null,this.to(z)):z},g.prototype.formatUnits=function(){for(var z="",V="",ee=0,ne=0,le=0;le<this.units.length;le++)this.units[le].power>0?(ee++,z+=" "+this.units[le].prefix.name+this.units[le].unit.name,Math.abs(this.units[le].power-1)>1e-15&&(z+="^"+this.units[le].power)):this.units[le].power<0&&ne++;if(ne>0)for(var fe=0;fe<this.units.length;fe++)this.units[fe].power<0&&(ee>0?(V+=" "+this.units[fe].prefix.name+this.units[fe].unit.name,Math.abs(this.units[fe].power+1)>1e-15&&(V+="^"+-this.units[fe].power)):(V+=" "+this.units[fe].prefix.name+this.units[fe].unit.name,V+="^"+this.units[fe].power));z=z.substr(1),V=V.substr(1),ee>1&&ne>0&&(z="("+z+")"),ne>1&&ee>0&&(V="("+V+")");var ye=z;return ee>0&&ne>0&&(ye+=" / "),ye+=V,ye},g.prototype.format=function(z){var V=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),ee=!1;typeof V.value<"u"&&V.value!==null&&qt(V.value)&&(ee=Math.abs(V.value.re)<1e-14);for(var ne in V.units)be(V.units,ne)&&V.units[ne].unit&&(V.units[ne].unit.name==="VA"&&ee?V.units[ne].unit=R.VAR:V.units[ne].unit.name==="VAR"&&!ee&&(V.units[ne].unit=R.VA));V.units.length===1&&!V.fixPrefix&&Math.abs(V.units[0].power-Math.round(V.units[0].power))<1e-14&&(V.units[0].prefix=V._bestPrefix());var le=V._denormalize(V.value),fe=V.value!==null?p(le,z||{}):"",ye=V.formatUnits();return V.value&&qt(V.value)&&(fe="("+fe+")"),ye.length>0&&fe.length>0&&(fe+=" "),fe+=ye,fe},g.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var z=this.value!==null?l(this.value):0,V=l(this.units[0].unit.value),ee=this.units[0].prefix;if(z===0)return ee;var ne=this.units[0].power,le=Math.log(z/Math.pow(ee.value*V,ne))/Math.LN10-1.2;if(le>-2.200001&&le<1.800001)return ee;le=Math.abs(le);var fe=this.units[0].unit.prefixes;for(var ye in fe)if(be(fe,ye)){var Se=fe[ye];if(Se.scientific){var Ue=Math.abs(Math.log(z/Math.pow(Se.value*V,ne))/Math.LN10-1.2);(Ue<le||Ue===le&&Se.name.length<ee.name.length)&&(ee=Se,le=Ue)}}return ee},g.prototype.splitUnit=function(z){for(var V=this.clone(),ee=[],ne=0;ne<z.length&&(V=V.to(z[ne]),ne!==z.length-1);ne++){var le=V.toNumeric(),fe=c(le),ye=void 0,Se=f(fe,le);Se?ye=fe:ye=u(V.toNumeric());var Ue=new g(ye,z[ne].toString());ee.push(Ue),V=i(V,Ue)}for(var Pe=0,ut=0;ut<ee.length;ut++)Pe=n(Pe,ee[ut].value);return f(Pe,this.value)&&(V.value=0),ee.push(V),ee};var O={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};O.SHORTLONG=Mt({},O.SHORT,O.LONG),O.BINARY_SHORT=Mt({},O.BINARY_SHORT_SI,O.BINARY_SHORT_IEC),O.BINARY_LONG=Mt({},O.BINARY_LONG_SI,O.BINARY_LONG_IEC);var q=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],_={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var K in _)be(_,K)&&(_[K].key=K);var Z={},W={name:"",base:Z,value:1,offset:0,dimensions:q.map(z=>0)},R={meter:{name:"meter",base:_.LENGTH,prefixes:O.LONG,value:1,offset:0},inch:{name:"inch",base:_.LENGTH,prefixes:O.NONE,value:.0254,offset:0},foot:{name:"foot",base:_.LENGTH,prefixes:O.NONE,value:.3048,offset:0},yard:{name:"yard",base:_.LENGTH,prefixes:O.NONE,value:.9144,offset:0},mile:{name:"mile",base:_.LENGTH,prefixes:O.NONE,value:1609.344,offset:0},link:{name:"link",base:_.LENGTH,prefixes:O.NONE,value:.201168,offset:0},rod:{name:"rod",base:_.LENGTH,prefixes:O.NONE,value:5.0292,offset:0},chain:{name:"chain",base:_.LENGTH,prefixes:O.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:_.LENGTH,prefixes:O.NONE,value:1e-10,offset:0},m:{name:"m",base:_.LENGTH,prefixes:O.SHORT,value:1,offset:0},in:{name:"in",base:_.LENGTH,prefixes:O.NONE,value:.0254,offset:0},ft:{name:"ft",base:_.LENGTH,prefixes:O.NONE,value:.3048,offset:0},yd:{name:"yd",base:_.LENGTH,prefixes:O.NONE,value:.9144,offset:0},mi:{name:"mi",base:_.LENGTH,prefixes:O.NONE,value:1609.344,offset:0},li:{name:"li",base:_.LENGTH,prefixes:O.NONE,value:.201168,offset:0},rd:{name:"rd",base:_.LENGTH,prefixes:O.NONE,value:5.02921,offset:0},ch:{name:"ch",base:_.LENGTH,prefixes:O.NONE,value:20.1168,offset:0},mil:{name:"mil",base:_.LENGTH,prefixes:O.NONE,value:254e-7,offset:0},m2:{name:"m2",base:_.SURFACE,prefixes:O.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:_.SURFACE,prefixes:O.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:_.SURFACE,prefixes:O.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:_.SURFACE,prefixes:O.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:_.SURFACE,prefixes:O.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:_.SURFACE,prefixes:O.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:_.SURFACE,prefixes:O.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:_.SURFACE,prefixes:O.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:_.SURFACE,prefixes:O.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:_.SURFACE,prefixes:O.NONE,value:1e4,offset:0},m3:{name:"m3",base:_.VOLUME,prefixes:O.CUBIC,value:1,offset:0},L:{name:"L",base:_.VOLUME,prefixes:O.SHORT,value:.001,offset:0},l:{name:"l",base:_.VOLUME,prefixes:O.SHORT,value:.001,offset:0},litre:{name:"litre",base:_.VOLUME,prefixes:O.LONG,value:.001,offset:0},cuin:{name:"cuin",base:_.VOLUME,prefixes:O.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:_.VOLUME,prefixes:O.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:_.VOLUME,prefixes:O.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:_.VOLUME,prefixes:O.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:_.VOLUME,prefixes:O.NONE,value:15e-6,offset:0},drop:{name:"drop",base:_.VOLUME,prefixes:O.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:_.VOLUME,prefixes:O.NONE,value:5e-8,offset:0},minim:{name:"minim",base:_.VOLUME,prefixes:O.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:_.VOLUME,prefixes:O.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:_.VOLUME,prefixes:O.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:_.VOLUME,prefixes:O.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:_.VOLUME,prefixes:O.NONE,value:1e-6,offset:0},cup:{name:"cup",base:_.VOLUME,prefixes:O.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:_.VOLUME,prefixes:O.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:_.VOLUME,prefixes:O.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:_.VOLUME,prefixes:O.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:_.VOLUME,prefixes:O.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:_.VOLUME,prefixes:O.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:_.VOLUME,prefixes:O.NONE,value:.238480942392,offset:0},g:{name:"g",base:_.MASS,prefixes:O.SHORT,value:.001,offset:0},gram:{name:"gram",base:_.MASS,prefixes:O.LONG,value:.001,offset:0},ton:{name:"ton",base:_.MASS,prefixes:O.SHORT,value:907.18474,offset:0},t:{name:"t",base:_.MASS,prefixes:O.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:_.MASS,prefixes:O.LONG,value:1e3,offset:0},grain:{name:"grain",base:_.MASS,prefixes:O.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:_.MASS,prefixes:O.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:_.MASS,prefixes:O.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:_.MASS,prefixes:O.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:_.MASS,prefixes:O.NONE,value:45.359237,offset:0},stick:{name:"stick",base:_.MASS,prefixes:O.NONE,value:.115,offset:0},stone:{name:"stone",base:_.MASS,prefixes:O.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:_.MASS,prefixes:O.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:_.MASS,prefixes:O.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:_.MASS,prefixes:O.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:_.MASS,prefixes:O.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:_.MASS,prefixes:O.NONE,value:45.359237,offset:0},s:{name:"s",base:_.TIME,prefixes:O.SHORT,value:1,offset:0},min:{name:"min",base:_.TIME,prefixes:O.NONE,value:60,offset:0},h:{name:"h",base:_.TIME,prefixes:O.NONE,value:3600,offset:0},second:{name:"second",base:_.TIME,prefixes:O.LONG,value:1,offset:0},sec:{name:"sec",base:_.TIME,prefixes:O.LONG,value:1,offset:0},minute:{name:"minute",base:_.TIME,prefixes:O.NONE,value:60,offset:0},hour:{name:"hour",base:_.TIME,prefixes:O.NONE,value:3600,offset:0},day:{name:"day",base:_.TIME,prefixes:O.NONE,value:86400,offset:0},week:{name:"week",base:_.TIME,prefixes:O.NONE,value:7*86400,offset:0},month:{name:"month",base:_.TIME,prefixes:O.NONE,value:2629800,offset:0},year:{name:"year",base:_.TIME,prefixes:O.NONE,value:31557600,offset:0},decade:{name:"decade",base:_.TIME,prefixes:O.NONE,value:315576e3,offset:0},century:{name:"century",base:_.TIME,prefixes:O.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:_.TIME,prefixes:O.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:_.FREQUENCY,prefixes:O.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:_.FREQUENCY,prefixes:O.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:_.ANGLE,prefixes:O.SHORT,value:1,offset:0},radian:{name:"radian",base:_.ANGLE,prefixes:O.LONG,value:1,offset:0},deg:{name:"deg",base:_.ANGLE,prefixes:O.SHORT,value:null,offset:0},degree:{name:"degree",base:_.ANGLE,prefixes:O.LONG,value:null,offset:0},grad:{name:"grad",base:_.ANGLE,prefixes:O.SHORT,value:null,offset:0},gradian:{name:"gradian",base:_.ANGLE,prefixes:O.LONG,value:null,offset:0},cycle:{name:"cycle",base:_.ANGLE,prefixes:O.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:_.ANGLE,prefixes:O.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:_.ANGLE,prefixes:O.NONE,value:null,offset:0},A:{name:"A",base:_.CURRENT,prefixes:O.SHORT,value:1,offset:0},ampere:{name:"ampere",base:_.CURRENT,prefixes:O.LONG,value:1,offset:0},K:{name:"K",base:_.TEMPERATURE,prefixes:O.SHORT,value:1,offset:0},degC:{name:"degC",base:_.TEMPERATURE,prefixes:O.SHORT,value:1,offset:273.15},degF:{name:"degF",base:_.TEMPERATURE,prefixes:O.SHORT,value:new x(5,9),offset:459.67},degR:{name:"degR",base:_.TEMPERATURE,prefixes:O.SHORT,value:new x(5,9),offset:0},kelvin:{name:"kelvin",base:_.TEMPERATURE,prefixes:O.LONG,value:1,offset:0},celsius:{name:"celsius",base:_.TEMPERATURE,prefixes:O.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:_.TEMPERATURE,prefixes:O.LONG,value:new x(5,9),offset:459.67},rankine:{name:"rankine",base:_.TEMPERATURE,prefixes:O.LONG,value:new x(5,9),offset:0},mol:{name:"mol",base:_.AMOUNT_OF_SUBSTANCE,prefixes:O.SHORT,value:1,offset:0},mole:{name:"mole",base:_.AMOUNT_OF_SUBSTANCE,prefixes:O.LONG,value:1,offset:0},cd:{name:"cd",base:_.LUMINOUS_INTENSITY,prefixes:O.SHORT,value:1,offset:0},candela:{name:"candela",base:_.LUMINOUS_INTENSITY,prefixes:O.LONG,value:1,offset:0},N:{name:"N",base:_.FORCE,prefixes:O.SHORT,value:1,offset:0},newton:{name:"newton",base:_.FORCE,prefixes:O.LONG,value:1,offset:0},dyn:{name:"dyn",base:_.FORCE,prefixes:O.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:_.FORCE,prefixes:O.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:_.FORCE,prefixes:O.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:_.FORCE,prefixes:O.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:_.FORCE,prefixes:O.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:_.FORCE,prefixes:O.NONE,value:9.80665,offset:0},J:{name:"J",base:_.ENERGY,prefixes:O.SHORT,value:1,offset:0},joule:{name:"joule",base:_.ENERGY,prefixes:O.LONG,value:1,offset:0},erg:{name:"erg",base:_.ENERGY,prefixes:O.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:_.ENERGY,prefixes:O.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:_.ENERGY,prefixes:O.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:_.ENERGY,prefixes:O.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:_.ENERGY,prefixes:O.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:_.POWER,prefixes:O.SHORT,value:1,offset:0},watt:{name:"watt",base:_.POWER,prefixes:O.LONG,value:1,offset:0},hp:{name:"hp",base:_.POWER,prefixes:O.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:_.POWER,prefixes:O.SHORT,value:d.I,offset:0},VA:{name:"VA",base:_.POWER,prefixes:O.SHORT,value:1,offset:0},Pa:{name:"Pa",base:_.PRESSURE,prefixes:O.SHORT,value:1,offset:0},psi:{name:"psi",base:_.PRESSURE,prefixes:O.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:_.PRESSURE,prefixes:O.NONE,value:101325,offset:0},bar:{name:"bar",base:_.PRESSURE,prefixes:O.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:_.PRESSURE,prefixes:O.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:_.PRESSURE,prefixes:O.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:_.PRESSURE,prefixes:O.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:_.PRESSURE,prefixes:O.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:_.ELECTRIC_CHARGE,prefixes:O.LONG,value:1,offset:0},C:{name:"C",base:_.ELECTRIC_CHARGE,prefixes:O.SHORT,value:1,offset:0},farad:{name:"farad",base:_.ELECTRIC_CAPACITANCE,prefixes:O.LONG,value:1,offset:0},F:{name:"F",base:_.ELECTRIC_CAPACITANCE,prefixes:O.SHORT,value:1,offset:0},volt:{name:"volt",base:_.ELECTRIC_POTENTIAL,prefixes:O.LONG,value:1,offset:0},V:{name:"V",base:_.ELECTRIC_POTENTIAL,prefixes:O.SHORT,value:1,offset:0},ohm:{name:"ohm",base:_.ELECTRIC_RESISTANCE,prefixes:O.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:_.ELECTRIC_INDUCTANCE,prefixes:O.LONG,value:1,offset:0},H:{name:"H",base:_.ELECTRIC_INDUCTANCE,prefixes:O.SHORT,value:1,offset:0},siemens:{name:"siemens",base:_.ELECTRIC_CONDUCTANCE,prefixes:O.LONG,value:1,offset:0},S:{name:"S",base:_.ELECTRIC_CONDUCTANCE,prefixes:O.SHORT,value:1,offset:0},weber:{name:"weber",base:_.MAGNETIC_FLUX,prefixes:O.LONG,value:1,offset:0},Wb:{name:"Wb",base:_.MAGNETIC_FLUX,prefixes:O.SHORT,value:1,offset:0},tesla:{name:"tesla",base:_.MAGNETIC_FLUX_DENSITY,prefixes:O.LONG,value:1,offset:0},T:{name:"T",base:_.MAGNETIC_FLUX_DENSITY,prefixes:O.SHORT,value:1,offset:0},b:{name:"b",base:_.BIT,prefixes:O.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:_.BIT,prefixes:O.BINARY_LONG,value:1,offset:0},B:{name:"B",base:_.BIT,prefixes:O.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:_.BIT,prefixes:O.BINARY_LONG,value:8,offset:0}},X={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function ae(z){if(z.number==="BigNumber"){var V=Go(v);R.rad.value=new v(1),R.deg.value=V.div(180),R.grad.value=V.div(200),R.cycle.value=V.times(2),R.arcsec.value=V.div(648e3),R.arcmin.value=V.div(10800)}else R.rad.value=1,R.deg.value=Math.PI/180,R.grad.value=Math.PI/200,R.cycle.value=Math.PI*2,R.arcsec.value=Math.PI/648e3,R.arcmin.value=Math.PI/10800;R.radian.value=R.rad.value,R.degree.value=R.deg.value,R.gradian.value=R.grad.value}ae(t),e&&e("config",function(z,V){z.number!==V.number&&ae(z)});var j={si:{NONE:{unit:W,prefix:O.NONE[""]},LENGTH:{unit:R.m,prefix:O.SHORT[""]},MASS:{unit:R.g,prefix:O.SHORT.k},TIME:{unit:R.s,prefix:O.SHORT[""]},CURRENT:{unit:R.A,prefix:O.SHORT[""]},TEMPERATURE:{unit:R.K,prefix:O.SHORT[""]},LUMINOUS_INTENSITY:{unit:R.cd,prefix:O.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:R.mol,prefix:O.SHORT[""]},ANGLE:{unit:R.rad,prefix:O.SHORT[""]},BIT:{unit:R.bits,prefix:O.SHORT[""]},FORCE:{unit:R.N,prefix:O.SHORT[""]},ENERGY:{unit:R.J,prefix:O.SHORT[""]},POWER:{unit:R.W,prefix:O.SHORT[""]},PRESSURE:{unit:R.Pa,prefix:O.SHORT[""]},ELECTRIC_CHARGE:{unit:R.C,prefix:O.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:R.F,prefix:O.SHORT[""]},ELECTRIC_POTENTIAL:{unit:R.V,prefix:O.SHORT[""]},ELECTRIC_RESISTANCE:{unit:R.ohm,prefix:O.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:R.H,prefix:O.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:R.S,prefix:O.SHORT[""]},MAGNETIC_FLUX:{unit:R.Wb,prefix:O.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:R.T,prefix:O.SHORT[""]},FREQUENCY:{unit:R.Hz,prefix:O.SHORT[""]}}};j.cgs=JSON.parse(JSON.stringify(j.si)),j.cgs.LENGTH={unit:R.m,prefix:O.SHORT.c},j.cgs.MASS={unit:R.g,prefix:O.SHORT[""]},j.cgs.FORCE={unit:R.dyn,prefix:O.SHORT[""]},j.cgs.ENERGY={unit:R.erg,prefix:O.NONE[""]},j.us=JSON.parse(JSON.stringify(j.si)),j.us.LENGTH={unit:R.ft,prefix:O.NONE[""]},j.us.MASS={unit:R.lbm,prefix:O.NONE[""]},j.us.TEMPERATURE={unit:R.degF,prefix:O.NONE[""]},j.us.FORCE={unit:R.lbf,prefix:O.NONE[""]},j.us.ENERGY={unit:R.BTU,prefix:O.BTU[""]},j.us.POWER={unit:R.hp,prefix:O.NONE[""]},j.us.PRESSURE={unit:R.psi,prefix:O.NONE[""]},j.auto=JSON.parse(JSON.stringify(j.si));var U=j.auto;g.setUnitSystem=function(z){if(be(j,z))U=j[z];else throw new Error("Unit system "+z+" does not exist. Choices are: "+Object.keys(j).join(", "))},g.getUnitSystem=function(){for(var z in j)if(be(j,z)&&j[z]===U)return z},g.typeConverters={BigNumber:function(V){return V!=null&&V.isFraction?new v(V.n).div(V.d).times(V.s):new v(V+"")},Fraction:function(V){return new x(V)},Complex:function(V){return V},number:function(V){return V!=null&&V.isFraction?h(V):V}},g.prototype._numberConverter=function(){var z=g.typeConverters[this.valueType()];if(z)return z;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},g._getNumberConverter=function(z){if(!g.typeConverters[z])throw new TypeError('Unsupported type "'+z+'"');return g.typeConverters[z]};for(var $ in R)if(be(R,$)){var G=R[$];G.dimensions=G.base.dimensions}for(var Y in X)if(be(X,Y)){var J=R[X[Y]],te={};for(var ie in J)be(J,ie)&&(te[ie]=J[ie]);te.name=Y,R[Y]=te}g.isValidAlpha=function(V){return/^[a-zA-Z]$/.test(V)};function de(z){for(var V=0;V<z.length;V++){if(y=z.charAt(V),V===0&&!g.isValidAlpha(y))throw new Error('Invalid unit name (must begin with alpha character): "'+z+'"');if(V>0&&!(g.isValidAlpha(y)||A(y)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+z+'"')}}return g.createUnit=function(z,V){if(typeof z!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(V&&V.override){for(var ee in z)if(be(z,ee)&&g.deleteUnit(ee),z[ee].aliases)for(var ne=0;ne<z[ee].aliases.length;ne++)g.deleteUnit(z[ee].aliases[ne])}var le;for(var fe in z)be(z,fe)&&(le=g.createUnitSingle(fe,z[fe]));return le},g.createUnitSingle=function(z,V){if((typeof V>"u"||V===null)&&(V={}),typeof z!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(be(R,z))throw new Error('Cannot create unit "'+z+'": a unit with that name already exists');de(z);var ee=null,ne=[],le=0,fe,ye,Se;if(V&&V.type==="Unit")ee=V.clone();else if(typeof V=="string")V!==""&&(fe=V);else if(typeof V=="object")fe=V.definition,ye=V.prefixes,le=V.offset,Se=V.baseName,V.aliases&&(ne=V.aliases.valueOf());else throw new TypeError('Cannot create unit "'+z+'" from "'+V.toString()+'": expecting "string" or "Unit" or "Object"');if(ne){for(var Ue=0;Ue<ne.length;Ue++)if(be(R,ne[Ue]))throw new Error('Cannot create alias "'+ne[Ue]+'": a unit with that name already exists')}if(fe&&typeof fe=="string"&&!ee)try{ee=g.parse(fe,{allowNoUnits:!0})}catch(T){throw T.message='Could not create unit "'+z+'" from "'+fe+'": '+T.message,T}else fe&&fe.type==="Unit"&&(ee=fe.clone());ne=ne||[],le=le||0,ye&&ye.toUpperCase?ye=O[ye.toUpperCase()]||O.NONE:ye=O.NONE;var Pe={};if(ee){Pe={name:z,value:ee.value,dimensions:ee.dimensions.slice(0),prefixes:ye,offset:le};var It=!1;for(var H in _)if(be(_,H)){for(var Q=!0,oe=0;oe<q.length;oe++)if(Math.abs((Pe.dimensions[oe]||0)-(_[H].dimensions[oe]||0))>1e-12){Q=!1;break}if(Q){It=!0,Pe.base=_[H];break}}if(!It){Se=Se||z+"_STUFF";var ce={dimensions:ee.dimensions.slice(0)};ce.key=Se,_[Se]=ce,U[Se]={unit:Pe,prefix:O.NONE[""]},Pe.base=_[Se]}}else{if(Se=Se||z+"_STUFF",q.indexOf(Se)>=0)throw new Error('Cannot create new base unit "'+z+'": a base unit with that name already exists (and cannot be overridden)');q.push(Se);for(var ut in _)be(_,ut)&&(_[ut].dimensions[q.length-1]=0);for(var Xe={dimensions:[]},Ot=0;Ot<q.length;Ot++)Xe.dimensions[Ot]=0;Xe.dimensions[q.length-1]=1,Xe.key=Se,_[Se]=Xe,Pe={name:z,value:1,dimensions:_[Se].dimensions.slice(0),prefixes:ye,offset:le,base:_[Se]},U[Se]={unit:Pe,prefix:O.NONE[""]}}g.UNITS[z]=Pe;for(var pe=0;pe<ne.length;pe++){var me=ne[pe],ge={};for(var ve in Pe)be(Pe,ve)&&(ge[ve]=Pe[ve]);ge.name=me,g.UNITS[me]=ge}return delete P.cache,new g(null,z)},g.deleteUnit=function(z){delete g.UNITS[z],delete P.cache},g.PREFIXES=O,g.BASE_DIMENSIONS=q,g.BASE_UNITS=_,g.UNIT_SYSTEMS=j,g.UNITS=R,g},{isClass:!0});var by="unit",K4=["typed","Unit"],wy=N(by,K4,r=>{var{typed:e,Unit:t}=r;return e(by,{Unit:function(i){return i.clone()},string:function(i){return t.isValuelessUnit(i)?new t(null,i):t.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,o){return new t(i,o)},"number | BigNumber | Fraction":function(i){return new t(i)},"Array | Matrix":e.referToSelf(n=>i=>De(i,n))})});var Dy="sparse",Y4=["typed","SparseMatrix"],Sy=N(Dy,Y4,r=>{var{typed:e,SparseMatrix:t}=r;return e(Dy,{"":function(){return new t([])},string:function(i){return new t([],i)},"Array | Matrix":function(i){return new t(i)},"Array | Matrix, string":function(i,o){return new t(i,o)}})});var Ay="createUnit",Z4=["typed","Unit"],Ny=N(Ay,Z4,r=>{var{typed:e,Unit:t}=r;return e(Ay,{"Object, Object":function(i,o){return t.createUnit(i,o)},Object:function(i){return t.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,o,a){var s={};return s[i]=o,t.createUnit(s,a)},"string, Unit | string | Object":function(i,o){var a={};return a[i]=o,t.createUnit(a,{})},string:function(i){var o={};return o[i]={},t.createUnit(o,{})}})});var Cy="acos",X4=["typed","config","Complex"],Ey=N(Cy,X4,r=>{var{typed:e,config:t,Complex:n}=r;return e(Cy,{number:function(o){return o>=-1&&o<=1||t.predictable?Math.acos(o):new n(o,0).acos()},Complex:function(o){return o.acos()},BigNumber:function(o){return o.acos()}})});var My="acosh",J4=["typed","config","Complex"],Ty=N(My,J4,r=>{var{typed:e,config:t,Complex:n}=r;return e(My,{number:function(o){return o>=1||t.predictable?Rc(o):o<=-1?new n(Math.log(Math.sqrt(o*o-1)-o),Math.PI):new n(o,0).acosh()},Complex:function(o){return o.acosh()},BigNumber:function(o){return o.acosh()}})});var Fy="acot",j4=["typed","BigNumber"],Oy=N(Fy,j4,r=>{var{typed:e,BigNumber:t}=r;return e(Fy,{number:Lc,Complex:function(i){return i.acot()},BigNumber:function(i){return new t(1).div(i).atan()}})});var By="acoth",Q4=["typed","config","Complex","BigNumber"],_y=N(By,Q4,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(By,{number:function(a){return a>=1||a<=-1||t.predictable?zc(a):new n(a,0).acoth()},Complex:function(a){return a.acoth()},BigNumber:function(a){return new i(1).div(a).atanh()}})});var ky="acsc",e8=["typed","config","Complex","BigNumber"],Py=N(ky,e8,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(ky,{number:function(a){return a<=-1||a>=1||t.predictable?qc(a):new n(a,0).acsc()},Complex:function(a){return a.acsc()},BigNumber:function(a){return new i(1).div(a).asin()}})});var Iy="acsch",t8=["typed","BigNumber"],Ry=N(Iy,t8,r=>{var{typed:e,BigNumber:t}=r;return e(Iy,{number:Uc,Complex:function(i){return i.acsch()},BigNumber:function(i){return new t(1).div(i).asinh()}})});var Ly="asec",r8=["typed","config","Complex","BigNumber"],zy=N(Ly,r8,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(Ly,{number:function(a){return a<=-1||a>=1||t.predictable?Vc(a):new n(a,0).asec()},Complex:function(a){return a.asec()},BigNumber:function(a){return new i(1).div(a).acos()}})});var qy="asech",n8=["typed","config","Complex","BigNumber"],Uy=N(qy,n8,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(qy,{number:function(a){if(a<=1&&a>=-1||t.predictable){var s=1/a;if(s>0||t.predictable)return Hc(a);var l=Math.sqrt(s*s-1);return new n(Math.log(l-s),Math.PI)}return new n(a,0).asech()},Complex:function(a){return a.asech()},BigNumber:function(a){return new i(1).div(a).acosh()}})});var Vy="asin",i8=["typed","config","Complex"],Hy=N(Vy,i8,r=>{var{typed:e,config:t,Complex:n}=r;return e(Vy,{number:function(o){return o>=-1&&o<=1||t.predictable?Math.asin(o):new n(o,0).asin()},Complex:function(o){return o.asin()},BigNumber:function(o){return o.asin()}})});var o8="asinh",a8=["typed"],$y=N(o8,a8,r=>{var{typed:e}=r;return e("asinh",{number:$c,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()}})});var s8="atan",l8=["typed"],Wy=N(s8,l8,r=>{var{typed:e}=r;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()}})});var Gy="atan2",u8=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],Ky=N(Gy,u8,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,DenseMatrix:o,concat:a}=r,s=Ft({typed:e,equalScalar:n}),l=ct({typed:e}),u=Ns({typed:e,equalScalar:n}),c=nt({typed:e,equalScalar:n}),f=Je({typed:e,DenseMatrix:o}),m=Le({typed:e,matrix:t,concat:a});return e(Gy,{"number, number":Math.atan2,"BigNumber, BigNumber":(p,h)=>i.atan2(p,h)},m({scalar:"number | BigNumber",SS:u,DS:l,SD:s,Ss:c,sS:f}))});var Yy="atanh",c8=["typed","config","Complex"],Zy=N(Yy,c8,r=>{var{typed:e,config:t,Complex:n}=r;return e(Yy,{number:function(o){return o<=1&&o>=-1||t.predictable?Wc(o):new n(o,0).atanh()},Complex:function(o){return o.atanh()},BigNumber:function(o){return o.atanh()}})});var Ur=N("trigUnit",["typed"],r=>{var{typed:e}=r;return{Unit:e.referToSelf(t=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,n.valueType())(n.value)})}});var Xy="cos",f8=["typed"],Jy=N(Xy,f8,r=>{var{typed:e}=r,t=Ur({typed:e});return e(Xy,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},t)});var jy="cosh",m8=["typed"],Qy=N(jy,m8,r=>{var{typed:e}=r;return e(jy,{number:ja,"Complex | BigNumber":t=>t.cosh()})});var ex="cot",p8=["typed","BigNumber"],tx=N(ex,p8,r=>{var{typed:e,BigNumber:t}=r,n=Ur({typed:e});return e(ex,{number:Gc,Complex:i=>i.cot(),BigNumber:i=>new t(1).div(i.tan())},n)});var rx="coth",h8=["typed","BigNumber"],nx=N(rx,h8,r=>{var{typed:e,BigNumber:t}=r;return e(rx,{number:Kc,Complex:n=>n.coth(),BigNumber:n=>new t(1).div(n.tanh())})});var ix="csc",d8=["typed","BigNumber"],ox=N(ix,d8,r=>{var{typed:e,BigNumber:t}=r,n=Ur({typed:e});return e(ix,{number:Yc,Complex:i=>i.csc(),BigNumber:i=>new t(1).div(i.sin())},n)});var ax="csch",g8=["typed","BigNumber"],sx=N(ax,g8,r=>{var{typed:e,BigNumber:t}=r;return e(ax,{number:Zc,Complex:n=>n.csch(),BigNumber:n=>new t(1).div(n.sinh())})});var lx="sec",v8=["typed","BigNumber"],ux=N(lx,v8,r=>{var{typed:e,BigNumber:t}=r,n=Ur({typed:e});return e(lx,{number:Xc,Complex:i=>i.sec(),BigNumber:i=>new t(1).div(i.cos())},n)});var cx="sech",y8=["typed","BigNumber"],fx=N(cx,y8,r=>{var{typed:e,BigNumber:t}=r;return e(cx,{number:Jc,Complex:n=>n.sech(),BigNumber:n=>new t(1).div(n.cosh())})});var mx="sin",x8=["typed"],px=N(mx,x8,r=>{var{typed:e}=r,t=Ur({typed:e});return e(mx,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},t)});var hx="sinh",b8=["typed"],dx=N(hx,b8,r=>{var{typed:e}=r;return e(hx,{number:jc,"Complex | BigNumber":t=>t.sinh()})});var gx="tan",w8=["typed"],vx=N(gx,w8,r=>{var{typed:e}=r,t=Ur({typed:e});return e(gx,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},t)});var D8="tanh",S8=["typed"],yx=N(D8,S8,r=>{var{typed:e}=r;return e("tanh",{number:Qa,"Complex | BigNumber":t=>t.tanh()})});var xx="setCartesian",A8=["typed","size","subset","compareNatural","Index","DenseMatrix"],bx=N(xx,A8,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:o,DenseMatrix:a}=r;return e(xx,{"Array | Matrix, Array | Matrix":function(l,u){var c=[];if(n(t(l),new o(0))!==0&&n(t(u),new o(0))!==0){var f=qe(Array.isArray(l)?l:l.toArray()).sort(i),m=qe(Array.isArray(u)?u:u.toArray()).sort(i);c=[];for(var p=0;p<f.length;p++)for(var h=0;h<m.length;h++)c.push([f[p],m[h]])}return Array.isArray(l)&&Array.isArray(u)?c:new a(c)}})});var wx="setDifference",N8=["typed","size","subset","compareNatural","Index","DenseMatrix"],Dx=N(wx,N8,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:o,DenseMatrix:a}=r;return e(wx,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(n(t(l),new o(0))===0)c=[];else{if(n(t(u),new o(0))===0)return qe(l.toArray());var f=Fn(qe(Array.isArray(l)?l:l.toArray()).sort(i)),m=Fn(qe(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var p,h=0;h<f.length;h++){p=!1;for(var d=0;d<m.length;d++)if(i(f[h].value,m[d].value)===0&&f[h].identifier===m[d].identifier){p=!0;break}p||c.push(f[h])}}return Array.isArray(l)&&Array.isArray(u)?Ji(c):new a(Ji(c))}})});var Sx="setDistinct",C8=["typed","size","subset","compareNatural","Index","DenseMatrix"],Ax=N(Sx,C8,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:o,DenseMatrix:a}=r;return e(Sx,{"Array | Matrix":function(l){var u;if(n(t(l),new o(0))===0)u=[];else{var c=qe(Array.isArray(l)?l:l.toArray()).sort(i);u=[],u.push(c[0]);for(var f=1;f<c.length;f++)i(c[f],c[f-1])!==0&&u.push(c[f])}return Array.isArray(l)?u:new a(u)}})});var Nx="setIntersect",E8=["typed","size","subset","compareNatural","Index","DenseMatrix"],Cx=N(Nx,E8,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:o,DenseMatrix:a}=r;return e(Nx,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(n(t(l),new o(0))===0||n(t(u),new o(0))===0)c=[];else{var f=Fn(qe(Array.isArray(l)?l:l.toArray()).sort(i)),m=Fn(qe(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var p=0;p<f.length;p++)for(var h=0;h<m.length;h++)if(i(f[p].value,m[h].value)===0&&f[p].identifier===m[h].identifier){c.push(f[p]);break}}return Array.isArray(l)&&Array.isArray(u)?Ji(c):new a(Ji(c))}})});var Ex="setIsSubset",M8=["typed","size","subset","compareNatural","Index"],Mx=N(Ex,M8,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:o}=r;return e(Ex,{"Array | Matrix, Array | Matrix":function(s,l){if(n(t(s),new o(0))===0)return!0;if(n(t(l),new o(0))===0)return!1;for(var u=Fn(qe(Array.isArray(s)?s:s.toArray()).sort(i)),c=Fn(qe(Array.isArray(l)?l:l.toArray()).sort(i)),f,m=0;m<u.length;m++){f=!1;for(var p=0;p<c.length;p++)if(i(u[m].value,c[p].value)===0&&u[m].identifier===c[p].identifier){f=!0;break}if(f===!1)return!1}return!0}})});var Tx="setMultiplicity",T8=["typed","size","subset","compareNatural","Index"],Fx=N(Tx,T8,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:o}=r;return e(Tx,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(s,l){if(n(t(l),new o(0))===0)return 0;for(var u=qe(Array.isArray(l)?l:l.toArray()),c=0,f=0;f<u.length;f++)i(u[f],s)===0&&c++;return c}})});var Ox="setPowerset",F8=["typed","size","subset","compareNatural","Index"],Bx=N(Ox,F8,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:o}=r;return e(Ox,{"Array | Matrix":function(u){if(n(t(u),new o(0))===0)return[];for(var c=qe(Array.isArray(u)?u:u.toArray()).sort(i),f=[],m=0;m.toString(2).length<=c.length;)f.push(a(c,m.toString(2).split("").reverse())),m++;return s(f)}});function a(l,u){for(var c=[],f=0;f<u.length;f++)u[f]==="1"&&c.push(l[f]);return c}function s(l){for(var u=[],c=l.length-1;c>0;c--)for(var f=0;f<c;f++)l[f].length>l[f+1].length&&(u=l[f],l[f]=l[f+1],l[f+1]=u);return l}});var _x="setSize",O8=["typed","compareNatural"],kx=N(_x,O8,r=>{var{typed:e,compareNatural:t}=r;return e(_x,{"Array | Matrix":function(i){return Array.isArray(i)?qe(i).length:qe(i.toArray()).length},"Array | Matrix, boolean":function(i,o){if(o===!1||i.length===0)return Array.isArray(i)?qe(i).length:qe(i.toArray()).length;for(var a=qe(Array.isArray(i)?i:i.toArray()).sort(t),s=1,l=1;l<a.length;l++)t(a[l],a[l-1])!==0&&s++;return s}})});var Px="setSymDifference",B8=["typed","size","concat","subset","setDifference","Index"],Ix=N(Px,B8,r=>{var{typed:e,size:t,concat:n,subset:i,setDifference:o,Index:a}=r;return e(Px,{"Array | Matrix, Array | Matrix":function(l,u){if(i(t(l),new a(0))===0)return qe(u);if(i(t(u),new a(0))===0)return qe(l);var c=qe(l),f=qe(u);return n(o(c,f),o(f,c))}})});var Rx="setUnion",_8=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],Lx=N(Rx,_8,r=>{var{typed:e,size:t,concat:n,subset:i,setIntersect:o,setSymDifference:a,Index:s}=r;return e(Rx,{"Array | Matrix, Array | Matrix":function(u,c){if(i(t(u),new s(0))===0)return qe(c);if(i(t(c),new s(0))===0)return qe(u);var f=qe(u),m=qe(c);return n(a(f,m),o(f,m))}})});var zx="add",k8=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],qx=N(zx,k8,r=>{var{typed:e,matrix:t,addScalar:n,equalScalar:i,DenseMatrix:o,SparseMatrix:a,concat:s}=r,l=nr({typed:e}),u=no({typed:e,equalScalar:i}),c=xr({typed:e,DenseMatrix:o}),f=Le({typed:e,matrix:t,concat:s});return e(zx,{"any, any":n,"any, any, ...any":e.referToSelf(m=>(p,h,d)=>{for(var v=m(p,h),x=0;x<d.length;x++)v=m(v,d[x]);return v})},f({elop:n,DS:l,SS:u,Ss:c}))});var Ux="hypot",P8=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],Vx=N(Ux,P8,r=>{var{typed:e,abs:t,addScalar:n,divideScalar:i,multiplyScalar:o,sqrt:a,smaller:s,isPositive:l}=r;return e(Ux,{"... number | BigNumber":u,Array:u,Matrix:c=>u(qe(c.toArray()))});function u(c){for(var f=0,m=0,p=0;p<c.length;p++){if(qt(c[p]))throw new TypeError("Unexpected type of argument to hypot");var h=t(c[p]);s(m,h)?(f=o(f,o(i(m,h),i(m,h))),f=n(f,1),m=h):f=n(f,l(h)?o(i(h,m),i(h,m)):h)}return o(m,a(f))}});var Hx="norm",I8=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],$x=N(Hx,I8,r=>{var{typed:e,abs:t,add:n,pow:i,conj:o,sqrt:a,multiply:s,equalScalar:l,larger:u,smaller:c,matrix:f,ctranspose:m,eigs:p}=r;return e(Hx,{number:Math.abs,Complex:function(C){return C.abs()},BigNumber:function(C){return C.abs()},boolean:function(C){return Math.abs(C)},Array:function(C){return y(f(C),2)},Matrix:function(C){return y(C,2)},"Array, number | BigNumber | string":function(C,A){return y(f(C),A)},"Matrix, number | BigNumber | string":function(C,A){return y(C,A)}});function h(S){var C=0;return S.forEach(function(A){var E=t(A);u(E,C)&&(C=E)},!0),C}function d(S){var C;return S.forEach(function(A){var E=t(A);(!C||c(E,C))&&(C=E)},!0),C||0}function v(S,C){if(C===Number.POSITIVE_INFINITY||C==="inf")return h(S);if(C===Number.NEGATIVE_INFINITY||C==="-inf")return d(S);if(C==="fro")return y(S,2);if(typeof C=="number"&&!isNaN(C)){if(!l(C,0)){var A=0;return S.forEach(function(E){A=n(i(t(E),C),A)},!0),i(A,1/C)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function x(S){var C=0;return S.forEach(function(A,E){C=n(C,s(A,o(A)))}),t(a(C))}function D(S){var C=[],A=0;return S.forEach(function(E,M){var F=M[1],k=n(C[F]||0,t(E));u(k,A)&&(A=k),C[F]=k},!0),A}function g(S){var C=S.size();if(C[0]!==C[1])throw new RangeError("Invalid matrix dimensions");var A=m(S),E=s(A,S),M=p(E).values.toArray(),F=M[M.length-1];return t(a(F))}function w(S){var C=[],A=0;return S.forEach(function(E,M){var F=M[0],k=n(C[F]||0,t(E));u(k,A)&&(A=k),C[F]=k},!0),A}function b(S,C){if(C===1)return D(S);if(C===Number.POSITIVE_INFINITY||C==="inf")return w(S);if(C==="fro")return x(S);if(C===2)return g(S);throw new Error("Unsupported parameter value "+C)}function y(S,C){var A=S.size();if(A.length===1)return v(S,C);if(A.length===2){if(A[0]&&A[1])return b(S,C);throw new RangeError("Invalid matrix dimensions")}}});var Wx="dot",R8=["typed","addScalar","multiplyScalar","conj","size"],Gx=N(Wx,R8,r=>{var{typed:e,addScalar:t,multiplyScalar:n,conj:i,size:o}=r;return e(Wx,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":l});function a(c,f){var m=u(c),p=u(f),h,d;if(m.length===1)h=m[0];else if(m.length===2&&m[1]===1)h=m[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+m.join(", ")+")");if(p.length===1)d=p[0];else if(p.length===2&&p[1]===1)d=p[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");if(h!==d)throw new RangeError("Vectors must have equal length ("+h+" != "+d+")");if(h===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return h}function s(c,f){var m=a(c,f),p=we(c)?c._data:c,h=we(c)?c._datatype||c.getDataType():void 0,d=we(f)?f._data:f,v=we(f)?f._datatype||f.getDataType():void 0,x=u(c).length===2,D=u(f).length===2,g=t,w=n;if(h&&v&&h===v&&typeof h=="string"&&h!=="mixed"){var b=h;g=e.find(t,[b,b]),w=e.find(n,[b,b])}if(!x&&!D){for(var y=w(i(p[0]),d[0]),S=1;S<m;S++)y=g(y,w(i(p[S]),d[S]));return y}if(!x&&D){for(var C=w(i(p[0]),d[0][0]),A=1;A<m;A++)C=g(C,w(i(p[A]),d[A][0]));return C}if(x&&!D){for(var E=w(i(p[0][0]),d[0]),M=1;M<m;M++)E=g(E,w(i(p[M][0]),d[M]));return E}if(x&&D){for(var F=w(i(p[0][0]),d[0][0]),k=1;k<m;k++)F=g(F,w(i(p[k][0]),d[k][0]));return F}}function l(c,f){a(c,f);for(var m=c._index,p=c._values,h=f._index,d=f._values,v=0,x=t,D=n,g=0,w=0;g<m.length&&w<h.length;){var b=m[g],y=h[w];if(b<y){g++;continue}if(b>y){w++;continue}b===y&&(v=x(v,D(p[g],d[w])),g++,w++)}return v}function u(c){return we(c)?c.size():o(c)}});var L8="trace",z8=["typed","matrix","add"],Kx=N(L8,z8,r=>{var{typed:e,matrix:t,add:n}=r;return e("trace",{Array:function(s){return i(t(s))},SparseMatrix:o,DenseMatrix:i,any:Ee});function i(a){var s=a._size,l=a._data;switch(s.length){case 1:if(s[0]===1)return Ee(l[0]);throw new RangeError("Matrix must be square (size: "+_e(s)+")");case 2:{var u=s[0],c=s[1];if(u===c){for(var f=0,m=0;m<u;m++)f=n(f,l[m][m]);return f}else throw new RangeError("Matrix must be square (size: "+_e(s)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+_e(s)+")")}}function o(a){var s=a._values,l=a._index,u=a._ptr,c=a._size,f=c[0],m=c[1];if(f===m){var p=0;if(s.length>0)for(var h=0;h<m;h++)for(var d=u[h],v=u[h+1],x=d;x<v;x++){var D=l[x];if(D===h){p=n(p,s[x]);break}if(D>h)break}return p}throw new RangeError("Matrix must be square (size: "+_e(c)+")")}});var Yx="index",q8=["typed","Index"],Zx=N(Yx,q8,r=>{var{typed:e,Index:t}=r;return e(Yx,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var o=i.map(function(s){return Ne(s)?s.toNumber():Ze(s)||we(s)?s.map(function(l){return Ne(l)?l.toNumber():l}):s}),a=new t;return t.apply(a,o),a}})});var el=new Set(["end"]);var U8="Node",V8=["mathWithTransform"],Xx=N(U8,V8,r=>{var{mathWithTransform:e}=r;function t(i){for(var o of[...el])if(i.has(o))throw new Error('Scope contains an illegal symbol, "'+o+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(o){return this.compile().evaluate(o)}compile(){var o=this._compile(e,{}),a={},s=null;function l(u){var c=Cn(u);return t(c),o(c,a,s)}return{evaluate:l}}_compile(o,a){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(o){throw new Error("Cannot run forEach on a Node interface")}map(o){throw new Error("Cannot run map on a Node interface")}_ifNode(o){if(!$e(o))throw new TypeError("Callback function must return a Node");return o}traverse(o){o(this,null,null);function a(s,l){s.forEach(function(u,c,f){l(u,c,f),a(u,l)})}a(this,o)}transform(o){function a(s,l,u){var c=o(s,l,u);return c!==s?c:s.map(a)}return a(this,null,null)}filter(o){var a=[];return this.traverse(function(s,l,u){o(s,l,u)&&a.push(s)}),a}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(o){return o.cloneDeep()})}equals(o){return o?this.type===o.type&&gr(this,o):!1}toString(o){var a=this._getCustomString(o);return typeof a<"u"?a:this._toString(o)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(o){var a=this._getCustomString(o);return typeof a<"u"?a:this._toHTML(o)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(o){var a=this._getCustomString(o);return typeof a<"u"?a:this._toTex(o)}_toTex(o){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(o){if(o&&typeof o=="object")switch(typeof o.handler){case"object":case"undefined":return;case"function":return o.handler(this,o);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function ft(r){return r&&r.isIndexError?new Wt(r.index+1,r.min+1,r.max!==void 0?r.max+1:void 0):r}function tl(r){var{subset:e}=r;return function(n,i){try{if(Array.isArray(n))return e(n,i);if(n&&typeof n.subset=="function")return n.subset(i);if(typeof n=="string")return e(n,i);if(typeof n=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return vt(n,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(o){throw ft(o)}}}var rl="AccessorNode",H8=["subset","Node"],Jx=N(rl,H8,r=>{var{subset:e,Node:t}=r,n=tl({subset:e});function i(a){return!(sr(a)||Ut(a)||ze(a)||Xt(a)||un(a)||Vt(a)||ot(a))}class o extends t{constructor(s,l){if(super(),!$e(s))throw new TypeError('Node expected for parameter "object"');if(!dr(l))throw new TypeError('IndexNode expected for parameter "index"');this.object=s,this.index=l}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return rl}get isAccessorNode(){return!0}_compile(s,l){var u=this.object._compile(s,l),c=this.index._compile(s,l);if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(p,h,d){return vt(u(p,h,d),f)}}else return function(p,h,d){var v=u(p,h,d),x=c(p,h,v);return n(v,x)}}forEach(s){s(this.object,"object",this),s(this.index,"index",this)}map(s){return new o(this._ifNode(s(this.object,"object",this)),this._ifNode(s(this.index,"index",this)))}clone(){return new o(this.object,this.index)}_toString(s){var l=this.object.toString(s);return i(this.object)&&(l="("+l+")"),l+this.index.toString(s)}_toHTML(s){var l=this.object.toHTML(s);return i(this.object)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+this.index.toHTML(s)}_toTex(s){var l=this.object.toTex(s);return i(this.object)&&(l="\\left(' + object + '\\right)"),l+this.index.toTex(s)}toJSON(){return{mathjs:rl,object:this.object,index:this.index}}static fromJSON(s){return new o(s.object,s.index)}}return et(o,"name",rl),o},{isClass:!0,isNode:!0});var nl="ArrayNode",$8=["Node"],jx=N(nl,$8,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every($e))throw new TypeError("Array containing Nodes expected")}get type(){return nl}get isArrayNode(){return!0}_compile(i,o){var a=Rr(this.items,function(u){return u._compile(i,o)}),s=i.config.matrix!=="Array";if(s){var l=i.matrix;return function(c,f,m){return l(Rr(a,function(p){return p(c,f,m)}))}}else return function(c,f,m){return Rr(a,function(p){return p(c,f,m)})}}forEach(i){for(var o=0;o<this.items.length;o++){var a=this.items[o];i(a,"items["+o+"]",this)}}map(i){for(var o=[],a=0;a<this.items.length;a++)o[a]=this._ifNode(i(this.items[a],"items["+a+"]",this));return new t(o)}clone(){return new t(this.items.slice(0))}_toString(i){var o=this.items.map(function(a){return a.toString(i)});return"["+o.join(", ")+"]"}toJSON(){return{mathjs:nl,items:this.items}}static fromJSON(i){return new t(i.items)}_toHTML(i){var o=this.items.map(function(a){return a.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function o(a,s){var l=a.some(Ut)&&!a.every(Ut),u=s||l,c=u?"&":"\\\\",f=a.map(function(m){return m.items?o(m.items,!s):m.toTex(i)}).join(c);return l||!u||u&&!s?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return o(this.items,!1)}}return et(t,"name",nl),t},{isClass:!0,isNode:!0});function Qx(r){var{subset:e,matrix:t}=r;return function(i,o,a){try{if(Array.isArray(i)){var s=t(i).subset(o,a).valueOf();return s.forEach((l,u)=>{i[u]=l}),i}else{if(i&&typeof i.subset=="function")return i.subset(o,a);if(typeof i=="string")return e(i,o,a);if(typeof i=="object"){if(!o.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return an(i,o.getObjectProperty(),a),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(l){throw ft(l)}}}var Vr=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function il(r,e){if(!e||e!=="auto")return r;for(var t=r;Vt(t);)t=t.content;return t}function tt(r,e,t,n){var i=r;e!=="keep"&&(i=r.getContent());for(var o=i.getIdentifier(),a=null,s=0;s<Vr.length;s++)if(o in Vr[s]){a=s;break}if(o==="OperatorNode:multiply"&&i.implicit&&t!=="show"){var l=il(i.args[0],e);!(ze(l)&&n&&n.getIdentifier()==="OperatorNode:divide"&&Po(il(n.args[0],e)))&&!(l.getIdentifier()==="OperatorNode:divide"&&Po(il(l.args[0],e))&&ze(il(l.args[1])))&&(a+=1)}return a}function co(r,e){var t=r;e!=="keep"&&(t=r.getContent());var n=t.getIdentifier(),i=tt(t,e);if(i===null)return null;var o=Vr[i][n];if(be(o,"associativity")){if(o.associativity==="left")return"left";if(o.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+o.associativity+"'.")}return null}function ol(r,e,t){var n=t!=="keep"?r.getContent():r,i=t!=="keep"?r.getContent():e,o=n.getIdentifier(),a=i.getIdentifier(),s=tt(n,t);if(s===null)return null;var l=Vr[s][o];if(be(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===a)return!0;return!1}return null}function e1(r){var e="OperatorNode:"+r;for(var t of Vr)if(e in t)return t[e].op;return null}var al="AssignmentNode",W8=["subset","?matrix","Node"],t1=N(al,W8,r=>{var{subset:e,matrix:t,Node:n}=r,i=tl({subset:e}),o=Qx({subset:e,matrix:t});function a(l,u,c){u||(u="keep");var f=tt(l,u,c),m=tt(l.value,u,c);return u==="all"||m!==null&&m<=f}class s extends n{constructor(u,c,f){if(super(),this.object=u,this.index=f?c:null,this.value=f||c,!ot(u)&&!sr(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(ot(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!dr(this.index))throw new TypeError('IndexNode expected as "index"');if(!$e(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return al}get isAssignmentNode(){return!0}_compile(u,c){var f=this.object._compile(u,c),m=this.index?this.index._compile(u,c):null,p=this.value._compile(u,c),h=this.object.name;if(this.index)if(this.index.isObjectProperty()){var d=this.index.getObjectProperty();return function(w,b,y){var S=f(w,b,y),C=p(w,b,y);return an(S,d,C),C}}else{if(ot(this.object))return function(w,b,y){var S=f(w,b,y),C=p(w,b,y),A=m(w,b,S);return w.set(h,o(S,A,C)),C};var v=this.object.object._compile(u,c);if(this.object.index.isObjectProperty()){var x=this.object.index.getObjectProperty();return function(w,b,y){var S=v(w,b,y),C=vt(S,x),A=m(w,b,C),E=p(w,b,y);return an(S,x,o(C,A,E)),E}}else{var D=this.object.index._compile(u,c);return function(w,b,y){var S=v(w,b,y),C=D(w,b,S),A=i(S,C),E=m(w,b,A),M=p(w,b,y);return o(S,C,o(A,E,M)),M}}}else{if(!ot(this.object))throw new TypeError("SymbolNode expected as object");return function(w,b,y){var S=p(w,b,y);return w.set(h,S),S}}}forEach(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)}map(u){var c=this._ifNode(u(this.object,"object",this)),f=this.index?this._ifNode(u(this.index,"index",this)):null,m=this._ifNode(u(this.value,"value",this));return new s(c,f,m)}clone(){return new s(this.object,this.index,this.value)}_toString(u){var c=this.object.toString(u),f=this.index?this.index.toString(u):"",m=this.value.toString(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(m="("+m+")"),c+f+" = "+m}toJSON(){return{mathjs:al,object:this.object,index:this.index,value:this.value}}static fromJSON(u){return new s(u.object,u.index,u.value)}_toHTML(u){var c=this.object.toHTML(u),f=this.index?this.index.toHTML(u):"",m=this.value.toHTML(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(m='<span class="math-paranthesis math-round-parenthesis">(</span>'+m+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+m}_toTex(u){var c=this.object.toTex(u),f=this.index?this.index.toTex(u):"",m=this.value.toTex(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(m="\\left(".concat(m,"\\right)")),c+f+"="+m}}return et(s,"name",al),s},{isClass:!0,isNode:!0});var sl="BlockNode",G8=["ResultSet","Node"],r1=N(sl,G8,r=>{var{ResultSet:e,Node:t}=r;class n extends t{constructor(o){if(super(),!Array.isArray(o))throw new Error("Array expected");this.blocks=o.map(function(a){var s=a&&a.node,l=a&&a.visible!==void 0?a.visible:!0;if(!$e(s))throw new TypeError('Property "node" must be a Node');if(typeof l!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:s,visible:l}})}get type(){return sl}get isBlockNode(){return!0}_compile(o,a){var s=Rr(this.blocks,function(l){return{evaluate:l.node._compile(o,a),visible:l.visible}});return function(u,c,f){var m=[];return hs(s,function(h){var d=h.evaluate(u,c,f);h.visible&&m.push(d)}),new e(m)}}forEach(o){for(var a=0;a<this.blocks.length;a++)o(this.blocks[a].node,"blocks["+a+"].node",this)}map(o){for(var a=[],s=0;s<this.blocks.length;s++){var l=this.blocks[s],u=this._ifNode(o(l.node,"blocks["+s+"].node",this));a[s]={node:u,visible:l.visible}}return new n(a)}clone(){var o=this.blocks.map(function(a){return{node:a.node,visible:a.visible}});return new n(o)}_toString(o){return this.blocks.map(function(a){return a.node.toString(o)+(a.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:sl,blocks:this.blocks}}static fromJSON(o){return new n(o.blocks)}_toHTML(o){return this.blocks.map(function(a){return a.node.toHTML(o)+(a.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(o){return this.blocks.map(function(a){return a.node.toTex(o)+(a.visible?"":";")}).join(`\\;\\;
`)}}return et(n,"name",sl),n},{isClass:!0,isNode:!0});var ll="ConditionalNode",K8=["Node"],n1=N(ll,K8,r=>{var{Node:e}=r;function t(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(Ne(i))return!i.isZero();if(qt(i))return!!(i.re||i.im);if(Bt(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+Ye(i)+'"')}class n extends e{constructor(o,a,s){if(super(),!$e(o))throw new TypeError("Parameter condition must be a Node");if(!$e(a))throw new TypeError("Parameter trueExpr must be a Node");if(!$e(s))throw new TypeError("Parameter falseExpr must be a Node");this.condition=o,this.trueExpr=a,this.falseExpr=s}get type(){return ll}get isConditionalNode(){return!0}_compile(o,a){var s=this.condition._compile(o,a),l=this.trueExpr._compile(o,a),u=this.falseExpr._compile(o,a);return function(f,m,p){return t(s(f,m,p))?l(f,m,p):u(f,m,p)}}forEach(o){o(this.condition,"condition",this),o(this.trueExpr,"trueExpr",this),o(this.falseExpr,"falseExpr",this)}map(o){return new n(this._ifNode(o(this.condition,"condition",this)),this._ifNode(o(this.trueExpr,"trueExpr",this)),this._ifNode(o(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(o){var a=o&&o.parenthesis?o.parenthesis:"keep",s=tt(this,a,o&&o.implicit),l=this.condition.toString(o),u=tt(this.condition,a,o&&o.implicit);(a==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=s)&&(l="("+l+")");var c=this.trueExpr.toString(o),f=tt(this.trueExpr,a,o&&o.implicit);(a==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=s)&&(c="("+c+")");var m=this.falseExpr.toString(o),p=tt(this.falseExpr,a,o&&o.implicit);return(a==="all"||this.falseExpr.type==="OperatorNode"||p!==null&&p<=s)&&(m="("+m+")"),l+" ? "+c+" : "+m}toJSON(){return{mathjs:ll,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(o){return new n(o.condition,o.trueExpr,o.falseExpr)}_toHTML(o){var a=o&&o.parenthesis?o.parenthesis:"keep",s=tt(this,a,o&&o.implicit),l=this.condition.toHTML(o),u=tt(this.condition,a,o&&o.implicit);(a==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=s)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(o),f=tt(this.trueExpr,a,o&&o.implicit);(a==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=s)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var m=this.falseExpr.toHTML(o),p=tt(this.falseExpr,a,o&&o.implicit);return(a==="all"||this.falseExpr.type==="OperatorNode"||p!==null&&p<=s)&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+m}_toTex(o){return"\\begin{cases} {"+this.trueExpr.toTex(o)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(o)+"}\\\\{"+this.falseExpr.toTex(o)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return et(n,"name",ll),n},{isClass:!0,isNode:!0});var s1=fi(o1(),1);var mf={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},je={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},pf={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(je.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(je.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(je.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(je.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(je.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(je.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(je.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(je.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(je.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(je.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(je.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(je.bitAnd,"${args[1]}\\right)")},bitNot:{1:je.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(je.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(je.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(je.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(je.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(je.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(je.and,"${args[1]}\\right)")},not:{1:je.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(je.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(je.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(je.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(je.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(je.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(je.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(je.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(je.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(je.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(je.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(je.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(je.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(je.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(mf.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},l1="\\mathrm{${name}}\\left(${args}\\right)",a1={deg:"^\\circ"};function ul(r){return(0,s1.default)(r,{preserveFormatting:!0})}function cl(r,e){return e=typeof e>"u"?!1:e,e?be(a1,r)?a1[r]:"\\mathrm{"+ul(r)+"}":be(mf,r)?mf[r]:ul(r)}var fl="ConstantNode",J8=["Node"],u1=N(fl,J8,r=>{var{Node:e}=r;class t extends e{constructor(i){super(),this.value=i}get type(){return fl}get isConstantNode(){return!0}_compile(i,o){var a=this.value;return function(){return a}}forEach(i){}map(i){return this.clone()}clone(){return new t(this.value)}_toString(i){return _e(this.value,i)}_toHTML(i){var o=this._toString(i);switch(Ye(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+o+"</span>";case"string":return'<span class="math-string">'+o+"</span>";case"boolean":return'<span class="math-boolean">'+o+"</span>";case"null":return'<span class="math-null-symbol">'+o+"</span>";case"undefined":return'<span class="math-undefined">'+o+"</span>";default:return'<span class="math-symbol">'+o+"</span>"}}toJSON(){return{mathjs:fl,value:this.value}}static fromJSON(i){return new t(i.value)}_toTex(i){var o=this._toString(i),a=Ye(this.value);switch(a){case"string":return"\\mathtt{"+ul(o)+"}";case"number":case"BigNumber":{var s=a==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!s)return this.value.valueOf()<0?"-\\infty":"\\infty";var l=o.toLowerCase().indexOf("e");return l!==-1?o.substring(0,l)+"\\cdot10^{"+o.substring(l+1)+"}":o}case"bigint":return o.toString();case"Fraction":return this.value.toLatex();default:return o}}}return et(t,"name",fl),t},{isClass:!0,isNode:!0});var ml="FunctionAssignmentNode",j8=["typed","Node"],c1=N(ml,j8,r=>{var{typed:e,Node:t}=r;function n(o,a,s){var l=tt(o,a,s),u=tt(o.expr,a,s);return a==="all"||u!==null&&u<=l}class i extends t{constructor(a,s,l){if(super(),typeof a!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(s))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!$e(l))throw new TypeError('Node expected for parameter "expr"');if(el.has(a))throw new Error('Illegal function name, "'+a+'" is a reserved keyword');var u=new Set;for(var c of s){var f=typeof c=="string"?c:c.name;if(u.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));u.add(f)}this.name=a,this.params=s.map(function(m){return m&&m.name||m}),this.types=s.map(function(m){return m&&m.type||"any"}),this.expr=l}get type(){return ml}get isFunctionAssignmentNode(){return!0}_compile(a,s){var l=Object.create(s);hs(this.params,function(h){l[h]=!0});var u=this.expr._compile(a,l),c=this.name,f=this.params,m=oc(this.types,","),p=c+"("+oc(this.params,", ")+")";return function(d,v,x){var D={};D[m]=function(){for(var w=Object.create(v),b=0;b<f.length;b++)w[f[b]]=arguments[b];return u(d,w,x)};var g=e(c,D);return g.syntax=p,d.set(c,g),g}}forEach(a){a(this.expr,"expr",this)}map(a){var s=this._ifNode(a(this.expr,"expr",this));return new i(this.name,this.params.slice(0),s)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",l=this.expr.toString(a);return n(this,s,a&&a.implicit)&&(l="("+l+")"),this.name+"("+this.params.join(", ")+") = "+l}toJSON(){var a=this.types;return{mathjs:ml,name:this.name,params:this.params.map(function(s,l){return{name:s,type:a[l]}}),expr:this.expr}}static fromJSON(a){return new i(a.name,a.params,a.expr)}_toHTML(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",l=[],u=0;u<this.params.length;u++)l.push('<span class="math-symbol math-parameter">'+$t(this.params[u])+"</span>");var c=this.expr.toHTML(a);return n(this,s,a&&a.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+$t(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(a){var s=a&&a.parenthesis?a.parenthesis:"keep",l=this.expr.toTex(a);return n(this,s,a&&a.implicit)&&(l="\\left(".concat(l,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(cl).join(",")+"\\right)="+l}}return et(i,"name",ml),i},{isClass:!0,isNode:!0});var pl="IndexNode",Q8=["Node","size"],f1=N(pl,Q8,r=>{var{Node:e,size:t}=r;class n extends e{constructor(o,a){if(super(),this.dimensions=o,this.dotNotation=a||!1,!Array.isArray(o)||!o.every($e))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return pl}get isIndexNode(){return!0}_compile(o,a){var s=Rr(this.dimensions,function(u,c){var f=u.filter(h=>h.isSymbolNode&&h.name==="end").length>0;if(f){var m=Object.create(a);m.end=!0;var p=u._compile(o,m);return function(d,v,x){if(!we(x)&&!Ze(x)&&!bt(x))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Ye(x));var D=t(x).valueOf(),g=Object.create(v);return g.end=D[c],p(d,g,x)}}else return u._compile(o,a)}),l=vt(o,"index");return function(c,f,m){var p=Rr(s,function(h){return h(c,f,m)});return l(...p)}}forEach(o){for(var a=0;a<this.dimensions.length;a++)o(this.dimensions[a],"dimensions["+a+"]",this)}map(o){for(var a=[],s=0;s<this.dimensions.length;s++)a[s]=this._ifNode(o(this.dimensions[s],"dimensions["+s+"]",this));return new n(a,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&ze(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(o){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:pl,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(o){return new n(o.dimensions,o.dotNotation)}_toHTML(o){for(var a=[],s=0;s<this.dimensions.length;s++)a[s]=this.dimensions[s].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+$t(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(o){var a=this.dimensions.map(function(s){return s.toTex(o)});return this.dotNotation?"."+this.getObjectProperty():"_{"+a.join(",")+"}"}}return et(n,"name",pl),n},{isClass:!0,isNode:!0});var hl="ObjectNode",eP=["Node"],m1=N(hl,eP,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(o){return $e(i[o])})))throw new TypeError("Object containing Nodes expected")}get type(){return hl}get isObjectNode(){return!0}_compile(i,o){var a={};for(var s in this.properties)if(be(this.properties,s)){var l=di(s),u=JSON.parse(l),c=vt(this.properties,s);a[u]=c._compile(i,o)}return function(m,p,h){var d={};for(var v in a)be(a,v)&&(d[v]=a[v](m,p,h));return d}}forEach(i){for(var o in this.properties)be(this.properties,o)&&i(this.properties[o],"properties["+di(o)+"]",this)}map(i){var o={};for(var a in this.properties)be(this.properties,a)&&(o[a]=this._ifNode(i(this.properties[a],"properties["+di(a)+"]",this)));return new t(o)}clone(){var i={};for(var o in this.properties)be(this.properties,o)&&(i[o]=this.properties[o]);return new t(i)}_toString(i){var o=[];for(var a in this.properties)be(this.properties,a)&&o.push(di(a)+": "+this.properties[a].toString(i));return"{"+o.join(", ")+"}"}toJSON(){return{mathjs:hl,properties:this.properties}}static fromJSON(i){return new t(i.properties)}_toHTML(i){var o=[];for(var a in this.properties)be(this.properties,a)&&o.push('<span class="math-symbol math-property">'+$t(a)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[a].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var o=[];for(var a in this.properties)be(this.properties,a)&&o.push("\\mathbf{"+a+":} & "+this.properties[a].toTex(i)+"\\\\");var s="\\left\\{\\begin{array}{ll}"+o.join(`
`)+"\\end{array}\\right\\}";return s}}return et(t,"name",hl),t},{isClass:!0,isNode:!0});function Di(r,e){return new qi(r,new qn(e),new Set(Object.keys(e)))}var dl="OperatorNode",tP=["Node"],p1=N(dl,tP,r=>{var{Node:e}=r;function t(o,a){var s=o;if(a==="auto")for(;Vt(s);)s=s.content;return ze(s)?!0:lt(s)?t(s.args[0],a):!1}function n(o,a,s,l,u){var c=tt(o,a,s),f=co(o,a);if(a==="all"||l.length>2&&o.getIdentifier()!=="OperatorNode:add"&&o.getIdentifier()!=="OperatorNode:multiply")return l.map(function(E){switch(E.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var m;switch(l.length){case 0:m=[];break;case 1:{var p=tt(l[0],a,s,o);if(u&&p!==null){var h,d;if(a==="keep"?(h=l[0].getIdentifier(),d=o.getIdentifier()):(h=l[0].getContent().getIdentifier(),d=o.getContent().getIdentifier()),Vr[c][d].latexLeftParens===!1){m=[!1];break}if(Vr[p][h].latexParens===!1){m=[!1];break}}if(p===null){m=[!1];break}if(p<=c){m=[!0];break}m=[!1]}break;case 2:{var v,x=tt(l[0],a,s,o),D=ol(o,l[0],a);x===null?v=!1:x===c&&f==="right"&&!D||x<c?v=!0:v=!1;var g,w=tt(l[1],a,s,o),b=ol(o,l[1],a);if(w===null?g=!1:w===c&&f==="left"&&!b||w<c?g=!0:g=!1,u){var y,S,C;a==="keep"?(y=o.getIdentifier(),S=o.args[0].getIdentifier(),C=o.args[1].getIdentifier()):(y=o.getContent().getIdentifier(),S=o.args[0].getContent().getIdentifier(),C=o.args[1].getContent().getIdentifier()),x!==null&&(Vr[c][y].latexLeftParens===!1&&(v=!1),Vr[x][S].latexParens===!1&&(v=!1)),w!==null&&(Vr[c][y].latexRightParens===!1&&(g=!1),Vr[w][C].latexParens===!1&&(g=!1))}m=[v,g]}break;default:(o.getIdentifier()==="OperatorNode:add"||o.getIdentifier()==="OperatorNode:multiply")&&(m=l.map(function(E){var M=tt(E,a,s,o),F=ol(o,E,a),k=co(E,a);return M===null?!1:c===M&&f===k&&!F?!0:M<c}));break}if(l.length>=2&&o.getIdentifier()==="OperatorNode:multiply"&&o.implicit&&a!=="all"&&s==="hide")for(var A=1;A<m.length;++A)t(l[A],a)&&!m[A-1]&&(a!=="keep"||!Vt(l[A-1]))&&(m[A]=!0);return m}class i extends e{constructor(a,s,l,u,c){if(super(),typeof a!="string")throw new TypeError('string expected for parameter "op"');if(typeof s!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(l)||!l.every($e))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.isPercentage=c===!0,this.op=a,this.fn=s,this.args=l||[]}get type(){return dl}get isOperatorNode(){return!0}_compile(a,s){if(typeof this.fn!="string"||!ka(a,this.fn))throw a[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var l=vt(a,this.fn),u=Rr(this.args,function(h){return h._compile(a,s)});if(typeof l=="function"&&l.rawArgs===!0){var c=this.args;return function(d,v,x){return l(c,a,Di(d,v))}}else if(u.length===1){var f=u[0];return function(d,v,x){return l(f(d,v,x))}}else if(u.length===2){var m=u[0],p=u[1];return function(d,v,x){return l(m(d,v,x),p(d,v,x))}}else return function(d,v,x){return l.apply(null,Rr(u,function(D){return D(d,v,x)}))}}forEach(a){for(var s=0;s<this.args.length;s++)a(this.args[s],"args["+s+"]",this)}map(a){for(var s=[],l=0;l<this.args.length;l++)s[l]=this._ifNode(a(this.args[l],"args["+l+"]",this));return new i(this.op,this.fn,s,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=n(this,s,l,u,!1);if(u.length===1){var f=co(this,s),m=u[0].toString(a);c[0]&&(m="("+m+")");var p=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(p?" ":"")+m:f==="left"?m+(p?" ":"")+this.op:m+this.op}else if(u.length===2){var h=u[0].toString(a),d=u[1].toString(a);return c[0]&&(h="("+h+")"),c[1]&&(d="("+d+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?h+" "+d:h+" "+this.op+" "+d}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var v=u.map(function(x,D){return x=x.toString(a),c[D]&&(x="("+x+")"),x});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?v.join(" "):v.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:dl,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(a){return new i(a.op,a.fn,a.args,a.implicit,a.isPercentage)}_toHTML(a){var s=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=n(this,s,l,u,!1);if(u.length===1){var f=co(this,s),m=u[0].toHTML(a);return c[0]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+$t(this.op)+"</span>"+m:m+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+$t(this.op)+"</span>"}else if(u.length===2){var p=u[0].toHTML(a),h=u[1].toHTML(a);return c[0]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?p+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+h:p+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+$t(this.op)+"</span>"+h}else{var d=u.map(function(v,x){return v=v.toHTML(a),c[x]&&(v='<span class="math-parenthesis math-round-parenthesis">(</span>'+v+'<span class="math-parenthesis math-round-parenthesis">)</span>'),v});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?d.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):d.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+$t(this.op)+"</span>"):'<span class="math-function">'+$t(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+d.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(a){var s=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=n(this,s,l,u,!0),f=je[this.fn];if(f=typeof f>"u"?this.op:f,u.length===1){var m=co(this,s),p=u[0].toTex(a);return c[0]&&(p="\\left(".concat(p,"\\right)")),m==="right"?f+p:p+f}else if(u.length===2){var h=u[0],d=h.toTex(a);c[0]&&(d="\\left(".concat(d,"\\right)"));var v=u[1],x=v.toTex(a);c[1]&&(x="\\left(".concat(x,"\\right)"));var D;switch(s==="keep"?D=h.getIdentifier():D=h.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+d+"}{"+x+"}";case"OperatorNode:pow":switch(d="{"+d+"}",x="{"+x+"}",D){case"ConditionalNode":case"OperatorNode:divide":d="\\left(".concat(d,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&l==="hide")return d+"~"+x}return d+f+x}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var g=u.map(function(w,b){return w=w.toTex(a),c[b]&&(w="\\left(".concat(w,"\\right)")),w});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&l==="hide"?g.join("~"):g.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(w){return w.toTex(a)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return et(i,"name",dl),i},{isClass:!0,isNode:!0});var gl="ParenthesisNode",rP=["Node"],h1=N(gl,rP,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),!$e(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return gl}get isParenthesisNode(){return!0}_compile(i,o){return this.content._compile(i,o)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var o=i(this.content,"content",this);return new t(o)}clone(){return new t(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:gl,content:this.content}}static fromJSON(i){return new t(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return et(t,"name",gl),t},{isClass:!0,isNode:!0});var vl="RangeNode",nP=["Node"],d1=N(vl,nP,r=>{var{Node:e}=r;function t(i,o,a){var s=tt(i,o,a),l={},u=tt(i.start,o,a);if(l.start=u!==null&&u<=s||o==="all",i.step){var c=tt(i.step,o,a);l.step=c!==null&&c<=s||o==="all"}var f=tt(i.end,o,a);return l.end=f!==null&&f<=s||o==="all",l}class n extends e{constructor(o,a,s){if(super(),!$e(o))throw new TypeError("Node expected");if(!$e(a))throw new TypeError("Node expected");if(s&&!$e(s))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=o,this.end=a,this.step=s||null}get type(){return vl}get isRangeNode(){return!0}needsEnd(){var o=this.filter(function(a){return ot(a)&&a.name==="end"});return o.length>0}_compile(o,a){var s=o.range,l=this.start._compile(o,a),u=this.end._compile(o,a);if(this.step){var c=this.step._compile(o,a);return function(m,p,h){return s(l(m,p,h),u(m,p,h),c(m,p,h))}}else return function(m,p,h){return s(l(m,p,h),u(m,p,h))}}forEach(o){o(this.start,"start",this),o(this.end,"end",this),this.step&&o(this.step,"step",this)}map(o){return new n(this._ifNode(o(this.start,"start",this)),this._ifNode(o(this.end,"end",this)),this.step&&this._ifNode(o(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(o){var a=o&&o.parenthesis?o.parenthesis:"keep",s=t(this,a,o&&o.implicit),l,u=this.start.toString(o);if(s.start&&(u="("+u+")"),l=u,this.step){var c=this.step.toString(o);s.step&&(c="("+c+")"),l+=":"+c}var f=this.end.toString(o);return s.end&&(f="("+f+")"),l+=":"+f,l}toJSON(){return{mathjs:vl,start:this.start,end:this.end,step:this.step}}static fromJSON(o){return new n(o.start,o.end,o.step)}_toHTML(o){var a=o&&o.parenthesis?o.parenthesis:"keep",s=t(this,a,o&&o.implicit),l,u=this.start.toHTML(o);if(s.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l=u,this.step){var c=this.step.toHTML(o);s.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(o);return s.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+f,l}_toTex(o){var a=o&&o.parenthesis?o.parenthesis:"keep",s=t(this,a,o&&o.implicit),l=this.start.toTex(o);if(s.start&&(l="\\left(".concat(l,"\\right)")),this.step){var u=this.step.toTex(o);s.step&&(u="\\left(".concat(u,"\\right)")),l+=":"+u}var c=this.end.toTex(o);return s.end&&(c="\\left(".concat(c,"\\right)")),l+=":"+c,l}}return et(n,"name",vl),n},{isClass:!0,isNode:!0});var yl="RelationalNode",iP=["Node"],g1=N(yl,iP,r=>{var{Node:e}=r,t={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends e{constructor(o,a){if(super(),!Array.isArray(o))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(a))throw new TypeError("Parameter params must be an array");if(o.length!==a.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=o,this.params=a}get type(){return yl}get isRelationalNode(){return!0}_compile(o,a){var s=this,l=this.params.map(u=>u._compile(o,a));return function(c,f,m){for(var p,h=l[0](c,f,m),d=0;d<s.conditionals.length;d++){p=h,h=l[d+1](c,f,m);var v=vt(o,s.conditionals[d]);if(!v(p,h))return!1}return!0}}forEach(o){this.params.forEach((a,s)=>o(a,"params["+s+"]",this),this)}map(o){return new n(this.conditionals.slice(),this.params.map((a,s)=>this._ifNode(o(a,"params["+s+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(o){for(var a=o&&o.parenthesis?o.parenthesis:"keep",s=tt(this,a,o&&o.implicit),l=this.params.map(function(f,m){var p=tt(f,a,o&&o.implicit);return a==="all"||p!==null&&p<=s?"("+f.toString(o)+")":f.toString(o)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=" "+t[this.conditionals[c]],u+=" "+l[c+1];return u}toJSON(){return{mathjs:yl,conditionals:this.conditionals,params:this.params}}static fromJSON(o){return new n(o.conditionals,o.params)}_toHTML(o){for(var a=o&&o.parenthesis?o.parenthesis:"keep",s=tt(this,a,o&&o.implicit),l=this.params.map(function(f,m){var p=tt(f,a,o&&o.implicit);return a==="all"||p!==null&&p<=s?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(o)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(o)}),u=l[0],c=0;c<this.conditionals.length;c++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+$t(t[this.conditionals[c]])+"</span>"+l[c+1];return u}_toTex(o){for(var a=o&&o.parenthesis?o.parenthesis:"keep",s=tt(this,a,o&&o.implicit),l=this.params.map(function(f,m){var p=tt(f,a,o&&o.implicit);return a==="all"||p!==null&&p<=s?"\\left("+f.toTex(o)+"\right)":f.toTex(o)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=je[this.conditionals[c]]+l[c+1];return u}}return et(n,"name",yl),n},{isClass:!0,isNode:!0});var oP="SymbolNode",aP=["math","?Unit","Node"],v1=N(oP,aP,r=>{var{math:e,Unit:t,Node:n}=r;function i(a){return t?t.isValuelessUnit(a):!1}class o extends n{constructor(s){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');this.name=s}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(s,l){var u=this.name;if(l[u]===!0)return function(f,m,p){return vt(m,u)};if(u in s)return function(f,m,p){return f.has(u)?f.get(u):vt(s,u)};var c=i(u);return function(f,m,p){return f.has(u)?f.get(u):c?new t(null,u):o.onUndefinedSymbol(u)}}forEach(s){}map(s){return this.clone()}static onUndefinedSymbol(s){throw new Error("Undefined symbol "+s)}clone(){return new o(this.name)}_toString(s){return this.name}_toHTML(s){var l=$t(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(s){return new o(s.name)}_toTex(s){var l=!1;typeof e[this.name]>"u"&&i(this.name)&&(l=!0);var u=cl(this.name,l);return u[0]==="\\"?u:" "+u}}return o},{isClass:!0,isNode:!0});var xl="FunctionNode",sP=["math","Node","SymbolNode"],y1=N(xl,sP,r=>{var e,{math:t,Node:n,SymbolNode:i}=r,o=l=>_e(l,{truncate:78});function a(l,u,c){for(var f="",m=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,p=0,h;(h=m.exec(l))!==null;)if(f+=l.substring(p,h.index),p=h.index,h[0]==="$$")f+="$",p++;else{p+=h[0].length;var d=u[h[1]];if(!d)throw new ReferenceError("Template: Property "+h[1]+" does not exist.");if(h[2]===void 0)switch(typeof d){case"string":f+=d;break;case"object":if($e(d))f+=d.toTex(c);else if(Array.isArray(d))f+=d.map(function(v,x){if($e(v))return v.toTex(c);throw new TypeError("Template: "+h[1]+"["+x+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+h[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+h[1]+" has to be a Node, String or array of Nodes")}else if($e(d[h[2]]&&d[h[2]]))f+=d[h[2]].toTex(c);else throw new TypeError("Template: "+h[1]+"["+h[2]+"] is not a Node.")}return f+=l.slice(p),f}class s extends n{constructor(u,c){if(super(),typeof u=="string"&&(u=new i(u)),!$e(u))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every($e))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=u,this.args=c||[]}get name(){return this.fn.name||""}get type(){return xl}get isFunctionNode(){return!0}_compile(u,c){var f=this.args.map(C=>C._compile(u,c));if(ot(this.fn)){var m=this.fn.name;if(c[m]){var x=this.args;return function(A,E,M){var F=vt(E,m);if(typeof F!="function")throw new TypeError("Argument '".concat(m,"' was not a function; received: ").concat(o(F)));if(F.rawArgs)return F(x,u,Di(A,E));var k=f.map(I=>I(A,E,M));return F.apply(F,k)}}else{var p=m in u?vt(u,m):void 0,h=typeof p=="function"&&p.rawArgs===!0,d=C=>{var A;if(C.has(m))A=C.get(m);else if(m in u)A=vt(u,m);else return s.onUndefinedFunction(m);if(typeof A=="function")return A;throw new TypeError("'".concat(m,`' is not a function; its value is:
  `).concat(o(A)))};if(h){var v=this.args;return function(A,E,M){var F=d(A);if(F.rawArgs===!0)return F(v,u,Di(A,E));var k=f.map(I=>I(A,E,M));return F(...k)}}else switch(f.length){case 0:return function(A,E,M){var F=d(A);return F()};case 1:return function(A,E,M){var F=d(A),k=f[0];return F(k(A,E,M))};case 2:return function(A,E,M){var F=d(A),k=f[0],I=f[1];return F(k(A,E,M),I(A,E,M))};default:return function(A,E,M){var F=d(A),k=f.map(I=>I(A,E,M));return F(...k)}}}}else if(sr(this.fn)&&dr(this.fn.index)&&this.fn.index.isObjectProperty()){var D=this.fn.object._compile(u,c),g=this.fn.index.getObjectProperty(),w=this.args;return function(A,E,M){var F=D(A,E,M),k=Np(F,g);if(k!=null&&k.rawArgs)return k(w,u,Di(A,E));var I=f.map(P=>P(A,E,M));return k.apply(F,I)}}else{var b=this.fn.toString(),y=this.fn._compile(u,c),S=this.args;return function(A,E,M){var F=y(A,E,M);if(typeof F!="function")throw new TypeError("Expression '".concat(b,"' did not evaluate to a function; value is:")+`
  `.concat(o(F)));if(F.rawArgs)return F(S,u,Di(A,E));var k=f.map(I=>I(A,E,M));return F.apply(F,k)}}}forEach(u){u(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)u(this.args[c],"args["+c+"]",this)}map(u){for(var c=this._ifNode(u(this.fn,"fn",this)),f=[],m=0;m<this.args.length;m++)f[m]=this._ifNode(u(this.args[m],"args["+m+"]",this));return new s(c,f)}clone(){return new s(this.fn,this.args.slice(0))}toString(u){var c,f=this.fn.toString(u);return u&&typeof u.handler=="object"&&be(u.handler,f)&&(c=u.handler[f](this,u)),typeof c<"u"?c:super.toString(u)}_toString(u){var c=this.args.map(function(m){return m.toString(u)}),f=kr(this.fn)?"("+this.fn.toString(u)+")":this.fn.toString(u);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:xl,fn:this.fn,args:this.args}}_toHTML(u){var c=this.args.map(function(f){return f.toHTML(u)});return'<span class="math-function">'+$t(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(u){var c;return u&&typeof u.handler=="object"&&be(u.handler,this.name)&&(c=u.handler[this.name](this,u)),typeof c<"u"?c:super.toTex(u)}_toTex(u){var c=this.args.map(function(p){return p.toTex(u)}),f;pf[this.name]&&(f=pf[this.name]),t[this.name]&&(typeof t[this.name].toTex=="function"||typeof t[this.name].toTex=="object"||typeof t[this.name].toTex=="string")&&(f=t[this.name].toTex);var m;switch(typeof f){case"function":m=f(this,u);break;case"string":m=a(f,this,u);break;case"object":switch(typeof f[c.length]){case"function":m=f[c.length](this,u);break;case"string":m=a(f[c.length],this,u);break}}return typeof m<"u"?m:a(l1,this,u)}getIdentifier(){return this.type+":"+this.name}}return e=s,et(s,"name",xl),et(s,"onUndefinedFunction",function(l){throw new Error("Undefined function "+l)}),et(s,"fromJSON",function(l){return new e(l.fn,l.args)}),s},{isClass:!0,isNode:!0});var x1="parse",lP=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],b1=N(x1,lP,r=>{var{typed:e,numeric:t,config:n,AccessorNode:i,ArrayNode:o,AssignmentNode:a,BlockNode:s,ConditionalNode:l,ConstantNode:u,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:m,ObjectNode:p,OperatorNode:h,ParenthesisNode:d,RangeNode:v,RelationalNode:x,SymbolNode:D}=r,g=e(x1,{string:function(L){return Z(L,{})},"Array | Matrix":function(L){return w(L,{})},"string, Object":function(L,re){var ue=re.nodes!==void 0?re.nodes:{};return Z(L,ue)},"Array | Matrix, Object":w});function w(T){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=L.nodes!==void 0?L.nodes:{};return De(T,function(ue){if(typeof ue!="string")throw new TypeError("String expected");return Z(ue,re)})}var b={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},y={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},S={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},C={true:!0,false:!1,null:null,undefined:void 0},A=["NaN","Infinity"],E={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function M(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:b.NULL,nestingLevel:0,conditionalLevel:null}}function F(T,L){return T.expression.substr(T.index,L)}function k(T){return F(T,1)}function I(T){T.index++}function P(T){return T.expression.charAt(T.index-1)}function B(T){return T.expression.charAt(T.index+1)}function O(T){for(T.tokenType=b.NULL,T.token="",T.comment="";;){if(k(T)==="#")for(;k(T)!==`
`&&k(T)!=="";)T.comment+=k(T),I(T);if(g.isWhitespace(k(T),T.nestingLevel))I(T);else break}if(k(T)===""){T.tokenType=b.DELIMITER;return}if(k(T)===`
`&&!T.nestingLevel){T.tokenType=b.DELIMITER,T.token=k(T),I(T);return}var L=k(T),re=F(T,2),ue=F(T,3);if(ue.length===3&&y[ue]){T.tokenType=b.DELIMITER,T.token=ue,I(T),I(T),I(T);return}if(re.length===2&&y[re]){T.tokenType=b.DELIMITER,T.token=re,I(T),I(T);return}if(y[L]){T.tokenType=b.DELIMITER,T.token=L,I(T);return}if(g.isDigitDot(L)){T.tokenType=b.NUMBER;var Oe=F(T,2);if(Oe==="0b"||Oe==="0o"||Oe==="0x"){for(T.token+=k(T),I(T),T.token+=k(T),I(T);g.isHexDigit(k(T));)T.token+=k(T),I(T);if(k(T)===".")for(T.token+=".",I(T);g.isHexDigit(k(T));)T.token+=k(T),I(T);else if(k(T)==="i")for(T.token+="i",I(T);g.isDigit(k(T));)T.token+=k(T),I(T);return}if(k(T)==="."){if(T.token+=k(T),I(T),!g.isDigit(k(T))){T.tokenType=b.DELIMITER;return}}else{for(;g.isDigit(k(T));)T.token+=k(T),I(T);g.isDecimalMark(k(T),B(T))&&(T.token+=k(T),I(T))}for(;g.isDigit(k(T));)T.token+=k(T),I(T);if(k(T)==="E"||k(T)==="e"){if(g.isDigit(B(T))||B(T)==="-"||B(T)==="+"){if(T.token+=k(T),I(T),(k(T)==="+"||k(T)==="-")&&(T.token+=k(T),I(T)),!g.isDigit(k(T)))throw ge(T,'Digit expected, got "'+k(T)+'"');for(;g.isDigit(k(T));)T.token+=k(T),I(T);if(g.isDecimalMark(k(T),B(T)))throw ge(T,'Digit expected, got "'+k(T)+'"')}else if(B(T)===".")throw I(T),ge(T,'Digit expected, got "'+k(T)+'"')}return}if(g.isAlpha(k(T),P(T),B(T))){for(;g.isAlpha(k(T),P(T),B(T))||g.isDigit(k(T));)T.token+=k(T),I(T);be(S,T.token)?T.tokenType=b.DELIMITER:T.tokenType=b.SYMBOL;return}for(T.tokenType=b.UNKNOWN;k(T)!=="";)T.token+=k(T),I(T);throw ge(T,'Syntax error in part "'+T.token+'"')}function q(T){do O(T);while(T.token===`
`)}function _(T){T.nestingLevel++}function K(T){T.nestingLevel--}g.isAlpha=function(L,re,ue){return g.isValidLatinOrGreek(L)||g.isValidMathSymbol(L,ue)||g.isValidMathSymbol(re,L)},g.isValidLatinOrGreek=function(L){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(L)},g.isValidMathSymbol=function(L,re){return/^[\uD835]$/.test(L)&&/^[\uDC00-\uDFFF]$/.test(re)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(re)},g.isWhitespace=function(L,re){return L===" "||L==="	"||L===`
`&&re>0},g.isDecimalMark=function(L,re){return L==="."&&re!=="/"&&re!=="*"&&re!=="^"},g.isDigitDot=function(L){return L>="0"&&L<="9"||L==="."},g.isDigit=function(L){return L>="0"&&L<="9"},g.isHexDigit=function(L){return L>="0"&&L<="9"||L>="a"&&L<="f"||L>="A"&&L<="F"};function Z(T,L){var re=M();Mt(re,{expression:T,extraNodes:L}),O(re);var ue=W(re);if(re.token!=="")throw re.tokenType===b.DELIMITER?ve(re,"Unexpected operator "+re.token):ge(re,'Unexpected part "'+re.token+'"');return ue}function W(T){var L,re=[],ue;for(T.token!==""&&T.token!==`
`&&T.token!==";"&&(L=R(T),T.comment&&(L.comment=T.comment));T.token===`
`||T.token===";";)re.length===0&&L&&(ue=T.token!==";",re.push({node:L,visible:ue})),O(T),T.token!==`
`&&T.token!==";"&&T.token!==""&&(L=R(T),T.comment&&(L.comment=T.comment),ue=T.token!==";",re.push({node:L,visible:ue}));return re.length>0?new s(re):(L||(L=new u(void 0),T.comment&&(L.comment=T.comment)),L)}function R(T){var L,re,ue,Oe,Ie=X(T);if(T.token==="="){if(ot(Ie))return L=Ie.name,q(T),ue=R(T),new a(new D(L),ue);if(sr(Ie))return q(T),ue=R(T),new a(Ie.object,Ie.index,ue);if(Xt(Ie)&&ot(Ie.fn)&&(Oe=!0,re=[],L=Ie.name,Ie.args.forEach(function(gt,wr){ot(gt)?re[wr]=gt.name:Oe=!1}),Oe))return q(T),ue=R(T),new c(L,re,ue);throw ge(T,"Invalid left hand side of assignment operator =")}return Ie}function X(T){for(var L=ae(T);T.token==="?";){var re=T.conditionalLevel;T.conditionalLevel=T.nestingLevel,q(T);var ue=L,Oe=R(T);if(T.token!==":")throw ge(T,"False part of conditional expression expected");T.conditionalLevel=null,q(T);var Ie=R(T);L=new l(ue,Oe,Ie),T.conditionalLevel=re}return L}function ae(T){for(var L=j(T);T.token==="or";)q(T),L=new h("or","or",[L,j(T)]);return L}function j(T){for(var L=U(T);T.token==="xor";)q(T),L=new h("xor","xor",[L,U(T)]);return L}function U(T){for(var L=$(T);T.token==="and";)q(T),L=new h("and","and",[L,$(T)]);return L}function $(T){for(var L=G(T);T.token==="|";)q(T),L=new h("|","bitOr",[L,G(T)]);return L}function G(T){for(var L=Y(T);T.token==="^|";)q(T),L=new h("^|","bitXor",[L,Y(T)]);return L}function Y(T){for(var L=J(T);T.token==="&";)q(T),L=new h("&","bitAnd",[L,J(T)]);return L}function J(T){for(var L=[te(T)],re=[],ue={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};be(ue,T.token);){var Oe={name:T.token,fn:ue[T.token]};re.push(Oe),q(T),L.push(te(T))}return L.length===1?L[0]:L.length===2?new h(re[0].name,re[0].fn,L):new x(re.map(Ie=>Ie.fn),L)}function te(T){var L,re,ue,Oe;L=ie(T);for(var Ie={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};be(Ie,T.token);)re=T.token,ue=Ie[re],q(T),Oe=[L,ie(T)],L=new h(re,ue,Oe);return L}function ie(T){var L,re,ue,Oe;L=de(T);for(var Ie={to:"to",in:"to"};be(Ie,T.token);)re=T.token,ue=Ie[re],q(T),re==="in"&&T.token===""?L=new h("*","multiply",[L,new D("in")],!0):(Oe=[L,de(T)],L=new h(re,ue,Oe));return L}function de(T){var L,re=[];if(T.token===":"?L=new u(1):L=z(T),T.token===":"&&T.conditionalLevel!==T.nestingLevel){for(re.push(L);T.token===":"&&re.length<3;)q(T),T.token===")"||T.token==="]"||T.token===","||T.token===""?re.push(new D("end")):re.push(z(T));re.length===3?L=new v(re[0],re[2],re[1]):L=new v(re[0],re[1])}return L}function z(T){var L,re,ue,Oe;L=V(T);for(var Ie={"+":"add","-":"subtract"};be(Ie,T.token);){re=T.token,ue=Ie[re],q(T);var gt=V(T);gt.isPercentage?Oe=[L,new h("*","multiply",[L,gt])]:Oe=[L,gt],L=new h(re,ue,Oe)}return L}function V(T){var L,re,ue,Oe;L=ee(T),re=L;for(var Ie={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};be(Ie,T.token);)ue=T.token,Oe=Ie[ue],q(T),re=ee(T),L=new h(ue,Oe,[L,re]);return L}function ee(T){var L,re;for(L=ne(T),re=L;T.tokenType===b.SYMBOL||T.token==="in"&&ze(L)||T.token==="in"&&lt(L)&&L.fn==="unaryMinus"&&ze(L.args[0])||T.tokenType===b.NUMBER&&!ze(re)&&(!lt(re)||re.op==="!")||T.token==="(";)re=ne(T),L=new h("*","multiply",[L,re],!0);return L}function ne(T){for(var L=le(T),re=L,ue=[];T.token==="/"&&Po(re);)if(ue.push(Mt({},T)),q(T),T.tokenType===b.NUMBER)if(ue.push(Mt({},T)),q(T),T.tokenType===b.SYMBOL||T.token==="("||T.token==="in")Mt(T,ue.pop()),ue.pop(),re=le(T),L=new h("/","divide",[L,re]);else{ue.pop(),Mt(T,ue.pop());break}else{Mt(T,ue.pop());break}return L}function le(T){var L,re,ue,Oe;L=fe(T);for(var Ie={"%":"mod",mod:"mod"};be(Ie,T.token);)re=T.token,ue=Ie[re],q(T),re==="%"&&T.tokenType===b.DELIMITER&&T.token!=="("?L=new h("/","divide",[L,new u(100)],!1,!0):(Oe=[L,fe(T)],L=new h(re,ue,Oe));return L}function fe(T){var L,re,ue,Oe={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return be(Oe,T.token)?(ue=Oe[T.token],L=T.token,q(T),re=[fe(T)],new h(L,ue,re)):ye(T)}function ye(T){var L,re,ue,Oe;return L=Se(T),(T.token==="^"||T.token===".^")&&(re=T.token,ue=re==="^"?"pow":"dotPow",q(T),Oe=[L,fe(T)],L=new h(re,ue,Oe)),L}function Se(T){var L,re,ue,Oe;L=Ue(T);for(var Ie={"!":"factorial","'":"ctranspose"};be(Ie,T.token);)re=T.token,ue=Ie[re],O(T),Oe=[L],L=new h(re,ue,Oe),L=ut(T,L);return L}function Ue(T){var L=[];if(T.tokenType===b.SYMBOL&&be(T.extraNodes,T.token)){var re=T.extraNodes[T.token];if(O(T),T.token==="("){if(L=[],_(T),O(T),T.token!==")")for(L.push(R(T));T.token===",";)O(T),L.push(R(T));if(T.token!==")")throw ge(T,"Parenthesis ) expected");K(T),O(T)}return new re(L)}return Pe(T)}function Pe(T){var L,re;return T.tokenType===b.SYMBOL||T.tokenType===b.DELIMITER&&T.token in S?(re=T.token,O(T),be(C,re)?L=new u(C[re]):A.includes(re)?L=new u(t(re,"number")):L=new D(re),L=ut(T,L),L):Xe(T)}function ut(T,L,re){for(var ue;(T.token==="("||T.token==="["||T.token===".")&&(!re||re.includes(T.token));)if(ue=[],T.token==="(")if(ot(L)||sr(L)){if(_(T),O(T),T.token!==")")for(ue.push(R(T));T.token===",";)O(T),ue.push(R(T));if(T.token!==")")throw ge(T,"Parenthesis ) expected");K(T),O(T),L=new f(L,ue)}else return L;else if(T.token==="["){if(_(T),O(T),T.token!=="]")for(ue.push(R(T));T.token===",";)O(T),ue.push(R(T));if(T.token!=="]")throw ge(T,"Parenthesis ] expected");K(T),O(T),L=new i(L,new m(ue))}else{O(T);var Oe=T.tokenType===b.SYMBOL||T.tokenType===b.DELIMITER&&T.token in S;if(!Oe)throw ge(T,"Property name expected after dot");ue.push(new u(T.token)),O(T);var Ie=!0;L=new i(L,new m(ue,Ie))}return L}function Xe(T){var L,re;return T.token==='"'||T.token==="'"?(re=Ot(T,T.token),L=new u(re),L=ut(T,L),L):It(T)}function Ot(T,L){for(var re="";k(T)!==""&&k(T)!==L;)if(k(T)==="\\"){I(T);var ue=k(T),Oe=E[ue];if(Oe!==void 0)re+=Oe,T.index+=1;else if(ue==="u"){var Ie=T.expression.slice(T.index+1,T.index+5);if(/^[0-9A-Fa-f]{4}$/.test(Ie))re+=String.fromCharCode(parseInt(Ie,16)),T.index+=5;else throw ge(T,"Invalid unicode character \\u".concat(Ie))}else throw ge(T,"Bad escape character \\".concat(ue))}else re+=k(T),I(T);if(O(T),T.token!==L)throw ge(T,"End of string ".concat(L," expected"));return O(T),re}function It(T){var L,re,ue,Oe;if(T.token==="["){if(_(T),O(T),T.token!=="]"){var Ie=H(T);if(T.token===";"){for(ue=1,re=[Ie];T.token===";";)O(T),T.token!=="]"&&(re[ue]=H(T),ue++);if(T.token!=="]")throw ge(T,"End of matrix ] expected");K(T),O(T),Oe=re[0].items.length;for(var gt=1;gt<ue;gt++)if(re[gt].items.length!==Oe)throw ve(T,"Column dimensions mismatch ("+re[gt].items.length+" !== "+Oe+")");L=new o(re)}else{if(T.token!=="]")throw ge(T,"End of matrix ] expected");K(T),O(T),L=Ie}}else K(T),O(T),L=new o([]);return ut(T,L)}return Q(T)}function H(T){for(var L=[R(T)],re=1;T.token===",";)O(T),T.token!=="]"&&T.token!==";"&&(L[re]=R(T),re++);return new o(L)}function Q(T){if(T.token==="{"){_(T);var L,re={};do if(O(T),T.token!=="}"){if(T.token==='"'||T.token==="'")L=Ot(T,T.token);else if(T.tokenType===b.SYMBOL||T.tokenType===b.DELIMITER&&T.token in S)L=T.token,O(T);else throw ge(T,"Symbol or string expected as object key");if(T.token!==":")throw ge(T,"Colon : expected after object key");O(T),re[L]=R(T)}while(T.token===",");if(T.token!=="}")throw ge(T,"Comma , or bracket } expected after object value");K(T),O(T);var ue=new p(re);return ue=ut(T,ue),ue}return oe(T)}function oe(T){var L;if(T.tokenType===b.NUMBER){L=T.token,O(T);var re=Qt(L,n),ue=t(L,re);return new u(ue)}return ce(T)}function ce(T){var L;if(T.token==="("){if(_(T),O(T),L=R(T),T.token!==")")throw ge(T,"Parenthesis ) expected");return K(T),O(T),L=new d(L),L=ut(T,L),L}return pe(T)}function pe(T){throw T.token===""?ge(T,"Unexpected end of expression"):ge(T,"Value expected")}function me(T){return T.index-T.token.length+1}function ge(T,L){var re=me(T),ue=new SyntaxError(L+" (char "+re+")");return ue.char=re,ue}function ve(T,L){var re=me(T),ue=new SyntaxError(L+" (char "+re+")");return ue.char=re,ue}return e.addConversion({from:"string",to:"Node",convert:g}),g});var w1="compile",uP=["typed","parse"],D1=N(w1,uP,r=>{var{typed:e,parse:t}=r;return e(w1,{string:function(i){return t(i).compile()},"Array | Matrix":function(i){return De(i,function(o){return t(o).compile()})}})});var S1="evaluate",cP=["typed","parse"],A1=N(S1,cP,r=>{var{typed:e,parse:t}=r;return e(S1,{string:function(i){var o=Un();return t(i).compile().evaluate(o)},"string, Map | Object":function(i,o){return t(i).compile().evaluate(o)},"Array | Matrix":function(i){var o=Un();return De(i,function(a){return t(a).compile().evaluate(o)})},"Array | Matrix, Map | Object":function(i,o){return De(i,function(a){return t(a).compile().evaluate(o)})}})});var fP="Parser",mP=["evaluate","parse"],N1=N(fP,mP,r=>{var{evaluate:e,parse:t}=r;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:Un(),writable:!1})}n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(o){return e(o,this.scope)},n.prototype.get=function(o){if(this.scope.has(o))return this.scope.get(o)},n.prototype.getAll=function(){return Ep(this.scope)},n.prototype.getAllAsMap=function(){return this.scope};function i(o){if(o.length===0)return!1;for(var a=0;a<o.length;a++){var s=o.charAt(a-1),l=o.charAt(a),u=o.charAt(a+1),c=t.isAlpha(l,s,u)||a>0&&t.isDigit(l);if(!c)return!1}return!0}return n.prototype.set=function(o,a){if(!i(o))throw new Error("Invalid variable name: '".concat(o,"'. Variable names must follow the specified rules."));return this.scope.set(o,a),a},n.prototype.remove=function(o){this.scope.delete(o)},n.prototype.clear=function(){this.scope.clear()},n},{isClass:!0});var C1="parser",pP=["typed","Parser"],E1=N(C1,pP,r=>{var{typed:e,Parser:t}=r;return e(C1,{"":function(){return new t}})});var M1="lup",hP=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],T1=N(M1,hP,r=>{var{typed:e,matrix:t,abs:n,addScalar:i,divideScalar:o,multiplyScalar:a,subtractScalar:s,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:f,SparseMatrix:m,Spa:p}=r;return e(M1,{DenseMatrix:function(x){return h(x)},SparseMatrix:function(x){return d(x)},Array:function(x){var D=t(x),g=h(D);return{L:g.L.valueOf(),U:g.U.valueOf(),p:g.p}}});function h(v){var x=v._size[0],D=v._size[1],g=Math.min(x,D),w=Ee(v._data),b=[],y=[x,g],S=[],C=[g,D],A,E,M,F=[];for(A=0;A<x;A++)F[A]=A;for(E=0;E<D;E++){if(E>0)for(A=0;A<x;A++){var k=Math.min(A,E),I=0;for(M=0;M<k;M++)I=i(I,a(w[A][M],w[M][E]));w[A][E]=s(w[A][E],I)}var P=E,B=0,O=0;for(A=E;A<x;A++){var q=w[A][E],_=n(q);l(_,B)&&(P=A,B=_,O=q)}if(E!==P&&(F[E]=[F[P],F[P]=F[E]][0],f._swapRows(E,P,w)),E<x)for(A=E+1;A<x;A++){var K=w[A][E];u(K,0)||(w[A][E]=o(w[A][E],O))}}for(E=0;E<D;E++)for(A=0;A<x;A++){if(E===0&&(A<D&&(S[A]=[]),b[A]=[]),A<E){A<D&&(S[A][E]=w[A][E]),E<x&&(b[A][E]=0);continue}if(A===E){A<D&&(S[A][E]=w[A][E]),E<x&&(b[A][E]=1);continue}A<D&&(S[A][E]=0),E<x&&(b[A][E]=w[A][E])}var Z=new f({data:b,size:y}),W=new f({data:S,size:C}),R=[];for(A=0,g=F.length;A<g;A++)R[F[A]]=A;return{L:Z,U:W,p:R,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function d(v){var x=v._size[0],D=v._size[1],g=Math.min(x,D),w=v._values,b=v._index,y=v._ptr,S=[],C=[],A=[],E=[x,g],M=[],F=[],k=[],I=[g,D],P,B,O,q=[],_=[];for(P=0;P<x;P++)q[P]=P,_[P]=P;var K=function(R,X){var ae=_[R],j=_[X];q[ae]=X,q[j]=R,_[R]=j,_[X]=ae},Z=function(){var R=new p;B<x&&(A.push(S.length),S.push(1),C.push(B)),k.push(M.length);var X=y[B],ae=y[B+1];for(O=X;O<ae;O++)P=b[O],R.set(q[P],w[O]);B>0&&R.forEach(0,B-1,function(G,Y){m._forEachRow(G,S,C,A,function(J,te){J>G&&R.accumulate(J,c(a(te,Y)))})});var j=B,U=R.get(B),$=n(U);R.forEach(B+1,x-1,function(G,Y){var J=n(Y);l(J,$)&&(j=G,$=J,U=Y)}),B!==j&&(m._swapRows(B,j,E[1],S,C,A),m._swapRows(B,j,I[1],M,F,k),R.swap(B,j),K(B,j)),R.forEach(0,x-1,function(G,Y){G<=B?(M.push(Y),F.push(G)):(Y=o(Y,U),u(Y,0)||(S.push(Y),C.push(G)))})};for(B=0;B<D;B++)Z();return k.push(M.length),A.push(S.length),{L:new m({values:S,index:C,ptr:A,size:E}),U:new m({values:M,index:F,ptr:k,size:I}),p:q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}});var F1="qr",dP=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],O1=N(F1,dP,r=>{var{typed:e,matrix:t,zeros:n,identity:i,isZero:o,equal:a,sign:s,sqrt:l,conj:u,unaryMinus:c,addScalar:f,divideScalar:m,multiplyScalar:p,subtractScalar:h,complex:d}=r;return Mt(e(F1,{DenseMatrix:function(w){return x(w)},SparseMatrix:function(w){return D(w)},Array:function(w){var b=t(w),y=x(b);return{Q:y.Q.valueOf(),R:y.R.valueOf()}}}),{_denseQRimpl:v});function v(g){var w=g._size[0],b=g._size[1],y=i([w],"dense"),S=y._data,C=g.clone(),A=C._data,E,M,F,k=n([w],"");for(F=0;F<Math.min(b,w);++F){var I=A[F][F],P=c(a(I,0)?1:s(I)),B=u(P),O=0;for(E=F;E<w;E++)O=f(O,p(A[E][F],u(A[E][F])));var q=p(P,l(O));if(!o(q)){var _=h(I,q);for(k[F]=1,E=F+1;E<w;E++)k[E]=m(A[E][F],_);var K=c(u(m(_,q))),Z=void 0;for(M=F;M<b;M++){for(Z=0,E=F;E<w;E++)Z=f(Z,p(u(k[E]),A[E][M]));for(Z=p(Z,K),E=F;E<w;E++)A[E][M]=p(h(A[E][M],p(k[E],Z)),B)}for(E=0;E<w;E++){for(Z=0,M=F;M<w;M++)Z=f(Z,p(S[E][M],k[M]));for(Z=p(Z,K),M=F;M<w;++M)S[E][M]=m(h(S[E][M],p(Z,u(k[M]))),B)}}}return{Q:y,R:C,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function x(g){var w=v(g),b=w.R._data;if(g._data.length>0)for(var y=b[0][0].type==="Complex"?d(0):0,S=0;S<b.length;++S)for(var C=0;C<S&&C<(b[0]||[]).length;++C)b[S][C]=y;return w}function D(g){throw new Error("qr not implemented for sparse matrices yet")}});function B1(r,e,t,n){for(var i=r._values,o=r._index,a=r._ptr,s=r._size,l=r._datatype,u=s[0],c=s[1],f=n&&r._values?[]:null,m=[],p=[],h=0,d=0;d<c;d++){p[d]=h;for(var v=t?t[d]:d,x=a[v],D=a[v+1],g=x;g<D;g++){var w=e?e[o[g]]:o[g];m[h]=w,f&&(f[h]=i[g]),h++}}return p[c]=h,r.createSparseMatrix({values:f,index:m,ptr:p,size:[u,c],datatype:l})}function bl(r,e,t,n,i,o,a){var s=0;for(t[a]=r;s>=0;){var l=t[a+s],u=t[n+l];u===-1?(s--,o[e++]=l):(t[n+l]=t[i+u],++s,t[a+s]=u)}return e}function _1(r,e){if(!r)return null;var t=0,n,i=[],o=[],a=0,s=e,l=2*e;for(n=0;n<e;n++)o[a+n]=-1;for(n=e-1;n>=0;n--)r[n]!==-1&&(o[s+n]=o[a+r[n]],o[a+r[n]]=n);for(n=0;n<e;n++)r[n]===-1&&(t=bl(n,t,o,a,s,i,l));return i}function k1(r,e){if(!r)return null;var t=r._index,n=r._ptr,i=r._size,o=i[0],a=i[1],s=[],l=[],u=0,c=a,f,m;if(e)for(f=0;f<o;f++)l[c+f]=-1;for(var p=0;p<a;p++){s[p]=-1,l[u+p]=-1;for(var h=n[p],d=n[p+1],v=h;v<d;v++){var x=t[v];for(f=e?l[c+x]:x;f!==-1&&f<p;f=m)m=l[u+f],l[u+f]=p,m===-1&&(s[f]=p);e&&(l[c+x]=p)}}return s}function P1(r,e,t){for(var n=r._values,i=r._index,o=r._ptr,a=r._size,s=a[1],l=0,u=0;u<s;u++){var c=o[u];for(o[u]=l;c<o[u+1];c++)e(i[c],u,n?n[c]:1,t)&&(i[l]=i[c],n&&(n[l]=n[c]),l++)}return o[s]=l,i.splice(l,i.length-l),n&&n.splice(l,n.length-l),l}function Qr(r){return-r-2}var gP="csAmd",vP=["add","multiply","transpose"],I1=N(gP,vP,r=>{var{add:e,multiply:t,transpose:n}=r;return function(c,f){if(!f||c<=0||c>3)return null;var m=f._size,p=m[0],h=m[1],d=0,v=Math.max(16,10*Math.sqrt(h));v=Math.min(h-2,v);var x=i(c,f,p,h,v);P1(x,l,null);for(var D=x._index,g=x._ptr,w=g[h],b=[],y=[],S=0,C=h+1,A=2*(h+1),E=3*(h+1),M=4*(h+1),F=5*(h+1),k=6*(h+1),I=7*(h+1),P=b,B=o(h,g,y,S,E,P,A,I,C,k,M,F),O=a(h,g,y,F,M,k,v,C,E,P,A),q=0,_,K,Z,W,R,X,ae,j,U,$,G,Y,J,te,ie,de;O<h;){for(Z=-1;q<h&&(Z=y[E+q])===-1;q++);y[A+Z]!==-1&&(P[y[A+Z]]=-1),y[E+q]=y[A+Z];var z=y[M+Z],V=y[C+Z];O+=V;var ee=0;y[C+Z]=-V;var ne=g[Z],le=z===0?ne:w,fe=le;for(W=1;W<=z+1;W++){for(W>z?(X=Z,ae=ne,j=y[S+Z]-z):(X=D[ne++],ae=g[X],j=y[S+X]),R=1;R<=j;R++)_=D[ae++],!((U=y[C+_])<=0)&&(ee+=U,y[C+_]=-U,D[fe++]=_,y[A+_]!==-1&&(P[y[A+_]]=P[_]),P[_]!==-1?y[A+P[_]]=y[A+_]:y[E+y[F+_]]=y[A+_]);X!==Z&&(g[X]=Qr(Z),y[k+X]=0)}for(z!==0&&(w=fe),y[F+Z]=ee,g[Z]=le,y[S+Z]=fe-le,y[M+Z]=-2,B=s(B,d,y,k,h),$=le;$<fe;$++)if(_=D[$],!((G=y[M+_])<=0)){U=-y[C+_];var ye=B-U;for(ne=g[_],Y=g[_]+G-1;ne<=Y;ne++)X=D[ne],y[k+X]>=B?y[k+X]-=U:y[k+X]!==0&&(y[k+X]=y[F+X]+ye)}for($=le;$<fe;$++){for(_=D[$],Y=g[_],J=Y+y[M+_]-1,te=Y,ie=0,de=0,ne=Y;ne<=J;ne++)if(X=D[ne],y[k+X]!==0){var Se=y[k+X]-B;Se>0?(de+=Se,D[te++]=X,ie+=X):(g[X]=Qr(Z),y[k+X]=0)}y[M+_]=te-Y+1;var Ue=te,Pe=Y+y[S+_];for(ne=J+1;ne<Pe;ne++){K=D[ne];var ut=y[C+K];ut<=0||(de+=ut,D[te++]=K,ie+=K)}de===0?(g[_]=Qr(Z),U=-y[C+_],ee-=U,V+=U,O+=U,y[C+_]=0,y[M+_]=-1):(y[F+_]=Math.min(y[F+_],de),D[te]=D[Ue],D[Ue]=D[Y],D[Y]=Z,y[S+_]=te-Y+1,ie=(ie<0?-ie:ie)%h,y[A+_]=y[I+ie],y[I+ie]=_,P[_]=ie)}for(y[F+Z]=ee,d=Math.max(d,ee),B=s(B+d,d,y,k,h),$=le;$<fe;$++)if(_=D[$],!(y[C+_]>=0))for(ie=P[_],_=y[I+ie],y[I+ie]=-1;_!==-1&&y[A+_]!==-1;_=y[A+_],B++){for(j=y[S+_],G=y[M+_],ne=g[_]+1;ne<=g[_]+j-1;ne++)y[k+D[ne]]=B;var Xe=_;for(K=y[A+_];K!==-1;){var Ot=y[S+K]===j&&y[M+K]===G;for(ne=g[K]+1;Ot&&ne<=g[K]+j-1;ne++)y[k+D[ne]]!==B&&(Ot=0);Ot?(g[K]=Qr(_),y[C+_]+=y[C+K],y[C+K]=0,y[M+K]=-1,K=y[A+K],y[A+Xe]=K):(Xe=K,K=y[A+K])}}for(ne=le,$=le;$<fe;$++)_=D[$],!((U=-y[C+_])<=0)&&(y[C+_]=U,de=y[F+_]+ee-U,de=Math.min(de,h-O-U),y[E+de]!==-1&&(P[y[E+de]]=_),y[A+_]=y[E+de],P[_]=-1,y[E+de]=_,q=Math.min(q,de),y[F+_]=de,D[ne++]=_);y[C+Z]=V,(y[S+Z]=ne-le)===0&&(g[Z]=-1,y[k+Z]=0),z!==0&&(w=ne)}for(_=0;_<h;_++)g[_]=Qr(g[_]);for(K=0;K<=h;K++)y[E+K]=-1;for(K=h;K>=0;K--)y[C+K]>0||(y[A+K]=y[E+g[K]],y[E+g[K]]=K);for(X=h;X>=0;X--)y[C+X]<=0||g[X]!==-1&&(y[A+X]=y[E+g[X]],y[E+g[X]]=X);for(Z=0,_=0;_<=h;_++)g[_]===-1&&(Z=bl(_,Z,y,E,A,b,k));return b.splice(b.length-1,1),b};function i(u,c,f,m,p){var h=n(c);if(u===1&&m===f)return e(c,h);if(u===2){for(var d=h._index,v=h._ptr,x=0,D=0;D<f;D++){var g=v[D];if(v[D]=x,!(v[D+1]-g>p))for(var w=v[D+1];g<w;g++)d[x++]=d[g]}return v[f]=x,c=n(h),t(h,c)}return t(h,c)}function o(u,c,f,m,p,h,d,v,x,D,g,w){for(var b=0;b<u;b++)f[m+b]=c[b+1]-c[b];f[m+u]=0;for(var y=0;y<=u;y++)f[p+y]=-1,h[y]=-1,f[d+y]=-1,f[v+y]=-1,f[x+y]=1,f[D+y]=1,f[g+y]=0,f[w+y]=f[m+y];var S=s(0,0,f,D,u);return f[g+u]=-2,c[u]=-1,f[D+u]=0,S}function a(u,c,f,m,p,h,d,v,x,D,g){for(var w=0,b=0;b<u;b++){var y=f[m+b];if(y===0)f[p+b]=-2,w++,c[b]=-1,f[h+b]=0;else if(y>d)f[v+b]=0,f[p+b]=-1,w++,c[b]=Qr(u),f[v+u]++;else{var S=f[x+y];S!==-1&&(D[S]=b),f[g+b]=f[x+y],f[x+y]=b}}return w}function s(u,c,f,m,p){if(u<2||u+c<0){for(var h=0;h<p;h++)f[m+h]!==0&&(f[m+h]=1);u=2}return u}function l(u,c){return u!==c}});function R1(r,e,t,n,i,o,a){var s,l,u=0,c;if(r<=e||t[n+e]<=t[i+r])return-1;t[i+r]=t[n+e];var f=t[o+r];if(t[o+r]=e,f===-1)u=1,c=r;else{for(u=2,c=f;c!==t[a+c];c=t[a+c]);for(s=f;s!==c;s=l)l=t[a+s],t[a+s]=c}return{jleaf:u,q:c}}var yP="csCounts",xP=["transpose"],L1=N(yP,xP,r=>{var{transpose:e}=r;return function(t,n,i,o){if(!t||!n||!i)return null;var a=t._size,s=a[0],l=a[1],u,c,f,m,p,h,d,v=4*l+(o?l+s+1:0),x=[],D=0,g=l,w=2*l,b=3*l,y=4*l,S=5*l+1;for(f=0;f<v;f++)x[f]=-1;var C=[],A=e(t),E=A._index,M=A._ptr;for(f=0;f<l;f++)for(c=i[f],C[c]=x[b+c]===-1?1:0;c!==-1&&x[b+c]===-1;c=n[c])x[b+c]=f;if(o){for(f=0;f<l;f++)x[i[f]]=f;for(u=0;u<s;u++){for(f=l,h=M[u],d=M[u+1],p=h;p<d;p++)f=Math.min(f,x[E[p]]);x[S+u]=x[y+f],x[y+f]=u}}for(u=0;u<l;u++)x[D+u]=u;for(f=0;f<l;f++){for(c=i[f],n[c]!==-1&&C[n[c]]--,m=o?x[y+f]:c;m!==-1;m=o?x[S+m]:-1)for(p=M[m];p<M[m+1];p++){u=E[p];var F=R1(u,c,x,b,g,w,D);F.jleaf>=1&&C[c]++,F.jleaf===2&&C[F.q]--}n[c]!==-1&&(x[D+c]=n[c])}for(c=0;c<l;c++)n[c]!==-1&&(C[n[c]]+=C[c]);return C}});var bP="csSqr",wP=["add","multiply","transpose"],z1=N(bP,wP,r=>{var{add:e,multiply:t,transpose:n}=r,i=I1({add:e,multiply:t,transpose:n}),o=L1({transpose:n});return function(l,u,c){var f=u._ptr,m=u._size,p=m[1],h,d={};if(d.q=i(l,u),l&&!d.q)return null;if(c){var v=l?B1(u,null,d.q,0):u;d.parent=k1(v,1);var x=_1(d.parent,p);if(d.cp=o(v,d.parent,x,1),v&&d.parent&&d.cp&&a(v,d))for(d.unz=0,h=0;h<p;h++)d.unz+=d.cp[h]}else d.unz=4*f[p]+p,d.lnz=d.unz;return d};function a(s,l){var u=s._ptr,c=s._index,f=s._size,m=f[0],p=f[1];l.pinv=[],l.leftmost=[];var h=l.parent,d=l.pinv,v=l.leftmost,x=[],D=0,g=m,w=m+p,b=m+2*p,y,S,C,A,E;for(S=0;S<p;S++)x[g+S]=-1,x[w+S]=-1,x[b+S]=0;for(y=0;y<m;y++)v[y]=-1;for(S=p-1;S>=0;S--)for(A=u[S],E=u[S+1],C=A;C<E;C++)v[c[C]]=S;for(y=m-1;y>=0;y--)d[y]=-1,S=v[y],S!==-1&&(x[b+S]++===0&&(x[w+S]=y),x[D+y]=x[g+S],x[g+S]=y);for(l.lnz=0,l.m2=m,S=0;S<p;S++)if(y=x[g+S],l.lnz++,y<0&&(y=l.m2++),d[y]=S,!(--b[S]<=0)){l.lnz+=x[b+S];var M=h[S];M!==-1&&(x[b+M]===0&&(x[w+M]=x[w+S]),x[D+x[w+S]]=x[g+M],x[g+M]=x[D+y],x[b+M]+=x[b+S])}for(y=0;y<m;y++)d[y]<0&&(d[y]=S++);return!0}});function Ko(r,e){return r[e]<0}function wl(r,e){r[e]=Qr(r[e])}function hf(r){return r<0?Qr(r):r}function q1(r,e,t,n,i){var o=e._index,a=e._ptr,s=e._size,l=s[1],u,c,f,m=0;for(n[0]=r;m>=0;){r=n[m];var p=i?i[r]:r;Ko(a,r)||(wl(a,r),n[l+m]=p<0?0:hf(a[p]));var h=1;for(c=n[l+m],f=p<0?0:hf(a[p+1]);c<f;c++)if(u=o[c],!Ko(a,u)){n[l+m]=c,n[++m]=u,h=0;break}h&&(m--,n[--t]=r)}return t}function U1(r,e,t,n,i){var o=r._ptr,a=r._size,s=e._index,l=e._ptr,u=a[1],c,f,m,p=u;for(f=l[t],m=l[t+1],c=f;c<m;c++){var h=s[c];Ko(o,h)||(p=q1(h,r,p,n,i))}for(c=p;c<u;c++)wl(o,n[c]);return p}var DP="csSpsolve",SP=["divideScalar","multiply","subtract"],V1=N(DP,SP,r=>{var{divideScalar:e,multiply:t,subtract:n}=r;return function(o,a,s,l,u,c,f){var m=o._values,p=o._index,h=o._ptr,d=o._size,v=d[1],x=a._values,D=a._index,g=a._ptr,w,b,y,S,C=U1(o,a,s,l,c);for(w=C;w<v;w++)u[l[w]]=0;for(b=g[s],y=g[s+1],w=b;w<y;w++)u[D[w]]=x[w];for(var A=C;A<v;A++){var E=l[A],M=c?c[E]:E;if(!(M<0))for(b=h[M],y=h[M+1],u[E]=e(u[E],m[f?b:y-1]),w=f?b+1:b,S=f?y:y-1;w<S;w++){var F=p[w];u[F]=n(u[F],t(m[w],u[E]))}}return C}});var AP="csLu",NP=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],H1=N(AP,NP,r=>{var{abs:e,divideScalar:t,multiply:n,subtract:i,larger:o,largerEq:a,SparseMatrix:s}=r,l=V1({divideScalar:t,multiply:n,subtract:i});return function(c,f,m){if(!c)return null;var p=c._size,h=p[1],d,v=100,x=100;f&&(d=f.q,v=f.lnz||v,x=f.unz||x);var D=[],g=[],w=[],b=new s({values:D,index:g,ptr:w,size:[h,h]}),y=[],S=[],C=[],A=new s({values:y,index:S,ptr:C,size:[h,h]}),E=[],M,F,k=[],I=[];for(M=0;M<h;M++)k[M]=0,E[M]=-1,w[M+1]=0;v=0,x=0;for(var P=0;P<h;P++){w[P]=v,C[P]=x;var B=d?d[P]:P,O=l(b,c,B,I,k,E,1),q=-1,_=-1;for(F=O;F<h;F++)if(M=I[F],E[M]<0){var K=e(k[M]);o(K,_)&&(_=K,q=M)}else S[x]=E[M],y[x++]=k[M];if(q===-1||_<=0)return null;E[B]<0&&a(e(k[B]),n(_,m))&&(q=B);var Z=k[q];for(S[x]=P,y[x++]=Z,E[q]=P,g[v]=q,D[v++]=1,F=O;F<h;F++)M=I[F],E[M]<0&&(g[v]=M,D[v++]=t(k[M],Z)),k[M]=0}for(w[h]=v,C[h]=x,F=0;F<v;F++)g[F]=E[g[F]];return D.splice(v,D.length-v),g.splice(v,g.length-v),y.splice(x,y.length-x),S.splice(x,S.length-x),{L:b,U:A,pinv:E}}});var $1="slu",CP=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],W1=N($1,CP,r=>{var{typed:e,abs:t,add:n,multiply:i,transpose:o,divideScalar:a,subtract:s,larger:l,largerEq:u,SparseMatrix:c}=r,f=z1({add:n,multiply:i,transpose:o}),m=H1({abs:t,divideScalar:a,multiply:i,subtract:s,larger:l,largerEq:u,SparseMatrix:c});return e($1,{"SparseMatrix, number, number":function(h,d,v){if(!xe(d)||d<0||d>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(v<0||v>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var x=f(d,h,!1),D=m(h,x,v);return{L:D.L,U:D.U,p:D.pinv,q:x.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function df(r,e){var t,n=e.length,i=[];if(r)for(t=0;t<n;t++)i[r[t]]=e[t];else for(t=0;t<n;t++)i[t]=e[t];return i}var G1="lusolve",EP=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],K1=N(G1,EP,r=>{var{typed:e,matrix:t,lup:n,slu:i,usolve:o,lsolve:a,DenseMatrix:s}=r,l=pn({DenseMatrix:s});return e(G1,{"Array, Array | Matrix":function(m,p){m=t(m);var h=n(m),d=c(h.L,h.U,h.p,null,p);return d.valueOf()},"DenseMatrix, Array | Matrix":function(m,p){var h=n(m);return c(h.L,h.U,h.p,null,p)},"SparseMatrix, Array | Matrix":function(m,p){var h=n(m);return c(h.L,h.U,h.p,null,p)},"SparseMatrix, Array | Matrix, number, number":function(m,p,h,d){var v=i(m,h,d);return c(v.L,v.U,v.p,v.q,p)},"Object, Array | Matrix":function(m,p){return c(m.L,m.U,m.p,m.q,p)}});function u(f){if(we(f))return f;if(Ze(f))return t(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,m,p,h,d){f=u(f),m=u(m),p&&(d=l(f,d,!0),d._data=df(p,d._data));var v=a(f,d),x=o(m,v);return h&&(x._data=df(h,x._data)),x}});var Y1="polynomialRoot",MP=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],Z1=N(Y1,MP,r=>{var{typed:e,isZero:t,equalScalar:n,add:i,subtract:o,multiply:a,divide:s,sqrt:l,unaryMinus:u,cbrt:c,typeOf:f,im:m,re:p}=r;return e(Y1,{"number|Complex, ...number|Complex":(h,d)=>{for(var v=[h,...d];v.length>0&&t(v[v.length-1]);)v.pop();if(v.length<2)throw new RangeError("Polynomial [".concat(h,", ").concat(d,"] must have a non-zero non-constant coefficient"));switch(v.length){case 2:return[u(s(v[0],v[1]))];case 3:{var[x,D,g]=v,w=a(2,g),b=a(D,D),y=a(4,g,x);if(n(b,y))return[s(u(D),w)];var S=l(o(b,y));return[s(o(S,D),w),s(o(u(S),D),w)]}case 4:{var[C,A,E,M]=v,F=u(a(3,M)),k=a(E,E),I=a(3,M,A),P=i(a(2,E,E,E),a(27,M,M,C)),B=a(9,M,E,A);if(n(k,I)&&n(P,B))return[s(E,F)];var O=o(k,I),q=o(P,B),_=i(a(18,M,E,A,C),a(E,E,A,A)),K=i(a(4,E,E,E,C),a(4,M,A,A,A),a(27,M,M,C,C));if(n(_,K))return[s(o(a(4,M,E,A),i(a(9,M,M,C),a(E,E,E))),a(M,O)),s(o(a(9,M,C),a(E,A)),a(2,O))];var Z;n(k,I)?Z=q:Z=s(i(q,l(o(a(q,q),a(4,O,O,O)))),2);var W=!0,R=c(Z,W).toArray().map(X=>s(i(E,X,s(O,X)),F));return R.map(X=>f(X)==="Complex"&&n(p(X),p(X)+m(X))?p(X):X)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(v))}}})});var TP="Help",FP=["evaluate"],X1=N(TP,FP,r=>{var{evaluate:e}=r;function t(n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return t.prototype.type="Help",t.prototype.isHelp=!0,t.prototype.toString=function(){var n=this.doc||{},i=`
`;if(n.name&&(i+="Name: "+n.name+`

`),n.category&&(i+="Category: "+n.category+`

`),n.description&&(i+=`Description:
    `+n.description+`

`),n.syntax&&(i+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){i+=`Examples:
`;for(var o=!1,a=e("config()"),s={config:f=>(o=!0,e("config(newConfig)",{newConfig:f}))},l=0;l<n.examples.length;l++){var u=n.examples[l];i+="    "+u+`
`;var c=void 0;try{c=e(u,s)}catch(f){c=f}c!==void 0&&!Ui(c)&&(i+="        "+_e(c,{precision:14})+`
`)}i+=`
`,o&&e("config(originalConfig)",{originalConfig:a})}return n.mayThrow&&n.mayThrow.length&&(i+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(i+="See also: "+n.seealso.join(", ")+`
`),i},t.prototype.toJSON=function(){var n=Ee(this.doc);return n.mathjs="Help",n},t.fromJSON=function(n){var i={};return Object.keys(n).filter(o=>o!=="mathjs").forEach(o=>{i[o]=n[o]}),new t(i)},t.prototype.valueOf=t.prototype.toString,t},{isClass:!0});var OP="Chain",BP=["?on","math","typed"],J1=N(OP,BP,r=>{var{on:e,math:t,typed:n}=r;function i(u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");Vi(u)?this.value=u.value:this.value=u}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return _e(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(u){return new i(u.value)};function o(u,c){typeof c=="function"&&(i.prototype[u]=s(c))}function a(u,c){Hi(i.prototype,u,function(){var m=c();if(typeof m=="function")return s(m)})}function s(u){return function(){if(arguments.length===0)return new i(u(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(n.isTypedFunction(u)){var m=n.resolve(u,c);if(m.params.length===1)throw new Error("chain function "+u.name+" cannot match rest parameter between chain value and additional arguments.");return new i(m.implementation.apply(u,c))}return new i(u.apply(u,c))}}i.createProxy=function(u,c){if(typeof u=="string")o(u,c);else{var f=function(h){be(u,h)&&l[h]===void 0&&a(h,()=>u[h])};for(var m in u)f(m)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(t),e&&e("import",function(u,c,f){f||a(u,c)}),i},{isClass:!0});var gf={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]};var j1={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]};var Q1={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]};var eb={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]};var tb={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]};var rb={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]};var nb={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]};var ib={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]};var ob={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]};var ab={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]};var sb={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]};var vf={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]};var lb={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]};var ub={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]};var cb={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]};var fb={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]};var mb={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]};var pb={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]};var hb={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]};var db={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]};var gb={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]};var vb={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]};var yb={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]};var xb={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]};var bb={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]};var wb={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]};var Db={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]};var Sb={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]};var Ab={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]};var Nb={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]};var Cb={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]};var Eb={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]};var Mb={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]};var Tb={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]};var Fb={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]};var Ob={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]};var Bb={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]};var _b={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]};var kb={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]};var Pb={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]};var Ib={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]};var Rb={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]};var Lb={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]};var zb={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]};var qb={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]};var Ub={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]};var Vb={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]};var Hb={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]};var $b={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]};var Wb={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]};var Gb={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]};var Kb={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]};var Yb={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]};var Zb={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]};var Xb={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]};var Jb={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]};var jb={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]};var Qb={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]};var ew={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]};var tw={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]};var rw={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]};var nw={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]};var iw={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]};var ow={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]};var aw={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]};var sw={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]};var lw={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax \u2263 1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]};var uw={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]};var cw={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]};var fw={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]};var mw={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]};var pw={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]};var hw={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]};var dw={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]};var gw={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']};var vw={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]};var yw={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]};var xw={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]};var bw={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]};var ww={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]};var Dw={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]};var Sw={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]};var Aw={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]};var Nw={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]};var Cw={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]};var Ew={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]};var Mw={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]};var Tw={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]};var Fw={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]};var Ow={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]};var Bw={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]};var _w={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]};var kw={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]};var Pw={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]};var Iw={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]};var Rw={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]};var Lw={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]};var zw={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]};var qw={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]};var Uw={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]};var Vw={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]};var Hw={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]};var $w={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]};var Ww={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]};var Gw={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]};var Kw={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]};var Yw={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]};var Zw={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]};var Xw={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]};var Jw={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]};var jw={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]};var Qw={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]};var eD={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]};var tD={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]};var rD={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]};var nD={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]};var iD={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]};var oD={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]};var aD={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]};var sD={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]};var lD={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]};var uD={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]};var cD={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]};var fD={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]};var mD={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]};var pD={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]};var hD={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]};var dD={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]};var gD={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]};var vD={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the Moore\u2013Penrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]};var yD={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]};var xD={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]};var bD={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]};var wD={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]};var DD={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]};var SD={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]};var AD={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]};var ND={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]};var CD={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]};var ED={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]};var MD={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]};var TD={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]};var FD={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]};var OD={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]};var BD={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]};var _D={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]};var kD={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]};var PD={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]};var ID={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]};var RD={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]};var LD={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]};var zD={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]};var qD={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]};var UD={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]};var VD={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]};var HD={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]};var $D={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]};var WD={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]};var GD={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]};var KD={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]};var YD={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]};var ZD={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]};var XD={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]};var JD={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]};var jD={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]};var QD={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]};var eS={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]};var tS={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]};var rS={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]};var nS={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]};var iS={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]};var oS={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]};var aS={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]};var sS={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]};var lS={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]};var uS={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]};var cS={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]};var fS={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]};var mS={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]};var pS={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]};var hS={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]};var dS={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]};var gS={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]};var vS={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]};var yS={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]};var xS={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]};var bS={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]};var wS={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]};var DS={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]};var SS={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]};var AS={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]};var NS={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]};var CS={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]};var ES={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]};var MS={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]};var TS={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]};var FS={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]};var OS={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]};var BS={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]};var _S={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]};var kS={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]};var PS={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]};var IS={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]};var RS={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]};var LS={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]};var zS={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]};var qS={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]};var US={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]};var VS={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]};var HS={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]};var $S={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]};var WS={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]};var GS={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]};var KS={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]};var YS={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]};var ZS={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]};var XS={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]};var JS={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]};var jS={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]};var QS={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]};var eA={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]};var tA={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]};var rA={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]};var nA={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]};var iA={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]};var oA={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]};var aA={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]};var sA={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]};var lA={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]};var uA={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]};var cA={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]};var fA={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]};var mA={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]};var pA={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]};var hA={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]};var dA={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]};var gA={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]};var vA={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]};var yA={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]};var xA={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]};var bA={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]};var wA={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]};var DA={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]};var SA={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]};var AA={bignumber:pb,bigint:hb,boolean:db,complex:gb,createUnit:vb,fraction:yb,index:xb,matrix:bb,number:wb,sparse:Db,splitUnit:Sb,string:Ab,unit:Nb,e:gf,E:gf,false:j1,i:Q1,Infinity:eb,LN2:rb,LN10:tb,LOG2E:ib,LOG10E:nb,NaN:ob,null:ab,pi:vf,PI:vf,phi:sb,SQRT1_2:lb,SQRT2:ub,tau:cb,true:fb,version:mb,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:Tb,lsolve:Ob,lsolveAll:Bb,lup:_b,lusolve:kb,leafCount:Fb,polynomialRoot:Pb,resolve:Lb,simplify:zb,simplifyConstant:qb,simplifyCore:Ub,symbolicEqual:Hb,rationalize:Rb,slu:Vb,usolve:$b,usolveAll:Wb,qr:Ib,abs:Gb,add:Kb,cbrt:Yb,ceil:Zb,cube:Xb,divide:Jb,dotDivide:jb,dotMultiply:Qb,dotPow:ew,exp:tw,expm:rw,expm1:nw,fix:iw,floor:ow,gcd:aw,hypot:sw,lcm:uw,log:cw,log2:pw,log1p:mw,log10:fw,mod:hw,multiply:dw,norm:gw,nthRoot:vw,nthRoots:yw,pow:xw,round:bw,sign:ww,sqrt:Dw,sqrtm:Sw,square:Ew,subtract:Mw,unaryMinus:Tw,unaryPlus:Fw,xgcd:Ow,invmod:lw,bitAnd:Bw,bitNot:_w,bitOr:kw,bitXor:Pw,leftShift:Iw,rightArithShift:Rw,rightLogShift:Lw,bellNumbers:zw,catalan:qw,composition:Uw,stirlingS2:Vw,config:Cb,import:Eb,typed:Mb,arg:Hw,conj:$w,re:Gw,im:Ww,evaluate:Kw,help:Yw,distance:Zw,intersect:Xw,and:Jw,not:jw,or:Qw,xor:eD,concat:rD,count:nD,cross:iD,column:tD,ctranspose:oD,det:aD,diag:sD,diff:lD,dot:uD,getMatrixDataType:hD,identity:dD,filter:fD,flatten:mD,forEach:pD,inv:gD,pinv:vD,eigs:cD,kron:yD,matrixFromFunction:wD,matrixFromRows:DD,matrixFromColumns:bD,map:xD,ones:SD,partitionSelect:AD,range:ND,resize:ED,reshape:CD,rotate:MD,rotationMatrix:TD,row:FD,size:OD,sort:BD,squeeze:_D,subset:kD,trace:PD,transpose:ID,zeros:RD,fft:LD,ifft:zD,sylvester:Aw,schur:Nw,lyap:Cw,solveODE:SA,combinations:qD,combinationsWithRep:UD,factorial:VD,gamma:HD,kldivergence:WD,lgamma:$D,multinomial:GD,permutations:KD,pickRandom:YD,random:ZD,randomInt:XD,compare:JD,compareNatural:jD,compareText:QD,deepEqual:eS,equal:tS,equalText:rS,larger:nS,largerEq:iS,smaller:oS,smallerEq:aS,unequal:sS,setCartesian:lS,setDifference:uS,setDistinct:cS,setIntersect:fS,setIsSubset:mS,setMultiplicity:pS,setPowerset:hS,setSize:dS,setSymDifference:gS,setUnion:vS,zpk2tf:yS,freqz:xS,erf:bS,zeta:wS,cumsum:OS,mad:DS,max:SS,mean:AS,median:NS,min:CS,mode:ES,prod:MS,quantileSeq:TS,std:FS,sum:BS,variance:_S,corr:kS,acos:PS,acosh:IS,acot:RS,acoth:LS,acsc:zS,acsch:qS,asec:US,asech:VS,asin:HS,asinh:$S,atan:WS,atanh:KS,atan2:GS,cos:YS,cosh:ZS,cot:XS,coth:JS,csc:jS,csch:QS,sec:eA,sech:tA,sin:rA,sinh:nA,tan:iA,tanh:oA,to:aA,clone:lA,format:uA,bin:sA,oct:bA,hex:fA,isNaN:pA,isInteger:mA,isNegative:hA,isNumeric:dA,hasNumericValue:cA,isPositive:gA,isPrime:vA,isZero:yA,print:wA,typeOf:DA,numeric:xA};var NA="help",_P=["typed","mathWithTransform","Help"],CA=N(NA,_P,r=>{var{typed:e,mathWithTransform:t,Help:n}=r;return e(NA,{any:function(o){var a,s=o;if(typeof o!="string"){for(a in t)if(be(t,a)&&o===t[a]){s=a;break}}var l=vt(AA,s);if(!l){var u=typeof s=="function"?s.name:s;throw new Error('No documentation found on "'+u+'"')}return new n(l)}})});var EA="chain",kP=["typed","Chain"],MA=N(EA,kP,r=>{var{typed:e,Chain:t}=r;return e(EA,{"":function(){return new t},any:function(i){return new t(i)}})});var TA="det",PP=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],FA=N(TA,PP,r=>{var{typed:e,matrix:t,subtractScalar:n,multiply:i,divideScalar:o,isZero:a,unaryMinus:s}=r;return e(TA,{any:function(c){return Ee(c)},"Array | Matrix":function(c){var f;switch(we(c)?f=c.size():Array.isArray(c)?(c=t(c),f=c.size()):f=[],f.length){case 0:return Ee(c);case 1:if(f[0]===1)return Ee(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+_e(f)+")");case 2:{var m=f[0],p=f[1];if(m===p)return l(c.clone().valueOf(),m,p);if(p===0)return 1;throw new RangeError("Matrix must be square (size: "+_e(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+_e(f)+")")}}});function l(u,c,f){if(c===1)return Ee(u[0][0]);if(c===2)return n(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var m=!1,p=new Array(c).fill(0).map((S,C)=>C),h=0;h<c;h++){var d=p[h];if(a(u[d][h])){var v=void 0;for(v=h+1;v<c;v++)if(!a(u[p[v]][h])){d=p[v],p[v]=p[h],p[h]=d,m=!m;break}if(v===c)return u[d][h]}for(var x=u[d][h],D=h===0?1:u[p[h-1]][h-1],g=h+1;g<c;g++)for(var w=p[g],b=h+1;b<c;b++)u[w][b]=o(n(i(u[w][b],x),i(u[w][h],u[d][b])),D)}var y=u[p[c-1]][c-1];return m?s(y):y}});var OA="inv",IP=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],BA=N(OA,IP,r=>{var{typed:e,matrix:t,divideScalar:n,addScalar:i,multiply:o,unaryMinus:a,det:s,identity:l,abs:u}=r;return e(OA,{"Array | Matrix":function(m){var p=we(m)?m.size():Me(m);switch(p.length){case 1:if(p[0]===1)return we(m)?t([n(1,m.valueOf()[0])]):[n(1,m[0])];throw new RangeError("Matrix must be square (size: "+_e(p)+")");case 2:{var h=p[0],d=p[1];if(h===d)return we(m)?t(c(m.valueOf(),h,d),m.storage()):c(m,h,d);throw new RangeError("Matrix must be square (size: "+_e(p)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+_e(p)+")")}},any:function(m){return n(1,m)}});function c(f,m,p){var h,d,v,x,D;if(m===1){if(x=f[0][0],x===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,x)]]}else if(m===2){var g=s(f);if(g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(f[1][1],g),n(a(f[0][1]),g)],[n(a(f[1][0]),g),n(f[0][0],g)]]}else{var w=f.concat();for(h=0;h<m;h++)w[h]=w[h].concat();for(var b=l(m).valueOf(),y=0;y<p;y++){var S=u(w[y][y]),C=y;for(h=y+1;h<m;)u(w[h][y])>S&&(S=u(w[h][y]),C=h),h++;if(S===0)throw Error("Cannot calculate inverse, determinant is zero");h=C,h!==y&&(D=w[y],w[y]=w[h],w[h]=D,D=b[y],b[y]=b[h],b[h]=D);var A=w[y],E=b[y];for(h=0;h<m;h++){var M=w[h],F=b[h];if(h!==y){if(M[y]!==0){for(v=n(a(M[y]),A[y]),d=y;d<p;d++)M[d]=i(M[d],o(v,A[d]));for(d=0;d<p;d++)F[d]=i(F[d],o(v,E[d]))}}else{for(v=A[y],d=y;d<p;d++)M[d]=n(M[d],v);for(d=0;d<p;d++)F[d]=n(F[d],v)}}}return b}}});var _A="pinv",RP=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],kA=N(_A,RP,r=>{var{typed:e,matrix:t,inv:n,deepEqual:i,equal:o,dotDivide:a,dot:s,ctranspose:l,divideScalar:u,multiply:c,add:f,Complex:m}=r;return e(_A,{"Array | Matrix":function(g){var w=we(g)?g.size():Me(g);switch(w.length){case 1:return x(g)?l(g):w[0]===1?n(g):a(l(g),s(g,g));case 2:{if(x(g))return l(g);var b=w[0],y=w[1];if(b===y)try{return n(g)}catch(S){if(!(S instanceof Error&&S.message.match(/Cannot calculate inverse, determinant is zero/)))throw S}return we(g)?t(p(g.valueOf(),b,y),g.storage()):p(g,b,y)}default:throw new RangeError("Matrix must be two dimensional (size: "+_e(w)+")")}},any:function(g){return o(g,0)?Ee(g):u(1,g)}});function p(D,g,w){var{C:b,F:y}=d(D,g,w),S=c(n(c(l(b),b)),l(b)),C=c(l(y),n(c(y,l(y))));return c(C,S)}function h(D,g,w){for(var b=Ee(D),y=0,S=0;S<g;S++){if(w<=y)return b;for(var C=S;v(b[C][y]);)if(C++,g===C&&(C=S,y++,w===y))return b;[b[C],b[S]]=[b[S],b[C]];for(var A=b[S][y],E=0;E<w;E++)b[S][E]=a(b[S][E],A);for(var M=0;M<g;M++)if(M!==S){A=b[M][y];for(var F=0;F<w;F++)b[M][F]=f(b[M][F],c(-1,c(A,b[S][F])))}y++}return b}function d(D,g,w){var b=h(D,g,w),y=D.map((C,A)=>C.filter((E,M)=>M<g&&!v(s(b[M],b[M])))),S=b.filter((C,A)=>!v(s(b[A],b[A])));return{C:y,F:S}}function v(D){return o(f(D,m(1,1)),f(0,m(1,1)))}function x(D){return i(f(D,m(1,1)),f(c(D,0),m(1,1)))}});function PA(r){var{addScalar:e,subtract:t,flatten:n,multiply:i,multiplyScalar:o,divideScalar:a,sqrt:s,abs:l,bignumber:u,diag:c,size:f,reshape:m,inv:p,qr:h,usolve:d,usolveAll:v,equal:x,complex:D,larger:g,smaller:w,matrixFromColumns:b,dot:y}=r;function S(W,R,X,ae){var j=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,U=C(W,R,X,ae,j);A(W,R,X,ae,j,U);var{values:$,C:G}=E(W,R,X,ae,j);if(j){var Y=M(W,R,G,U,$,X,ae);return{values:$,eigenvectors:Y}}return{values:$}}function C(W,R,X,ae,j){var U=ae==="BigNumber",$=ae==="Complex",G=U?u(0):0,Y=U?u(1):$?D(1):1,J=U?u(1):1,te=U?u(10):2,ie=o(te,te),de;j&&(de=Array(R).fill(Y));for(var z=!1;!z;){z=!0;for(var V=0;V<R;V++){for(var ee=G,ne=G,le=0;le<R;le++)V!==le&&(ee=e(ee,l(W[le][V])),ne=e(ne,l(W[V][le])));if(!x(ee,0)&&!x(ne,0)){for(var fe=J,ye=ee,Se=a(ne,te),Ue=o(ne,te);w(ye,Se);)ye=o(ye,ie),fe=o(fe,te);for(;g(ye,Ue);)ye=a(ye,ie),fe=a(fe,te);var Pe=w(a(e(ye,ne),fe),o(e(ee,ne),.95));if(Pe){z=!1;for(var ut=a(1,fe),Xe=0;Xe<R;Xe++)V!==Xe&&(W[V][Xe]=o(W[V][Xe],ut),W[Xe][V]=o(W[Xe][V],fe));j&&(de[V]=o(de[V],ut))}}}}return j?c(de):null}function A(W,R,X,ae,j,U){var $=ae==="BigNumber",G=ae==="Complex",Y=$?u(0):G?D(0):0;$&&(X=u(X));for(var J=0;J<R-2;J++){for(var te=0,ie=Y,de=J+1;de<R;de++){var z=W[de][J];w(l(ie),l(z))&&(ie=z,te=de)}if(!w(l(ie),X)){if(te!==J+1){var V=W[te];W[te]=W[J+1],W[J+1]=V;for(var ee=0;ee<R;ee++){var ne=W[ee][te];W[ee][te]=W[ee][J+1],W[ee][J+1]=ne}if(j){var le=U[te];U[te]=U[J+1],U[J+1]=le}}for(var fe=J+2;fe<R;fe++){var ye=a(W[fe][J],ie);if(ye!==0){for(var Se=0;Se<R;Se++)W[fe][Se]=t(W[fe][Se],o(ye,W[J+1][Se]));for(var Ue=0;Ue<R;Ue++)W[Ue][J+1]=e(W[Ue][J+1],o(ye,W[Ue][fe]));if(j)for(var Pe=0;Pe<R;Pe++)U[fe][Pe]=t(U[fe][Pe],o(ye,U[J+1][Pe]))}}}}return U}function E(W,R,X,ae,j){var U=ae==="BigNumber",$=ae==="Complex",G=U?u(1):$?D(1):1;U&&(X=u(X));for(var Y=Ee(W),J=[],te=R,ie=[],de=j?c(Array(R).fill(G)):void 0,z=j?c(Array(te).fill(G)):void 0,V=0;V<=100;){V+=1;for(var ee=Y[te-1][te-1],ne=0;ne<te;ne++)Y[ne][ne]=t(Y[ne][ne],ee);var{Q:le,R:fe}=h(Y);Y=i(fe,le);for(var ye=0;ye<te;ye++)Y[ye][ye]=e(Y[ye][ye],ee);if(j&&(z=i(z,le)),te===1||w(l(Y[te-1][te-2]),X)){V=0,J.push(Y[te-1][te-1]),j&&(ie.unshift([[1]]),I(z,R),de=i(de,z),te>1&&(z=c(Array(te-1).fill(G)))),te-=1,Y.pop();for(var Se=0;Se<te;Se++)Y[Se].pop()}else if(te===2||w(l(Y[te-2][te-3]),X)){V=0;var Ue=F(Y[te-2][te-2],Y[te-2][te-1],Y[te-1][te-2],Y[te-1][te-1]);J.push(...Ue),j&&(ie.unshift(k(Y[te-2][te-2],Y[te-2][te-1],Y[te-1][te-2],Y[te-1][te-1],Ue[0],Ue[1],X,ae)),I(z,R),de=i(de,z),te>2&&(z=c(Array(te-2).fill(G)))),te-=2,Y.pop(),Y.pop();for(var Pe=0;Pe<te;Pe++)Y[Pe].pop(),Y[Pe].pop()}if(te===0)break}if(J.sort((Ot,It)=>+t(l(Ot),l(It))),V>100){var ut=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+J.join(", "));throw ut.values=J,ut.vectors=[],ut}var Xe=j?i(de,P(ie,R)):void 0;return{values:J,C:Xe}}function M(W,R,X,ae,j,U,$){var G=p(X),Y=i(G,W,X),J=$==="BigNumber",te=$==="Complex",ie=J?u(0):te?D(0):0,de=J?u(1):te?D(1):1,z=[],V=[];for(var ee of j){var ne=B(z,ee,x);ne===-1?(z.push(ee),V.push(1)):V[ne]+=1}for(var le=[],fe=z.length,ye=Array(R).fill(ie),Se=c(Array(R).fill(de)),Ue=function(){var Xe=z[Pe],Ot=t(Y,i(Xe,Se)),It=v(Ot,ye);for(It.shift();It.length<V[Pe];){var H=O(Ot,R,It,U,$);if(H===null)break;It.push(H)}var Q=i(p(ae),X);It=It.map(oe=>i(Q,oe)),le.push(...It.map(oe=>({value:Xe,vector:n(oe)})))},Pe=0;Pe<fe;Pe++)Ue();return le}function F(W,R,X,ae){var j=e(W,ae),U=t(o(W,ae),o(R,X)),$=o(j,.5),G=o(s(t(o(j,j),o(4,U))),.5);return[e($,G),t($,G)]}function k(W,R,X,ae,j,U,$,G){var Y=G==="BigNumber",J=G==="Complex",te=Y?u(0):J?D(0):0,ie=Y?u(1):J?D(1):1;if(w(l(X),$))return[[ie,te],[te,ie]];if(g(l(t(j,U)),$))return[[t(j,ae),t(U,ae)],[X,X]];var de=t(W,j),z=t(ae,j);return w(l(R),$)&&w(l(z),$)?[[de,ie],[X,te]]:[[R,te],[z,ie]]}function I(W,R){for(var X=0;X<W.length;X++)W[X].push(...Array(R-W[X].length).fill(0));for(var ae=W.length;ae<R;ae++)W.push(Array(R).fill(0)),W[ae][ae]=1;return W}function P(W,R){for(var X=[],ae=0;ae<R;ae++)X[ae]=Array(R).fill(0);var j=0;for(var U of W){for(var $=U.length,G=0;G<$;G++)for(var Y=0;Y<$;Y++)X[j+G][j+Y]=U[G][Y];j+=$}return X}function B(W,R,X){for(var ae=0;ae<W.length;ae++)if(X(W[ae],R))return ae;return-1}function O(W,R,X,ae,j){for(var U=j==="BigNumber"?u(1e3):1e3,$,G=0;G<5;++G){$=q(R,X,j);try{$=d(W,$)}catch{continue}if(g(K($),U))break}if(G>=5)return null;for(G=0;;){var Y=d(W,$);if(w(K(_($,[Y])),ae))break;if(++G>=10)return null;$=Z(Y)}return $}function q(W,R,X){var ae=X==="BigNumber",j=X==="Complex",U=Array(W).fill(0).map($=>2*Math.random()-1);return ae&&(U=U.map($=>u($))),j&&(U=U.map($=>D($))),U=_(U,R),Z(U,X)}function _(W,R){var X=f(W);for(var ae of R)ae=m(ae,X),W=t(W,i(a(y(ae,W),y(ae,ae)),ae));return W}function K(W){return l(s(y(W,W)))}function Z(W,R){var X=R==="BigNumber",ae=R==="Complex",j=X?u(1):ae?D(1):1;return i(a(j,K(W)),W)}return S}function IA(r){var{config:e,addScalar:t,subtract:n,abs:i,atan:o,cos:a,sin:s,multiplyScalar:l,inv:u,bignumber:c,multiply:f,add:m}=r;function p(A,E){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,F=arguments.length>3?arguments[3]:void 0,k=arguments.length>4?arguments[4]:void 0;if(F==="number")return h(A,M,k);if(F==="BigNumber")return d(A,M,k);throw TypeError("Unsupported data type: "+F)}function h(A,E,M){var F=A.length,k=Math.abs(E/F),I,P;if(M){P=new Array(F);for(var B=0;B<F;B++)P[B]=Array(F).fill(0),P[B][B]=1}for(var O=y(A);Math.abs(O[1])>=Math.abs(k);){var q=O[0][0],_=O[0][1];I=v(A[q][q],A[_][_],A[q][_]),A=b(A,I,q,_),M&&(P=D(P,I,q,_)),O=y(A)}for(var K=Array(F).fill(0),Z=0;Z<F;Z++)K[Z]=A[Z][Z];return C(Ee(K),P,M)}function d(A,E,M){var F=A.length,k=i(E/F),I,P;if(M){P=new Array(F);for(var B=0;B<F;B++)P[B]=Array(F).fill(0),P[B][B]=1}for(var O=S(A);i(O[1])>=i(k);){var q=O[0][0],_=O[0][1];I=x(A[q][q],A[_][_],A[q][_]),A=w(A,I,q,_),M&&(P=g(P,I,q,_)),O=S(A)}for(var K=Array(F).fill(0),Z=0;Z<F;Z++)K[Z]=A[Z][Z];return C(Ee(K),P,M)}function v(A,E,M){var F=E-A;return Math.abs(F)<=e.relTol?Math.PI/4:.5*Math.atan(2*M/(E-A))}function x(A,E,M){var F=n(E,A);return i(F)<=e.relTol?c(-1).acos().div(4):l(.5,o(f(2,M,u(F))))}function D(A,E,M,F){for(var k=A.length,I=Math.cos(E),P=Math.sin(E),B=Array(k).fill(0),O=Array(k).fill(0),q=0;q<k;q++)B[q]=I*A[q][M]-P*A[q][F],O[q]=P*A[q][M]+I*A[q][F];for(var _=0;_<k;_++)A[_][M]=B[_],A[_][F]=O[_];return A}function g(A,E,M,F){for(var k=A.length,I=a(E),P=s(E),B=Array(k).fill(c(0)),O=Array(k).fill(c(0)),q=0;q<k;q++)B[q]=n(l(I,A[q][M]),l(P,A[q][F])),O[q]=t(l(P,A[q][M]),l(I,A[q][F]));for(var _=0;_<k;_++)A[_][M]=B[_],A[_][F]=O[_];return A}function w(A,E,M,F){for(var k=A.length,I=c(a(E)),P=c(s(E)),B=l(I,I),O=l(P,P),q=Array(k).fill(c(0)),_=Array(k).fill(c(0)),K=f(c(2),I,P,A[M][F]),Z=t(n(l(B,A[M][M]),K),l(O,A[F][F])),W=m(l(O,A[M][M]),K,l(B,A[F][F])),R=0;R<k;R++)q[R]=n(l(I,A[M][R]),l(P,A[F][R])),_[R]=t(l(P,A[M][R]),l(I,A[F][R]));A[M][M]=Z,A[F][F]=W,A[M][F]=c(0),A[F][M]=c(0);for(var X=0;X<k;X++)X!==M&&X!==F&&(A[M][X]=q[X],A[X][M]=q[X],A[F][X]=_[X],A[X][F]=_[X]);return A}function b(A,E,M,F){for(var k=A.length,I=Math.cos(E),P=Math.sin(E),B=I*I,O=P*P,q=Array(k).fill(0),_=Array(k).fill(0),K=B*A[M][M]-2*I*P*A[M][F]+O*A[F][F],Z=O*A[M][M]+2*I*P*A[M][F]+B*A[F][F],W=0;W<k;W++)q[W]=I*A[M][W]-P*A[F][W],_[W]=P*A[M][W]+I*A[F][W];A[M][M]=K,A[F][F]=Z,A[M][F]=0,A[F][M]=0;for(var R=0;R<k;R++)R!==M&&R!==F&&(A[M][R]=q[R],A[R][M]=q[R],A[F][R]=_[R],A[R][F]=_[R]);return A}function y(A){for(var E=A.length,M=0,F=[0,1],k=0;k<E;k++)for(var I=k+1;I<E;I++)Math.abs(M)<Math.abs(A[k][I])&&(M=Math.abs(A[k][I]),F=[k,I]);return[F,M]}function S(A){for(var E=A.length,M=0,F=[0,1],k=0;k<E;k++)for(var I=k+1;I<E;I++)i(M)<i(A[k][I])&&(M=i(A[k][I]),F=[k,I]);return[F,M]}function C(A,E,M){var F=A.length,k=Array(F),I;if(M){I=Array(F);for(var P=0;P<F;P++)I[P]=Array(F)}for(var B=0;B<F;B++){for(var O=0,q=A[0],_=0;_<A.length;_++)i(A[_])<i(q)&&(O=_,q=A[O]);if(k[B]=A.splice(O,1)[0],M)for(var K=0;K<F;K++)I[B][K]=E[K][O],E[K].splice(O,1)}if(!M)return{values:k};var Z=I.map((W,R)=>({value:k[R],vector:W}));return{values:k,eigenvectors:Z}}return p}var LP="eigs",zP=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],RA=N(LP,zP,r=>{var{config:e,typed:t,matrix:n,addScalar:i,subtract:o,equal:a,abs:s,atan:l,cos:u,sin:c,multiplyScalar:f,divideScalar:m,inv:p,bignumber:h,multiply:d,add:v,larger:x,column:D,flatten:g,number:w,complex:b,sqrt:y,diag:S,size:C,reshape:A,qr:E,usolve:M,usolveAll:F,im:k,re:I,smaller:P,matrixFromColumns:B,dot:O}=r,q=IA({config:e,addScalar:i,subtract:o,column:D,flatten:g,equal:a,abs:s,atan:l,cos:u,sin:c,multiplyScalar:f,inv:p,bignumber:h,complex:b,multiply:d,add:v}),_=PA({config:e,addScalar:i,subtract:o,multiply:d,multiplyScalar:f,flatten:g,divideScalar:m,sqrt:y,abs:s,bignumber:h,diag:S,size:C,reshape:A,qr:E,inv:p,usolve:M,usolveAll:F,equal:a,complex:b,larger:x,smaller:P,matrixFromColumns:B,dot:O});return t("eigs",{Array:function(U){return K(n(U))},"Array, number|BigNumber":function(U,$){return K(n(U),{precision:$})},"Array, Object"(j,U){return K(n(j),U)},Matrix:function(U){return K(U,{matricize:!0})},"Matrix, number|BigNumber":function(U,$){return K(U,{precision:$,matricize:!0})},"Matrix, Object":function(U,$){var G={matricize:!0};return Mt(G,$),K(U,G)}});function K(j){var U,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G="eigenvectors"in $?$.eigenvectors:!0,Y=(U=$.precision)!==null&&U!==void 0?U:e.relTol,J=Z(j,Y,G);return $.matricize&&(J.values=n(J.values),G&&(J.eigenvectors=J.eigenvectors.map(te=>{var{value:ie,vector:de}=te;return{value:ie,vector:n(de)}}))),G&&Object.defineProperty(J,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),J}function Z(j,U,$){var G=j.toArray(),Y=j.size();if(Y.length!==2||Y[0]!==Y[1])throw new RangeError("Matrix must be square (size: ".concat(_e(Y),")"));var J=Y[0];if(R(G,J,U)&&(X(G,J),W(G,J,U))){var te=ae(j,G,J);return q(G,J,U,te,$)}var ie=ae(j,G,J);return _(G,J,U,ie,$)}function W(j,U,$){for(var G=0;G<U;G++)for(var Y=G;Y<U;Y++)if(x(h(s(o(j[G][Y],j[Y][G]))),$))return!1;return!0}function R(j,U,$){for(var G=0;G<U;G++)for(var Y=0;Y<U;Y++)if(x(h(s(k(j[G][Y]))),$))return!1;return!0}function X(j,U){for(var $=0;$<U;$++)for(var G=0;G<U;G++)j[$][G]=I(j[$][G])}function ae(j,U,$){var G=j.datatype();if(G==="number"||G==="BigNumber"||G==="Complex")return G;for(var Y=!1,J=!1,te=!1,ie=0;ie<$;ie++)for(var de=0;de<$;de++){var z=U[ie][de];if(Fe(z)||Sr(z))Y=!0;else if(Ne(z))J=!0;else if(qt(z))te=!0;else throw TypeError("Unsupported type in Matrix: "+Ye(z))}if(J&&te&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),te){for(var V=0;V<$;V++)for(var ee=0;ee<$;ee++)U[V][ee]=b(U[V][ee]);return"Complex"}if(J){for(var ne=0;ne<$;ne++)for(var le=0;le<$;le++)U[ne][le]=h(U[ne][le]);return"BigNumber"}if(Y){for(var fe=0;fe<$;fe++)for(var ye=0;ye<$;ye++)U[fe][ye]=w(U[fe][ye]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}});var LA="expm",qP=["typed","abs","add","identity","inv","multiply"],zA=N(LA,qP,r=>{var{typed:e,abs:t,add:n,identity:i,inv:o,multiply:a}=r;return e(LA,{Matrix:function(f){var m=f.size();if(m.length!==2||m[0]!==m[1])throw new RangeError("Matrix must be square (size: "+_e(m)+")");for(var p=m[0],h=1e-15,d=s(f),v=l(d,h),x=v.q,D=v.j,g=a(f,Math.pow(2,-D)),w=i(p),b=i(p),y=1,S=g,C=-1,A=1;A<=x;A++)A>1&&(S=a(S,g),C=-C),y=y*(x-A+1)/((2*x-A+1)*A),w=n(w,a(y,S)),b=n(b,a(y*C,S));for(var E=a(o(b),w),M=0;M<D;M++)E=a(E,E);return Ar(f)?f.createSparseMatrix(E):E}});function s(c){for(var f=c.size()[0],m=0,p=0;p<f;p++){for(var h=0,d=0;d<f;d++)h+=t(c.get([p,d]));m=Math.max(h,m)}return m}function l(c,f){for(var m=30,p=0;p<m;p++)for(var h=0;h<=p;h++){var d=p-h;if(u(c,h,d)<f)return{q:h,j:d}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function u(c,f,m){for(var p=1,h=2;h<=f;h++)p*=h;for(var d=p,v=f+1;v<=2*f;v++)d*=v;var x=d*(2*f+1);return 8*Math.pow(c/Math.pow(2,m),2*f)*p*p/(d*x)}});var qA="sqrtm",UP=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],UA=N(qA,UP,r=>{var{typed:e,abs:t,add:n,multiply:i,map:o,sqrt:a,subtract:s,inv:l,size:u,max:c,identity:f}=r,m=1e3,p=1e-6;function h(d){var v,x=0,D=d,g=f(u(d));do{var w=D;if(D=i(.5,n(w,l(g))),g=i(.5,n(g,l(w))),v=c(t(s(D,w))),v>p&&++x>m)throw new Error("computing square root of matrix: iterative method could not converge")}while(v>p);return D}return e(qA,{"Array | Matrix":function(v){var x=we(v)?v.size():Me(v);switch(x.length){case 1:if(x[0]===1)return o(v,a);throw new RangeError("Matrix must be square (size: "+_e(x)+")");case 2:{var D=x[0],g=x[1];if(D===g)return h(v);throw new RangeError("Matrix must be square (size: "+_e(x)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+_e(x)+")")}}})});var VA="sylvester",VP=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],HA=N(VA,VP,r=>{var{typed:e,schur:t,matrixFromColumns:n,matrix:i,multiply:o,range:a,concat:s,transpose:l,index:u,subset:c,add:f,subtract:m,identity:p,lusolve:h,abs:d}=r;return e(VA,{"Matrix, Matrix, Matrix":v,"Array, Matrix, Matrix":function(D,g,w){return v(i(D),g,w)},"Array, Array, Matrix":function(D,g,w){return v(i(D),i(g),w)},"Array, Matrix, Array":function(D,g,w){return v(i(D),g,i(w))},"Matrix, Array, Matrix":function(D,g,w){return v(D,i(g),w)},"Matrix, Array, Array":function(D,g,w){return v(D,i(g),i(w))},"Matrix, Matrix, Array":function(D,g,w){return v(D,g,i(w))},"Array, Array, Array":function(D,g,w){return v(i(D),i(g),i(w)).toArray()}});function v(x,D,g){for(var w=D.size()[0],b=x.size()[0],y=t(x),S=y.T,C=y.U,A=t(o(-1,D)),E=A.T,M=A.U,F=o(o(l(C),g),M),k=a(0,b),I=[],P=(te,ie)=>s(te,ie,1),B=(te,ie)=>s(te,ie,0),O=0;O<w;O++)if(O<w-1&&d(c(E,u(O+1,O)))>1e-5){for(var q=B(c(F,u(k,O)),c(F,u(k,O+1))),_=0;_<O;_++)q=f(q,B(o(I[_],c(E,u(_,O))),o(I[_],c(E,u(_,O+1)))));var K=o(p(b),o(-1,c(E,u(O,O)))),Z=o(p(b),o(-1,c(E,u(O+1,O)))),W=o(p(b),o(-1,c(E,u(O,O+1)))),R=o(p(b),o(-1,c(E,u(O+1,O+1)))),X=B(P(f(S,K),Z),P(W,f(S,R))),ae=h(X,q);I[O]=ae.subset(u(a(0,b),0)),I[O+1]=ae.subset(u(a(b,2*b),0)),O++}else{for(var j=c(F,u(k,O)),U=0;U<O;U++)j=f(j,o(I[U],c(E,u(U,O))));var $=c(E,u(O,O)),G=m(S,o($,p(b)));I[O]=h(G,j)}var Y=i(n(...I)),J=o(C,o(Y,l(M)));return J}});var $A="schur",HP=["typed","matrix","identity","multiply","qr","norm","subtract"],WA=N($A,HP,r=>{var{typed:e,matrix:t,identity:n,multiply:i,qr:o,norm:a,subtract:s}=r;return e($A,{Array:function(c){var f=l(t(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return l(c)}});function l(u){var c=u.size()[0],f=u,m=n(c),p=0,h;do{h=f;var d=o(f),v=d.Q,x=d.R;if(f=i(x,v),m=i(m,v),p++>100)break}while(a(s(f,h))>1e-4);return{U:m,T:f}}});var GA="lyap",$P=["typed","matrix","sylvester","multiply","transpose"],KA=N(GA,$P,r=>{var{typed:e,matrix:t,sylvester:n,multiply:i,transpose:o}=r;return e(GA,{"Matrix, Matrix":function(s,l){return n(s,o(s),i(-1,l))},"Array, Matrix":function(s,l){return n(t(s),o(t(s)),i(-1,l))},"Matrix, Array":function(s,l){return n(s,o(t(s)),t(i(-1,l)))},"Array, Array":function(s,l){return n(t(s),o(t(s)),t(i(-1,l))).toArray()}})});var WP="divide",GP=["typed","matrix","multiply","equalScalar","divideScalar","inv"],YA=N(WP,GP,r=>{var{typed:e,matrix:t,multiply:n,equalScalar:i,divideScalar:o,inv:a}=r,s=nt({typed:e,equalScalar:i}),l=Tt({typed:e});return e("divide",Ya({"Array | Matrix, Array | Matrix":function(c,f){return n(c,a(f))},"DenseMatrix, any":function(c,f){return l(c,f,o,!1)},"SparseMatrix, any":function(c,f){return s(c,f,o,!1)},"Array, any":function(c,f){return l(t(c),f,o,!1).valueOf()},"any, Array | Matrix":function(c,f){return n(c,a(f))}},o.signatures))});var ZA="distance",KP=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],XA=N(ZA,KP,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:i,divideScalar:o,deepEqual:a,sqrt:s,abs:l}=r;return e(ZA,{"Array, Array, Array":function(b,y,S){if(b.length===2&&y.length===2&&S.length===2){if(!c(b))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(y))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(S))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(a(y,S))throw new TypeError("LinePoint1 should not be same with LinePoint2");var C=n(S[1],y[1]),A=n(y[0],S[0]),E=n(i(S[0],y[1]),i(y[0],S[1]));return v(b[0],b[1],C,A,E)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(b,y,S){if(Object.keys(b).length===2&&Object.keys(y).length===2&&Object.keys(S).length===2){if(!c(b))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(y))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(S))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(a(h(y),h(S)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in b&&"pointY"in b&&"lineOnePtX"in y&&"lineOnePtY"in y&&"lineTwoPtX"in S&&"lineTwoPtY"in S){var C=n(S.lineTwoPtY,y.lineOnePtY),A=n(y.lineOnePtX,S.lineTwoPtX),E=n(i(S.lineTwoPtX,y.lineOnePtY),i(y.lineOnePtX,S.lineTwoPtY));return v(b.pointX,b.pointY,C,A,E)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(b,y){if(b.length===2&&y.length===3){if(!c(b))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(y))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return v(b[0],b[1],y[0],y[1],y[2])}else if(b.length===3&&y.length===6){if(!f(b))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!p(y))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return x(b[0],b[1],b[2],y[0],y[1],y[2],y[3],y[4],y[5])}else if(b.length===y.length&&b.length>0){if(!m(b))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!m(y))throw new TypeError("All values of an array should be numbers or BigNumbers");return D(b,y)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(b,y){if(Object.keys(b).length===2&&Object.keys(y).length===3){if(!c(b))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(y))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in b&&"pointY"in b&&"xCoeffLine"in y&&"yCoeffLine"in y&&"constant"in y)return v(b.pointX,b.pointY,y.xCoeffLine,y.yCoeffLine,y.constant);throw new TypeError("Key names do not match")}else if(Object.keys(b).length===3&&Object.keys(y).length===6){if(!f(b))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!p(y))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in b&&"pointY"in b&&"x0"in y&&"y0"in y&&"z0"in y&&"a"in y&&"b"in y&&"c"in y)return x(b.pointX,b.pointY,b.pointZ,y.x0,y.y0,y.z0,y.a,y.b,y.c);throw new TypeError("Key names do not match")}else if(Object.keys(b).length===2&&Object.keys(y).length===2){if(!c(b))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(y))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in b&&"pointOneY"in b&&"pointTwoX"in y&&"pointTwoY"in y)return D([b.pointOneX,b.pointOneY],[y.pointTwoX,y.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(b).length===3&&Object.keys(y).length===3){if(!f(b))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(y))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in b&&"pointOneY"in b&&"pointOneZ"in b&&"pointTwoX"in y&&"pointTwoY"in y&&"pointTwoZ"in y)return D([b.pointOneX,b.pointOneY,b.pointOneZ],[y.pointTwoX,y.pointTwoY,y.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(b){if(!d(b))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return g(b)}});function u(w){return typeof w=="number"||Ne(w)}function c(w){return w.constructor!==Array&&(w=h(w)),u(w[0])&&u(w[1])}function f(w){return w.constructor!==Array&&(w=h(w)),u(w[0])&&u(w[1])&&u(w[2])}function m(w){return Array.isArray(w)||(w=h(w)),w.every(u)}function p(w){return w.constructor!==Array&&(w=h(w)),u(w[0])&&u(w[1])&&u(w[2])&&u(w[3])&&u(w[4])&&u(w[5])}function h(w){for(var b=Object.keys(w),y=[],S=0;S<b.length;S++)y.push(w[b[S]]);return y}function d(w){if(w[0].length===2&&u(w[0][0])&&u(w[0][1])){if(w.some(b=>b.length!==2||!u(b[0])||!u(b[1])))return!1}else if(w[0].length===3&&u(w[0][0])&&u(w[0][1])&&u(w[0][2])){if(w.some(b=>b.length!==3||!u(b[0])||!u(b[1])||!u(b[2])))return!1}else return!1;return!0}function v(w,b,y,S,C){var A=l(t(t(i(y,w),i(S,b)),C)),E=s(t(i(y,y),i(S,S)));return o(A,E)}function x(w,b,y,S,C,A,E,M,F){var k=[n(i(n(C,b),F),i(n(A,y),M)),n(i(n(A,y),E),i(n(S,w),F)),n(i(n(S,w),M),i(n(C,b),E))];k=s(t(t(i(k[0],k[0]),i(k[1],k[1])),i(k[2],k[2])));var I=s(t(t(i(E,E),i(M,M)),i(F,F)));return o(k,I)}function D(w,b){for(var y=w.length,S=0,C=0,A=0;A<y;A++)C=n(w[A],b[A]),S=t(i(C,C),S);return s(S)}function g(w){for(var b=[],y=[],S=[],C=0;C<w.length-1;C++)for(var A=C+1;A<w.length;A++)w[0].length===2?(y=[w[C][0],w[C][1]],S=[w[A][0],w[A][1]]):w[0].length===3&&(y=[w[C][0],w[C][1],w[C][2]],S=[w[A][0],w[A][1],w[A][2]]),b.push(D(y,S));return b}});var YP="intersect",ZP=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],JA=N(YP,ZP,r=>{var{typed:e,config:t,abs:n,add:i,addScalar:o,matrix:a,multiply:s,multiplyScalar:l,divideScalar:u,subtract:c,smaller:f,equalScalar:m,flatten:p,isZero:h,isNumeric:d}=r;return e("intersect",{"Array, Array, Array":v,"Array, Array, Array, Array":x,"Matrix, Matrix, Matrix":function(M,F,k){var I=v(M.valueOf(),F.valueOf(),k.valueOf());return I===null?null:a(I)},"Matrix, Matrix, Matrix, Matrix":function(M,F,k,I){var P=x(M.valueOf(),F.valueOf(),k.valueOf(),I.valueOf());return P===null?null:a(P)}});function v(E,M,F){if(E=D(E),M=D(M),F=D(F),!w(E))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!w(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!b(F))throw new TypeError("Array with 4 numbers expected as third argument");return A(E[0],E[1],E[2],M[0],M[1],M[2],F[0],F[1],F[2],F[3])}function x(E,M,F,k){if(E=D(E),M=D(M),F=D(F),k=D(k),E.length===2){if(!g(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!g(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!g(F))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!g(k))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return y(E,M,F,k)}else if(E.length===3){if(!w(E))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!w(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!w(F))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!w(k))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return C(E[0],E[1],E[2],M[0],M[1],M[2],F[0],F[1],F[2],k[0],k[1],k[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function D(E){return E.length===1?E[0]:E.length>1&&Array.isArray(E[0])&&E.every(M=>Array.isArray(M)&&M.length===1)?p(E):E}function g(E){return E.length===2&&d(E[0])&&d(E[1])}function w(E){return E.length===3&&d(E[0])&&d(E[1])&&d(E[2])}function b(E){return E.length===4&&d(E[0])&&d(E[1])&&d(E[2])&&d(E[3])}function y(E,M,F,k){var I=E,P=F,B=c(I,M),O=c(P,k),q=c(l(B[0],O[1]),l(O[0],B[1]));if(h(q)||f(n(q),t.relTol))return null;var _=l(O[0],I[1]),K=l(O[1],I[0]),Z=l(O[0],P[1]),W=l(O[1],P[0]),R=u(o(c(c(_,K),Z),W),q);return i(s(B,R),I)}function S(E,M,F,k,I,P,B,O,q,_,K,Z){var W=l(c(E,M),c(F,k)),R=l(c(I,P),c(B,O)),X=l(c(q,_),c(K,Z));return o(o(W,R),X)}function C(E,M,F,k,I,P,B,O,q,_,K,Z){var W=S(E,B,_,B,M,O,K,O,F,q,Z,q),R=S(_,B,k,E,K,O,I,M,Z,q,P,F),X=S(E,B,k,E,M,O,I,M,F,q,P,F),ae=S(_,B,_,B,K,O,K,O,Z,q,Z,q),j=S(k,E,k,E,I,M,I,M,P,F,P,F),U=c(l(W,R),l(X,ae)),$=c(l(j,ae),l(R,R));if(h($))return null;var G=u(U,$),Y=u(o(W,l(G,R)),ae),J=o(E,l(G,c(k,E))),te=o(M,l(G,c(I,M))),ie=o(F,l(G,c(P,F))),de=o(B,l(Y,c(_,B))),z=o(O,l(Y,c(K,O))),V=o(q,l(Y,c(Z,q)));return m(J,de)&&m(te,z)&&m(ie,V)?[J,te,ie]:null}function A(E,M,F,k,I,P,B,O,q,_){var K=l(E,B),Z=l(k,B),W=l(M,O),R=l(I,O),X=l(F,q),ae=l(P,q),j=c(c(c(_,K),W),X),U=c(c(c(o(o(Z,R),ae),K),W),X),$=u(j,U),G=o(E,l($,c(k,E))),Y=o(M,l($,c(I,M))),J=o(F,l($,c(P,F)));return[G,Y,J]}});var jA="sum",XP=["typed","config","add","numeric"],Dl=N(jA,XP,r=>{var{typed:e,config:t,add:n,numeric:i}=r;return e(jA,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":a,"...":function(l){if(zr(l))throw new TypeError("Scalar values expected in function sum");return o(l)}});function o(s){var l;return rr(s,function(u){try{l=l===void 0?u:n(l,u)}catch(c){throw Ct(c,"sum",u)}}),l===void 0&&(l=i(0,t.number)),typeof l=="string"&&(l=i(l,Qt(l,t))),l}function a(s,l){try{var u=Kn(s,l,n);return u}catch(c){throw Ct(c,"sum")}}});var Sl="cumsum",JP=["typed","add","unaryPlus"],Al=N(Sl,JP,r=>{var{typed:e,add:t,unaryPlus:n}=r;return e(Sl,{Array:i,Matrix:function(u){return u.create(i(u.valueOf(),u.datatype()))},"Array, number | BigNumber":a,"Matrix, number | BigNumber":function(u,c){return u.create(a(u.valueOf(),c),u.datatype())},"...":function(u){if(zr(u))throw new TypeError("All values expected to be scalar in function cumsum");return i(u)}});function i(l){try{return o(l)}catch(u){throw Ct(u,Sl)}}function o(l){if(l.length===0)return[];for(var u=[n(l[0])],c=1;c<l.length;++c)u.push(t(u[c-1],l[c]));return u}function a(l,u){var c=Me(l);if(u<0||u>=c.length)throw new Wt(u,c.length);try{return s(l,u)}catch(f){throw Ct(f,Sl)}}function s(l,u){var c,f,m;if(u<=0){var p=l[0][0];if(Array.isArray(p)){for(m=ds(l),f=[],c=0;c<m.length;c++)f[c]=s(m[c],u-1);return f}else return o(l)}else{for(f=[],c=0;c<l.length;c++)f[c]=s(l[c],u-1);return f}}});var QA="mean",jP=["typed","add","divide"],Nl=N(QA,jP,r=>{var{typed:e,add:t,divide:n}=r;return e(QA,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":i,"...":function(s){if(zr(s))throw new TypeError("Scalar values expected in function mean");return o(s)}});function i(a,s){try{var l=Kn(a,s,t),u=Array.isArray(a)?Me(a):a.size();return n(l,u[s])}catch(c){throw Ct(c,"mean")}}function o(a){var s,l=0;if(rr(a,function(u){try{s=s===void 0?u:t(s,u),l++}catch(c){throw Ct(c,"mean",u)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return n(s,l)}});var eN="median",QP=["typed","add","divide","compare","partitionSelect"],tN=N(eN,QP,r=>{var{typed:e,add:t,divide:n,compare:i,partitionSelect:o}=r;function a(u){try{u=qe(u.valueOf());var c=u.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,m=o(u,f+1),p=u[f],h=0;h<f;++h)i(u[h],p)>0&&(p=u[h]);return l(p,m)}else{var d=o(u,(c-1)/2);return s(d)}}catch(v){throw Ct(v,"median")}}var s=e({"number | BigNumber | Complex | Unit":function(c){return c}}),l=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return n(t(c,f),2)}});return e(eN,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(zr(c))throw new TypeError("Scalar values expected in function median");return a(c)}})});var rN="mad",eI=["typed","abs","map","median","subtract"],nN=N(rN,eI,r=>{var{typed:e,abs:t,map:n,median:i,subtract:o}=r;return e(rN,{"Array | Matrix":a,"...":function(l){return a(l)}});function a(s){if(s=qe(s.valueOf()),s.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=i(s);return i(n(s,function(u){return t(o(u,l))}))}catch(u){throw u instanceof TypeError&&u.message.includes("median")?new TypeError(u.message.replace("median","mad")):Ct(u,"mad")}}});var yf="unbiased",iN="variance",tI=["typed","add","subtract","multiply","divide","apply","isNaN"],Cl=N(iN,tI,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:o,apply:a,isNaN:s}=r;return e(iN,{"Array | Matrix":function(f){return l(f,yf)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(f,m){return u(f,m,yf)},"Array | Matrix, number | BigNumber, string":u,"...":function(f){return l(f,yf)}});function l(c,f){var m,p=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(rr(c,function(v){try{m=m===void 0?v:t(m,v),p++}catch(x){throw Ct(x,"variance",v)}}),p===0)throw new Error("Cannot calculate variance of an empty array");var h=o(m,p);if(m=void 0,rr(c,function(v){var x=n(v,h);m=m===void 0?i(x,x):t(m,i(x,x))}),s(m))return m;switch(f){case"uncorrected":return o(m,p);case"biased":return o(m,p+1);case"unbiased":{var d=Ne(m)?m.mul(0):0;return p===1?d:o(m,p-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(c,f,m){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return a(c,f,p=>l(p,m))}catch(p){throw Ct(p,"variance")}}});var oN="quantileSeq",rI=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],El=N(oN,rI,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:o,multiply:a,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:m}=r,p=ro({typed:e,isInteger:u});return e(oN,{"Array | Matrix, number | BigNumber":(D,g)=>d(D,g,!1),"Array | Matrix, number | BigNumber, number":(D,g,w)=>h(D,g,!1,w,d),"Array | Matrix, number | BigNumber, boolean":d,"Array | Matrix, number | BigNumber, boolean, number":(D,g,w,b)=>h(D,g,w,b,d),"Array | Matrix, Array | Matrix":(D,g)=>v(D,g,!1),"Array | Matrix, Array | Matrix, number":(D,g,w)=>h(D,g,!1,w,v),"Array | Matrix, Array | Matrix, boolean":v,"Array | Matrix, Array | Matrix, boolean, number":(D,g,w,b)=>h(D,g,w,b,v)});function h(D,g,w,b,y){return p(D,b,S=>y(S,g,w))}function d(D,g,w){var b,y=D.valueOf();if(c(g,0))throw new Error("N/prob must be non-negative");if(f(g,1))return Fe(g)?x(y,g,w):t(x(y,g,w));if(m(g,1)){if(!u(g))throw new Error("N must be a positive integer");if(m(g,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var S=n(g,1);b=[];for(var C=0;c(C,g);C++){var A=o(C+1,S);b.push(x(y,A,w))}return Fe(g)?b:t(b)}}function v(D,g,w){for(var b=D.valueOf(),y=g.valueOf(),S=[],C=0;C<y.length;++C)S.push(x(b,y[C],w));return S}function x(D,g,w){var b=qe(D),y=b.length;if(y===0)throw new Error("Cannot calculate quantile of an empty sequence");var S=Fe(g)?g*(y-1):g.times(y-1),C=Fe(g)?Math.floor(S):S.floor().toNumber(),A=Fe(g)?S%1:S.minus(C);if(u(S))return w?b[S]:s(b,Fe(g)?S:S.valueOf());var E,M;if(w)E=b[C],M=b[C+1];else{M=s(b,C+1),E=b[C];for(var F=0;F<C;++F)l(b[F],E)>0&&(E=b[F])}return n(a(E,i(1,A)),a(M,A))}});var aN="std",nI=["typed","map","sqrt","variance"],Ml=N(aN,nI,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r;return e(aN,{"Array | Matrix":o,"Array | Matrix, string":o,"Array | Matrix, number | BigNumber":o,"Array | Matrix, number | BigNumber, string":o,"...":function(s){return o(s)}});function o(a,s){if(a.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=i.apply(null,arguments);return Dt(l)?t(l,n):n(l)}catch(u){throw u instanceof TypeError&&u.message.includes(" variance")?new TypeError(u.message.replace(" variance"," std")):u}}});var sN="corr",iI=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],lN=N(sN,iI,r=>{var{typed:e,matrix:t,sqrt:n,sum:i,add:o,subtract:a,multiply:s,pow:l,divide:u}=r;return e(sN,{"Array, Array":function(p,h){return c(p,h)},"Matrix, Matrix":function(p,h){var d=c(p.toArray(),h.toArray());return Array.isArray(d)?t(d):d}});function c(m,p){var h=[];if(Array.isArray(m[0])&&Array.isArray(p[0])){if(m.length!==p.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var d=0;d<m.length;d++){if(m[d].length!==p[d].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");h.push(f(m[d],p[d]))}return h}else{if(m.length!==p.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(m,p)}}function f(m,p){var h=m.length,d=i(m),v=i(p),x=m.reduce((y,S,C)=>o(y,s(S,p[C])),0),D=i(m.map(y=>l(y,2))),g=i(p.map(y=>l(y,2))),w=a(s(h,x),s(d,v)),b=n(s(a(s(h,D),l(d,2)),a(s(h,g),l(v,2))));return u(w,b)}});var uN="combinations",oI=["typed"],fN=N(uN,oI,r=>{var{typed:e}=r;return e(uN,{"number, number":Bc,"BigNumber, BigNumber":function(n,i){var o=n.constructor,a,s,l=n.minus(i),u=new o(1);if(!cN(n)||!cN(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(n))throw new TypeError("k must be less than n in function combinations");if(a=u,i.lt(l))for(s=u;s.lte(l);s=s.plus(u))a=a.times(i.plus(s)).dividedBy(s);else for(s=u;s.lte(i);s=s.plus(u))a=a.times(l.plus(s)).dividedBy(s);return a}})});function cN(r){return r.isInteger()&&r.gte(0)}var mN="combinationsWithRep",aI=["typed"],hN=N(mN,aI,r=>{var{typed:e}=r;return e(mN,{"number, number":function(n,i){if(!xe(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!xe(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<n-1){var o=Cr(n,n+i-1);return o/Cr(1,i)}var a=Cr(i+1,n+i-1);return a/Cr(1,n-1)},"BigNumber, BigNumber":function(n,i){var o=n.constructor,a,s,l=new o(1),u=n.minus(l);if(!pN(n)||!pN(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(l))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(a=l,i.lt(u))for(s=l;s.lte(u);s=s.plus(l))a=a.times(i.plus(s)).dividedBy(s);else for(s=l;s.lte(i);s=s.plus(l))a=a.times(u.plus(s)).dividedBy(s);return a}})});function pN(r){return r.isInteger()&&r.gte(0)}var dN="gamma",sI=["typed","config","multiplyScalar","pow","BigNumber","Complex"],gN=N(dN,sI,r=>{var{typed:e,config:t,multiplyScalar:n,pow:i,BigNumber:o,Complex:a}=r;function s(u){if(u.im===0)return Ho(u.re);if(u.re<.5){var c=new a(1-u.re,-u.im),f=new a(Math.PI*u.re,Math.PI*u.im);return new a(Math.PI).div(f.sin()).div(s(c))}u=new a(u.re-1,u.im);for(var m=new a(yi[0],0),p=1;p<yi.length;++p){var h=new a(yi[p],0);m=m.add(h.div(u.add(p)))}var d=new a(u.re+Pc+.5,u.im),v=Math.sqrt(2*Math.PI),x=d.pow(u.add(.5)),D=d.neg().exp();return m.mul(v).mul(x).mul(D)}return e(dN,{number:Ho,Complex:s,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new o(1/0):l(c.minus(1));if(!c.isFinite())return new o(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function l(u){if(u<8)return new o([1,1,2,6,24,120,720,5040][u]);var c=t.precision+(Math.log(u.toNumber())|0),f=o.clone({precision:c});if(u%2===1)return u.times(l(new o(u-1)));for(var m=u,p=new f(u),h=u.toNumber();m>2;)m-=2,h+=m,p=p.times(h);return new o(p.toPrecision(o.precision))}});var vN="lgamma",lI=["Complex","typed"],yN=N(vN,lI,r=>{var{Complex:e,typed:t}=r,n=7,i=7,o=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return t(vN,{number:$o,Complex:a,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function a(u){var c=6.283185307179586,f=1.1447298858494002,m=.1;if(u.isNaN())return new e(NaN,NaN);if(u.im===0)return new e($o(u.re),0);if(u.re>=n||Math.abs(u.im)>=i)return s(u);if(u.re<=m){var p=Xp(c,u.im)*Math.floor(.5*u.re+.25),h=u.mul(Math.PI).sin().log(),d=a(new e(1-u.re,-u.im));return new e(f,p).sub(h).sub(d)}else return u.im>=0?l(u):l(u.conjugate()).conjugate()}function s(u){for(var c=u.sub(.5).mul(u.log()).sub(u).add(Ic),f=new e(1,0).div(u),m=f.div(u),p=o[0],h=o[1],d=2*m.re,v=m.re*m.re+m.im*m.im,x=2;x<8;x++){var D=h;h=-v*p+o[x],p=d*p+D}var g=f.mul(m.mul(p).add(h));return c.add(g)}function l(u){var c=0,f=0,m=u;for(u=u.add(1);u.re<=n;){m=m.mul(u);var p=m.im<0?1:0;p!==0&&f===0&&c++,f=p,u=u.add(1)}return s(u).sub(m.log()).sub(new e(0,c*2*Math.PI*1))}});var xN="factorial",uI=["typed","gamma"],bN=N(xN,uI,r=>{var{typed:e,gamma:t}=r;return e(xN,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return t(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return t(i.plus(1))},"Array | Matrix":e.referToSelf(n=>i=>De(i,n))})});var wN="kldivergence",cI=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],DN=N(wN,cI,r=>{var{typed:e,matrix:t,divide:n,sum:i,multiply:o,map:a,dotDivide:s,log:l,isNumeric:u}=r;return e(wN,{"Array, Array":function(m,p){return c(t(m),t(p))},"Matrix, Array":function(m,p){return c(m,t(p))},"Array, Matrix":function(m,p){return c(t(m),p)},"Matrix, Matrix":function(m,p){return c(m,p)}});function c(f,m){var p=m.size().length,h=f.size().length;if(p>1)throw new Error("first object must be one dimensional");if(h>1)throw new Error("second object must be one dimensional");if(p!==h)throw new Error("Length of two vectors must be equal");var d=i(f);if(d===0)throw new Error("Sum of elements in first object must be non zero");var v=i(m);if(v===0)throw new Error("Sum of elements in second object must be non zero");var x=n(f,i(f)),D=n(m,i(m)),g=i(o(x,a(s(x,D),w=>l(w))));return u(g)?g:Number.NaN}});var SN="multinomial",fI=["typed","add","divide","multiply","factorial","isInteger","isPositive"],AN=N(SN,fI,r=>{var{typed:e,add:t,divide:n,multiply:i,factorial:o,isInteger:a,isPositive:s}=r;return e(SN,{"Array | Matrix":function(u){var c=0,f=1;return rr(u,function(m){if(!a(m)||!s(m))throw new TypeError("Positive integer value expected in function multinomial");c=t(c,m),f=i(f,o(m))}),n(o(c),f)}})});var NN="permutations",mI=["typed","factorial"],EN=N(NN,mI,r=>{var{typed:e,factorial:t}=r;return e(NN,{"number | BigNumber":t,"number, number":function(i,o){if(!xe(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!xe(o)||o<0)throw new TypeError("Positive integer value expected in function permutations");if(o>i)throw new TypeError("second argument k must be less than or equal to first argument n");return Cr(i-o+1,i)},"BigNumber, BigNumber":function(i,o){var a,s;if(!CN(i)||!CN(o))throw new TypeError("Positive integer value expected in function permutations");if(o.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var l=i.mul(0).add(1);for(a=l,s=i.minus(o).plus(1);s.lte(i);s=s.plus(1))a=a.times(s);return a}})});function CN(r){return r.isInteger()&&r.gte(0)}var Nf=fi($N(),1),xI=(0,Nf.default)(Date.now());function _n(r){var e;function t(i){e=i===null?xI:(0,Nf.default)(String(i))}t(r);function n(){return e()}return n}var WN="pickRandom",bI=["typed","config","?on"],GN=N(WN,bI,r=>{var{typed:e,config:t,on:n}=r,i=_n(t.randomSeed);return n&&n("config",function(a,s){a.randomSeed!==s.randomSeed&&(i=_n(a.randomSeed))}),e(WN,{"Array | Matrix":function(s){return o(s,{})},"Array | Matrix, Object":function(s,l){return o(s,l)},"Array | Matrix, number":function(s,l){return o(s,{number:l})},"Array | Matrix, Array | Matrix":function(s,l){return o(s,{weights:l})},"Array | Matrix, Array | Matrix, number":function(s,l,u){return o(s,{number:u,weights:l})},"Array | Matrix, number, Array | Matrix":function(s,l,u){return o(s,{number:l,weights:u})}});function o(a,s){var{number:l,weights:u,elementWise:c=!0}=s,f=typeof l>"u";f&&(l=1);var m=we(a)?a.create:we(u)?u.create:null;a=a.valueOf(),u&&(u=u.valueOf()),c===!0&&(a=qe(a),u=qe(u));var p=0;if(typeof u<"u"){if(u.length!==a.length)throw new Error("Weights must have the same length as possibles");for(var h=0,d=u.length;h<d;h++){if(!Fe(u[h])||u[h]<0)throw new Error("Weights must be an array of positive numbers");p+=u[h]}}for(var v=a.length,x=[],D;x.length<l;){if(typeof u>"u")D=a[Math.floor(i()*v)];else for(var g=i()*p,w=0,b=a.length;w<b;w++)if(g-=u[w],g<0){D=a[w];break}x.push(D)}return f?x[0]:m?m(x):x}});function Yo(r,e){var t=[];if(r=r.slice(0),r.length>1)for(var n=0,i=r.shift();n<i;n++)t.push(Yo(r,e));else for(var o=0,a=r.shift();o<a;o++)t.push(e());return t}var KN="random",wI=["typed","config","?on"],YN=N(KN,wI,r=>{var{typed:e,config:t,on:n}=r,i=_n(t.randomSeed);return n&&n("config",function(s,l){s.randomSeed!==l.randomSeed&&(i=_n(s.randomSeed))}),e(KN,{"":()=>a(0,1),number:s=>a(0,s),"number, number":(s,l)=>a(s,l),"Array | Matrix":s=>o(s,0,1),"Array | Matrix, number":(s,l)=>o(s,0,l),"Array | Matrix, number, number":(s,l,u)=>o(s,l,u)});function o(s,l,u){var c=Yo(s.valueOf(),()=>a(l,u));return we(s)?s.create(c,"number"):c}function a(s,l){return s+i()*(l-s)}});var ZN="randomInt",DI=["typed","config","?on"],XN=N(ZN,DI,r=>{var{typed:e,config:t,on:n}=r,i=_n(t.randomSeed);return n&&n("config",function(s,l){s.randomSeed!==l.randomSeed&&(i=_n(s.randomSeed))}),e(ZN,{"":()=>a(0,1),number:s=>a(0,s),"number, number":(s,l)=>a(s,l),"Array | Matrix":s=>o(s,0,1),"Array | Matrix, number":(s,l)=>o(s,0,l),"Array | Matrix, number, number":(s,l,u)=>o(s,l,u)});function o(s,l,u){var c=Yo(s.valueOf(),()=>a(l,u));return we(s)?s.create(c,"number"):c}function a(s,l){return Math.floor(s+i()*(l-s))}});var JN="stirlingS2",SI=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],jN=N(JN,SI,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:i,divideScalar:o,pow:a,factorial:s,combinations:l,isNegative:u,isInteger:c,number:f,bignumber:m,larger:p}=r,h=[],d=[];return e(JN,{"number | BigNumber, number | BigNumber":function(x,D){if(!c(x)||u(x)||!c(D)||u(D))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(p(D,x))throw new TypeError("k must be less than or equal to n in function stirlingS2");var g=!(Fe(x)&&Fe(D)),w=g?d:h,b=g?m:f,y=f(x),S=f(D);if(w[y]&&w[y].length>S)return w[y][S];for(var C=0;C<=y;++C)if(w[C]||(w[C]=[b(C===0?1:0)]),C!==0)for(var A=w[C],E=w[C-1],M=A.length;M<=C&&M<=S;++M)M===C?A[M]=1:A[M]=t(i(b(M),E[M]),E[M-1]);return w[y][S]}})});var QN="bellNumbers",AI=["typed","addScalar","isNegative","isInteger","stirlingS2"],e2=N(QN,AI,r=>{var{typed:e,addScalar:t,isNegative:n,isInteger:i,stirlingS2:o}=r;return e(QN,{"number | BigNumber":function(s){if(!i(s)||n(s))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var l=0,u=0;u<=s;u++)l=t(l,o(s,u));return l}})});var t2="catalan",NI=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],r2=N(t2,NI,r=>{var{typed:e,addScalar:t,divideScalar:n,multiplyScalar:i,combinations:o,isNegative:a,isInteger:s}=r;return e(t2,{"number | BigNumber":function(u){if(!s(u)||a(u))throw new TypeError("Non-negative integer value expected in function catalan");return n(o(i(u,2),u),t(u,1))}})});var n2="composition",CI=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],i2=N(n2,CI,r=>{var{typed:e,addScalar:t,combinations:n,isPositive:i,isNegative:o,isInteger:a,larger:s}=r;return e(n2,{"number | BigNumber, number | BigNumber":function(u,c){if(!a(u)||!i(u)||!a(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(s(c,u))throw new TypeError("k must be less than or equal to n in function composition");return n(t(u,-1),t(c,-1))}})});var o2="leafCount",EI=["parse","typed"],a2=N(o2,EI,r=>{var{parse:e,typed:t}=r;function n(i){var o=0;return i.forEach(a=>{o+=n(a)}),o||1}return t(o2,{Node:function(o){return n(o)}})});function Cf(r){return ze(r)||lt(r)&&r.isUnary()&&ze(r.args[0])}function Zo(r){return!!(ze(r)||(Xt(r)||lt(r))&&r.args.every(Zo)||Vt(r)&&Zo(r.content))}function s2(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ef(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?s2(Object(t),!0).forEach(function(n){et(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):s2(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var MI="simplifyUtil",TI=["FunctionNode","OperatorNode","SymbolNode"],fo=N(MI,TI,r=>{var{FunctionNode:e,OperatorNode:t,SymbolNode:n}=r,i=!0,o=!1,a="defaultF",s={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:o,total:i,commutative:o,associative:o},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:o,total:i,commutative:o,associative:o},paren:{trivial:i,total:i,commutative:i,associative:o},defaultF:{trivial:o,total:i,commutative:o,associative:o}},l={divide:{total:o},log:{total:o}},u={subtract:{total:o},abs:{trivial:i},log:{total:i}};function c(g,w){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s,y=a;if(typeof g=="string"?y=g:lt(g)?y=g.fn.toString():Xt(g)?y=g.name:Vt(g)&&(y="paren"),be(b,y)){var S=b[y];if(be(S,w))return S[w];if(be(s,y))return s[y][w]}if(be(b,a)){var C=b[a];return be(C,w)?C[w]:s[a][w]}if(be(s,y)){var A=s[y];if(be(A,w))return A[w]}return s[a][w]}function f(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return c(g,"commutative",w)}function m(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return c(g,"associative",w)}function p(g,w){var b=Ef({},g);for(var y in w)be(g,y)?b[y]=Ef(Ef({},w[y]),g[y]):b[y]=w[y];return b}function h(g,w){if(!g.args||g.args.length===0)return g;g.args=d(g,w);for(var b=0;b<g.args.length;b++)h(g.args[b],w)}function d(g,w){var b,y=[],S=function(A){for(var E=0;E<A.args.length;E++){var M=A.args[E];lt(M)&&b===M.op?S(M):y.push(M)}};return m(g,w)?(b=g.op,S(g),y):g.args}function v(g,w){if(!(!g.args||g.args.length===0)){for(var b=D(g),y=g.args.length,S=0;S<y;S++)v(g.args[S],w);if(y>2&&m(g,w)){for(var C=g.args.pop();g.args.length>0;)C=b([g.args.pop(),C]);g.args=C.args}}}function x(g,w){if(!(!g.args||g.args.length===0)){for(var b=D(g),y=g.args.length,S=0;S<y;S++)x(g.args[S],w);if(y>2&&m(g,w)){for(var C=g.args.shift();g.args.length>0;)C=b([C,g.args.shift()]);g.args=C.args}}}function D(g){return lt(g)?function(w){try{return new t(g.op,g.fn,w,g.implicit)}catch(b){return console.error(b),[]}}:function(w){return new e(new n(g.name),w)}}return{createMakeNodeFunction:D,hasProperty:c,isCommutative:f,isAssociative:m,mergeContext:p,flatten:h,allChildren:d,unflattenr:v,unflattenl:x,defaultContext:s,realContext:l,positiveContext:u}});var FI="simplify",OI=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],l2=N(FI,OI,r=>{var{typed:e,parse:t,equal:n,resolve:i,simplifyConstant:o,simplifyCore:a,AccessorNode:s,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:f,ObjectNode:m,OperatorNode:p,ParenthesisNode:h,SymbolNode:d}=r,{hasProperty:v,isCommutative:x,isAssociative:D,mergeContext:g,flatten:w,unflattenr:b,unflattenl:y,createMakeNodeFunction:S,defaultContext:C,realContext:A,positiveContext:E}=fo({FunctionNode:c,OperatorNode:p,SymbolNode:d});e.addConversion({from:"Object",to:"Map",convert:Cn});var M=e("simplify",{Node:q,"Node, Map":(U,$)=>q(U,!1,$),"Node, Map, Object":(U,$,G)=>q(U,!1,$,G),"Node, Array":q,"Node, Array, Map":q,"Node, Array, Map, Object":q});e.removeConversion({from:"Object",to:"Map",convert:Cn}),M.defaultContext=C,M.realContext=A,M.positiveContext=E;function F(U){return U.transform(function($){return Vt($)?F($.content):$})}var k={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};M.rules=[a,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},o,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},o,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function I(U,$){var G={};if(U.s){var Y=U.s.split("->");if(Y.length===2)G.l=Y[0],G.r=Y[1];else throw SyntaxError("Could not parse rule: "+U.s)}else G.l=U.l,G.r=U.r;G.l=F(t(G.l)),G.r=F(t(G.r));for(var J of["imposeContext","repeat","assuming"])J in U&&(G[J]=U[J]);if(U.evaluate&&(G.evaluate=t(U.evaluate)),D(G.l,$)){var te=!x(G.l,$),ie;te&&(ie=O());var de=S(G.l),z=O();G.expanded={},G.expanded.l=de([G.l,z]),w(G.expanded.l,$),b(G.expanded.l,$),G.expanded.r=de([G.r,z]),te&&(G.expandedNC1={},G.expandedNC1.l=de([ie,G.l]),G.expandedNC1.r=de([ie,G.r]),G.expandedNC2={},G.expandedNC2.l=de([ie,G.expanded.l]),G.expandedNC2.r=de([ie,G.expanded.r]))}return G}function P(U,$){for(var G=[],Y=0;Y<U.length;Y++){var J=U[Y],te=void 0,ie=typeof J;switch(ie){case"string":J={s:J};case"object":te=I(J,$);break;case"function":te=J;break;default:throw TypeError("Unsupported type of rule: "+ie)}G.push(te)}return G}var B=0;function O(){return new d("_p"+B++)}function q(U,$){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Un(),Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},J=Y.consoleDebug;$=P($||M.rules,Y.context);var te=i(U,G);te=F(te);for(var ie={},de=te.toString({parenthesis:"all"});!ie[de];){ie[de]=!0,B=0;var z=de;J&&console.log("Working on: ",de);for(var V=0;V<$.length;V++){var ee="";if(typeof $[V]=="function"?(te=$[V](te,Y),J&&(ee=$[V].name)):(w(te,Y.context),te=K(te,$[V],Y.context),J&&(ee="".concat($[V].l.toString()," -> ").concat($[V].r.toString()))),J){var ne=te.toString({parenthesis:"all"});ne!==z&&(console.log("Applying",ee,"produced",ne),z=ne)}y(te,Y.context)}de=te.toString({parenthesis:"all"})}return te}function _(U,$,G){var Y=U;if(U)for(var J=0;J<U.length;++J){var te=K(U[J],$,G);te!==U[J]&&(Y===U&&(Y=U.slice()),Y[J]=te)}return Y}function K(U,$,G){if($.assuming){for(var Y in $.assuming)for(var J in $.assuming[Y])if(v(Y,J,G)!==$.assuming[Y][J])return U}var te=g($.imposeContext,G),ie=U;if(ie instanceof p||ie instanceof c){var de=_(ie.args,$,G);de!==ie.args&&(ie=ie.clone(),ie.args=de)}else if(ie instanceof h){if(ie.content){var z=K(ie.content,$,G);z!==ie.content&&(ie=new h(z))}}else if(ie instanceof l){var V=_(ie.items,$,G);V!==ie.items&&(ie=new l(V))}else if(ie instanceof s){var ee=ie.object;ie.object&&(ee=K(ie.object,$,G));var ne=ie.index;ie.index&&(ne=K(ie.index,$,G)),(ee!==ie.object||ne!==ie.index)&&(ie=new s(ee,ne))}else if(ie instanceof f){var le=_(ie.dimensions,$,G);le!==ie.dimensions&&(ie=new f(le))}else if(ie instanceof m){var fe=!1,ye={};for(var Se in ie.properties)ye[Se]=K(ie.properties[Se],$,G),ye[Se]!==ie.properties[Se]&&(fe=!0);fe&&(ie=new m(ye))}var Ue=$.r,Pe=ae($.l,ie,te)[0];if(!Pe&&$.expanded&&(Ue=$.expanded.r,Pe=ae($.expanded.l,ie,te)[0]),!Pe&&$.expandedNC1&&(Ue=$.expandedNC1.r,Pe=ae($.expandedNC1.l,ie,te)[0],Pe||(Ue=$.expandedNC2.r,Pe=ae($.expandedNC2.l,ie,te)[0])),Pe){var ut=ie.implicit;ie=Ue.clone(),ut&&"implicit"in Ue&&(ie.implicit=!0),ie=ie.transform(function(Xe){return Xe.isSymbolNode&&be(Pe.placeholders,Xe.name)?Pe.placeholders[Xe.name].clone():Xe})}return $.repeat&&ie!==U&&(ie=K(ie,$,G)),ie}function Z(U,$){var G=[],Y,J,te=S(U);if(x(U,$))for(var ie=0;ie<U.args.length;ie++)J=U.args.slice(0),J.splice(ie,1),Y=J.length===1?J[0]:te(J),G.push(te([U.args[ie],Y]));else for(var de=1;de<U.args.length;de++){var z=U.args[0];de>1&&(z=te(U.args.slice(0,de))),J=U.args.slice(de),Y=J.length===1?J[0]:te(J),G.push(te([z,Y]))}return G}function W(U,$){var G={placeholders:{}};if(!U.placeholders&&!$.placeholders)return G;if(U.placeholders){if(!$.placeholders)return U}else return $;for(var Y in U.placeholders)if(be(U.placeholders,Y)&&(G.placeholders[Y]=U.placeholders[Y],be($.placeholders,Y)&&!j(U.placeholders[Y],$.placeholders[Y])))return null;for(var J in $.placeholders)be($.placeholders,J)&&(G.placeholders[J]=$.placeholders[J]);return G}function R(U,$){var G=[];if(U.length===0||$.length===0)return G;for(var Y,J=0;J<U.length;J++)for(var te=0;te<$.length;te++)Y=W(U[J],$[te]),Y&&G.push(Y);return G}function X(U){if(U.length===0)return U;for(var $=U.reduce(R),G=[],Y={},J=0;J<$.length;J++){var te=JSON.stringify($[J]);Y[te]||(Y[te]=!0,G.push($[J]))}return G}function ae(U,$,G,Y){var J=[{placeholders:{}}];if(U instanceof p&&$ instanceof p||U instanceof c&&$ instanceof c){if(U instanceof p){if(U.op!==$.op||U.fn!==$.fn)return[]}else if(U instanceof c&&U.name!==$.name)return[];if($.args.length===1&&U.args.length===1||!D($,G)&&$.args.length===U.args.length||Y){for(var te=[],ie=0;ie<U.args.length;ie++){var de=ae(U.args[ie],$.args[ie],G);if(de.length===0)break;te.push(de)}if(te.length!==U.args.length){if(!x($,G)||U.args.length===1)return[];if(U.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var z=ae(U.args[0],$.args[1],G);if(z.length===0)return[];var V=ae(U.args[1],$.args[0],G);if(V.length===0)return[];te=[z,V]}J=X(te)}else if($.args.length>=2&&U.args.length===2){for(var ee=Z($,G),ne=[],le=0;le<ee.length;le++){var fe=ae(U,ee[le],G,!0);ne=ne.concat(fe)}return ne}else{if(U.args.length>2)throw Error("Unexpected non-binary associative function: "+U.toString());return[]}}else if(U instanceof d){if(U.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(k[U.name]){if(U.name!==$.name)return[]}else switch(U.name[1]>="a"&&U.name[1]<="z"?U.name.substring(0,2):U.name[0]){case"n":case"_p":J[0].placeholders[U.name]=$;break;case"c":case"cl":if(ze($))J[0].placeholders[U.name]=$;else return[];break;case"v":if(!ze($))J[0].placeholders[U.name]=$;else return[];break;case"vl":if(ot($))J[0].placeholders[U.name]=$;else return[];break;case"cd":if(Cf($))J[0].placeholders[U.name]=$;else return[];break;case"vd":if(!Cf($))J[0].placeholders[U.name]=$;else return[];break;case"ce":if(Zo($))J[0].placeholders[U.name]=$;else return[];break;case"ve":if(!Zo($))J[0].placeholders[U.name]=$;else return[];break;default:throw new Error("Invalid symbol in rule: "+U.name)}}else if(U instanceof u){if(!n(U.value,$.value))return[]}else return[];return J}function j(U,$){if(U instanceof u&&$ instanceof u){if(!n(U.value,$.value))return!1}else if(U instanceof d&&$ instanceof d){if(U.name!==$.name)return!1}else if(U instanceof p&&$ instanceof p||U instanceof c&&$ instanceof c){if(U instanceof p){if(U.op!==$.op||U.fn!==$.fn)return!1}else if(U instanceof c&&U.name!==$.name)return!1;if(U.args.length!==$.args.length)return!1;for(var G=0;G<U.args.length;G++)if(!j(U.args[G],$.args[G]))return!1}else return!1;return!0}return M});var BI="simplifyConstant",_I=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],u2=N(BI,_I,r=>{var{typed:e,config:t,mathWithTransform:n,matrix:i,fraction:o,bignumber:a,AccessorNode:s,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:f,ObjectNode:m,OperatorNode:p,SymbolNode:h}=r,{isCommutative:d,isAssociative:v,allChildren:x,createMakeNodeFunction:D}=fo({FunctionNode:c,OperatorNode:p,SymbolNode:h}),g=e("simplifyConstant",{Node:P=>S(I(P,{})),"Node, Object":function(B,O){return S(I(B,O))}});function w(P){return Sr(P)?P.valueOf():P instanceof Array?P.map(w):we(P)?i(w(P.valueOf())):P}function b(P,B,O){try{return n[P].apply(null,B)}catch{return B=B.map(w),A(n[P].apply(null,B),O)}}var y=e({Fraction:M,number:function(B){return B<0?E(new u(-B)):new u(B)},BigNumber:function(B){return B<0?E(new u(-B)):new u(B)},bigint:function(B){return B<0n?E(new u(-B)):new u(B)},Complex:function(B){throw new Error("Cannot convert Complex number to Node")},string:function(B){return new u(B)},Matrix:function(B){return new l(B.valueOf().map(O=>y(O)))}});function S(P){return $e(P)?P:y(P)}function C(P,B){var O=B&&B.exactFractions!==!1;if(O&&isFinite(P)&&o){var q=o(P),_=B&&typeof B.fractionsLimit=="number"?B.fractionsLimit:1/0;if(q.valueOf()===P&&q.n<_&&q.d<_)return q}return P}var A=e({"string, Object":function(B,O){var q=Qt(B,t);if(q==="BigNumber")return a===void 0&&oo(),a(B);if(q==="bigint")return BigInt(B);if(q==="Fraction")return o===void 0&&Is(),o(B);var _=parseFloat(B);return C(_,O)},"Fraction, Object":function(B,O){return B},"BigNumber, Object":function(B,O){return B},"number, Object":function(B,O){return C(B,O)},"bigint, Object":function(B,O){return B},"Complex, Object":function(B,O){return B.im!==0?B:C(B.re,O)},"Matrix, Object":function(B,O){return i(C(B.valueOf()))},"Array, Object":function(B,O){return B.map(C)}});function E(P){return new p("-","unaryMinus",[P])}function M(P){var B,O=P.s*P.n;return O<0?B=new p("-","unaryMinus",[new u(-O)]):B=new u(O),P.d===1?B:new p("/","divide",[B,new u(P.d)])}function F(P,B,O){if(!dr(B))return new s(S(P),S(B));if(Ut(P)||we(P)){for(var q=Array.from(B.dimensions);q.length>0;)if(ze(q[0])&&typeof q[0].value!="string"){var _=A(q.shift().value,O);Ut(P)?P=P.items[_-1]:(P=P.valueOf()[_-1],P instanceof Array&&(P=i(P)))}else if(q.length>1&&ze(q[1])&&typeof q[1].value!="string"){var K=A(q[1].value,O),Z=[],W=Ut(P)?P.items:P.valueOf();for(var R of W)if(Ut(R))Z.push(R.items[K-1]);else if(we(P))Z.push(R[K-1]);else break;if(Z.length===W.length)Ut(P)?P=new l(Z):P=i(Z),q.splice(1,1);else break}else break;return q.length===B.dimensions.length?new s(S(P),B):q.length>0?(B=new f(q),new s(S(P),B)):P}if(un(P)&&B.dimensions.length===1&&ze(B.dimensions[0])){var X=B.dimensions[0].value;return X in P.properties?P.properties[X]:new u}return new s(S(P),B)}function k(P,B,O,q){var _=B.shift(),K=B.reduce((Z,W)=>{if(!$e(W)){var R=Z.pop();if($e(R))return[R,W];try{return Z.push(b(P,[R,W],q)),Z}catch{Z.push(R)}}Z.push(S(Z.pop()));var X=Z.length===1?Z[0]:O(Z);return[O([X,S(W)])]},[_]);return K.length===1?K[0]:O([K[0],y(K[1])])}function I(P,B){switch(P.type){case"SymbolNode":return P;case"ConstantNode":switch(typeof P.value){case"number":return A(P.value,B);case"bigint":return A(P.value,B);case"string":return P.value;default:if(!isNaN(P.value))return A(P.value,B)}return P;case"FunctionNode":if(n[P.name]&&n[P.name].rawArgs)return P;{var O=["add","multiply"];if(!O.includes(P.name)){var q=P.args.map(J=>I(J,B));if(!q.some($e))try{return b(P.name,q,B)}catch{}if(P.name==="size"&&q.length===1&&Ut(q[0])){for(var _=[],K=q[0];Ut(K);)_.push(K.items.length),K=K.items[0];return i(_)}return new c(P.name,q.map(S))}}case"OperatorNode":{var Z=P.fn.toString(),W,R,X=D(P);if(lt(P)&&P.isUnary())W=[I(P.args[0],B)],$e(W[0])?R=X(W):R=b(Z,W,B);else if(v(P,B.context))if(W=x(P,B.context),W=W.map(J=>I(J,B)),d(Z,B.context)){for(var ae=[],j=[],U=0;U<W.length;U++)$e(W[U])?j.push(W[U]):ae.push(W[U]);ae.length>1?(R=k(Z,ae,X,B),j.unshift(R),R=k(Z,j,X,B)):R=k(Z,W,X,B)}else R=k(Z,W,X,B);else W=P.args.map(J=>I(J,B)),R=k(Z,W,X,B);return R}case"ParenthesisNode":return I(P.content,B);case"AccessorNode":return F(I(P.object,B),I(P.index,B),B);case"ArrayNode":{var $=P.items.map(J=>I(J,B));return $.some($e)?new l($.map(S)):i($)}case"IndexNode":return new f(P.dimensions.map(J=>g(J,B)));case"ObjectNode":{var G={};for(var Y in P.properties)G[Y]=g(P.properties[Y],B);return new m(G)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(P.type))}}return g});var c2="simplifyCore",kI=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],f2=N(c2,kI,r=>{var{typed:e,parse:t,equal:n,isZero:i,add:o,subtract:a,multiply:s,divide:l,pow:u,AccessorNode:c,ArrayNode:f,ConstantNode:m,FunctionNode:p,IndexNode:h,ObjectNode:d,OperatorNode:v,ParenthesisNode:x,SymbolNode:D}=r,g=new m(0),w=new m(1),b=new m(!0),y=new m(!1);function S(M){return lt(M)&&["and","not","or"].includes(M.op)}var{hasProperty:C,isCommutative:A}=fo({FunctionNode:p,OperatorNode:v,SymbolNode:D});function E(M){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=F?F.context:void 0;if(C(M,"trivial",k)){if(Xt(M)&&M.args.length===1)return E(M.args[0],F);var I=!1,P=0;if(M.forEach(j=>{++P,P===1&&(I=E(j,F))}),P===1)return I}var B=M;if(Xt(B)){var O=e1(B.name);if(O){if(B.args.length>2&&C(B,"associative",k))for(;B.args.length>2;){var q=B.args.pop(),_=B.args.pop();B.args.push(new v(O,B.name,[q,_]))}B=new v(O,B.name,B.args)}else return new p(E(B.fn),B.args.map(j=>E(j,F)))}if(lt(B)&&B.isUnary()){var K=E(B.args[0],F);if(B.op==="~"&&lt(K)&&K.isUnary()&&K.op==="~"||B.op==="not"&&lt(K)&&K.isUnary()&&K.op==="not"&&S(K.args[0]))return K.args[0];var Z=!0;if(B.op==="-"&&lt(K)&&(K.isBinary()&&K.fn==="subtract"&&(B=new v("-","subtract",[K.args[1],K.args[0]]),Z=!1),K.isUnary()&&K.op==="-"))return K.args[0];if(Z)return new v(B.op,B.fn,[K])}if(lt(B)&&B.isBinary()){var W=E(B.args[0],F),R=E(B.args[1],F);if(B.op==="+"){if(ze(W)&&i(W.value))return R;if(ze(R)&&i(R.value))return W;lt(R)&&R.isUnary()&&R.op==="-"&&(R=R.args[0],B=new v("-","subtract",[W,R]))}if(B.op==="-")return lt(R)&&R.isUnary()&&R.op==="-"?E(new v("+","add",[W,R.args[0]]),F):ze(W)&&i(W.value)?E(new v("-","unaryMinus",[R])):ze(R)&&i(R.value)?W:new v(B.op,B.fn,[W,R]);if(B.op==="*"){if(ze(W)){if(i(W.value))return g;if(n(W.value,1))return R}if(ze(R)){if(i(R.value))return g;if(n(R.value,1))return W;if(A(B,k))return new v(B.op,B.fn,[R,W],B.implicit)}return new v(B.op,B.fn,[W,R],B.implicit)}if(B.op==="/")return ze(W)&&i(W.value)?g:ze(R)&&n(R.value,1)?W:new v(B.op,B.fn,[W,R]);if(B.op==="^"&&ze(R)){if(i(R.value))return w;if(n(R.value,1))return W}if(B.op==="and"){if(ze(W))if(W.value){if(S(R))return R;if(ze(R))return R.value?b:y}else return y;if(ze(R))if(R.value){if(S(W))return W}else return y}if(B.op==="or"){if(ze(W)){if(W.value)return b;if(S(R))return R}if(ze(R)){if(R.value)return b;if(S(W))return W}}return new v(B.op,B.fn,[W,R])}if(lt(B))return new v(B.op,B.fn,B.args.map(j=>E(j,F)));if(Ut(B))return new f(B.items.map(j=>E(j,F)));if(sr(B))return new c(E(B.object,F),E(B.index,F));if(dr(B))return new h(B.dimensions.map(j=>E(j,F)));if(un(B)){var X={};for(var ae in B.properties)X[ae]=E(B.properties[ae],F);return new d(X)}return B}return e(c2,{Node:E,"Node,Object":E})});var PI="resolve",II=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],m2=N(PI,II,r=>{var{typed:e,parse:t,ConstantNode:n,FunctionNode:i,OperatorNode:o,ParenthesisNode:a}=r;function s(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!u)return l;if(ot(l)){if(c.has(l.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var m=u.get(l.name);if($e(m)){var p=new Set(c);return p.add(l.name),s(m,u,p)}else return typeof m=="number"?t(String(m)):m!==void 0?new n(m):l}else if(lt(l)){var h=l.args.map(function(v){return s(v,u,c)});return new o(l.op,l.fn,h,l.implicit)}else{if(Vt(l))return new a(s(l.content,u,c));if(Xt(l)){var d=l.args.map(function(v){return s(v,u,c)});return new i(l.name,d)}}return l.map(v=>s(v,u,c))}return e("resolve",{Node:s,"Node, Map | null | undefined":s,"Node, Object":(l,u)=>s(l,Cn(u)),"Array | Matrix":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array | Matrix, null | undefined":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array, Object":e.referTo("Array,Map",l=>(u,c)=>l(u,Cn(c))),"Matrix, Object":e.referTo("Matrix,Map",l=>(u,c)=>l(u,Cn(c))),"Array | Matrix, Map":e.referToSelf(l=>(u,c)=>u.map(f=>l(f,c)))})});var p2="symbolicEqual",RI=["parse","simplify","typed","OperatorNode"],h2=N(p2,RI,r=>{var{parse:e,simplify:t,typed:n,OperatorNode:i}=r;function o(a,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new i("-","subtract",[a,s]),c=t(u,{},l);return ze(c)&&!c.value}return n(p2,{"Node, Node":o,"Node, Node, Object":o})});var d2="derivative",LI=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],g2=N(d2,LI,r=>{var{typed:e,config:t,parse:n,simplify:i,equal:o,isZero:a,numeric:s,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:f,SymbolNode:m}=r;function p(w,b){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},S={};x(S,w,b.name);var C=D(w,S);return y.simplify?i(C):C}function h(w){var b=n(w);if(!b.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(w)," into a variable in function derivative"));return b}var d=e(d2,{"Node, SymbolNode":p,"Node, SymbolNode, Object":p,"Node, string":(w,b)=>p(w,h(b)),"Node, string, Object":(w,b,y)=>p(w,h(b),y)});d._simplify=!0,d.toTex=function(w){return v.apply(null,w.args)};var v=e("_derivTex",{"Node, SymbolNode":function(b,y){return ze(b)&&Ye(b.value)==="string"?v(n(b.value).toString(),y.toString(),1):v(b.toTex(),y.toString(),1)},"Node, ConstantNode":function(b,y){if(Ye(y.value)==="string")return v(b,n(y.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(b,y,S){return v(b.toString(),y.name,S.value)},"string, string, number":function(b,y,S){var C;return S===1?C="{d\\over d"+y+"}":C="{d^{"+S+"}\\over d"+y+"^{"+S+"}}",C+"\\left[".concat(b,"\\right]")}}),x=e("constTag",{"Object, ConstantNode, string":function(b,y){return b[y]=!0,!0},"Object, SymbolNode, string":function(b,y,S){return y.name!==S?(b[y]=!0,!0):!1},"Object, ParenthesisNode, string":function(b,y,S){return x(b,y.content,S)},"Object, FunctionAssignmentNode, string":function(b,y,S){return y.params.includes(S)?x(b,y.expr,S):(b[y]=!0,!0)},"Object, FunctionNode | OperatorNode, string":function(b,y,S){if(y.args.length>0){for(var C=x(b,y.args[0],S),A=1;A<y.args.length;++A)C=x(b,y.args[A],S)&&C;if(C)return b[y]=!0,!0}return!1}}),D=e("_derivative",{"ConstantNode, Object":function(b){return g(0)},"SymbolNode, Object":function(b,y){return y[b]!==void 0?g(0):g(1)},"ParenthesisNode, Object":function(b,y){return new f(D(b.content,y))},"FunctionAssignmentNode, Object":function(b,y){return y[b]!==void 0?g(0):D(b.expr,y)},"FunctionNode, Object":function(b,y){if(y[b]!==void 0)return g(0);var S=b.args[0],C,A=!1,E=!1,M;switch(b.name){case"cbrt":A=!0,M=new c("*","multiply",[g(3),new c("^","pow",[S,new c("/","divide",[g(2),g(3)])])]);break;case"sqrt":case"nthRoot":if(b.args.length===1)A=!0,M=new c("*","multiply",[g(2),new u("sqrt",[S])]);else if(b.args.length===2)return C=new c("/","divide",[g(1),b.args[1]]),y[C]=y[b.args[1]],D(new c("^","pow",[S,C]),y);break;case"log10":C=g(10);case"log":if(!C&&b.args.length===1)M=S.clone(),A=!0;else if(b.args.length===1&&C||b.args.length===2&&y[b.args[1]]!==void 0)M=new c("*","multiply",[S.clone(),new u("log",[C||b.args[1]])]),A=!0;else if(b.args.length===2)return D(new c("/","divide",[new u("log",[S]),new u("log",[b.args[1]])]),y);break;case"pow":if(b.args.length===2)return y[C]=y[b.args[1]],D(new c("^","pow",[S,b.args[1]]),y);break;case"exp":M=new u("exp",[S.clone()]);break;case"sin":M=new u("cos",[S.clone()]);break;case"cos":M=new c("-","unaryMinus",[new u("sin",[S.clone()])]);break;case"tan":M=new c("^","pow",[new u("sec",[S.clone()]),g(2)]);break;case"sec":M=new c("*","multiply",[b,new u("tan",[S.clone()])]);break;case"csc":E=!0,M=new c("*","multiply",[b,new u("cot",[S.clone()])]);break;case"cot":E=!0,M=new c("^","pow",[new u("csc",[S.clone()]),g(2)]);break;case"asin":A=!0,M=new u("sqrt",[new c("-","subtract",[g(1),new c("^","pow",[S.clone(),g(2)])])]);break;case"acos":A=!0,E=!0,M=new u("sqrt",[new c("-","subtract",[g(1),new c("^","pow",[S.clone(),g(2)])])]);break;case"atan":A=!0,M=new c("+","add",[new c("^","pow",[S.clone(),g(2)]),g(1)]);break;case"asec":A=!0,M=new c("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),g(2)]),g(1)])])]);break;case"acsc":A=!0,E=!0,M=new c("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),g(2)]),g(1)])])]);break;case"acot":A=!0,E=!0,M=new c("+","add",[new c("^","pow",[S.clone(),g(2)]),g(1)]);break;case"sinh":M=new u("cosh",[S.clone()]);break;case"cosh":M=new u("sinh",[S.clone()]);break;case"tanh":M=new c("^","pow",[new u("sech",[S.clone()]),g(2)]);break;case"sech":E=!0,M=new c("*","multiply",[b,new u("tanh",[S.clone()])]);break;case"csch":E=!0,M=new c("*","multiply",[b,new u("coth",[S.clone()])]);break;case"coth":E=!0,M=new c("^","pow",[new u("csch",[S.clone()]),g(2)]);break;case"asinh":A=!0,M=new u("sqrt",[new c("+","add",[new c("^","pow",[S.clone(),g(2)]),g(1)])]);break;case"acosh":A=!0,M=new u("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),g(2)]),g(1)])]);break;case"atanh":A=!0,M=new c("-","subtract",[g(1),new c("^","pow",[S.clone(),g(2)])]);break;case"asech":A=!0,E=!0,M=new c("*","multiply",[S.clone(),new u("sqrt",[new c("-","subtract",[g(1),new c("^","pow",[S.clone(),g(2)])])])]);break;case"acsch":A=!0,E=!0,M=new c("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[S.clone(),g(2)]),g(1)])])]);break;case"acoth":A=!0,E=!0,M=new c("-","subtract",[g(1),new c("^","pow",[S.clone(),g(2)])]);break;case"abs":M=new c("/","divide",[new u(new m("abs"),[S.clone()]),S.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+b.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var F,k;A?(F="/",k="divide"):(F="*",k="multiply");var I=D(S,y);return E&&(I=new c("-","unaryMinus",[I])),new c(F,k,[I,M])},"OperatorNode, Object":function(b,y){if(y[b]!==void 0)return g(0);if(b.op==="+")return new c(b.op,b.fn,b.args.map(function(B){return D(B,y)}));if(b.op==="-"){if(b.isUnary())return new c(b.op,b.fn,[D(b.args[0],y)]);if(b.isBinary())return new c(b.op,b.fn,[D(b.args[0],y),D(b.args[1],y)])}if(b.op==="*"){var S=b.args.filter(function(B){return y[B]!==void 0});if(S.length>0){var C=b.args.filter(function(B){return y[B]===void 0}),A=C.length===1?C[0]:new c("*","multiply",C),E=S.concat(D(A,y));return new c("*","multiply",E)}return new c("+","add",b.args.map(function(B){return new c("*","multiply",b.args.map(function(O){return O===B?D(O,y):O.clone()}))}))}if(b.op==="/"&&b.isBinary()){var M=b.args[0],F=b.args[1];return y[F]!==void 0?new c("/","divide",[D(M,y),F]):y[M]!==void 0?new c("*","multiply",[new c("-","unaryMinus",[M]),new c("/","divide",[D(F,y),new c("^","pow",[F.clone(),g(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[D(M,y),F.clone()]),new c("*","multiply",[M.clone(),D(F,y)])]),new c("^","pow",[F.clone(),g(2)])])}if(b.op==="^"&&b.isBinary()){var k=b.args[0],I=b.args[1];if(y[k]!==void 0)return ze(k)&&(a(k.value)||o(k.value,1))?g(0):new c("*","multiply",[b,new c("*","multiply",[new u("log",[k.clone()]),D(I.clone(),y)])]);if(y[I]!==void 0){if(ze(I)){if(a(I.value))return g(0);if(o(I.value,1))return D(k,y)}var P=new c("^","pow",[k.clone(),new c("-","subtract",[I,g(1)])]);return new c("*","multiply",[I.clone(),new c("*","multiply",[D(k,y),P])])}return new c("*","multiply",[new c("^","pow",[k.clone(),I.clone()]),new c("+","add",[new c("*","multiply",[D(k,y),new c("/","divide",[I.clone(),k.clone()])]),new c("*","multiply",[D(I,y),new u("log",[k.clone()])])])])}throw new Error('Cannot process operator "'+b.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function g(w,b){return new l(s(w,b||Qt(String(w),t)))}return d});var v2="rationalize",zI=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],y2=N(v2,zI,r=>{var{config:e,typed:t,equal:n,isZero:i,add:o,subtract:a,multiply:s,divide:l,pow:u,parse:c,simplifyConstant:f,simplifyCore:m,simplify:p,fraction:h,bignumber:d,mathWithTransform:v,matrix:x,AccessorNode:D,ArrayNode:g,ConstantNode:w,FunctionNode:b,IndexNode:y,ObjectNode:S,OperatorNode:C,SymbolNode:A,ParenthesisNode:E}=r;function M(B){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,_=k(),K=F(B,O,!0,_.firstRules),Z=K.variables.length,W={exactFractions:!1},R={exactFractions:!0};if(B=K.expression,Z>=1){B=I(B);var X,ae,j=!0,U=!1;B=p(B,_.firstRules,{},W);for(var $;ae=j?_.distrDivRules:_.sucDivRules,B=p(B,ae,{},R),j=!j,$=B.toString(),$!==X;)U=!0,X=$;U&&(B=p(B,_.firstRulesAgain,{},W)),B=p(B,_.finalRules,{},W)}var G=[],Y={};return B.type==="OperatorNode"&&B.isBinary()&&B.op==="/"?(Z===1&&(B.args[0]=P(B.args[0],G),B.args[1]=P(B.args[1])),q&&(Y.numerator=B.args[0],Y.denominator=B.args[1])):(Z===1&&(B=P(B,G)),q&&(Y.numerator=B,Y.denominator=null)),q?(Y.coefficients=G,Y.variables=K.variables,Y.expression=B,Y):B}return t(v2,{Node:M,"Node, boolean":(B,O)=>M(B,{},O),"Node, Object":M,"Node, Object, boolean":M});function F(B,O,q,_){var K=[],Z=p(B,_,O,{exactFractions:!1});q=!!q;var W="+-*"+(q?"/":"");X(Z);var R={};return R.expression=Z,R.variables=K,R;function X(ae){var j=ae.type;if(j==="FunctionNode")throw new Error("There is an unsolved function call");if(j==="OperatorNode")if(ae.op==="^"){if(ae.args[1].type!=="ConstantNode"||!xe(parseFloat(ae.args[1].value)))throw new Error("There is a non-integer exponent");X(ae.args[0])}else{if(!W.includes(ae.op))throw new Error("Operator "+ae.op+" invalid in polynomial expression");for(var U=0;U<ae.args.length;U++)X(ae.args[U])}else if(j==="SymbolNode"){var $=ae.name,G=K.indexOf($);G===-1&&K.push($)}else if(j==="ParenthesisNode")X(ae.content);else if(j!=="ConstantNode")throw new Error("type "+j+" is not allowed in polynomial expression")}}function k(){var B=[m,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],O=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],q=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],_=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],K={};return K.firstRules=B.concat(O,_),K.distrDivRules=q,K.sucDivRules=_,K.firstRulesAgain=B.concat(O),K.finalRules=[m,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],K}function I(B,O,q){var _=B.type,K=arguments.length>1;if(_==="OperatorNode"&&B.isBinary()){var Z=!1,W;if(B.op==="^"&&(B.args[0].type==="ParenthesisNode"||B.args[0].type==="OperatorNode")&&B.args[1].type==="ConstantNode"&&(W=parseFloat(B.args[1].value),Z=W>=2&&xe(W)),Z){if(W>2){var R=B.args[0],X=new C("^","pow",[B.args[0].cloneDeep(),new w(W-1)]);B=new C("*","multiply",[R,X])}else B=new C("*","multiply",[B.args[0],B.args[0].cloneDeep()]);K&&(q==="content"?O.content=B:O.args[q]=B)}}if(_==="ParenthesisNode")I(B.content,B,"content");else if(_!=="ConstantNode"&&_!=="SymbolNode")for(var ae=0;ae<B.args.length;ae++)I(B.args[ae],B,ae);if(!K)return B}function P(B,O){O===void 0&&(O=[]),O[0]=0;var q={};q.cte=1,q.oper="+",q.fire="";var _=0,K="";$(B,null,q),_=O.length-1;for(var Z=!0,W,R=_;R>=0;R--)if(O[R]!==0){var X=new w(Z?O[R]:Math.abs(O[R])),ae=O[R]<0?"-":"+";if(R>0){var j=new A(K);if(R>1){var U=new w(R);j=new C("^","pow",[j,U])}O[R]===-1&&Z?X=new C("-","unaryMinus",[j]):Math.abs(O[R])===1?X=j:X=new C("*","multiply",[X,j])}Z?W=X:ae==="+"?W=new C("+","add",[W,X]):W=new C("-","subtract",[W,X]),Z=!1}if(Z)return new w(0);return W;function $(G,Y,J){var te=G.type;if(te==="FunctionNode")throw new Error("There is an unsolved function call");if(te==="OperatorNode"){if(!"+-*^".includes(G.op))throw new Error("Operator "+G.op+" invalid");if(Y!==null){if((G.fn==="unaryMinus"||G.fn==="pow")&&Y.fn!=="add"&&Y.fn!=="subtract"&&Y.fn!=="multiply")throw new Error("Invalid "+G.op+" placing");if((G.fn==="subtract"||G.fn==="add"||G.fn==="multiply")&&Y.fn!=="add"&&Y.fn!=="subtract")throw new Error("Invalid "+G.op+" placing");if((G.fn==="subtract"||G.fn==="add"||G.fn==="unaryMinus")&&J.noFil!==0)throw new Error("Invalid "+G.op+" placing")}(G.op==="^"||G.op==="*")&&(J.fire=G.op);for(var ie=0;ie<G.args.length;ie++)G.fn==="unaryMinus"&&(J.oper="-"),(G.op==="+"||G.fn==="subtract")&&(J.fire="",J.cte=1,J.oper=ie===0?"+":G.op),J.noFil=ie,$(G.args[ie],G,J)}else if(te==="SymbolNode"){if(G.name!==K&&K!=="")throw new Error("There is more than one variable");if(K=G.name,Y===null){O[1]=1;return}if(Y.op==="^"&&J.noFil!==0)throw new Error("In power the variable should be the first parameter");if(Y.op==="*"&&J.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(J.fire===""||J.fire==="*")&&(_<1&&(O[1]=0),O[1]+=J.cte*(J.oper==="+"?1:-1),_=Math.max(1,_))}else if(te==="ConstantNode"){var de=parseFloat(G.value);if(Y===null){O[0]=de;return}if(Y.op==="^"){if(J.noFil!==1)throw new Error("Constant cannot be powered");if(!xe(de)||de<=0)throw new Error("Non-integer exponent is not allowed");for(var z=_+1;z<de;z++)O[z]=0;de>_&&(O[de]=0),O[de]+=J.cte*(J.oper==="+"?1:-1),_=Math.max(de,_);return}J.cte=de,J.fire===""&&(O[0]+=J.cte*(J.oper==="+"?1:-1))}else throw new Error("Type "+te+" is not allowed")}}});var x2="zpk2tf",qI=["typed","add","multiply","Complex","number"],b2=N(x2,qI,r=>{var{typed:e,add:t,multiply:n,Complex:i,number:o}=r;return e(x2,{"Array,Array,number":function(u,c,f){return a(u,c,f)},"Array,Array":function(u,c){return a(u,c,1)},"Matrix,Matrix,number":function(u,c,f){return a(u.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(u,c){return a(u.valueOf(),c.valueOf(),1)}});function a(l,u,c){l.some(D=>D.type==="BigNumber")&&(l=l.map(D=>o(D))),u.some(D=>D.type==="BigNumber")&&(u=u.map(D=>o(D)));for(var f=[i(1,0)],m=[i(1,0)],p=0;p<l.length;p++){var h=l[p];typeof h=="number"&&(h=i(h,0)),f=s(f,[i(1,0),i(-h.re,-h.im)])}for(var d=0;d<u.length;d++){var v=u[d];typeof v=="number"&&(v=i(v,0)),m=s(m,[i(1,0),i(-v.re,-v.im)])}for(var x=0;x<f.length;x++)f[x]=n(f[x],c);return[f,m]}function s(l,u){for(var c=[],f=0;f<l.length+u.length-1;f++){c[f]=i(0,0);for(var m=0;m<l.length;m++)f-m>=0&&f-m<u.length&&(c[f]=t(c[f],n(l[m],u[f-m])))}return c}});var w2="freqz",UI=["typed","add","multiply","Complex","divide","matrix"],D2=N(w2,UI,r=>{var{typed:e,add:t,multiply:n,Complex:i,divide:o,matrix:a}=r;return e(w2,{"Array, Array":function(c,f){var m=l(512);return s(c,f,m)},"Array, Array, Array":function(c,f,m){return s(c,f,m)},"Array, Array, number":function(c,f,m){if(m<0)throw new Error("w must be a positive number");var p=l(m);return s(c,f,p)},"Matrix, Matrix":function(c,f){var m=l(512),{w:p,h}=s(c.valueOf(),f.valueOf(),m);return{w:a(p),h:a(h)}},"Matrix, Matrix, Matrix":function(c,f,m){var{h:p}=s(c.valueOf(),f.valueOf(),m.valueOf());return{h:a(p),w:a(m)}},"Matrix, Matrix, number":function(c,f,m){if(m<0)throw new Error("w must be a positive number");var p=l(m),{h}=s(c.valueOf(),f.valueOf(),p);return{h:a(h),w:a(p)}}});function s(u,c,f){for(var m=[],p=[],h=0;h<f.length;h++){for(var d=i(0,0),v=i(0,0),x=0;x<u.length;x++)d=t(d,n(u[x],i(Math.cos(-x*f[h]),Math.sin(-x*f[h]))));for(var D=0;D<c.length;D++)v=t(v,n(c[D],i(Math.cos(-D*f[h]),Math.sin(-D*f[h]))));m.push(d),p.push(v)}for(var g=[],w=0;w<m.length;w++)g.push(o(m[w],p[w]));return{h:g,w:f}}function l(u){for(var c=[],f=0;f<u;f++)c.push(f/u*Math.PI);return c}});var VI="reviver",HI=["classes"],S2=N(VI,HI,r=>{var{classes:e}=r;return function(n,i){var o=e[i&&i.mathjs];return o&&typeof o.fromJSON=="function"?o.fromJSON(i):i}});var $I="replacer",WI=[],A2=N($I,WI,()=>function(e,t){return typeof t=="number"&&(!isFinite(t)||isNaN(t))?{mathjs:"number",value:String(t)}:typeof t=="bigint"?{mathjs:"bigint",value:String(t)}:t});var N2="13.2.3";var C2=N("true",[],()=>!0),E2=N("false",[],()=>!1),M2=N("null",[],()=>null),T2=Mr("Infinity",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1/0):1/0}),F2=Mr("NaN",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(NaN):NaN}),O2=Mr("pi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?Go(t):qh}),B2=Mr("tau",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?vy(t):Uh}),_2=Mr("e",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?dy(t):Vh}),k2=Mr("phi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?gy(t):Hh}),P2=Mr("LN2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).ln():Math.LN2}),I2=Mr("LN10",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(10).ln():Math.LN10}),R2=Mr("LOG2E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(2).ln()):Math.LOG2E}),L2=Mr("LOG10E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(10).ln()):Math.LOG10E}),z2=Mr("SQRT1_2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t("0.5").sqrt():Math.SQRT1_2}),q2=Mr("SQRT2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).sqrt():Math.SQRT2}),U2=Mr("i",["Complex"],r=>{var{Complex:e}=r;return e.I}),V2=N("PI",["pi"],r=>{var{pi:e}=r;return e}),H2=N("E",["e"],r=>{var{e}=r;return e}),$2=N("version",[],()=>N2);function Mr(r,e,t){return N(r,e,t,{recreateOnConfigChange:!0})}var W2=Ge("speedOfLight","299792458","m s^-1"),G2=Ge("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),K2=Ge("planckConstant","6.62607015e-34","J s"),Y2=Ge("reducedPlanckConstant","1.0545718176461565e-34","J s"),Z2=Ge("magneticConstant","1.25663706212e-6","N A^-2"),X2=Ge("electricConstant","8.8541878128e-12","F m^-1"),J2=Ge("vacuumImpedance","376.730313667","ohm"),j2=Ge("coulomb","8.987551792261171e9","N m^2 C^-2"),Q2=Ge("elementaryCharge","1.602176634e-19","C"),eC=Ge("bohrMagneton","9.2740100783e-24","J T^-1"),tC=Ge("conductanceQuantum","7.748091729863649e-5","S"),rC=Ge("inverseConductanceQuantum","12906.403729652257","ohm"),nC=Ge("magneticFluxQuantum","2.0678338484619295e-15","Wb"),iC=Ge("nuclearMagneton","5.0507837461e-27","J T^-1"),oC=Ge("klitzing","25812.807459304513","ohm");var aC=Ge("bohrRadius","5.29177210903e-11","m"),sC=Ge("classicalElectronRadius","2.8179403262e-15","m"),lC=Ge("electronMass","9.1093837015e-31","kg"),uC=Ge("fermiCoupling","1.1663787e-5","GeV^-2"),cC=Fl("fineStructure",.0072973525693),fC=Ge("hartreeEnergy","4.3597447222071e-18","J"),mC=Ge("protonMass","1.67262192369e-27","kg"),pC=Ge("deuteronMass","3.3435830926e-27","kg"),hC=Ge("neutronMass","1.6749271613e-27","kg"),dC=Ge("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),gC=Ge("rydberg","10973731.568160","m^-1"),vC=Ge("thomsonCrossSection","6.6524587321e-29","m^2"),yC=Fl("weakMixingAngle",.2229),xC=Fl("efimovFactor",22.7),bC=Ge("atomicMass","1.66053906660e-27","kg"),wC=Ge("avogadro","6.02214076e23","mol^-1"),DC=Ge("boltzmann","1.380649e-23","J K^-1"),SC=Ge("faraday","96485.33212331001","C mol^-1"),AC=Ge("firstRadiation","3.7417718521927573e-16","W m^2"),NC=Ge("loschmidt","2.686780111798444e25","m^-3"),CC=Ge("gasConstant","8.31446261815324","J K^-1 mol^-1"),EC=Ge("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),MC=Ge("molarVolume","0.022413969545014137","m^3 mol^-1"),TC=Fl("sackurTetrode",-1.16487052358),FC=Ge("secondRadiation","0.014387768775039337","m K"),OC=Ge("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),BC=Ge("wienDisplacement","2.897771955e-3","m K"),_C=Ge("molarMass","0.99999999965e-3","kg mol^-1"),kC=Ge("molarMassC12","11.9999999958e-3","kg mol^-1"),PC=Ge("gravity","9.80665","m s^-2"),IC=Ge("planckLength","1.616255e-35","m"),RC=Ge("planckMass","2.176435e-8","kg"),LC=Ge("planckTime","5.391245e-44","s"),zC=Ge("planckCharge","1.87554603778e-18","C"),qC=Ge("planckTemperature","1.416785e+32","K");function Ge(r,e,t){var n=["config","Unit","BigNumber"];return N(r,n,i=>{var{config:o,Unit:a,BigNumber:s}=i,l=o.number==="BigNumber"?new s(e):parseFloat(e),u=new a(l,t);return u.fixPrefix=!0,u})}function Fl(r,e){var t=["config","BigNumber"];return N(r,t,n=>{var{config:i,BigNumber:o}=n;return i.number==="BigNumber"?new o(e):e})}var GI="apply",KI=["typed","isInteger"],UC=N(GI,KI,r=>{var{typed:e,isInteger:t}=r,n=ro({typed:e,isInteger:t});return e("apply",{"...any":function(o){var a=o[1];Fe(a)?o[1]=a-1:Ne(a)&&(o[1]=a.minus(1));try{return n.apply(null,o)}catch(s){throw ft(s)}}})},{isTransformFunction:!0});var YI="column",ZI=["typed","Index","matrix","range"],VC=N(YI,ZI,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,o=Os({typed:e,Index:t,matrix:n,range:i});return e("column",{"...any":function(s){var l=s.length-1,u=s[l];Fe(u)&&(s[l]=u-1);try{return o.apply(null,s)}catch(c){throw ft(c)}}})},{isTransformFunction:!0});function mo(r,e,t){var n=r.filter(function(l){return ot(l)&&!(l.name in e)&&!t.has(l.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+r+'"');var i=n.name,o=new Map,a=new qi(t,o,new Set([i])),s=r.compile();return function(u){return o.set(i,u),s.evaluate(a)}}var XI="transformCallback",JI=["typed"],po=N(XI,JI,r=>{var{typed:e}=r;return function(n,i){return e.isTypedFunction(n)?t(n,i):HC(n,n.length,i)};function t(n,i){var o=Object.fromEntries(Object.entries(n.signatures).map(a=>{var[s,l]=a,u=s.split(",").length;return e.isTypedFunction(l)?[s,t(l,i)]:[s,HC(l,u,i)]}));return typeof n.name=="string"?e(n.name,o):e(o)}});function HC(r,e,t){return e===t?r:e===t+1?function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=i.slice(0,t),s=$C(i[t]);return r(...a,s)}:e>t+1?function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=i.slice(0,t),s=$C(i[t]),l=i.slice(t+1);return r(...a,s,...l)}:r}function $C(r){return r.map(e=>e+1)}var jI="filter",QI=["typed"],WC=N(jI,QI,r=>{var{typed:e}=r;function t(i,o,a){var s=Bs({typed:e}),l=po({typed:e});if(i.length===0)return s();var u=i[0];if(i.length===1)return s(u);var c=i.length-1,f=i[c];return u&&(u=n(u,a)),f&&(ot(f)||kr(f)?f=n(f,a):f=mo(f,o,a)),s(u,l(f,c))}t.rawArgs=!0;function n(i,o){return i.compile().evaluate(o)}return t},{isTransformFunction:!0});var e5="forEach",t5=["typed"],GC=N(e5,t5,r=>{var{typed:e}=r,t=_s({typed:e}),n=po({typed:e});function i(a,s,l){if(a.length===0)return t();var u=a[0];if(a.length===1)return t(u);var c=a.length-1,f=a[c];return u&&(u=o(u,l)),f&&(ot(f)||kr(f)?f=o(f,l):f=mo(f,s,l)),t(u,n(f,c))}i.rawArgs=!0;function o(a,s){return a.compile().evaluate(s)}return i},{isTransformFunction:!0});var r5="index",n5=["Index","getMatrixDataType"],KC=N(r5,n5,r=>{var{Index:e,getMatrixDataType:t}=r;return function(){for(var i=[],o=0,a=arguments.length;o<a;o++){var s=arguments[o];if(Vn(s))s.start--,s.end-=s.step>0?0:2;else if(s&&s.isSet===!0)s=s.map(function(u){return u-1});else if(Ze(s)||we(s))t(s)!=="boolean"&&(s=s.map(function(u){return u-1}));else if(Fe(s))s--;else if(Ne(s))s=s.toNumber()-1;else if(typeof s!="string")throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");i[o]=s}var l=new e;return e.apply(l,i),l}},{isTransformFunction:!0});var i5="map",o5=["typed"],YC=N(i5,o5,r=>{var{typed:e}=r,t=ks({typed:e}),n=po({typed:e});function i(o,a,s){if(o.length===0)return t();if(o.length===1)return t(o[0]);var l=o.length-1,u=o.slice(0,l),c=o[l];return u=u.map(m=>f(m,s)),c&&(ot(c)||kr(c)?c=f(c,s):c=mo(c,a,s)),t(...u,n(c,l));function f(m,p){return m.compile().evaluate(p)}}return i.rawArgs=!0,i},{isTransformFunction:!0});function ZC(r){return Fe(r)?r-1:Ne(r)?r.minus(1):r}function XC(r){return Fe(r)||Ne(r)}function ir(r){if(r.length===2&&Dt(r[0])){r=r.slice();var e=r[1];XC(e)&&(r[1]=ZC(e))}return r}var a5="max",s5=["typed","config","numeric","larger"],JC=N(a5,s5,r=>{var{typed:e,config:t,numeric:n,larger:i}=r,o=Js({typed:e,config:t,numeric:n,larger:i});return e("max",{"...any":function(s){s=ir(s);try{return o.apply(null,s)}catch(l){throw ft(l)}}})},{isTransformFunction:!0});var l5="mean",u5=["typed","add","divide"],jC=N(l5,u5,r=>{var{typed:e,add:t,divide:n}=r,i=Nl({typed:e,add:t,divide:n});return e("mean",{"...any":function(a){a=ir(a);try{return i.apply(null,a)}catch(s){throw ft(s)}}})},{isTransformFunction:!0});var c5="min",f5=["typed","config","numeric","smaller"],QC=N(c5,f5,r=>{var{typed:e,config:t,numeric:n,smaller:i}=r,o=js({typed:e,config:t,numeric:n,smaller:i});return e("min",{"...any":function(s){s=ir(s);try{return o.apply(null,s)}catch(l){throw ft(l)}}})},{isTransformFunction:!0});var m5="range",p5=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],eE=N(m5,p5,r=>{var{typed:e,config:t,matrix:n,bignumber:i,smaller:o,smallerEq:a,larger:s,largerEq:l,add:u,isPositive:c}=r,f=Ls({typed:e,config:t,matrix:n,bignumber:i,smaller:o,smallerEq:a,larger:s,largerEq:l,add:u,isPositive:c});return e("range",{"...any":function(p){var h=p.length-1,d=p[h];return typeof d!="boolean"&&p.push(!0),f.apply(null,p)}})},{isTransformFunction:!0});var h5="row",d5=["typed","Index","matrix","range"],tE=N(h5,d5,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,o=zs({typed:e,Index:t,matrix:n,range:i});return e("row",{"...any":function(s){var l=s.length-1,u=s[l];Fe(u)&&(s[l]=u-1);try{return o.apply(null,s)}catch(c){throw ft(c)}}})},{isTransformFunction:!0});var g5="subset",v5=["typed","matrix","zeros","add"],rE=N(g5,v5,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,o=qs({typed:e,matrix:t,zeros:n,add:i});return e("subset",{"...any":function(s){try{return o.apply(null,s)}catch(l){throw ft(l)}}})},{isTransformFunction:!0});var y5="concat",x5=["typed","matrix","isInteger"],nE=N(y5,x5,r=>{var{typed:e,matrix:t,isInteger:n}=r,i=Fs({typed:e,matrix:t,isInteger:n});return e("concat",{"...any":function(a){var s=a.length-1,l=a[s];Fe(l)?a[s]=l-1:Ne(l)&&(a[s]=l.minus(1));try{return i.apply(null,a)}catch(u){throw ft(u)}}})},{isTransformFunction:!0});var iE="diff",b5=["typed","matrix","subtract","number","bignumber"],oE=N(iE,b5,r=>{var{typed:e,matrix:t,subtract:n,number:i,bignumber:o}=r,a=Ps({typed:e,matrix:t,subtract:n,number:i,bignumber:o});return e(iE,{"...any":function(l){l=ir(l);try{return a.apply(null,l)}catch(u){throw ft(u)}}})},{isTransformFunction:!0});var w5="std",D5=["typed","map","sqrt","variance"],aE=N(w5,D5,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r,o=Ml({typed:e,map:t,sqrt:n,variance:i});return e("std",{"...any":function(s){s=ir(s);try{return o.apply(null,s)}catch(l){throw ft(l)}}})},{isTransformFunction:!0});var sE="sum",S5=["typed","config","add","numeric"],lE=N(sE,S5,r=>{var{typed:e,config:t,add:n,numeric:i}=r,o=Dl({typed:e,config:t,add:n,numeric:i});return e(sE,{"...any":function(s){s=ir(s);try{return o.apply(null,s)}catch(l){throw ft(l)}}})},{isTransformFunction:!0});var A5="quantileSeq",N5=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],uE=N(A5,N5,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:o,multiply:a,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:m}=r,p=El({typed:e,bignumber:t,add:n,subtract:i,divide:o,multiply:a,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:m});return e("quantileSeq",{"Array | Matrix, number | BigNumber":p,"Array | Matrix, number | BigNumber, number":(d,v,x)=>p(d,v,h(x)),"Array | Matrix, number | BigNumber, boolean":p,"Array | Matrix, number | BigNumber, boolean, number":(d,v,x,D)=>p(d,v,x,h(D)),"Array | Matrix, Array | Matrix":p,"Array | Matrix, Array | Matrix, number":(d,v,x)=>p(d,v,h(x)),"Array | Matrix, Array | Matrix, boolean":p,"Array | Matrix, Array | Matrix, boolean, number":(d,v,x,D)=>p(d,v,x,h(D))});function h(d){return ir([[],d])[1]}},{isTransformFunction:!0});var cE="cumsum",C5=["typed","add","unaryPlus"],fE=N(cE,C5,r=>{var{typed:e,add:t,unaryPlus:n}=r,i=Al({typed:e,add:t,unaryPlus:n});return e(cE,{"...any":function(a){if(a.length===2&&Dt(a[0])){var s=a[1];Fe(s)?a[1]=s-1:Ne(s)&&(a[1]=s.minus(1))}try{return i.apply(null,a)}catch(l){throw ft(l)}}})},{isTransformFunction:!0});var mE="variance",E5=["typed","add","subtract","multiply","divide","apply","isNaN"],pE=N(mE,E5,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:o,apply:a,isNaN:s}=r,l=Cl({typed:e,add:t,subtract:n,multiply:i,divide:o,apply:a,isNaN:s});return e(mE,{"...any":function(c){c=ir(c);try{return l.apply(null,c)}catch(f){throw ft(f)}}})},{isTransformFunction:!0});var hE="print",M5=["typed","matrix","zeros","add"],dE=N(hE,M5,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,o=Vs({typed:e,matrix:t,zeros:n,add:i});return e(hE,{"string, Object | Array":function(l,u){return o(a(l),u)},"string, Object | Array, number | Object":function(l,u,c){return o(a(l),u,c)}});function a(s){return s.replace(Us,l=>{var u=l.slice(1).split("."),c=u.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0});var T5="and",F5=["typed","matrix","zeros","add","equalScalar","not","concat"],gE=N(T5,F5,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:o,concat:a}=r,s=Hs({typed:e,matrix:t,equalScalar:n,zeros:i,not:o,concat:a});function l(u,c,f){var m=u[0].compile().evaluate(f);if(!Dt(m)&&!s(m,!0))return!1;var p=u[1].compile().evaluate(f);return s(m,p)}return l.rawArgs=!0,l},{isTransformFunction:!0});var O5="or",B5=["typed","matrix","equalScalar","DenseMatrix","concat"],vE=N(O5,B5,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:o}=r,a=Ts({typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:o});function s(l,u,c){var f=l[0].compile().evaluate(c);if(!Dt(f)&&a(f,!1))return!0;var m=l[1].compile().evaluate(c);return a(f,m)}return s.rawArgs=!0,s},{isTransformFunction:!0});var _5="bitAnd",k5=["typed","matrix","zeros","add","equalScalar","not","concat"],yE=N(_5,k5,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:o,concat:a}=r,s=Es({typed:e,matrix:t,equalScalar:n,zeros:i,not:o,concat:a});function l(u,c,f){var m=u[0].compile().evaluate(f);if(!Dt(m)){if(isNaN(m))return NaN;if(m===0||m===!1)return 0}var p=u[1].compile().evaluate(f);return s(m,p)}return l.rawArgs=!0,l},{isTransformFunction:!0});var P5="bitOr",I5=["typed","matrix","equalScalar","DenseMatrix","concat"],xE=N(P5,I5,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:o}=r,a=Ms({typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:o});function s(l,u,c){var f=l[0].compile().evaluate(c);if(!Dt(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var m=l[1].compile().evaluate(c);return a(f,m)}return s.rawArgs=!0,s},{isTransformFunction:!0});var Tf=Mf;var AE=fi(Za(),1);var wE=fi(bE(),1);function DE(r){var e=new wE.default;return r.on=e.on.bind(e),r.off=e.off.bind(e),r.once=e.once.bind(e),r.emit=e.emit.bind(e),r}function SE(r,e,t,n){function i(v,x){var D=arguments.length;if(D!==1&&D!==2)throw new Er("import",D,1,2);x||(x={});function g(S,C,A){if(Array.isArray(C))C.forEach(F=>g(S,F));else if(typeof C=="object")for(var E in C)be(C,E)&&g(S,C[E],E);else if(mi(C)||A!==void 0){var M=mi(C)?h(C)?C.fn+".transform":C.fn:A;if(be(S,M)&&S[M]!==C&&!x.silent)throw new Error('Cannot import "'+M+'" twice');S[M]=C}else if(!x.silent)throw new TypeError("Factory, Object, or Array expected")}var w={};g(w,v);for(var b in w)if(be(w,b)){var y=w[b];if(mi(y))u(y,x);else if(c(y))o(b,y,x);else if(!x.silent)throw new TypeError("Factory, Object, or Array expected")}}function o(v,x,D){if(D.wrap&&typeof x=="function"&&(x=l(x)),f(x)&&(x=r(v,{[x.signature]:x})),r.isTypedFunction(t[v])&&r.isTypedFunction(x)){D.override?x=r(v,x.signatures):x=r(t[v],x),t[v]=x,delete n[v],a(v,x),t.emit("import",v,function(){return x});return}if(t[v]===void 0||D.override){t[v]=x,delete n[v],a(v,x),t.emit("import",v,function(){return x});return}if(!D.silent)throw new Error('Cannot import "'+v+'": already exists')}function a(v,x){x&&typeof x.transform=="function"?(t.expression.transform[v]=x.transform,m(v)&&(t.expression.mathWithTransform[v]=x.transform)):(delete t.expression.transform[v],m(v)&&(t.expression.mathWithTransform[v]=x))}function s(v){delete t.expression.transform[v],m(v)?t.expression.mathWithTransform[v]=t[v]:delete t.expression.mathWithTransform[v]}function l(v){var x=function(){for(var g=[],w=0,b=arguments.length;w<b;w++){var y=arguments[w];g[w]=y&&y.valueOf()}return v.apply(t,g)};return v.transform&&(x.transform=v.transform),x}function u(v,x){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.fn;if(D.includes("."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(D));var g=h(v)?t.expression.transform:t,w=D in t.expression.transform,b=be(g,D)?g[D]:void 0,y=function(){var C={};v.dependencies.map(Vu).forEach(E=>{if(E.includes("."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(E));E==="math"?C.math=t:E==="mathWithTransform"?C.mathWithTransform=t.expression.mathWithTransform:E==="classes"?C.classes=t:C[E]=t[E]});var A=v(C);if(A&&typeof A.transform=="function")throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with export const path = "expression.transform"');if(b===void 0||x.override)return A;if(r.isTypedFunction(b)&&r.isTypedFunction(A))return r(b,A);if(x.silent)return b;throw new Error('Cannot import "'+D+'": already exists')};!v.meta||v.meta.lazy!==!1?(Hi(g,D,y),b&&w?s(D):(h(v)||p(v))&&Hi(t.expression.mathWithTransform,D,()=>g[D])):(g[D]=y(),b&&w?s(D):(h(v)||p(v))&&Hi(t.expression.mathWithTransform,D,()=>g[D])),n[D]=v,t.emit("import",D,y)}function c(v){return typeof v=="function"||typeof v=="number"||typeof v=="string"||typeof v=="boolean"||v===null||Bt(v)||qt(v)||Ne(v)||Sr(v)||we(v)||Array.isArray(v)}function f(v){return typeof v=="function"&&typeof v.signature=="string"}function m(v){return!be(d,v)}function p(v){return!v.fn.includes(".")&&!be(d,v.fn)&&(!v.meta||!v.meta.isClass)}function h(v){return v!==void 0&&v.meta!==void 0&&v.meta.isTransformFunction===!0||!1}var d={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return i}function Ol(r,e){var t=Mt({},_a,e);if(typeof Object.create!="function")throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var n=DE({isNumber:Fe,isComplex:qt,isBigNumber:Ne,isBigInt:Pa,isFraction:Sr,isUnit:Bt,isString:bt,isArray:Ze,isMatrix:we,isCollection:Dt,isDenseMatrix:En,isSparseMatrix:Ar,isRange:Vn,isIndex:ln,isBoolean:Ia,isResultSet:Ra,isHelp:Ui,isFunction:La,isDate:za,isRegExp:qa,isObject:Zr,isMap:sn,isPartitionedMap:Mp,isObjectWrappingMap:Tp,isNull:Ua,isUndefined:Va,isAccessorNode:sr,isArrayNode:Ut,isAssignmentNode:Ha,isBlockNode:$a,isConditionalNode:Wa,isConstantNode:ze,isFunctionAssignmentNode:kr,isFunctionNode:Xt,isIndexNode:dr,isNode:$e,isObjectNode:un,isOperatorNode:lt,isParenthesisNode:Vt,isRangeNode:Ga,isRelationalNode:Ka,isSymbolNode:ot,isChain:Vi});n.config=Rp(t,n.emit),n.expression={transform:{},mathWithTransform:{config:n.config}};var i=[],o=[];function a(c){if(mi(c))return c(n);var f=c[Object.keys(c)[0]];if(mi(f))return f(n);if(!Bp(c))throw console.warn("Factory object with properties `type`, `name`, and `factory` expected",c),new Error("Factory object with properties `type`, `name`, and `factory` expected");var m=i.indexOf(c),p;return m===-1?(c.math===!0?p=c.factory(n.type,t,a,n.typed,n):p=c.factory(n.type,t,a,n.typed),i.push(c),o.push(p)):p=o[m],p}var s={};function l(){for(var c=arguments.length,f=new Array(c),m=0;m<c;m++)f[m]=arguments[m];return n.typed.apply(n.typed,f)}l.isTypedFunction=AE.default.isTypedFunction;var u=SE(l,a,n,s);return n.import=u,n.on("config",()=>{Object.values(s).forEach(c=>{c&&c.meta&&c.meta.recreateOnConfigChange&&u(c,{override:!0})})}),n.create=Ol.bind(null,r),n.factory=N,n.import(Object.values(Fp(r))),n.ArgumentsError=Er,n.DimensionError=ke,n.IndexError=Wt,n}var Jn=Ol(Tf,{}),L5={SI:{"0,1,0,0,0,0,0,0,0":"m","0,2,0,0,0,0,0,0,0":"m^2","0,3,0,0,0,0,0,0,0":"L","0,3,-1,0,0,0,0,0,0":"m^3/s","0,0,1,0,0,0,0,0,0":"s","0,1,-1,0,0,0,0,0,0":"m/s","0,1,-2,0,0,0,0,0,0":"m/s^2","1,0,0,0,0,0,0,0,0":"kg","1,1,-2,0,0,0,0,0,0":"N","1,-1,-2,0,0,0,0,0,0":"Pa","1,2,-2,0,0,0,0,0,0":"J","1,2,-3,0,0,0,0,0,0":"W","1,-3,0,0,0,0,0,0,0":"kg/m^3","0,0,-1,0,0,0,0,0,0":"Hz","0,0,0,0,1,0,0,0,0":"degC","0,0,0,0,0,0,0,1,0":"rad"},US:{"0,1,0,0,0,0,0,0,0":"ft","0,2,0,0,0,0,0,0,0":"ft^2","0,3,0,0,0,0,0,0,0":"gal","0,3,-1,0,0,0,0,0,0":"ft^3/min","0,0,1,0,0,0,0,0,0":"s","0,1,-1,0,0,0,0,0,0":"ft/s","0,1,-2,0,0,0,0,0,0":"ft/s^2","1,0,0,0,0,0,0,0,0":"lb","1,1,-2,0,0,0,0,0,0":"lbf","1,-1,-2,0,0,0,0,0,0":"psi","1,2,-2,0,0,0,0,0,0":"ft*lbf","1,2,-3,0,0,0,0,0,0":"hp","1,-3,0,0,0,0,0,0,0":"lb/ft^3","0,0,-1,0,0,0,0,0,0":"Hz","0,0,0,0,1,0,0,0,0":"degF","0,0,0,0,0,0,0,1,0":"deg"}},z5={degC:"\xB0C",degF:"\xB0F",degR:"\xB0R",deg:"\xB0"};function Bf(r,e){if(!NE(r))return r;let t=q5(r),n=L5[e][t];if(!n)return r;try{return r.to(n)}catch{return r}}function _f(r,e=4,t="SI",n={}){try{if(typeof r=="number"){let o=Bl(r.toFixed(e));return{magnitude:o,unit:"",display:o}}if(NE(r)){let o=n.skipSystemConversion?r:Bf(r,t),a=o.formatUnits(),s=a?z5[a]??a:"",l;a?l=o.toNumber(a):l=o.toNumber();let u=Bl(l.toFixed(e)),c=s?`${u} ${s}`.trim():u;return{magnitude:u,unit:s,display:c}}if(r?.format){let o=r.format({notation:"fixed",precision:e});return{magnitude:o,unit:"",display:o}}let i=String(r);return{magnitude:i,unit:"",display:i}}catch{let i=String(r);return{magnitude:i,unit:"",display:i}}}function NE(r){return!!r&&typeof r=="object"&&Array.isArray(r.dimensions)}function q5(r){return r.dimensions?.join(",")??""}function Bl(r){return r.replace(/(\.\d*?[1-9])0+$/,"$1").replace(/\.0+$/,"")}function _l(r,e=4){try{if(typeof r=="number")return Bl(r.toFixed(e));if(r?.toNumber){let t=r.formatUnits(),n=r.toNumber(t),i=Bl(n.toFixed(e)),o=t?`\\,${U5(t)}`:"";return`${i}${o}`.trim()}return typeof r?.toTex=="function"?r.toTex({notation:"fixed",precision:e}):r?.format?Xn(r.format({notation:"fixed",precision:e})):Xn(String(r))}catch{return Xn(String(r))}}function U5(r){return r.split(/\s+/).filter(Boolean).map(e=>{if(e==="/")return"/";if(e==="*")return"\\cdot";let t=e.match(/^([A-Za-z%]+)(\^(-?\d+))?$/);if(t){let n=`\\mathrm{${Xn(t[1])}}`;return t[3]?`${n}^{${t[3]}}`:n}return`\\mathrm{${Xn(e)}}`}).join("\\,")}function Xn(r){return r.replace(/([\\{}_^%$#&])/g,"\\$1")}var kl=class{constructor(e){this.scopes=new Map;this.globalVars=new Map;this.unitNames=Object.freeze(Object.keys(Jn.Unit?.UNITS??{}).sort((e,t)=>e.localeCompare(t)));this.plugin=e}getScope(e){let t=this.scopes.get(e);return t?this.ensureScopeMaps(t):(t={vars:new Map,formulas:new Map,dependencies:new Map,dependents:new Map,lineCache:new Map},this.scopes.set(e,t)),t}peekScope(e){let t=this.scopes.get(e);return t?(this.ensureScopeMaps(t),t):null}clearScope(e){this.scopes.delete(e)&&this.plugin.handleScopeChanged(e)}clearAllScopes(){this.scopes.size!==0&&(this.scopes.clear(),this.plugin.handleScopeChanged(null))}listGlobalVars(){return this.globalVars}listKnownUnits(){return this.unitNames}async evaluateBlock(e,t){let n=document.createElement("div");n.classList.add("calc-output");let i=t.sourcePath||"untitled",o=this.plugin.settings.latexFormatting,a=this.buildBlockKey(t,e),{entries:s,scope:l}=this.evaluateToEntries(e,i,{persist:!0,resetScope:this.plugin.settings.autoRecalc,blockKey:a});for(let u of s){if(u.type==="blank")continue;let c=document.createElement("div");if(c.classList.add("calc-line"),c.dataset.plain=u.plain??u.line??"",u.type==="comment"){let f=document.createElement("span");f.classList.add("calc-comment"),f.textContent=u.text??u.line,c.appendChild(f)}else if(u.type==="assignment")if(o&&u.displayValue!==void 0){let f=G5(u.name??"",u.expr??"",u.displayValue,this.plugin.settings.sigFigs);kf(c,f)}else{let f=document.createElement("span");f.classList.add("lhs"),f.textContent=u.name??"";let m=document.createElement("span");m.classList.add("rhs"),m.textContent=`= ${u.display??""}`,c.append(f,m)}else if(u.type==="convert")if(o&&u.displayValue!==void 0){let f=K5(u.expr??"",u.target??"",u.displayValue,this.plugin.settings.sigFigs);kf(c,f)}else{let f=document.createElement("span");f.classList.add("rhs"),f.textContent=`${u.expr??""} \u2192 ${u.target??""} = ${u.display??""}`,c.appendChild(f)}else if(u.type==="expression")if(o&&u.displayValue!==void 0){let f=Y5(u.expr??"",u.displayValue,this.plugin.settings.sigFigs);kf(c,f)}else{let f=document.createElement("span");f.classList.add("rhs"),f.textContent=u.display??"",c.appendChild(f)}else u.type==="error"&&(c.classList.add("calc-error"),c.textContent=`Error: ${u.error??""}`);n.appendChild(c)}return this.plugin.refreshVariablesView(l),this.plugin.handleScopeChanged(i),n}async evaluateInline(e,t){let n=document.createElement("span");n.classList.add("calc-inline");let i=e.trim();if(!i)return n;let o=t.sourcePath||"untitled",a=this.getScope(o),s=this.plugin.settings.defaultUnitSystem;try{let l=this.evaluateLine(i,a,s);if(l.kind==="assignment"){let u=document.createElement("span");u.classList.add("lhs"),u.textContent=l.name;let c=document.createElement("span");c.classList.add("rhs"),c.textContent=`= ${l.display}`,n.append(u,c)}else if(l.kind==="conversion"||l.kind==="expression"){let u=document.createElement("span");u.classList.add("rhs"),u.textContent=`= ${l.display}`,n.appendChild(u)}else n.textContent=i}catch(l){n.classList.add("calc-inline-error"),n.textContent=`Error: ${l?.message??String(l)}`}return this.plugin.refreshVariablesView(a),this.plugin.handleScopeChanged(o),n}evaluateToEntries(e,t,n){let i=n?.persist??!0,o;i?((n?.resetScope??!1)&&this.clearScope(t),o=this.getScope(t)):n?.scope?(n.resetScope&&n.scope.vars.clear(),o=n.scope):o={vars:new Map},this.ensureScopeMaps(o);let a=this.plugin.settings.defaultUnitSystem,s=[],l=e.split(/\r?\n/),u=n?.blockKey??`${t}:${CE(e)}`,c=new Set;l.forEach((f,m)=>{let p=f.trim(),h=`${u}:${m}`;if(c.add(h),!p){s.push({raw:f,line:"",type:"blank"});return}try{let d=this.evaluateLine(p,o,a,f.trim());if(d.kind==="comment")s.push({raw:f,line:p,type:"comment",text:d.text,plain:d.plain});else if(d.kind==="assignment"){let v=this.analyzeDependencies(d.expr??"");d.name&&this.updateDependencyGraph(o,d.name,d.expr??"",v),s.push({raw:f,line:p,type:"assignment",name:d.name,expr:d.expr,value:d.value,display:d.display,displayValue:d.displayValue,magnitude:d.magnitude,unit:d.unit,plain:d.plain})}else if(d.kind==="conversion"){let v=this.analyzeDependencies(d.expr??"");o.lineCache.set(h,{expr:d.expr??"",value:d.value,display:d.display??"",dependencies:v,type:"convert",targetUnit:d.target}),s.push({raw:f,line:p,type:"convert",expr:d.expr,target:d.target,value:d.value,display:d.display,displayValue:d.displayValue,magnitude:d.magnitude,unit:d.unit,plain:d.plain})}else if(d.kind==="expression"){let v=this.analyzeDependencies(d.expr??"");o.lineCache.set(h,{expr:d.expr??"",value:d.value,display:d.display??"",dependencies:v,type:"expression"}),s.push({raw:f,line:p,type:"expression",expr:d.expr,value:d.value,display:d.display,displayValue:d.displayValue,magnitude:d.magnitude,unit:d.unit,plain:d.plain})}}catch(d){let v=d?.message??String(d);s.push({raw:f,line:p,type:"error",error:v,plain:p})}});for(let f of Array.from(o.lineCache.keys()))f.startsWith(`${u}:`)&&!c.has(f)&&o.lineCache.delete(f);return{entries:s,scope:o}}getGlobalVariables(){return this.globalVars}loadGlobalVars(e={}){this.globalVars.clear();let t=this.plugin.settings.defaultUnitSystem;for(let[n,i]of Object.entries(e)){if(!i)continue;let o=i.source??"",a=i.value,s=this.formatForDisplay(a,t);if(o)try{let l=this.buildGlobalEvalScope(n);a=Jn.evaluate(o,l),s=this.formatForDisplay(a,t)}catch{s={display:i.display??s.display,magnitude:i.magnitude??s.magnitude,unit:i.unit??s.unit}}this.globalVars.set(n,{value:a,display:s.display,magnitude:s.magnitude,unit:s.unit,source:o})}this.plugin.handleScopeChanged(null)}getGlobalVarsSnapshot(){return Array.from(this.globalVars.entries()).sort((e,t)=>e[0].localeCompare(t[0])).map(([e,t])=>[e,this.toGlobalEntry(t)])}serializeGlobalVars(){let e={};for(let[t,n]of this.globalVars.entries())e[t]=this.toGlobalEntry(n);return e}async upsertGlobalVar(e,t){let n=e.trim(),i=t.trim();if(!n)throw new Error("Name is required");if(!this.isValidIdentifier(n))throw new Error("Invalid variable name");if(!i)throw new Error("Expression is required");let o=this.buildGlobalEvalScope(n),a=Jn.evaluate(i,o),s=this.plugin.settings.defaultUnitSystem,l=this.formatForDisplay(a,s),u={value:a,display:l.display,magnitude:l.magnitude,unit:l.unit,source:i};return this.globalVars.set(n,u),await this.plugin.saveToolkitData(),this.plugin.handleScopeChanged(null),u}async deleteGlobalVar(e){let t=e.trim();this.globalVars.has(t)&&(this.globalVars.delete(t),await this.plugin.saveToolkitData(),this.plugin.handleScopeChanged(null))}evalExpression(e,t){let n={};if(this.plugin.settings.globalVarsEnabled)for(let[i,o]of this.globalVars.entries())n[i]=o.value;for(let[i,o]of t.vars.entries())n[i]=o.value;return Jn.evaluate(e,n)}evaluateLine(e,t,n,i){if(e.startsWith("//")||e.startsWith("#"))return{kind:"comment",text:e,plain:e};if(V5(e)){let{name:l,expr:u}=H5(e),c=this.evalExpression(u,t),{displayValue:f,formatted:m}=this.formatForEvaluation(c,n);return t.vars.set(l,{value:c,display:m.display,magnitude:m.magnitude,unit:m.unit,sourceLine:i}),{kind:"assignment",name:l,expr:u,value:c,displayValue:f,display:m.display,magnitude:m.magnitude,unit:m.unit,plain:`${l} = ${m.display}`}}if($5(e)){let{expr:l,target:u}=W5(e),c=this.evalExpression(l,t),f=c;typeof c?.to=="function"&&(f=c.to(u));let m=_f(f,this.plugin.settings.sigFigs,n,{skipSystemConversion:!0});return{kind:"conversion",expr:l,target:u,value:f,displayValue:f,display:m.display,magnitude:m.magnitude,unit:m.unit,plain:`${l} \u2192 ${u} = ${m.display}`}}let o=this.evalExpression(e,t),{displayValue:a,formatted:s}=this.formatForEvaluation(o,n);return{kind:"expression",expr:e,value:o,displayValue:a,display:s.display,magnitude:s.magnitude,unit:s.unit,plain:`${e} = ${s.display}`}}formatForEvaluation(e,t){let n=Bf(e,t),i=_f(n,this.plugin.settings.sigFigs,t,{skipSystemConversion:!0});return{displayValue:n,formatted:i}}ensureScopeMaps(e){e.formulas||(e.formulas=new Map),e.dependencies||(e.dependencies=new Map),e.dependents||(e.dependents=new Map),e.lineCache||(e.lineCache=new Map)}buildBlockKey(e,t){let n=e?.docId;return n!==void 0?String(n):`${e.sourcePath||"untitled"}:${CE(t)}`}analyzeDependencies(e){let t=new Set;if(!e)return t;try{Jn.parse(e).traverse(i=>{i?.isSymbolNode&&t.add(i.name)})}catch(n){console.debug("[CalcEngine] Failed to parse dependencies",{expr:e,error:n})}return t}updateDependencyGraph(e,t,n,i){let o=e.dependencies.get(t);if(o){for(let a of o)if(!i.has(a)){let s=e.dependents.get(a);s&&(s.delete(t),s.size===0&&e.dependents.delete(a))}}for(let a of i)e.dependents.has(a)||e.dependents.set(a,new Set),e.dependents.get(a).add(t);e.dependencies.set(t,new Set(i)),e.formulas.set(t,n)}buildGlobalEvalScope(e){let t={};for(let[n,i]of this.globalVars.entries())e&&n===e||(t[n]=i.value);return t}toGlobalEntry(e){return{value:e.value,display:e.display,magnitude:e.magnitude,unit:e.unit,source:e.source??""}}isValidIdentifier(e){return/^[A-Za-z_][A-Za-z0-9_]*$/.test(e)}};function V5(r){return/^[A-Za-z_][A-Za-z0-9_]*\s*=\s*.+$/.test(r)}function H5(r){let e=r.indexOf("=");return{name:r.slice(0,e).trim(),expr:r.slice(e+1).trim()}}function $5(r){return/\s(->|to)\s/.test(r)}function W5(r){let e=r.match(/^(.*)\s(?:->|to)\s(.*?)$/);if(!e)throw new Error("Bad convert syntax. Use: expr -> unit");return{expr:e[1].trim(),target:e[2].trim()}}function CE(r){let e=0;for(let t=0;t<r.length;t++)e=(e<<5)-e+r.charCodeAt(t),e|=0;return Math.abs(e).toString(36)}function kf(r,e){let t=document.createElement("div");t.classList.add("calc-equation","mathjax-block"),t.textContent=`$$${e}$$`,r.appendChild(t)}function G5(r,e,t,n){let i=Z5(r),o=Pl(e),a=_l(t,n);return Pf([`${i} &= ${o}`,`&= ${a}`])}function K5(r,e,t,n){let i=Pl(r),o=Pl(e),a=_l(t,n);return Pf([`${i} &\rightarrow ${o}`,`&= ${a}`])}function Y5(r,e,t){let n=Pl(r),i=_l(e,t);return Pf([`${n} &= ${i}`])}function Pl(r){try{return Jn.parse(r).toTex({parenthesis:"auto"}).trim()}catch{return Xn(r)}}function Z5(r){try{return Jn.parse(r).toTex({parenthesis:"auto"}).trim()}catch{return Xn(r)}}function Pf(r){return`\\begin{aligned} ${r.join(" \\\\ ")} \\end{aligned}`}var jn=require("obsidian");var Xo=require("obsidian"),EE=[{system:"SI",category:"Length",name:"meter",symbol:"m"},{system:"SI",category:"Length",name:"kilometer",symbol:"km"},{system:"SI",category:"Length",name:"millimeter",symbol:"mm"},{system:"SI",category:"Mass",name:"kilogram",symbol:"kg"},{system:"SI",category:"Mass",name:"gram",symbol:"g"},{system:"SI",category:"Time",name:"second",symbol:"s"},{system:"SI",category:"Time",name:"minute",symbol:"min"},{system:"SI",category:"Temperature",name:"kelvin",symbol:"K"},{system:"SI",category:"Temperature",name:"degree Celsius",symbol:"\xB0C"},{system:"SI",category:"Force",name:"newton",symbol:"N"},{system:"SI",category:"Pressure",name:"pascal",symbol:"Pa"},{system:"SI",category:"Energy",name:"joule",symbol:"J"},{system:"SI",category:"Power",name:"watt",symbol:"W"},{system:"SI",category:"Volume",name:"liter",symbol:"L"},{system:"SI",category:"Area",name:"square meter",symbol:"m\xB2"},{system:"US",category:"Length",name:"inch",symbol:"in"},{system:"US",category:"Length",name:"foot",symbol:"ft"},{system:"US",category:"Length",name:"mile",symbol:"mi"},{system:"US",category:"Mass",name:"pound",symbol:"lb"},{system:"US",category:"Mass",name:"ounce",symbol:"oz"},{system:"US",category:"Time",name:"second",symbol:"s"},{system:"US",category:"Time",name:"minute",symbol:"min"},{system:"US",category:"Temperature",name:"degree Fahrenheit",symbol:"\xB0F"},{system:"US",category:"Force",name:"pound-force",symbol:"lbf"},{system:"US",category:"Pressure",name:"pounds per square inch",symbol:"psi"},{system:"US",category:"Energy",name:"BTU",symbol:"BTU"},{system:"US",category:"Power",name:"horsepower",symbol:"hp"},{system:"US",category:"Volume",name:"gallon",symbol:"gal"},{system:"US",category:"Area",name:"square foot",symbol:"ft\xB2"}];function ME(r){let e=new Map;for(let t of r)e.has(t.category)||e.set(t.category,[]),e.get(t.category).push(t);return e}var Il=class extends Xo.Modal{constructor(e,t){super(e.app),this.plugin=e,this.onChoose=t,this.system=this.plugin.settings.defaultUnitSystem}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h3",{text:"Select a unit"});let t=e.createDiv({cls:"unit-picker-system"});t.createSpan({text:"System:"});let n=t.createEl("select");for(let i of["SI","US"]){let o=n.createEl("option",{text:i,value:i});i===this.system&&(o.selected=!0)}n.onchange=()=>{this.system=n.value,this.renderUnitList(e)},e.createDiv({cls:"unit-picker-divider"}),this.renderUnitList(e)}renderUnitList(e){let t=e.querySelector(".unit-picker-list");t||(t=e.createDiv({cls:"unit-picker-list"})),t.empty();let n=EE.filter(o=>o.system===this.system);ME(n).forEach((o,a)=>{t.createEl("h4",{text:a}).addClass("unit-picker-category");let l=t.createDiv({cls:"unit-picker-buttons"});for(let u of o){let c=l.createEl("button",{text:`${u.name} (${u.symbol})`});c.onclick=()=>{if(!this.plugin.insertUnitIntoActiveEditor(u.symbol)){new Xo.Notice("No active editor to insert unit");return}this.onChoose?.(u),this.close()}}})}};function TE(r,e){let t=r.createDiv({cls:"unit-picker-inline"});t.createEl("h3",{text:"Unit Picker"});let n=t.createDiv({cls:"unit-picker-controls"});n.createSpan({text:"System:"}).addClass("unit-picker-label");let o=n.createEl("select");["SI","US"].forEach(c=>{let f=o.createEl("option",{text:c,value:c});c===e.settings.defaultUnitSystem&&(f.selected=!0)});let a=n.createEl("select",{cls:"unit-picker-unit-select"}),s=()=>{let c=o.value;a.empty(),ME(EE.filter(m=>m.system===c)).forEach((m,p)=>{let h=a.createEl("optgroup",{label:p});for(let d of m)h.createEl("option",{text:`${d.name} (${d.symbol})`,value:d.symbol})})};o.onchange=()=>s(),s();let u=t.createDiv({cls:"unit-picker-actions"}).createEl("button",{text:"Insert unit"});return u.onclick=()=>{let c=a.value;c&&(e.insertUnitIntoActiveEditor(c)||new Xo.Notice("No active editor to insert unit"))},t}var Qn="engineering-toolkit-variables",Rl=class extends jn.ItemView{constructor(t,n){super(t);this.panelEl=null;this.groupsEl=null;this.filterSelect=null;this.filter="all";this.plugin=n}getViewType(){return Qn}getDisplayText(){return"Variables"}getIcon(){return"calculator"}async onOpen(){this.root=this.containerEl.children[1],this.root.empty(),this.panelEl=this.root.createEl("div",{cls:"variables-panel"});let t=this.panelEl.createEl("div",{cls:"var-header"});t.createEl("h3",{text:"Variables & Units"}),this.filterSelect=t.createEl("select",{cls:"var-filter"});let n=[{value:"all",label:"All"},{value:"local",label:"Local"},{value:"global",label:"Global"}];for(let o of n){let a=this.filterSelect.createEl("option",{value:o.value,text:o.label});o.value===this.filter&&(a.selected=!0)}this.filterSelect.addEventListener("change",()=>{this.filter=this.filterSelect.value,this.renderScope(this.currentScope)}),this.panelEl.createEl("div",{cls:"help",text:"Adjust numeric values or units and updates will write back into the active note."});let i=this.panelEl.createEl("div",{cls:"var-tools"});TE(i,this.plugin),this.groupsEl=this.panelEl.createEl("div",{cls:"var-groups"})}renderScope(t){if(this.currentScope=t,!this.panelEl||!this.groupsEl)return;this.filterSelect&&(this.filterSelect.value=this.filter),this.groupsEl.empty();let n=this.filter==="all"||this.filter==="local",i=this.filter==="all"||this.filter==="global",o=!1;if(n){let a=this.renderGroup(this.groupsEl,"Local variables",t?.vars??new Map,"local");o=o||a}if(i){let a=this.plugin.getGlobalVariables(),s=this.renderGroup(this.groupsEl,"Global variables",a,"global");o=o||s}o||this.groupsEl.createEl("div",{cls:"var-empty",text:"No variables to display."})}renderGroup(t,n,i,o){let a=t.createEl("div",{cls:"var-group"});a.createEl("h4",{text:n});let s=a.createEl("div",{cls:"var-list"}),l=Array.from(i.entries()).sort((u,c)=>u[0].localeCompare(c[0],void 0,{sensitivity:"base"}));if(!l.length){let u=o==="local"?"No variables defined in this note.":"No global variables defined.";return s.createEl("div",{cls:"var-empty",text:u}),!1}for(let[u,c]of l)this.renderVariableRow(s,u,c,o);return!0}renderVariableRow(t,n,i,o){let a=t.createEl("div",{cls:"var-item"});a.createEl("span",{cls:"var-name",text:n});let s=a.createEl("div",{cls:"var-inputs"}),l=s.createEl("input",{type:"text",cls:"var-magnitude",value:i.magnitude});l.placeholder="Value";let u=s.createEl("input",{type:"text",cls:"var-unit",value:i.unit});if(u.placeholder="Unit",a.createEl("span",{cls:"var-display",text:i.display}),a.createEl("div",{cls:"var-actions"}).createEl("button",{cls:"var-copy",text:"Copy"}).addEventListener("click",async()=>{await navigator.clipboard.writeText(`${n} = ${i.display}`),new jn.Notice("Copied variable to clipboard")}),o==="local"){let m=async()=>{let h=l.value.trim(),d=u.value.trim();if(!h){new jn.Notice("Value cannot be empty."),l.focus();return}h===i.magnitude&&d===i.unit||await this.applyEdit(n,h,d,i)};l.addEventListener("change",m),u.addEventListener("change",m);let p=h=>{h.key==="Enter"&&(h.preventDefault(),m())};l.addEventListener("keydown",p),u.addEventListener("keydown",p)}else l.disabled=!0,u.disabled=!0}async applyEdit(t,n,i,o){try{await this.plugin.updateVariableAssignment(t,n,i,o.sourceLine)?new jn.Notice(`Updated ${t}`):new jn.Notice(`Could not update ${t} in the note.`)}catch(a){console.error(a),new jn.Notice(`Failed to update ${t}.`)}}};var ei=require("obsidian");var X5=/[\\/:*?"<>|]/g;function FE(r){return r.trim().replace(X5,"-").replace(/\s+/g," ").replace(/-+/g,"-").replace(/^-+|-+$/g,"")||"Untitled"}function OE(r,e){return`${r} ${e}.md`}function BE(r){return(r.trim()||"Lab Journal").replace(/\\+/g,"/").replace(/\/+$/g,"")}function _E(r,e){return`${r}/${e}`}function kE(r,e){let t=r?.trim().length?r:_o,n={title:e.title,date:e.date,iso_date:e.date,time:e.time,datetime:e.datetime,iso_datetime:e.datetime,experiment_id:e.experimentId,folder:e.folder,filename:e.filename,year:e.year,month:e.month,day:e.day};return t.replace(/{{\s*(\w+)\s*}}/g,(i,o)=>n[o]??"")}async function IE(r){let e=r.app,t=await r.prompt("Enter experiment title:");if(!t)return;let i=e.moment?.()??null,o=i?.format?.("YYYY-MM-DD")??new Date().toISOString().slice(0,10),a=i?.format?.("HH:mm")??new Date().toISOString().slice(11,16),s=i?.toISOString?.()??new Date().toISOString(),l=BE(r.settings.labNotesFolder||"Lab Journal"),u=FE(t),c=OE(o,u),f=_E(l,c),m=u.replace(/\s+/g,"-"),p=`${o}-${m}`,[h="",d="",v=""]=o.split("-"),x=r.settings.labNoteTemplate??"",D=kE(x,{title:t,date:o,time:a,datetime:s,experimentId:p,folder:l,filename:c,year:h,month:d,day:v});e.vault.getAbstractFileByPath(l)||await e.vault.createFolder(l).catch(()=>{});let g=e.vault.getAbstractFileByPath(f);if(g instanceof ei.TFile){new ei.Notice("Experiment note already exists. Opening existing note."),await e.workspace.getLeaf(!0).openFile(g),await PE(r,t,f,o);return}try{await e.vault.create(f,D);let w=e.vault.getAbstractFileByPath(f);w instanceof ei.TFile&&(await e.workspace.getLeaf(!0).openFile(w),await PE(r,t,f,o))}catch(w){console.error("Failed to create experiment note",w),new ei.Notice("Failed to create experiment note")}}async function PE(r,e,t,n){let i=r.app,o=r.settings.labIndexPath?.trim();if(!o)return;let a=o.endsWith(".md")?o:`${o.replace(/\/$/,"")||"Lab Journal"}/index.md`,s=a.split("/").slice(0,-1).join("/");s&&!i.vault.getAbstractFileByPath(s)&&await i.vault.createFolder(s).catch(()=>{});try{let l=i.vault.getAbstractFileByPath(a),u=t.replace(/\.md$/,""),c=`- ${n} [[${u}|${e}]]`;if(l instanceof ei.TFile){let f=await i.vault.read(l);if(f.includes(u))return;let m=`${f.trimEnd()}
${c}
`;await i.vault.modify(l,m)}else{let f=`# Lab Journal Index

${c}
`;await i.vault.create(a,f)}}catch(l){console.error("Failed to update lab index",l),new ei.Notice("Failed to update lab index")}}var Hr=require("obsidian"),Ll=class{constructor(e){this.plugin=e}async exportActiveNoteOrSelection(){let e=this.plugin.app.workspace.getActiveViewOfType(Hr.MarkdownView);if(!e||!e.file){new Hr.Notice("Open a markdown note to export calculations");return}let t=e.file,i=e.editor.getSelection(),o=!!i.trim(),a=o?i:await this.plugin.app.vault.read(t),s=this.extractCalcBlocks(a);if(!s.length){new Hr.Notice("No calc code blocks found to export");return}let l={vars:new Map},u=[],c=!0;for(let f of s){let{entries:m}=this.plugin.calc.evaluateToEntries(f,t.path,{persist:!1,scope:l,resetScope:c});u.push({source:f,entries:m}),c=!1}try{await this.persistExport(t,u,o)}catch(f){console.error("Engineering Toolkit export failed",f),new Hr.Notice(`Failed to export calculations: ${f?.message??String(f)}`)}}extractCalcBlocks(e){let t=/```calc\s*\n([\s\S]*?)```/g,n=[],i;for(;(i=t.exec(e))!==null;)n.push(i[1]);return n}async persistExport(e,t,n){let i=this.plugin.settings,o=i.exportOutputFolder?.trim()??"",a=i.exportFormat??"script",s=this.makeBaseName(e,n),l=a==="notebook"?`${s}.ipynb`:`${s}.py`,u=(0,Hr.normalizePath)(o?`${o}/${l}`:l);await this.ensureFolder(o);let c=a==="notebook"?this.buildNotebook(t):this.buildScript(t),f=this.plugin.app.vault.getAbstractFileByPath(u);f instanceof Hr.TFile?await this.plugin.app.vault.modify(f,c):await this.plugin.app.vault.create(u,c),new Hr.Notice(`Exported calculations to ${u}`)}async ensureFolder(e){if(!e)return;let t=(0,Hr.normalizePath)(e);await this.plugin.app.vault.adapter.exists(t)||await this.plugin.app.vault.createFolder(t).catch(()=>{})}makeBaseName(e,t){let n=e.basename.replace(/[^A-Za-z0-9-_]+/g,"_");return t?`${n}-selection-${Date.now()}`:`${n}-calc-export`}buildScript(e){return this.buildScriptLines(e).join(`
`)+`
`}buildScriptLines(e){let n=["# Generated by Engineering Toolkit",`# Exported on ${new Date().toISOString()}`,"from typing import Any, Dict","","results: Dict[str, Any] = {}",""];for(let i of e){n.push("# --- calc block ---");for(let o of i.entries)switch(o.type){case"blank":n.push("");break;case"comment":n.push(`# ${o.line.replace(/^#\s*/,"")}`);break;case"assignment":{let a=this.pythonIdentifier(o.name??"value"),s=this.pythonLiteral(o),l=o.expr?`  # ${o.expr}`:"",u=o.display?`  # ${o.display}`:"";n.push(`${a} = ${s}${l}`),n.push(`results["${a}"] = ${a}${u}`);break}case"convert":{let a=o.expr??"",s=o.target??"",l=o.display??"",u=["# convert:",a,"->",s,"=",l].filter(Boolean).join(" ");n.push(u);break}case"expression":{let a=o.expr??"",s=o.display??"",l=a&&s?`# ${a} = ${s}`:`# ${a||s}`;n.push(l);break}case"error":n.push(`# ERROR: ${o.error}`);break}n.push("","")}return n.push('print("Calculation results:")'),n.push("for key, value in results.items():"),n.push('    print(f"{key}: {value}")'),n}buildNotebook(e){let t=this.buildScriptLines(e).map(i=>i+`
`);return JSON.stringify({cells:[{cell_type:"markdown",metadata:{},source:[`# Calculations Exported from Engineering Toolkit
`]},{cell_type:"code",metadata:{},execution_count:null,outputs:[],source:t}],metadata:{kernelspec:{display_name:"Python 3",language:"python",name:"python3"},language_info:{name:"python",file_extension:".py",mimetype:"text/x-python",codemirror_mode:{name:"ipython",version:3}}},nbformat:4,nbformat_minor:5},null,2)}pythonIdentifier(e){let t=this.plugin.settings.exportVariableStyle??"preserve",i=e.replace(/[^A-Za-z0-9_\s]/g," ").replace(/\s+/g," ").trim()||"value",o=i;switch(t){case"snake_case":o=this.toSnakeCase(i);break;case"camelCase":o=this.toCamelCase(i);break;default:o=i.replace(/\s+/g,"_")}return o=o.replace(/^[^A-Za-z_]+/,""),o||(o="value"),o}toSnakeCase(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/[^A-Za-z0-9]+/g,"_").replace(/_{2,}/g,"_").toLowerCase()}toCamelCase(e){let t=e.replace(/[^A-Za-z0-9]+/g," ").trim().split(/\s+/);if(!t.length)return"value";let[n,...i]=t;return n.toLowerCase()+i.map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join("")}pythonLiteral(e){let t=e.value;if(typeof t=="number"&&Number.isFinite(t))return Number(t).toString();if(typeof t=="boolean")return t?"True":"False";if(typeof t=="string")return JSON.stringify(t);if(t&&typeof t.toNumber=="function"&&typeof t.formatUnits=="function")try{let n=t.formatUnits();return`{"value": ${t.toNumber(n)}, "unit": "${n}"}`}catch{return JSON.stringify(e.display??String(t))}return JSON.stringify(e.display??String(t??""))}};var Rf=[],qE=[];(()=>{let r="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<r.length;e++)(e%2?qE:Rf).push(t=t+r[e])})();function J5(r){if(r<768)return!1;for(let e=0,t=Rf.length;;){let n=e+t>>1;if(r<Rf[n])t=n;else if(r>=qE[n])e=n+1;else return!0;if(e==t)return!1}}function RE(r){return r>=127462&&r<=127487}var LE=8205;function UE(r,e,t=!0,n=!0){return(t?VE:j5)(r,e,n)}function VE(r,e,t){if(e==r.length)return e;e&&HE(r.charCodeAt(e))&&$E(r.charCodeAt(e-1))&&e--;let n=If(r,e);for(e+=zE(n);e<r.length;){let i=If(r,e);if(n==LE||i==LE||t&&J5(i))e+=zE(i),n=i;else if(RE(i)){let o=0,a=e-2;for(;a>=0&&RE(If(r,a));)o++,a-=2;if(o%2==0)break;e+=2}else break}return e}function j5(r,e,t){for(;e>0;){let n=VE(r,e-2,t);if(n<e)return n;e--}return 0}function If(r,e){let t=r.charCodeAt(e);if(!$E(t)||e+1==r.length)return t;let n=r.charCodeAt(e+1);return HE(n)?(t-55296<<10)+(n-56320)+65536:t}function HE(r){return r>=56320&&r<57344}function $E(r){return r>=55296&&r<56320}function zE(r){return r<65536?1:2}var st=class r{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=xo(this,e,t);let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(t,this.length,i,1),go.from(i,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=xo(this,e,t);let n=[];return this.decompose(e,t,n,0),go.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new Ci(this),o=new Ci(e);for(let a=t,s=t;;){if(i.next(a),o.next(a),a=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(s+=i.value.length,i.done||s>=n)return!0}}iter(e=1){return new Ci(this,e)}iterRange(e,t=this.length){return new Vl(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Hl(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?r.empty:e.length<=32?new Tr(e):go.from(Tr.split(e,[]))}},Tr=class r extends st{constructor(e,t=Q5(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,i){for(let o=0;;o++){let a=this.text[o],s=i+a.length;if((t?n:s)>=e)return new zf(i,s,n,a);i=s+1,n++}}decompose(e,t,n,i){let o=e<=0&&t>=this.length?this:new r(WE(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let a=n.pop(),s=Ul(o.text,a.text.slice(),0,o.length);if(s.length<=32)n.push(new r(s,a.length+o.length));else{let l=s.length>>1;n.push(new r(s.slice(0,l)),new r(s.slice(l)))}}else n.push(o)}replace(e,t,n){if(!(n instanceof r))return super.replace(e,t,n);[e,t]=xo(this,e,t);let i=Ul(this.text,Ul(n.text,WE(this.text,0,e)),t),o=this.length+n.length-(t-e);return i.length<=32?new r(i,o):go.from(r.split(i,[]),o)}sliceString(e,t=this.length,n=`
`){[e,t]=xo(this,e,t);let i="";for(let o=0,a=0;o<=t&&a<this.text.length;a++){let s=this.text[a],l=o+s.length;o>e&&a&&(i+=n),e<l&&t>o&&(i+=s.slice(Math.max(0,e-o),t-o)),o=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],i=-1;for(let o of e)n.push(o),i+=o.length+1,n.length==32&&(t.push(new r(n,i)),n=[],i=-1);return i>-1&&t.push(new r(n,i)),t}},go=class r extends st{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,i){for(let o=0;;o++){let a=this.children[o],s=i+a.length,l=n+a.lines-1;if((t?l:s)>=e)return a.lineInner(e,t,n,i);i=s+1,n=l+1}}decompose(e,t,n,i){for(let o=0,a=0;a<=t&&o<this.children.length;o++){let s=this.children[o],l=a+s.length;if(e<=l&&t>=a){let u=i&((a<=e?1:0)|(l>=t?2:0));a>=e&&l<=t&&!u?n.push(s):s.decompose(e-a,t-a,n,u)}a=l+1}}replace(e,t,n){if([e,t]=xo(this,e,t),n.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let a=this.children[i],s=o+a.length;if(e>=o&&t<=s){let l=a.replace(e-o,t-o,n),u=this.lines-a.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[i]=l,new r(c,this.length-(t-e)+n.length)}return super.replace(o,s,l)}o=s+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){[e,t]=xo(this,e,t);let i="";for(let o=0,a=0;o<this.children.length&&a<=t;o++){let s=this.children[o],l=a+s.length;a>e&&o&&(i+=n),e<l&&t>a&&(i+=s.sliceString(e-a,t-a,n)),a=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof r))return 0;let n=0,[i,o,a,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,o+=t){if(i==a||o==s)return n;let l=this.children[i],u=e.children[o];if(l!=u)return n+l.scanIdentical(u,t);n+=l.length+1}}static from(e,t=e.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let p of e)n+=p.lines;if(n<32){let p=[];for(let h of e)h.flatten(p);return new Tr(p,t)}let i=Math.max(32,n>>5),o=i<<1,a=i>>1,s=[],l=0,u=-1,c=[];function f(p){let h;if(p.lines>o&&p instanceof r)for(let d of p.children)f(d);else p.lines>a&&(l>a||!l)?(m(),s.push(p)):p instanceof Tr&&l&&(h=c[c.length-1])instanceof Tr&&p.lines+h.lines<=32?(l+=p.lines,u+=p.length+1,c[c.length-1]=new Tr(h.text.concat(p.text),h.length+1+p.length)):(l+p.lines>i&&m(),l+=p.lines,u+=p.length+1,c.push(p))}function m(){l!=0&&(s.push(c.length==1?c[0]:r.from(c,u)),u=-1,l=c.length=0)}for(let p of e)f(p);return m(),s.length==1?s[0]:new r(s,t)}};st.empty=new Tr([""],0);function Q5(r){let e=-1;for(let t of r)e+=t.length+1;return e}function Ul(r,e,t=0,n=1e9){for(let i=0,o=0,a=!0;o<r.length&&i<=n;o++){let s=r[o],l=i+s.length;l>=t&&(l>n&&(s=s.slice(0,n-i)),i<t&&(s=s.slice(t-i)),a?(e[e.length-1]+=s,a=!1):e.push(s)),i=l+1}return e}function WE(r,e,t){return Ul(r,[""],e,t)}var Ci=class{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Tr?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],o=this.offsets[n],a=o>>1,s=i instanceof Tr?i.text.length:i.children.length;if(a==(t>0?s:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Tr){let l=i.text[a+(t<0?-1:0)];if(this.offsets[n]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[a+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Tr?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}},Vl=class{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new Ci(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=n?i:t<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},Hl=class{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol<"u"&&(st.prototype[Symbol.iterator]=function(){return this.iter()},Ci.prototype[Symbol.iterator]=Vl.prototype[Symbol.iterator]=Hl.prototype[Symbol.iterator]=function(){return this});var zf=class{constructor(e,t,n,i){this.from=e,this.to=t,this.number=n,this.text=i}get length(){return this.to-this.from}};function xo(r,e,t){return e=Math.max(0,Math.min(r.length,e)),[e,Math.max(e,Math.min(r.length,t))]}function hn(r,e,t=!0,n=!0){return UE(r,e,t,n)}function eR(r){return r>=56320&&r<57344}function tR(r){return r>=55296&&r<56320}function kn(r,e){let t=r.charCodeAt(e);if(!tR(t)||e+1==r.length)return t;let n=r.charCodeAt(e+1);return eR(n)?(t-55296<<10)+(n-56320)+65536:t}function JE(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function ri(r){return r<65536?1:2}var qf=/\r\n?|\n/,lr=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(lr||(lr={})),Ei=class r{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,i=0;t<this.sections.length;){let o=this.sections[t++],a=this.sections[t++];a<0?(e(n,i,o),i+=o):i+=a,n+=o}}iterChangedRanges(e,t=!1){Uf(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];i<0?e.push(n,i):e.push(i,n)}return new r(e)}composeDesc(e){return this.empty?e:e.empty?this:jE(this,e)}mapDesc(e,t=!1){return e.empty?this:Vf(this,e,t)}mapPos(e,t=-1,n=lr.Simple){let i=0,o=0;for(let a=0;a<this.sections.length;){let s=this.sections[a++],l=this.sections[a++],u=i+s;if(l<0){if(u>e)return o+(e-i);o+=s}else{if(n!=lr.Simple&&u>=e&&(n==lr.TrackDel&&i<e&&u>e||n==lr.TrackBefore&&i<e||n==lr.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!s)return e==i||t<0?o:o+l;o+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,t=e){for(let n=0,i=0;n<this.sections.length&&i<=t;){let o=this.sections[n++],a=this.sections[n++],s=i+o;if(a>=0&&i<=t&&s>=e)return i<e&&s>t?"cover":!0;i=s}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new r(e)}static create(e){return new r(e)}},Fr=class r extends Ei{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Uf(this,(t,n,i,o,a)=>e=e.replace(i,i+(n-t),a),!1),e}mapDesc(e,t=!1){return Vf(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let i=0,o=0;i<t.length;i+=2){let a=t[i],s=t[i+1];if(s>=0){t[i]=s,t[i+1]=a;let l=i>>1;for(;n.length<l;)n.push(st.empty);n.push(a?e.slice(o,o+a):st.empty)}o+=a}return new r(t,n)}compose(e){return this.empty?e:e.empty?this:jE(this,e,!0)}map(e,t=!1){return e.empty?this:Vf(this,e,t,!0)}iterChanges(e,t=!1){Uf(this,e,t)}get desc(){return Ei.create(this.sections)}filter(e){let t=[],n=[],i=[],o=new Mi(this);e:for(let a=0,s=0;;){let l=a==e.length?1e9:e[a++];for(;s<l||s==l&&o.len==0;){if(o.done)break e;let c=Math.min(o.len,l-s);or(i,c,-1);let f=o.ins==-1?-1:o.off==0?o.ins:0;or(t,c,f),f>0&&ti(n,t,o.text),o.forward(c),s+=c}let u=e[a++];for(;s<u;){if(o.done)break e;let c=Math.min(o.len,u-s);or(t,c,-1),or(i,c,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(c),s+=c}}return{changes:new r(t,n),filtered:Ei.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],i=this.sections[t+1];i<0?e.push(n):i==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let i=[],o=[],a=0,s=null;function l(c=!1){if(!c&&!i.length)return;a<t&&or(i,t-a,-1);let f=new r(i,o);s=s?s.compose(f.map(s)):f,i=[],o=[],a=0}function u(c){if(Array.isArray(c))for(let f of c)u(f);else if(c instanceof r){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);l(),s=s?s.compose(c.map(s)):c}else{let{from:f,to:m=f,insert:p}=c;if(f>m||f<0||m>t)throw new RangeError(`Invalid change range ${f} to ${m} (in doc of length ${t})`);let h=p?typeof p=="string"?st.of(p.split(n||qf)):p:st.empty,d=h.length;if(f==m&&d==0)return;f<a&&l(),f>a&&or(i,f-a,-1),or(i,m-f,d),ti(o,i,h),a=m}}return u(e),l(!s),s}static empty(e){return new r(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((a,s)=>s&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;n.length<i;)n.push(st.empty);n[i]=st.of(o.slice(1)),t.push(o[0],n[i].length)}}}return new r(t,n)}static createSet(e,t){return new r(e,t)}};function or(r,e,t,n=!1){if(e==0&&t<=0)return;let i=r.length-2;i>=0&&t<=0&&t==r[i+1]?r[i]+=e:i>=0&&e==0&&r[i]==0?r[i+1]+=t:n?(r[i]+=e,r[i+1]+=t):r.push(e,t)}function ti(r,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<n;)r.push(st.empty);r.push(t)}}function Uf(r,e,t){let n=r.inserted;for(let i=0,o=0,a=0;a<r.sections.length;){let s=r.sections[a++],l=r.sections[a++];if(l<0)i+=s,o+=s;else{let u=i,c=o,f=st.empty;for(;u+=s,c+=l,l&&n&&(f=f.append(n[a-2>>1])),!(t||a==r.sections.length||r.sections[a+1]<0);)s=r.sections[a++],l=r.sections[a++];e(i,u,o,c,f),i=u,o=c}}}function Vf(r,e,t,n=!1){let i=[],o=n?[]:null,a=new Mi(r),s=new Mi(e);for(let l=-1;;){if(a.done&&s.len||s.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&s.ins==-1){let u=Math.min(a.len,s.len);or(i,u,-1),a.forward(u),s.forward(u)}else if(s.ins>=0&&(a.ins<0||l==a.i||a.off==0&&(s.len<a.len||s.len==a.len&&!t))){let u=s.len;for(or(i,s.ins,-1);u;){let c=Math.min(a.len,u);a.ins>=0&&l<a.i&&a.len<=c&&(or(i,0,a.ins),o&&ti(o,i,a.text),l=a.i),a.forward(c),u-=c}s.next()}else if(a.ins>=0){let u=0,c=a.len;for(;c;)if(s.ins==-1){let f=Math.min(c,s.len);u+=f,c-=f,s.forward(f)}else if(s.ins==0&&s.len<c)c-=s.len,s.next();else break;or(i,u,l<a.i?a.ins:0),o&&l<a.i&&ti(o,i,a.text),l=a.i,a.forward(a.len-c)}else{if(a.done&&s.done)return o?Fr.createSet(i,o):Ei.create(i);throw new Error("Mismatched change set lengths")}}}function jE(r,e,t=!1){let n=[],i=t?[]:null,o=new Mi(r),a=new Mi(e);for(let s=!1;;){if(o.done&&a.done)return i?Fr.createSet(n,i):Ei.create(n);if(o.ins==0)or(n,o.len,0,s),o.next();else if(a.len==0&&!a.done)or(n,0,a.ins,s),i&&ti(i,n,a.text),a.next();else{if(o.done||a.done)throw new Error("Mismatched change set lengths");{let l=Math.min(o.len2,a.len),u=n.length;if(o.ins==-1){let c=a.ins==-1?-1:a.off?0:a.ins;or(n,l,c,s),i&&c&&ti(i,n,a.text)}else a.ins==-1?(or(n,o.off?0:o.len,l,s),i&&ti(i,n,o.textBit(l))):(or(n,o.off?0:o.len,a.off?0:a.ins,s),i&&!a.off&&ti(i,n,a.text));s=(o.ins>l||a.ins>=0&&a.len>l)&&(s||n.length>u),o.forward2(l),a.forward(l)}}}}var Mi=class{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?st.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?st.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}},ho=class r{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let n,i;return this.empty?n=i=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new r(n,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return He.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return He.range(this.anchor,n)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return He.range(e.anchor,e.head)}static create(e,t,n){return new r(e,t,n)}},He=class r{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:r.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new r([this.main],0)}addRange(e,t=!0){return r.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,r.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new r(e.ranges.map(t=>ho.fromJSON(t)),e.main)}static single(e,t=e){return new r([r.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=n:o.from<n)return r.normalized(e.slice(),t);n=o.to}return new r(e,t)}static cursor(e,t=0,n,i){return ho.create(e,e,(t==0?0:t<0?8:16)|(n==null?7:Math.min(6,n))|(i??16777215)<<6)}static range(e,t,n,i){let o=(n??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?ho.create(t,e,48|o):ho.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let n=e[t];e.sort((i,o)=>i.from-o.from),t=e.indexOf(n);for(let i=1;i<e.length;i++){let o=e[i],a=e[i-1];if(o.empty?o.from<=a.to:o.from<a.to){let s=a.from,l=Math.max(o.to,a.to);i<=t&&t--,e.splice(--i,2,o.anchor>o.head?r.range(l,s):r.range(s,l))}}return new r(e,t)}};function QE(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}var jf=0,Ke=class r{constructor(e,t,n,i,o){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=i,this.id=jf++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new r(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:Qf),!!e.static,e.enables)}of(e){return new vo([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new vo(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new vo(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}};function Qf(r,e){return r==e||r.length==e.length&&r.every((t,n)=>t===e[n])}var vo=class{constructor(e,t,n,i){this.dependencies=e,this.facet=t,this.type=n,this.value=i,this.id=jf++}dynamicSlot(e){var t;let n=this.value,i=this.facet.compareInput,o=this.id,a=e[o]>>1,s=this.type==2,l=!1,u=!1,c=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?u=!0:((t=e[f.id])!==null&&t!==void 0?t:1)&1||c.push(e[f.id]);return{create(f){return f.values[a]=n(f),1},update(f,m){if(l&&m.docChanged||u&&(m.docChanged||m.selection)||Hf(f,c)){let p=n(f);if(s?!GE(p,f.values[a],i):!i(p,f.values[a]))return f.values[a]=p,1}return 0},reconfigure:(f,m)=>{let p,h=m.config.address[o];if(h!=null){let d=Kl(m,h);if(this.dependencies.every(v=>v instanceof Ke?m.facet(v)===f.facet(v):v instanceof Or?m.field(v,!1)==f.field(v,!1):!0)||(s?GE(p=n(f),d,i):i(p=n(f),d)))return f.values[a]=d,0}else p=n(f);return f.values[a]=p,1}}}};function GE(r,e,t){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!t(r[n],e[n]))return!1;return!0}function Hf(r,e){let t=!1;for(let n of e)jo(r,n)&1&&(t=!0);return t}function rR(r,e,t){let n=t.map(l=>r[l.id]),i=t.map(l=>l.type),o=n.filter(l=>!(l&1)),a=r[e.id]>>1;function s(l){let u=[];for(let c=0;c<n.length;c++){let f=Kl(l,n[c]);if(i[c]==2)for(let m of f)u.push(m);else u.push(f)}return e.combine(u)}return{create(l){for(let u of n)jo(l,u);return l.values[a]=s(l),1},update(l,u){if(!Hf(l,o))return 0;let c=s(l);return e.compare(c,l.values[a])?0:(l.values[a]=c,1)},reconfigure(l,u){let c=Hf(l,n),f=u.config.facets[e.id],m=u.facet(e);if(f&&!c&&Qf(t,f))return l.values[a]=m,0;let p=s(l);return e.compare(p,m)?(l.values[a]=m,0):(l.values[a]=p,1)}}}var KE=Ke.define({static:!0}),Or=class r{constructor(e,t,n,i,o){this.id=e,this.createF=t,this.updateF=n,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let t=new r(jf++,e.create,e.update,e.compare||((n,i)=>n===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(KE).find(n=>n.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,i)=>{let o=n.values[t],a=this.updateF(o,i);return this.compareF(o,a)?0:(n.values[t]=a,1)},reconfigure:(n,i)=>i.config.address[this.id]!=null?(n.values[t]=i.field(this),0):(n.values[t]=this.create(n),1)}}init(e){return[this,KE.of({field:this,create:e})]}get extension(){return this}},Ai={lowest:4,low:3,default:2,high:1,highest:0};function Jo(r){return e=>new $l(e,r)}var Ti={highest:Jo(Ai.highest),high:Jo(Ai.high),default:Jo(Ai.default),low:Jo(Ai.low),lowest:Jo(Ai.lowest)},$l=class{constructor(e,t){this.inner=e,this.prec=t}},Wl=class r{of(e){return new Qo(this,e)}reconfigure(e){return r.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}},Qo=class{constructor(e,t){this.compartment=e,this.inner=t}},Gl=class r{constructor(e,t,n,i,o,a){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=i,this.staticValues=o,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let i=[],o=Object.create(null),a=new Map;for(let m of nR(e,t,a))m instanceof Or?i.push(m):(o[m.facet.id]||(o[m.facet.id]=[])).push(m);let s=Object.create(null),l=[],u=[];for(let m of i)s[m.id]=u.length<<1,u.push(p=>m.slot(p));let c=n?.config.facets;for(let m in o){let p=o[m],h=p[0].facet,d=c&&c[m]||[];if(p.every(v=>v.type==0))if(s[h.id]=l.length<<1|1,Qf(d,p))l.push(n.facet(h));else{let v=h.combine(p.map(x=>x.value));l.push(n&&h.compare(v,n.facet(h))?n.facet(h):v)}else{for(let v of p)v.type==0?(s[v.id]=l.length<<1|1,l.push(v.value)):(s[v.id]=u.length<<1,u.push(x=>v.dynamicSlot(x)));s[h.id]=u.length<<1,u.push(v=>rR(v,h,p))}}let f=u.map(m=>m(s));return new r(e,a,f,s,l,o)}};function nR(r,e,t){let n=[[],[],[],[],[]],i=new Map;function o(a,s){let l=i.get(a);if(l!=null){if(l<=s)return;let u=n[l].indexOf(a);u>-1&&n[l].splice(u,1),a instanceof Qo&&t.delete(a.compartment)}if(i.set(a,s),Array.isArray(a))for(let u of a)o(u,s);else if(a instanceof Qo){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(a.compartment)||a.inner;t.set(a.compartment,u),o(u,s)}else if(a instanceof $l)o(a.inner,a.prec);else if(a instanceof Or)n[s].push(a),a.provides&&o(a.provides,s);else if(a instanceof vo)n[s].push(a),a.facet.extensions&&o(a.facet.extensions,Ai.default);else{let u=a.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(u,s)}}return o(r,Ai.default),n.reduce((a,s)=>a.concat(s))}function jo(r,e){if(e&1)return 2;let t=e>>1,n=r.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;r.status[t]=4;let i=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|i}function Kl(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}var eM=Ke.define(),$f=Ke.define({combine:r=>r.some(e=>e),static:!0}),tM=Ke.define({combine:r=>r.length?r[0]:void 0,static:!0}),rM=Ke.define(),nM=Ke.define(),iM=Ke.define(),oM=Ke.define({combine:r=>r.length?r[0]:!1}),tn=class{constructor(e,t){this.type=e,this.value=t}static define(){return new Wf}},Wf=class{of(e){return new tn(this,e)}},Gf=class{constructor(e){this.map=e}of(e){return new dt(this,e)}},dt=class r{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new r(this.type,t)}is(e){return this.type==e}static define(e={}){return new Gf(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let i of e){let o=i.map(t);o&&n.push(o)}return n}};dt.reconfigure=dt.define();dt.appendConfig=dt.define();var ur=class r{constructor(e,t,n,i,o,a){this.startState=e,this.changes=t,this.selection=n,this.effects=i,this.annotations=o,this.scrollIntoView=a,this._doc=null,this._state=null,n&&QE(n,t.newLength),o.some(s=>s.type==r.time)||(this.annotations=o.concat(r.time.of(Date.now())))}static create(e,t,n,i,o,a){return new r(e,t,n,i,o,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(r.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}};ur.time=tn.define();ur.userEvent=tn.define();ur.addToHistory=tn.define();ur.remote=tn.define();function iR(r,e){let t=[];for(let n=0,i=0;;){let o,a;if(n<r.length&&(i==e.length||e[i]>=r[n]))o=r[n++],a=r[n++];else if(i<e.length)o=e[i++],a=e[i++];else return t;!t.length||t[t.length-1]<o?t.push(o,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function aM(r,e,t){var n;let i,o,a;return t?(i=e.changes,o=Fr.empty(e.changes.length),a=r.changes.compose(e.changes)):(i=e.changes.map(r.changes),o=r.changes.mapDesc(e.changes,!0),a=r.changes.compose(i)),{changes:a,selection:e.selection?e.selection.map(o):(n=r.selection)===null||n===void 0?void 0:n.map(i),effects:dt.mapEffects(r.effects,i).concat(dt.mapEffects(e.effects,o)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function Kf(r,e,t){let n=e.selection,i=yo(e.annotations);return e.userEvent&&(i=i.concat(ur.userEvent.of(e.userEvent))),{changes:e.changes instanceof Fr?e.changes:Fr.of(e.changes||[],t,r.facet(tM)),selection:n&&(n instanceof He?n:He.single(n.anchor,n.head)),effects:yo(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function sM(r,e,t){let n=Kf(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let a=!!e[o].sequential;n=aM(n,Kf(r,e[o],a?n.changes.newLength:r.doc.length),a)}let i=ur.create(r,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return aR(t?oR(i):i)}function oR(r){let e=r.startState,t=!0;for(let i of e.facet(rM)){let o=i(r);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:iR(t,o))}if(t!==!0){let i,o;if(t===!1)o=r.changes.invertedDesc,i=Fr.empty(e.doc.length);else{let a=r.changes.filter(t);i=a.changes,o=a.filtered.mapDesc(a.changes).invertedDesc}r=ur.create(e,i,r.selection&&r.selection.map(o),dt.mapEffects(r.effects,o),r.annotations,r.scrollIntoView)}let n=e.facet(nM);for(let i=n.length-1;i>=0;i--){let o=n[i](r);o instanceof ur?r=o:Array.isArray(o)&&o.length==1&&o[0]instanceof ur?r=o[0]:r=sM(e,yo(o),!1)}return r}function aR(r){let e=r.startState,t=e.facet(iM),n=r;for(let i=t.length-1;i>=0;i--){let o=t[i](r);o&&Object.keys(o).length&&(n=aM(n,Kf(e,o,r.changes.newLength),!0))}return n==r?r:ur.create(e,r.changes,r.selection,n.effects,n.annotations,n.scrollIntoView)}var sR=[];function yo(r){return r==null?sR:Array.isArray(r)?r:[r]}var en=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(en||(en={})),lR=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Yf;try{Yf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function uR(r){if(Yf)return Yf.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||lR.test(t)))return!0}return!1}function cR(r){return e=>{if(!/\S/.test(e))return en.Space;if(uR(e))return en.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return en.Word;return en.Other}}var _t=class r{constructor(e,t,n,i,o,a){this.config=e,this.doc=t,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=o,a&&(a._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)jo(this,s<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return jo(this,n),Kl(this,n)}update(...e){return sM(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:i}=t;for(let s of e.effects)s.is(Wl.reconfigure)?(t&&(i=new Map,t.compartments.forEach((l,u)=>i.set(u,l)),t=null),i.set(s.value.compartment,s.value.extension)):s.is(dt.reconfigure)?(t=null,n=s.value):s.is(dt.appendConfig)&&(t=null,n=yo(n).concat(s.value));let o;t?o=e.startState.values.slice():(t=Gl.resolve(n,i,this),o=new r(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let a=e.startState.facet($f)?e.newSelection:e.newSelection.asSingle();new r(t,e.newDoc,a,o,(s,l)=>l.update(s,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:He.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),i=this.changes(n.changes),o=[n.range],a=yo(n.effects);for(let s=1;s<t.ranges.length;s++){let l=e(t.ranges[s]),u=this.changes(l.changes),c=u.map(i);for(let m=0;m<s;m++)o[m]=o[m].map(c);let f=i.mapDesc(u,!0);o.push(l.range.map(f)),i=i.compose(c),a=dt.mapEffects(a,c).concat(dt.mapEffects(yo(l.effects),f))}return{changes:i,selection:He.create(o,t.mainIndex),effects:a}}changes(e=[]){return e instanceof Fr?e:Fr.of(e,this.doc.length,this.facet(r.lineSeparator))}toText(e){return st.of(e.split(this.facet(r.lineSeparator)||qf))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(jo(this,t),Kl(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof Or&&this.config.address[i.id]!=null&&(t[n]=i.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let o in n)if(Object.prototype.hasOwnProperty.call(e,o)){let a=n[o],s=e[o];i.push(a.init(l=>a.spec.fromJSON(s,l)))}}return r.create({doc:e.doc,selection:He.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=Gl.resolve(e.extensions||[],new Map),n=e.doc instanceof st?e.doc:st.of((e.doc||"").split(t.staticFacet(r.lineSeparator)||qf)),i=e.selection?e.selection instanceof He?e.selection:He.single(e.selection.anchor,e.selection.head):He.single(0);return QE(i,n.length),t.staticFacet($f)||(i=i.asSingle()),new r(t,n,i,t.dynamicSlots.map(()=>null),(o,a)=>a.create(o),null)}get tabSize(){return this.facet(r.tabSize)}get lineBreak(){return this.facet(r.lineSeparator)||`
`}get readOnly(){return this.facet(oM)}phrase(e,...t){for(let n of this.facet(r.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,i)=>{if(i=="$")return"$";let o=+(i||1);return!o||o>t.length?n:t[o-1]})),e}languageDataAt(e,t,n=-1){let i=[];for(let o of this.facet(eM))for(let a of o(this,t,n))Object.prototype.hasOwnProperty.call(a,e)&&i.push(a[e]);return i}charCategorizer(e){return cR(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:i}=this.doc.lineAt(e),o=this.charCategorizer(e),a=e-n,s=e-n;for(;a>0;){let l=hn(t,a,!1);if(o(t.slice(l,a))!=en.Word)break;a=l}for(;s<i;){let l=hn(t,s);if(o(t.slice(s,l))!=en.Word)break;s=l}return a==s?null:He.range(a+n,s+n)}};_t.allowMultipleSelections=$f;_t.tabSize=Ke.define({combine:r=>r.length?r[0]:4});_t.lineSeparator=tM;_t.readOnly=oM;_t.phrases=Ke.define({compare(r,e){let t=Object.keys(r),n=Object.keys(e);return t.length==n.length&&t.every(i=>r[i]==e[i])}});_t.languageData=eM;_t.changeFilter=rM;_t.transactionFilter=nM;_t.transactionExtender=iM;Wl.reconfigure=dt.define();function Zl(r,e,t={}){let n={};for(let i of r)for(let o of Object.keys(i)){let a=i[o],s=n[o];if(s===void 0)n[o]=a;else if(!(s===a||a===void 0))if(Object.hasOwnProperty.call(t,o))n[o]=t[o](s,a);else throw new Error("Config merge conflict for field "+o)}for(let i in e)n[i]===void 0&&(n[i]=e[i]);return n}var rn=class{eq(e){return this==e}range(e,t=e){return ea.create(e,t,this)}};rn.prototype.startSide=rn.prototype.endSide=0;rn.prototype.point=!1;rn.prototype.mapMode=lr.TrackDel;var ea=class r{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new r(e,t,n)}};function Zf(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}var Xf=class r{constructor(e,t,n,i){this.from=e,this.to=t,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,i=0){let o=n?this.to:this.from;for(let a=i,s=o.length;;){if(a==s)return a;let l=a+s>>1,u=o[l]-e||(n?this.value[l].endSide:this.value[l].startSide)-t;if(l==a)return u>=0?a:s;u>=0?s=l:a=l+1}}between(e,t,n,i){for(let o=this.findIndex(t,-1e9,!0),a=this.findIndex(n,1e9,!1,o);o<a;o++)if(i(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let n=[],i=[],o=[],a=-1,s=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,f=this.to[l]+e,m,p;if(c==f){let h=t.mapPos(c,u.startSide,u.mapMode);if(h==null||(m=p=h,u.startSide!=u.endSide&&(p=t.mapPos(c,u.endSide),p<m)))continue}else if(m=t.mapPos(c,u.startSide),p=t.mapPos(f,u.endSide),m>p||m==p&&u.startSide>0&&u.endSide<=0)continue;(p-m||u.endSide-u.startSide)<0||(a<0&&(a=m),u.point&&(s=Math.max(s,p-m)),n.push(u),i.push(m-a),o.push(p-a))}return{mapped:n.length?new r(i,o,n,s):null,pos:a}}},kt=class r{constructor(e,t,n,i){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=i}static create(e,t,n,i){return new r(e,t,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:i=0,filterTo:o=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(n&&(t=t.slice().sort(Zf)),this.isEmpty)return t.length?r.of(t):this;let s=new Yl(this,null,-1).goto(0),l=0,u=[],c=new bo;for(;s.value||l<t.length;)if(l<t.length&&(s.from-t[l].from||s.startSide-t[l].value.startSide)>=0){let f=t[l++];c.addInner(f.from,f.to,f.value)||u.push(f)}else s.rangeIndex==1&&s.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(s.chunkIndex)<t[l].from)&&(!a||i>this.chunkEnd(s.chunkIndex)||o<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!a||i>s.to||o<s.from||a(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||u.push(ea.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?r.empty:this.nextLayer.update({add:u,filter:a,filterFrom:i,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],i=-1;for(let a=0;a<this.chunk.length;a++){let s=this.chunkPos[a],l=this.chunk[a],u=e.touchesRange(s,s+l.length);if(u===!1)i=Math.max(i,l.maxPoint),t.push(l),n.push(e.mapPos(s));else if(u===!0){let{mapped:c,pos:f}=l.map(s,e);c&&(i=Math.max(i,c.maxPoint),t.push(c),n.push(f))}}let o=this.nextLayer.map(e);return t.length==0?o:new r(n,t,o||r.empty,i)}between(e,t,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],a=this.chunk[i];if(t>=o&&e<=o+a.length&&a.between(o,e-o,t-o,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return ta.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return ta.from(e).goto(t)}static compare(e,t,n,i,o=-1){let a=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),s=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),l=YE(a,s,n),u=new Ni(a,l,o),c=new Ni(s,l,o);n.iterGaps((f,m,p)=>ZE(u,f,c,m,p,i)),n.empty&&n.length==0&&ZE(u,0,c,0,0,i)}static eq(e,t,n=0,i){i==null&&(i=999999999);let o=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),a=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(o.length!=a.length)return!1;if(!o.length)return!0;let s=YE(o,a),l=new Ni(o,s,0).goto(n),u=new Ni(a,s,0).goto(n);for(;;){if(l.to!=u.to||!Jf(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,t,n,i,o=-1){let a=new Ni(e,null,o).goto(t),s=t,l=a.openStart;for(;;){let u=Math.min(a.to,n);if(a.point){let c=a.activeForPoint(a.to),f=a.pointFrom<t?c.length+1:a.point.startSide<0?c.length:Math.min(c.length,l);i.point(s,u,a.point,c,f,a.pointRank),l=Math.min(a.openEnd(u),c.length)}else u>s&&(i.span(s,u,a.active,l),l=a.openEnd(u));if(a.to>n)return l+(a.point&&a.to>n?1:0);s=a.to,a.next()}}static of(e,t=!1){let n=new bo;for(let i of e instanceof ea?[e]:t?fR(e):e)n.add(i.from,i.to,i.value);return n.finish()}static join(e){if(!e.length)return r.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let i=e[n];i!=r.empty;i=i.nextLayer)t=new r(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}};kt.empty=new kt([],[],null,-1);function fR(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let n=r[t];if(Zf(e,n)>0)return r.slice().sort(Zf);e=n}return r}kt.empty.nextLayer=kt.empty;var bo=class r{finishChunk(e){this.chunks.push(new Xf(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new r)).add(e,t,n)}addInner(e,t,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(kt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=kt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}};function YE(r,e,t){let n=new Map;for(let o of r)for(let a=0;a<o.chunk.length;a++)o.chunk[a].maxPoint<=0&&n.set(o.chunk[a],o.chunkPos[a]);let i=new Set;for(let o of e)for(let a=0;a<o.chunk.length;a++){let s=n.get(o.chunk[a]);s!=null&&(t?t.mapPos(s):s)==o.chunkPos[a]&&!t?.touchesRange(s,s+o.chunk[a].length)&&i.add(o.chunk[a])}return i}var Yl=class{constructor(e,t,n,i=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}},ta=class r{constructor(e){this.heap=e}static from(e,t=null,n=-1){let i=[];for(let o=0;o<e.length;o++)for(let a=e[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=n&&i.push(new Yl(a,t,n,o));return i.length==1?i[0]:new r(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)Lf(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)Lf(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Lf(this.heap,0)}}};function Lf(r,e){for(let t=r[e];;){let n=(e<<1)+1;if(n>=r.length)break;let i=r[n];if(n+1<r.length&&i.compare(r[n+1])>=0&&(i=r[n+1],n++),t.compare(i)<0)break;r[n]=t,r[e]=i,e=n}}var Ni=class{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ta.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){zl(this.active,e),zl(this.activeTo,e),zl(this.activeRank,e),this.minActive=XE(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:i,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||i-this.activeTo[t])>0;)t++;ql(this.active,t,n),ql(this.activeTo,t,i),ql(this.activeRank,t,o),e&&ql(e,t,this.cursor.from),this.minActive=XE(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&zl(n,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(n),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let i=n.length-1;i>=0&&n[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}};function ZE(r,e,t,n,i,o){r.goto(e),t.goto(n);let a=n+i,s=n,l=n-e;for(;;){let u=r.to+l-t.to,c=u||r.endSide-t.endSide,f=c<0?r.to+l:t.to,m=Math.min(f,a);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&Jf(r.activeForPoint(r.to),t.activeForPoint(t.to))||o.comparePoint(s,m,r.point,t.point):m>s&&!Jf(r.active,t.active)&&o.compareRange(s,m,r.active,t.active),f>a)break;(u||r.openEnd!=t.openEnd)&&o.boundChange&&o.boundChange(f),s=f,c<=0&&r.next(),c>=0&&t.next()}}function Jf(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function zl(r,e){for(let t=e,n=r.length-1;t<n;t++)r[t]=r[t+1];r.pop()}function ql(r,e,t){for(let n=r.length-1;n>=e;n--)r[n+1]=r[n];r[e]=t}function XE(r,e){let t=-1,n=1e9;for(let i=0;i<e.length;i++)(e[i]-n||r[i].endSide-r[t].endSide)<0&&(t=i,n=e[i]);return t}function lM(r,e,t,n){for(let i=0,o=0;;){if(o>=e)return i;if(i==r.length)break;o+=r.charCodeAt(i)==9?t-o%t:1,i=hn(r,i)}return n===!0?-1:r.length}var em="\u037C",uM=typeof Symbol>"u"?"__"+em:Symbol.for(em),tm=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),cM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},$r=class{constructor(e,t){this.rules=[];let{finish:n}=t||{};function i(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function o(a,s,l,u){let c=[],f=/^@(\w+)\b/.exec(a[0]),m=f&&f[1]=="keyframes";if(f&&s==null)return l.push(a[0]+";");for(let p in s){let h=s[p];if(/&/.test(p))o(p.split(/,\s*/).map(d=>a.map(v=>d.replace(/&/,v))).reduce((d,v)=>d.concat(v)),h,l);else if(h&&typeof h=="object"){if(!f)throw new RangeError("The value of a property ("+p+") should be a primitive value.");o(i(p),h,c,m)}else h!=null&&c.push(p.replace(/_.*/,"").replace(/[A-Z]/g,d=>"-"+d.toLowerCase())+": "+h+";")}(c.length||m)&&l.push((n&&!f&&!u?a.map(n):a).join(", ")+" {"+c.join(" ")+"}")}for(let a in e)o(i(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=cM[uM]||1;return cM[uM]=e+1,em+e.toString(36)}static mount(e,t,n){let i=e[tm],o=n&&n.nonce;i?o&&i.setNonce(o):i=new rm(e,o),i.mount(Array.isArray(t)?t:[t],e)}},fM=new Map,rm=class{constructor(e,t){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let o=fM.get(n);if(o)return e[tm]=o;this.sheet=new i.CSSStyleSheet,fM.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[tm]=this}mount(e,t){let n=this.sheet,i=0,o=0;for(let a=0;a<e.length;a++){let s=e[a],l=this.modules.indexOf(s);if(l<o&&l>-1&&(this.modules.splice(l,1),o--,l=-1),l==-1){if(this.modules.splice(o++,0,s),n)for(let u=0;u<s.rules.length;u++)n.insertRule(s.rules[u],i++)}else{for(;o<l;)i+=this.modules[o++].rules.length;i+=s.rules.length,o++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let l=0;l<this.modules.length;l++)a+=this.modules[l].getRules()+`
`;this.styleTag.textContent=a;let s=t.head||t;this.styleTag.parentNode!=s&&s.insertBefore(this.styleTag,s.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}};var Pn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},wo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mR=typeof navigator<"u"&&/Mac/.test(navigator.platform),pR=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(Lt=0;Lt<10;Lt++)Pn[48+Lt]=Pn[96+Lt]=String(Lt);var Lt;for(Lt=1;Lt<=24;Lt++)Pn[Lt+111]="F"+Lt;var Lt;for(Lt=65;Lt<=90;Lt++)Pn[Lt]=String.fromCharCode(Lt+32),wo[Lt]=String.fromCharCode(Lt);var Lt;for(Xl in Pn)wo.hasOwnProperty(Xl)||(wo[Xl]=Pn[Xl]);var Xl;function mM(r){var e=mR&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||pR&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?wo:Pn)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function fa(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function lm(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function ou(r,e){if(!e.anchorNode)return!1;try{return lm(r,e.anchorNode)}catch{return!1}}function ma(r){return r.nodeType==3?Bi(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function aa(r,e,t,n){return t?pM(r,e,t,n,-1)||pM(r,e,t,n,1):!1}function Oi(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function uu(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}function pM(r,e,t,n,i){for(;;){if(r==t&&e==n)return!0;if(e==(i<0?0:bn(r))){if(r.nodeName=="DIV")return!1;let o=r.parentNode;if(!o||o.nodeType!=1)return!1;e=Oi(r)+(i<0?0:1),r=o}else if(r.nodeType==1){if(r=r.childNodes[e+(i<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=i<0?bn(r):0}else return!1}}function bn(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function bu(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function dR(r){let e=r.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function GM(r,e){let t=e.width/r.offsetWidth,n=e.height/r.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-r.offsetWidth)<1)&&(t=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-r.offsetHeight)<1)&&(n=1),{scaleX:t,scaleY:n}}function gR(r,e,t,n,i,o,a,s){let l=r.ownerDocument,u=l.defaultView||window;for(let c=r,f=!1;c&&!f;)if(c.nodeType==1){let m,p=c==l.body,h=1,d=1;if(p)m=dR(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let D=c.getBoundingClientRect();({scaleX:h,scaleY:d}=GM(c,D)),m={left:D.left,right:D.left+c.clientWidth*h,top:D.top,bottom:D.top+c.clientHeight*d}}let v=0,x=0;if(i=="nearest")e.top<m.top?(x=e.top-(m.top+a),t>0&&e.bottom>m.bottom+x&&(x=e.bottom-m.bottom+a)):e.bottom>m.bottom&&(x=e.bottom-m.bottom+a,t<0&&e.top-x<m.top&&(x=e.top-(m.top+a)));else{let D=e.bottom-e.top,g=m.bottom-m.top;x=(i=="center"&&D<=g?e.top+D/2-g/2:i=="start"||i=="center"&&t<0?e.top-a:e.bottom-g+a)-m.top}if(n=="nearest"?e.left<m.left?(v=e.left-(m.left+o),t>0&&e.right>m.right+v&&(v=e.right-m.right+o)):e.right>m.right&&(v=e.right-m.right+o,t<0&&e.left<m.left+v&&(v=e.left-(m.left+o))):v=(n=="center"?e.left+(e.right-e.left)/2-(m.right-m.left)/2:n=="start"==s?e.left-o:e.right-(m.right-m.left)+o)-m.left,v||x)if(p)u.scrollBy(v,x);else{let D=0,g=0;if(x){let w=c.scrollTop;c.scrollTop+=x/d,g=(c.scrollTop-w)*d}if(v){let w=c.scrollLeft;c.scrollLeft+=v/h,D=(c.scrollLeft-w)*h}e={left:e.left-D,top:e.top-g,right:e.right-D,bottom:e.bottom-g},D&&Math.abs(D-v)<1&&(n="nearest"),g&&Math.abs(g-x)<1&&(i="nearest")}if(p)break;(e.top<m.top||e.bottom>m.bottom||e.left<m.left||e.right>m.right)&&(e={left:Math.max(e.left,m.left),right:Math.min(e.right,m.right),top:Math.max(e.top,m.top),bottom:Math.min(e.bottom,m.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function vR(r){let e=r.ownerDocument,t,n;for(let i=r.parentNode;i&&!(i==e.body||t&&n);)if(i.nodeType==1)!n&&i.scrollHeight>i.clientHeight&&(n=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:n}}var um=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?bn(t):0),n,Math.min(e.focusOffset,n?bn(n):0))}set(e,t,n,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=i}},Do=null;function KM(r){if(r.setActive)return r.setActive();if(Do)return r.focus(Do);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(Do==null?{get preventScroll(){return Do={preventScroll:!0},!0}}:void 0),!Do){Do=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],o=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=o&&(n.scrollLeft=o)}}}var hM;function Bi(r,e,t=e){let n=hM||(hM=document.createRange());return n.setEnd(r,t),n.setStart(r,e),n}function No(r,e,t,n){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};n&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=n);let o=new KeyboardEvent("keydown",i);o.synthetic=!0,r.dispatchEvent(o);let a=new KeyboardEvent("keyup",i);return a.synthetic=!0,r.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function yR(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function YM(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}function xR(r,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,bn(t));;)if(n){if(t.nodeType!=1)return!1;let i=t.childNodes[n-1];i.contentEditable=="false"?n--:(t=i,n=bn(t))}else{if(t==r)return!0;n=Oi(t),t=t.parentNode}}function ZM(r){return r.scrollTop>Math.max(1,r.scrollHeight-r.clientHeight-4)}function XM(r,e){for(let t=r,n=e;;){if(t.nodeType==3&&n>0)return{node:t,offset:n};if(t.nodeType==1&&n>0){if(t.contentEditable=="false")return null;t=t.childNodes[n-1],n=bn(t)}else if(t.parentNode&&!uu(t))n=Oi(t),t=t.parentNode;else return null}}function JM(r,e){for(let t=r,n=e;;){if(t.nodeType==3&&n<t.nodeValue.length)return{node:t,offset:n};if(t.nodeType==1&&n<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[n],n=0}else if(t.parentNode&&!uu(t))n=Oi(t)+1,t=t.parentNode;else return null}}var cr=class r{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new r(e.parentNode,Oi(e),t)}static after(e,t){return new r(e.parentNode,Oi(e)+1,t)}},zm=[],wt=class r{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let n=this.dom,i=null,o;for(let a of this.children){if(a.flags&7){if(!a.dom&&(o=i?i.nextSibling:n.firstChild)){let s=r.get(o);(!s||!s.parent&&s.canReuseDOM(a))&&a.reuseDOM(o)}a.sync(e,t),a.flags&=-8}if(o=i?i.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&o!=a.dom&&(t.written=!0),a.dom.parentNode==n)for(;o&&o!=a.dom;)o=dM(o);else n.insertBefore(a.dom,o);i=a.dom}for(o=i?i.nextSibling:n.firstChild,o&&t&&t.node==n&&(t.written=!0);o;)o=dM(o)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let i=bn(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;i==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?i=-1:i=1),e=o}i<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!r.get(n);)n=n.nextSibling;if(!n)return this.length;for(let i=0,o=0;;i++){let a=this.children[i];if(a.dom==n)return o;o+=a.length+a.breakAfter}}domBoundsAround(e,t,n=0){let i=-1,o=-1,a=-1,s=-1;for(let l=0,u=n,c=n;l<this.children.length;l++){let f=this.children[l],m=u+f.length;if(u<e&&m>t)return f.domBoundsAround(e,t,u);if(m>=e&&i==-1&&(i=l,o=u),u>t&&f.dom.parentNode==this.dom){a=l,s=c;break}c=m,u=m+f.breakAfter}return{from:o,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=zm){this.markDirty();for(let i=e;i<t;i++){let o=this.children[i];o.parent==this&&n.indexOf(o)<0&&o.destroy()}n.length<250?this.children.splice(e,t-e,...n):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(t));for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new cu(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,i,o,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}};wt.prototype.breakAfter=0;function dM(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}var cu=class{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}};function jM(r,e,t,n,i,o,a,s,l){let{children:u}=r,c=u.length?u[e]:null,f=o.length?o[o.length-1]:null,m=f?f.breakAfter:a;if(!(e==n&&c&&!a&&!m&&o.length<2&&c.merge(t,i,o.length?f:null,t==0,s,l))){if(n<u.length){let p=u[n];p&&(i<p.length||p.breakAfter&&f?.breakAfter)?(e==n&&(p=p.split(i),i=0),!m&&f&&p.merge(0,i,f,!0,0,l)?o[o.length-1]=p:((i||p.children.length&&!p.children[0].length)&&p.merge(0,i,null,!1,0,l),o.push(p))):p?.breakAfter&&(f?f.breakAfter=1:a=1),n++}for(c&&(c.breakAfter=a,t>0&&(!a&&o.length&&c.merge(t,c.length,o[0],!1,s,0)?c.breakAfter=o.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,s,0),e++));e<n&&o.length;)if(u[n-1].become(o[o.length-1]))n--,o.pop(),l=o.length?0:s;else if(u[e].become(o[0]))e++,o.shift(),s=o.length?0:l;else break;!o.length&&e&&n<u.length&&!u[e-1].breakAfter&&u[n].merge(0,0,u[e-1],!1,s,l)&&e--,(e<n||o.length)&&r.replaceChildren(e,n,o)}}function QM(r,e,t,n,i,o){let a=r.childCursor(),{i:s,off:l}=a.findPos(t,1),{i:u,off:c}=a.findPos(e,-1),f=e-t;for(let m of n)f+=m.length;r.length+=f,jM(r,u,c,s,l,n,0,i,o)}var br=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},cm=typeof document<"u"?document:{documentElement:{style:{}}},fm=/Edge\/(\d+)/.exec(br.userAgent),eT=/MSIE \d/.test(br.userAgent),mm=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(br.userAgent),wu=!!(eT||mm||fm),gM=!wu&&/gecko\/(\d+)/i.test(br.userAgent),nm=!wu&&/Chrome\/(\d+)/.exec(br.userAgent),vM="webkitFontSmoothing"in cm.documentElement.style,tT=!wu&&/Apple Computer/.test(br.vendor),yM=tT&&(/Mobile\/\w+/.test(br.userAgent)||br.maxTouchPoints>2),Te={mac:yM||/Mac/.test(br.platform),windows:/Win/.test(br.platform),linux:/Linux|X11/.test(br.platform),ie:wu,ie_version:eT?cm.documentMode||6:mm?+mm[1]:fm?+fm[1]:0,gecko:gM,gecko_version:gM?+(/Firefox\/(\d+)/.exec(br.userAgent)||[0,0])[1]:0,chrome:!!nm,chrome_version:nm?+nm[1]:0,ios:yM,android:/Android\b/.test(br.userAgent),webkit:vM,safari:tT,webkit_version:vM?+(/\bAppleWebKit\/(\d+)/.exec(br.userAgent)||[0,0])[1]:0,tabSize:cm.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"},bR=256,wn=class r extends wt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return this.flags&8||n&&(!(n instanceof r)||this.length-(t-e)+n.length>bR||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new r(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new cr(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return wR(this.dom,e,t)}},oi=class r extends wt{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let i of t)i.setParent(this)}setAttrs(e){if(YM(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,i,o,a){return n&&(!(n instanceof r&&n.mark.eq(this.mark))||e&&o<=0||t<this.length&&a<=0)?!1:(QM(this,e,t,n?n.children.slice():[],o-1,a-1),this.markDirty(),!0)}split(e){let t=[],n=0,i=-1,o=0;for(let s of this.children){let l=n+s.length;l>e&&t.push(n<e?s.split(e-n):s),i<0&&n>=e&&(i=o),n=l,o++}let a=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new r(this.mark,t,a)}domAtPos(e){return rT(this,e)}coordsAt(e,t){return iT(this,e,t)}};function wR(r,e,t){let n=r.nodeValue.length;e>n&&(e=n);let i=e,o=e,a=0;e==0&&t<0||e==n&&t>=0?Te.chrome||Te.gecko||(e?(i--,a=1):o<n&&(o++,a=-1)):t<0?i--:o<n&&o++;let s=Bi(r,i,o).getClientRects();if(!s.length)return null;let l=s[(a?a<0:t>=0)?0:s.length-1];return Te.safari&&!a&&l.width==0&&(l=Array.prototype.find.call(s,u=>u.width)||l),a?bu(l,a<0):l||null}var fu=class r extends wt{static create(e,t,n){return new r(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=r.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,i,o,a){return n&&(!(n instanceof r)||!this.widget.compare(n.widget)||e>0&&o<=0||t<this.length&&a<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof r&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return st.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):st.empty}domAtPos(e){return(this.length?e==0:this.side>0)?cr.before(this.dom):cr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let i=this.dom.getClientRects(),o=null;if(!i.length)return null;let a=this.side?this.side<0:e>0;for(let s=a?i.length-1:0;o=i[s],!(e>0?s==0:s==i.length-1||o.top<o.bottom);s+=a?-1:1);return bu(o,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},pa=class r extends wt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof r&&e.side==this.side}split(){return new r(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?cr.before(this.dom):cr.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return st.empty}get isHidden(){return!0}};wn.prototype.children=fu.prototype.children=pa.prototype.children=zm;function rT(r,e){let t=r.dom,{children:n}=r,i=0;for(let o=0;i<n.length;i++){let a=n[i],s=o+a.length;if(!(s==o&&a.getSide()<=0)){if(e>o&&e<s&&a.dom.parentNode==t)return a.domAtPos(e-o);if(e<=o)break;o=s}}for(let o=i;o>0;o--){let a=n[o-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let o=i;o<n.length;o++){let a=n[o];if(a.dom.parentNode==t)return a.domAtPos(0)}return new cr(t,0)}function nT(r,e,t){let n,{children:i}=r;t>0&&e instanceof oi&&i.length&&(n=i[i.length-1])instanceof oi&&n.mark.eq(e.mark)?nT(n,e.children[0],t-1):(i.push(e),e.setParent(r)),r.length+=e.length}function iT(r,e,t){let n=null,i=-1,o=null,a=-1;function s(u,c){for(let f=0,m=0;f<u.children.length&&m<=c;f++){let p=u.children[f],h=m+p.length;h>=c&&(p.children.length?s(p,c-m):(!o||o.isHidden&&(t>0||SR(o,p)))&&(h>c||m==h&&p.getSide()>0)?(o=p,a=c-m):(m<c||m==h&&p.getSide()<0&&!p.isHidden)&&(n=p,i=c-m)),m=h}}s(r,e);let l=(t<0?n:o)||n||o;return l?l.coordsAt(Math.max(0,l==n?i:a),t):DR(r)}function DR(r){let e=r.dom.lastChild;if(!e)return r.dom.getBoundingClientRect();let t=ma(e);return t[t.length-1]||null}function SR(r,e){let t=r.coordsAt(0,1),n=e.coordsAt(0,1);return t&&n&&n.top<t.bottom}function pm(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}var xM=Object.create(null);function mu(r,e,t){if(r==e)return!0;r||(r=xM),e||(e=xM);let n=Object.keys(r),i=Object.keys(e);if(n.length-(t&&n.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let o of n)if(o!=t&&(i.indexOf(o)==-1||r[o]!==e[o]))return!1;return!0}function hm(r,e,t){let n=!1;if(e)for(let i in e)t&&i in t||(n=!0,i=="style"?r.style.cssText="":r.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(n=!0,i=="style"?r.style.cssText=t[i]:r.setAttribute(i,t[i]));return n}function AR(r){let e=Object.create(null);for(let t=0;t<r.attributes.length;t++){let n=r.attributes[t];e[n.name]=n.value}return e}var _i=class{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}},yn=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(yn||(yn={})),zt=class extends rn{constructor(e,t,n,i){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new ha(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new ai(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,i;if(e.isBlockGap)n=-5e8,i=4e8;else{let{start:o,end:a}=oT(e,t);n=(o?t?-3e8:-1:5e8)-1,i=(a?t?2e8:1:-6e8)+1}return new ai(e,n,i,t,e.widget||null,!0)}static line(e){return new da(e)}static set(e,t=!1){return kt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};zt.none=kt.empty;var ha=class r extends zt{constructor(e){let{start:t,end:n}=oT(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof r&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&mu(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}};ha.prototype.point=!1;var da=class r extends zt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof r&&this.spec.class==e.spec.class&&mu(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}};da.prototype.mapMode=lr.TrackBefore;da.prototype.point=!0;var ai=class r extends zt{constructor(e,t,n,i,o,a){super(t,n,o,e),this.block=i,this.isReplace=a,this.mapMode=i?t<=0?lr.TrackBefore:lr.TrackAfter:lr.TrackDel}get type(){return this.startSide!=this.endSide?yn.WidgetRange:this.startSide<=0?yn.WidgetBefore:yn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof r&&NR(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}};ai.prototype.point=!0;function oT(r,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=r;return t==null&&(t=r.inclusive),n==null&&(n=r.inclusive),{start:t??e,end:n??e}}function NR(r,e){return r==e||!!(r&&e&&r.compare(e))}function au(r,e,t,n=0){let i=t.length-1;i>=0&&t[i]+n>=r?t[i]=Math.max(t[i],e):t.push(r,e)}var jt=class r extends wt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,i,o,a){if(n){if(!(n instanceof r))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),QM(this,e,t,n?n.children.slice():[],o,a),!0}split(e){let t=new r;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:i}=this.childPos(e);i&&(t.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let o=n;o<this.children.length;o++)t.append(this.children[o],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){mu(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){nT(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=pm(t,this.attrs||{})),n&&(this.attrs=pm({class:n},this.attrs||{}))}domAtPos(e){return rT(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?this.flags&4&&(YM(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(hm(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&wt.get(i)instanceof oi;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((n=wt.get(i))===null||n===void 0?void 0:n.isEditable)==!1&&(!Te.ios||!this.children.some(o=>o instanceof wn))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof wn)||/[^ -~]/.test(n.text))return null;let i=ma(n.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=iT(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:i}=this.parent.view.viewState,o=n.bottom-n.top;if(Math.abs(o-i.lineHeight)<2&&i.textHeight<o){let a=(o-i.textHeight)/2;return{top:n.top+a,bottom:n.bottom-a,left:n.left,right:n.left}}}return n}become(e){return e instanceof r&&this.children.length==0&&e.children.length==0&&mu(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,i=0;n<e.children.length;n++){let o=e.children[n],a=i+o.length;if(a>=t){if(o instanceof r)return o;if(a>t)break}i=a+o.breakAfter}return null}},Fi=class r extends wt{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,i,o,a){return n&&(!(n instanceof r)||!this.widget.compare(n.widget)||e>0&&o<=0||t<this.length&&a<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?cr.before(this.dom):cr.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new r(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return zm}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):st.empty}domBoundsAround(){return null}become(e){return e instanceof r&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);return n||(this.widget instanceof ga?null:bu(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t==n?!1:e<0?t<0:n>0}},ga=class extends _i{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}},sa=class r{constructor(e,t,n,i){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Fi&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new jt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Jl(new pa(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Fi)&&this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:s}=this.cursor.next(this.skip);if(this.skip=0,s)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(Jl(new wn(this.text.slice(this.textOff,this.textOff+i)),t),n),this.atCursorPos=!0,this.textOff+=i,e-=i,n=0}}span(e,t,n,i){this.buildText(t-e,n,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,n,i,o,a){if(this.disallowBlockEffectsFor[a]&&n instanceof ai){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(n instanceof ai)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Fi(n.widget||si.block,s,n));else{let l=fu.create(n.widget||si.inline,s,s?0:n.startSide),u=this.atCursorPos&&!l.isEditable&&o<=i.length&&(e<t||n.startSide>0),c=!l.isEditable&&(e<t||o>i.length||n.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(f.append(Jl(new pa(1),i),o),o=i.length+Math.max(0,o-i.length)),f.append(Jl(l,i),o),this.atCursorPos=c,this.pendingBuffer=c?e<t||o>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,n,i,o){let a=new r(e,t,n,o);return a.openEnd=kt.spans(i,t,n,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}};function Jl(r,e){for(let t of e)r=new oi(t,[r],r.length);return r}var si=class extends _i{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}};si.inline=new si("span");si.block=new si("div");var Pt=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(Pt||(Pt={})),ki=Pt.LTR,qm=Pt.RTL;function aT(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}var CR=aT("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ER=aT("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),dm=Object.create(null),dn=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);dm[e]=t,dm[t]=-e}function sT(r){return r<=247?CR[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?ER[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8204?256:64336<=r&&r<=65023?4:1}var MR=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,vn=class{get dir(){return this.level%2?qm:ki}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,i){let o=-1;for(let a=0;a<e.length;a++){let s=e[a];if(s.from<=t&&s.to>=t){if(s.level==n)return a;(o<0||(i!=0?i<0?s.from<t:s.to>t:e[o].level>s.level))&&(o=a)}}if(o<0)throw new RangeError("Index out of range");return o}};function lT(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++){let n=r[t],i=e[t];if(n.from!=i.from||n.to!=i.to||n.direction!=i.direction||!lT(n.inner,i.inner))return!1}return!0}var xt=[];function TR(r,e,t,n,i){for(let o=0;o<=n.length;o++){let a=o?n[o-1].to:e,s=o<n.length?n[o].from:t,l=o?256:i;for(let u=a,c=l,f=l;u<s;u++){let m=sT(r.charCodeAt(u));m==512?m=c:m==8&&f==4&&(m=16),xt[u]=m==4?2:m,m&7&&(f=m),c=m}for(let u=a,c=l,f=l;u<s;u++){let m=xt[u];if(m==128)u<s-1&&c==xt[u+1]&&c&24?m=xt[u]=c:xt[u]=256;else if(m==64){let p=u+1;for(;p<s&&xt[p]==64;)p++;let h=u&&c==8||p<t&&xt[p]==8?f==1?1:8:256;for(let d=u;d<p;d++)xt[d]=h;u=p-1}else m==8&&f==1&&(xt[u]=1);c=m,m&7&&(f=m)}}}function FR(r,e,t,n,i){let o=i==1?2:1;for(let a=0,s=0,l=0;a<=n.length;a++){let u=a?n[a-1].to:e,c=a<n.length?n[a].from:t;for(let f=u,m,p,h;f<c;f++)if(p=dm[m=r.charCodeAt(f)])if(p<0){for(let d=s-3;d>=0;d-=3)if(dn[d+1]==-p){let v=dn[d+2],x=v&2?i:v&4?v&1?o:i:0;x&&(xt[f]=xt[dn[d]]=x),s=d;break}}else{if(dn.length==189)break;dn[s++]=f,dn[s++]=m,dn[s++]=l}else if((h=xt[f])==2||h==1){let d=h==i;l=d?0:1;for(let v=s-3;v>=0;v-=3){let x=dn[v+2];if(x&2)break;if(d)dn[v+2]|=2;else{if(x&4)break;dn[v+2]|=4}}}}}function OR(r,e,t,n){for(let i=0,o=n;i<=t.length;i++){let a=i?t[i-1].to:r,s=i<t.length?t[i].from:e;for(let l=a;l<s;){let u=xt[l];if(u==256){let c=l+1;for(;;)if(c==s){if(i==t.length)break;c=t[i++].to,s=i<t.length?t[i].from:e}else if(xt[c]==256)c++;else break;let f=o==1,m=(c<e?xt[c]:n)==1,p=f==m?f?1:2:n;for(let h=c,d=i,v=d?t[d-1].to:r;h>l;)h==v&&(h=t[--d].from,v=d?t[d-1].to:r),xt[--h]=p;l=c}else o=u,l++}}}function gm(r,e,t,n,i,o,a){let s=n%2?2:1;if(n%2==i%2)for(let l=e,u=0;l<t;){let c=!0,f=!1;if(u==o.length||l<o[u].from){let d=xt[l];d!=s&&(c=!1,f=d==16)}let m=!c&&s==1?[]:null,p=c?n:n+1,h=l;e:for(;;)if(u<o.length&&h==o[u].from){if(f)break e;let d=o[u];if(!c)for(let v=d.to,x=u+1;;){if(v==t)break e;if(x<o.length&&o[x].from==v)v=o[x++].to;else{if(xt[v]==s)break e;break}}if(u++,m)m.push(d);else{d.from>l&&a.push(new vn(l,d.from,p));let v=d.direction==ki!=!(p%2);vm(r,v?n+1:n,i,d.inner,d.from,d.to,a),l=d.to}h=d.to}else{if(h==t||(c?xt[h]!=s:xt[h]==s))break;h++}m?gm(r,l,h,n+1,i,m,a):l<h&&a.push(new vn(l,h,p)),l=h}else for(let l=t,u=o.length;l>e;){let c=!0,f=!1;if(!u||l>o[u-1].to){let d=xt[l-1];d!=s&&(c=!1,f=d==16)}let m=!c&&s==1?[]:null,p=c?n:n+1,h=l;e:for(;;)if(u&&h==o[u-1].to){if(f)break e;let d=o[--u];if(!c)for(let v=d.from,x=u;;){if(v==e)break e;if(x&&o[x-1].to==v)v=o[--x].from;else{if(xt[v-1]==s)break e;break}}if(m)m.push(d);else{d.to<l&&a.push(new vn(d.to,l,p));let v=d.direction==ki!=!(p%2);vm(r,v?n+1:n,i,d.inner,d.from,d.to,a),l=d.from}h=d.from}else{if(h==e||(c?xt[h-1]!=s:xt[h-1]==s))break;h--}m?gm(r,h,l,n+1,i,m,a):h<l&&a.push(new vn(h,l,p)),l=h}}function vm(r,e,t,n,i,o,a){let s=e%2?2:1;TR(r,i,o,n,s),FR(r,i,o,n,s),OR(i,o,n,s),gm(r,i,o,e,t,n,a)}function BR(r,e,t){if(!r)return[new vn(0,0,e==qm?1:0)];if(e==ki&&!t.length&&!MR.test(r))return uT(r.length);if(t.length)for(;r.length>xt.length;)xt[xt.length]=256;let n=[],i=e==ki?0:1;return vm(r,i,i,t,0,r.length,n),n}function uT(r){return[new vn(0,r,0)]}var cT="";function _R(r,e,t,n,i){var o;let a=n.head-r.from,s=vn.find(e,a,(o=n.bidiLevel)!==null&&o!==void 0?o:-1,n.assoc),l=e[s],u=l.side(i,t);if(a==u){let m=s+=i?1:-1;if(m<0||m>=e.length)return null;l=e[s=m],a=l.side(!i,t),u=l.side(i,t)}let c=hn(r.text,a,l.forward(i,t));(c<l.from||c>l.to)&&(c=u),cT=r.text.slice(Math.min(a,c),Math.max(a,c));let f=s==(i?e.length-1:0)?null:e[s+(i?1:-1)];return f&&c==u&&f.level+(i?0:1)<l.level?He.cursor(f.side(!i,t)+r.from,f.forward(i,t)?1:-1,f.level):He.cursor(c+r.from,l.forward(i,t)?-1:1,l.level)}function kR(r,e,t){for(let n=e;n<t;n++){let i=sT(r.charCodeAt(n));if(i==1)return ki;if(i==2||i==4)return qm}return ki}var fT=Ke.define(),mT=Ke.define(),pT=Ke.define(),hT=Ke.define(),ym=Ke.define(),dT=Ke.define(),gT=Ke.define(),Um=Ke.define(),Vm=Ke.define(),vT=Ke.define({combine:r=>r.some(e=>e)}),PR=Ke.define({combine:r=>r.some(e=>e)}),yT=Ke.define(),la=class r{constructor(e,t="nearest",n="nearest",i=5,o=5,a=!1){this.range=e,this.y=t,this.x=n,this.yMargin=i,this.xMargin=o,this.isSnapshot=a}map(e){return e.empty?this:new r(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new r(He.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}},jl=dt.define({map:(r,e)=>r.map(e)}),xT=dt.define();function fr(r,e,t){let n=r.facet(hT);n.length?n[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}var In=Ke.define({combine:r=>r.length?r[0]:!0}),IR=0,So=Ke.define({combine(r){return r.filter((e,t)=>{for(let n=0;n<t;n++)if(r[n].plugin==e.plugin)return!1;return!0})}}),Rn=class r{constructor(e,t,n,i,o){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=i,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(So.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(So.of({plugin:this,arg:e}))}static define(e,t){let{eventHandlers:n,eventObservers:i,provide:o,decorations:a}=t||{};return new r(IR++,e,n,i,s=>{let l=[];return a&&l.push(va.of(u=>{let c=u.plugin(s);return c?a(c):zt.none})),o&&l.push(o(s)),l})}static fromClass(e,t){return r.define((n,i)=>new e(n,i),t)}},ua=class{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(fr(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){fr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){fr(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},bT=Ke.define(),Hm=Ke.define(),va=Ke.define(),wT=Ke.define(),$m=Ke.define(),DT=Ke.define();function bM(r,e){let t=r.state.facet(DT);if(!t.length)return t;let n=t.map(o=>o instanceof Function?o(r):o),i=[];return kt.spans(n,e.from,e.to,{point(){},span(o,a,s,l){let u=o-e.from,c=a-e.from,f=i;for(let m=s.length-1;m>=0;m--,l--){let p=s[m].spec.bidiIsolate,h;if(p==null&&(p=kR(e.text,u,c)),l>0&&f.length&&(h=f[f.length-1]).to==u&&h.direction==p)h.to=c,f=h.inner;else{let d={from:u,to:c,direction:p,inner:[]};f.push(d),f=d.inner}}}}),i}var ST=Ke.define();function Wm(r){let e=0,t=0,n=0,i=0;for(let o of r.state.facet(ST)){let a=o(r);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(n=Math.max(n,a.top)),a.bottom!=null&&(i=Math.max(i,a.bottom)))}return{left:e,right:t,top:n,bottom:i}}var na=Ke.define(),xn=class r{constructor(e,t,n,i){this.fromA=e,this.toA=t,this.fromB=n,this.toB=i}join(e){return new r(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let i=0,o=0,a=0,s=0;;i++){let l=i==e.length?null:e[i],u=a-s,c=l?l.fromB:1e9;for(;o<t.length&&t[o]<c;){let f=t[o],m=t[o+1],p=Math.max(s,f),h=Math.min(c,m);if(p<=h&&new r(p+u,h+u,p,h).addToSet(n),m>c)break;o+=2}if(!l)return n;new r(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),a=l.toA,s=l.toB}}},pu=class r{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Fr.empty(this.startState.doc.length);for(let o of n)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,a,s,l)=>i.push(new xn(o,a,s,l))),this.changedRanges=i}static create(e,t,n){return new r(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},hu=class extends wt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=zt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new jt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new xn(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!HR(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let o=i>-1?LR(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;n=new xn(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(n.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(Te.ie||Te.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,s=this.updateDeco(),l=UR(a,s,e.changes);return n=xn.extendWithRanges(n,l),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=Te.chrome||Te.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||i.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof Fi&&a.widget instanceof ga&&o.push(a.dom);i.updateGaps(o)}updateChildren(e,t,n){let i=n?n.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let a=i.length-1;;a--){let s=a>=0?i[a]:null;if(!s)break;let{fromA:l,toA:u,fromB:c,toB:f}=s,m,p,h,d;if(n&&n.range.fromB<f&&n.range.toB>c){let w=sa.build(this.view.state.doc,c,n.range.fromB,this.decorations,this.dynamicDecorationMap),b=sa.build(this.view.state.doc,n.range.toB,f,this.decorations,this.dynamicDecorationMap);p=w.breakAtStart,h=w.openStart,d=b.openEnd;let y=this.compositionView(n);b.breakAtStart?y.breakAfter=1:b.content.length&&y.merge(y.length,y.length,b.content[0],!1,b.openStart,0)&&(y.breakAfter=b.content[0].breakAfter,b.content.shift()),w.content.length&&y.merge(0,0,w.content[w.content.length-1],!0,0,w.openEnd)&&w.content.pop(),m=w.content.concat(y).concat(b.content)}else({content:m,breakAtStart:p,openStart:h,openEnd:d}=sa.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:v,off:x}=o.findPos(u,1),{i:D,off:g}=o.findPos(l,-1);jM(this,D,g,v,x,m,p,h,d)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let n of t.effects)n.is(xT)&&(this.editContextFormatting=n.value)}compositionView(e){let t=new wn(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new oi(i,[t],t.length);let n=new jt;return n.append(t,0),n}fixCompositionDOM(e){let t=(o,a)=>{a.flags|=8|(a.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(a);let s=wt.get(o);s&&s!=a&&(s.dom=null),a.setDOM(o)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];t(e.line,i);for(let o=e.marks.length-1;o>=-1;o--)n=i.childPos(n.off,1),i=i.children[n.i],t(o>=0?e.marks[o].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,o=!i&&!(this.view.state.facet(In)||this.dom.tabIndex>-1)&&ou(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||t||o))return;let a=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(s.anchor)),u=s.empty?l:this.moveToLine(this.domAtPos(s.head));if(Te.gecko&&s.empty&&!this.hasComposition&&RR(l)){let f=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(f,l.node.childNodes[l.offset]||null)),l=u=new cr(f,0),a=!0}let c=this.view.observer.selectionRange;(a||!c.focusNode||(!aa(l.node,l.offset,c.anchorNode,c.anchorOffset)||!aa(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,s))&&(this.view.observer.ignore(()=>{Te.android&&Te.chrome&&this.dom.contains(c.focusNode)&&VR(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=fa(this.view.root);if(f)if(s.empty){if(Te.gecko){let m=zR(l.node,l.offset);if(m&&m!=3){let p=(m==1?XM:JM)(l.node,l.offset);p&&(l=new cr(p.node,p.offset))}}f.collapse(l.node,l.offset),s.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=s.bidiLevel)}else if(f.extend){f.collapse(l.node,l.offset);try{f.extend(u.node,u.offset)}catch{}}else{let m=document.createRange();s.anchor>s.head&&([l,u]=[u,l]),m.setEnd(u.node,u.offset),m.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(m)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new cr(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new cr(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&aa(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=fa(e.root),{anchorNode:i,anchorOffset:o}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let a=jt.find(this,t.head);if(!a)return;let s=a.posAtStart;if(t.head==s||t.head==s+a.length)return;let l=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(t.head+t.assoc);n.collapse(c.node,c.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&n.collapse(i,o)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let i=e.offset;!n&&i<t.childNodes.length;i++){let o=wt.get(t.childNodes[i]);o instanceof jt&&(n=o.domAtPos(0))}for(let i=e.offset-1;!n&&i>=0;i--){let o=wt.get(t.childNodes[i]);o instanceof jt&&(n=o.domAtPos(o.length))}return n?new cr(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let n=wt.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(n<i.length||i instanceof jt)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,i=0;for(let o=this.length,a=this.children.length-1;a>=0;a--){let s=this.children[a],l=o-s.breakAfter,u=l-s.length;if(l<e)break;if(u<=e&&(u<e||s.covers(-1))&&(l>e||s.covers(1))&&(!n||s instanceof jt&&!(n instanceof jt&&t>=0)))n=s,i=u;else if(n&&u==e&&l==e&&s instanceof Fi&&Math.abs(t)<2){if(s.deco.startSide<0)break;a&&(n=null)}o=u}return n?n.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),i=this.children[t];if(!(i instanceof jt))return null;for(;i.children.length;){let{i:s,off:l}=i.childPos(n,1);for(;;s++){if(s==i.children.length)return null;if((i=i.children[s]).length)break}n=l}if(!(i instanceof wn))return null;let o=hn(i.text,n);if(o==n)return null;let a=Bi(i.dom,n,o).getClientRects();for(let s=0;s<a.length;s++){let l=a[s];if(s==a.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:i}=e,o=this.view.contentDOM.clientWidth,a=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,l=this.view.textDirection==Pt.LTR;for(let u=0,c=0;c<this.children.length;c++){let f=this.children[c],m=u+f.length;if(m>i)break;if(u>=n){let p=f.dom.getBoundingClientRect();if(t.push(p.height),a){let h=f.dom.lastChild,d=h?ma(h):[];if(d.length){let v=d[d.length-1],x=l?v.right-p.left:p.right-v.left;x>s&&(s=x,this.minWidth=o,this.minWidthFrom=u,this.minWidthTo=m)}}}u=m+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Pt.RTL:Pt.LTR}measureTextSize(){for(let o of this.children)if(o instanceof jt){let a=o.measureTextSize();if(a)return a}let e=document.createElement("div"),t,n,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=ma(e.firstChild)[0];t=e.getBoundingClientRect().height,n=o?o.width/27:7,i=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new cu(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,i=0;;i++){let o=i==t.viewports.length?null:t.viewports[i],a=o?o.from-1:this.length;if(a>n){let s=(t.lineBlockAt(a).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(zt.replace({widget:new ga(s),block:!0,inclusive:!0,isBlockGap:!0}).range(n,a))}if(!o)break;n=o.to+1}return zt.set(e)}updateDeco(){let e=1,t=this.view.state.facet(va).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),n=!1,i=this.view.state.facet(wT).map((o,a)=>{let s=typeof o=="function";return s&&(n=!0),s?o(this.view):o});for(i.length&&(this.dynamicDecorationMap[e++]=n,t.push(kt.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(yT))try{if(u(this.view,e.range,e))return!0}catch(c){fr(this.view.state,c,"scroll handler")}let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!n)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,i.left),top:Math.min(n.top,i.top),right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)});let o=Wm(this.view),a={left:n.left-o.left,top:n.top-o.top,right:n.right+o.right,bottom:n.bottom+o.bottom},{offsetWidth:s,offsetHeight:l}=this.view.scrollDOM;gR(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Pt.LTR)}};function RR(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}function AT(r,e){let t=r.observer.selectionRange;if(!t.focusNode)return null;let n=XM(t.focusNode,t.focusOffset),i=JM(t.focusNode,t.focusOffset),o=n||i;if(i&&n&&i.node!=n.node){let s=wt.get(i.node);if(!s||s instanceof wn&&s.text!=i.node.nodeValue)o=i;else if(r.docView.lastCompositionAfterCursor){let l=wt.get(n.node);!l||l instanceof wn&&l.text!=n.node.nodeValue||(o=i)}}if(r.docView.lastCompositionAfterCursor=o!=n,!o)return null;let a=e-o.offset;return{from:a,to:a+o.node.nodeValue.length,node:o.node}}function LR(r,e,t){let n=AT(r,t);if(!n)return null;let{node:i,from:o,to:a}=n,s=i.nodeValue;if(/[\n\r]/.test(s)||r.state.doc.sliceString(n.from,n.to)!=s)return null;let l=e.invertedDesc,u=new xn(l.mapPos(o),l.mapPos(a),o,a),c=[];for(let f=i.parentNode;;f=f.parentNode){let m=wt.get(f);if(m instanceof oi)c.push({node:f,deco:m.mark});else{if(m instanceof jt||f.nodeName=="DIV"&&f.parentNode==r.contentDOM)return{range:u,text:i,marks:c,line:f};if(f!=r.contentDOM)c.push({node:f,deco:new ha({inclusive:!0,attributes:AR(f),tagName:f.tagName.toLowerCase()})});else return null}}}function zR(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}var qR=class{constructor(){this.changes=[]}compareRange(e,t){au(e,t,this.changes)}comparePoint(e,t){au(e,t,this.changes)}boundChange(e){au(e,e,this.changes)}};function UR(r,e,t){let n=new qR;return kt.compare(r,e,t,n),n.changes}function VR(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function HR(r,e){let t=!1;return e&&r.iterChangedRanges((n,i)=>{n<e.to&&i>e.from&&(t=!0)}),t}function $R(r,e,t=1){let n=r.charCategorizer(e),i=r.doc.lineAt(e),o=e-i.from;if(i.length==0)return He.cursor(e);o==0?t=1:o==i.length&&(t=-1);let a=o,s=o;t<0?a=hn(i.text,o,!1):s=hn(i.text,o);let l=n(i.text.slice(a,s));for(;a>0;){let u=hn(i.text,a,!1);if(n(i.text.slice(u,a))!=l)break;a=u}for(;s<i.length;){let u=hn(i.text,s);if(n(i.text.slice(s,u))!=l)break;s=u}return He.range(a+i.from,s+i.from)}function WR(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function GR(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function im(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function wM(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function DM(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function xm(r,e,t){let n,i,o,a,s=!1,l,u,c,f;for(let h=r.firstChild;h;h=h.nextSibling){let d=ma(h);for(let v=0;v<d.length;v++){let x=d[v];i&&im(i,x)&&(x=wM(DM(x,i.bottom),i.top));let D=WR(e,x),g=GR(t,x);if(D==0&&g==0)return h.nodeType==3?SM(h,e,t):xm(h,e,t);(!n||a>g||a==g&&o>D)&&(n=h,i=x,o=D,a=g,s=D?e<x.left?v>0:v<d.length-1:!0),D==0?t>x.bottom&&(!c||c.bottom<x.bottom)?(l=h,c=x):t<x.top&&(!f||f.top>x.top)&&(u=h,f=x):c&&im(c,x)?c=DM(c,x.bottom):f&&im(f,x)&&(f=wM(f,x.top))}}if(c&&c.bottom>=t?(n=l,i=c):f&&f.top<=t&&(n=u,i=f),!n)return{node:r,offset:0};let m=Math.max(i.left,Math.min(i.right,e));if(n.nodeType==3)return SM(n,m,t);if(s&&n.contentEditable!="false")return xm(n,m,t);let p=Array.prototype.indexOf.call(r.childNodes,n)+(e>=(i.left+i.right)/2?1:0);return{node:r,offset:p}}function SM(r,e,t){let n=r.nodeValue.length,i=-1,o=1e9,a=0;for(let s=0;s<n;s++){let l=Bi(r,s,s+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;a||(a=e-c.left);let f=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<o){let m=e>=(c.left+c.right)/2,p=m;if((Te.chrome||Te.gecko)&&Bi(r,s).getBoundingClientRect().left==c.right&&(p=!m),f<=0)return{node:r,offset:s+(p?1:0)};i=s+(p?1:0),o=f}}}return{node:r,offset:i>-1?i:a>0?r.nodeValue.length:0}}function NT(r,e,t,n=-1){var i,o;let a=r.contentDOM.getBoundingClientRect(),s=a.top+r.viewState.paddingTop,l,{docHeight:u}=r.viewState,{x:c,y:f}=e,m=f-s;if(m<0)return 0;if(m>u)return r.state.doc.length;for(let w=r.viewState.heightOracle.textHeight/2,b=!1;l=r.elementAtHeight(m),l.type!=yn.Text;)for(;m=n>0?l.bottom+w:l.top-w,!(m>=0&&m<=u);){if(b)return t?null:0;b=!0,n=-n}f=s+m;let p=l.from;if(p<r.viewport.from)return r.viewport.from==0?0:t?null:AM(r,a,l,c,f);if(p>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:t?null:AM(r,a,l,c,f);let h=r.dom.ownerDocument,d=r.root.elementFromPoint?r.root:h,v=d.elementFromPoint(c,f);v&&!r.contentDOM.contains(v)&&(v=null),v||(c=Math.max(a.left+1,Math.min(a.right-1,c)),v=d.elementFromPoint(c,f),v&&!r.contentDOM.contains(v)&&(v=null));let x,D=-1;if(v&&((i=r.docView.nearest(v))===null||i===void 0?void 0:i.isEditable)!=!1){if(h.caretPositionFromPoint){let w=h.caretPositionFromPoint(c,f);w&&({offsetNode:x,offset:D}=w)}else if(h.caretRangeFromPoint){let w=h.caretRangeFromPoint(c,f);w&&({startContainer:x,startOffset:D}=w,(!r.contentDOM.contains(x)||Te.safari&&KR(x,D,c)||Te.chrome&&YR(x,D,c))&&(x=void 0))}x&&(D=Math.min(bn(x),D))}if(!x||!r.docView.dom.contains(x)){let w=jt.find(r.docView,p);if(!w)return m>l.top+l.height/2?l.to:l.from;({node:x,offset:D}=xm(w.dom,c,f))}let g=r.docView.nearest(x);if(!g)return null;if(g.isWidget&&((o=g.dom)===null||o===void 0?void 0:o.nodeType)==1){let w=g.dom.getBoundingClientRect();return e.y<w.top||e.y<=w.bottom&&e.x<=(w.left+w.right)/2?g.posAtStart:g.posAtEnd}else return g.localPosFromDOM(x,D)+g.posAtStart}function AM(r,e,t,n,i){let o=Math.round((n-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&t.height>r.defaultLineHeight*1.5){let s=r.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(r.defaultLineHeight-s)*.5)/s);o+=l*r.viewState.heightOracle.lineLength}let a=r.state.sliceDoc(t.from,t.to);return t.from+lM(a,o,r.state.tabSize)}function KR(r,e,t){let n,i=r;if(r.nodeType!=3||e!=(n=r.nodeValue.length))return!1;for(;;){let o=i.nextSibling;if(o){if(o.nodeName=="BR")break;return!1}else{let a=i.parentNode;if(!a||a.nodeName=="DIV")break;i=a}}return Bi(r,n-1,n).getBoundingClientRect().right>t}function YR(r,e,t){if(e!=0)return!1;for(let i=r;;){let o=i.parentNode;if(!o||o.nodeType!=1||o.firstChild!=i)return!1;if(o.classList.contains("cm-line"))break;i=o}let n=r.nodeType==1?r.getBoundingClientRect():Bi(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function ZR(r,e,t){let n=r.lineBlockAt(e);if(Array.isArray(n.type)){let i;for(let o of n.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!i||o.type==yn.Text&&(i.type!=o.type||(t<0?o.from<e:o.to>e)))&&(i=o)}}return i||n}return n}function XR(r,e,t,n){let i=ZR(r,e.head,e.assoc||-1),o=!n||i.type!=yn.Text||!(r.lineWrapping||i.widgetLineBreaks)?null:r.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){let a=r.dom.getBoundingClientRect(),s=r.textDirectionAt(i.from),l=r.posAtCoords({x:t==(s==Pt.LTR)?a.right-1:a.left+1,y:(o.top+o.bottom)/2});if(l!=null)return He.cursor(l,t?-1:1)}return He.cursor(t?i.to:i.from,t?-1:1)}function NM(r,e,t,n){let i=r.state.doc.lineAt(e.head),o=r.bidiSpans(i),a=r.textDirectionAt(i.from);for(let s=e,l=null;;){let u=_R(i,o,a,s,t),c=cT;if(!u){if(i.number==(t?r.state.doc.lines:1))return s;c=`
`,i=r.state.doc.line(i.number+(t?1:-1)),o=r.bidiSpans(i),u=r.visualLineSide(i,!t)}if(l){if(!l(c))return s}else{if(!n)return u;l=n(c)}s=u}}function JR(r,e,t){let n=r.state.charCategorizer(e),i=n(t);return o=>{let a=n(o);return i==en.Space&&(i=a),i==a}}function jR(r,e,t,n){let i=e.head,o=t?1:-1;if(i==(t?r.state.doc.length:0))return He.cursor(i,e.assoc);let a=e.goalColumn,s,l=r.contentDOM.getBoundingClientRect(),u=r.coordsAtPos(i,e.assoc||-1),c=r.documentTop;if(u)a==null&&(a=u.left-l.left),s=o<0?u.top:u.bottom;else{let p=r.viewState.lineBlockAt(i);a==null&&(a=Math.min(l.right-l.left,r.defaultCharacterWidth*(i-p.from))),s=(o<0?p.top:p.bottom)+c}let f=l.left+a,m=n??r.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let h=s+(m+p)*o,d=NT(r,{x:f,y:h},!1,o);if(h<l.top||h>l.bottom||(o<0?d<i:d>i)){let v=r.docView.coordsForChar(d),x=!v||h<v.top?-1:1;return He.cursor(d,x,void 0,a)}}}function su(r,e,t){for(;;){let n=0;for(let i of r)i.between(e-1,e+1,(o,a,s)=>{if(e>o&&e<a){let l=n||t||(e-o<a-e?-1:1);e=l<0?o:a,n=l}});if(!n)return e}}function om(r,e,t){let n=su(r.state.facet($m).map(i=>i(r)),t.from,e.head>t.from?-1:1);return n==t.from?t:He.cursor(n,n<t.from?1:-1)}var ia="\uFFFF",bm=class{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(_t.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ia}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let o=this.text.length;this.readNode(i);let a=i.nextSibling;if(a==t)break;let s=wt.get(i),l=wt.get(a);(s&&l?s.breakAfter:(s?s.breakAfter:uu(i))||uu(a)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>o)&&this.lineBreak(),i=a}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,a=1,s;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,n),a=this.lineSeparator.length):(s=i.exec(t))&&(o=s.index,a=s[0].length),this.append(t.slice(n,o<0?t.length:o)),o<0)break;if(this.lineBreak(),a>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=a-1);n=o+a}}readNode(e){if(e.cmIgnore)return;let t=wt.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(QR(e,n.node,n.offset)?t:0))}};function QR(r,e,t){for(;;){if(!e||t<bn(e))return!1;if(e==r)return!0;t=Oi(e)+1,e=e.parentNode}}var du=class{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}},wm=class{constructor(e,t,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let s=o||a?[]:r6(e),l=new bm(s,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=n6(s,this.bounds.from)}else{let s=e.observer.selectionRange,l=o&&o.node==s.focusNode&&o.offset==s.focusOffset||!lm(e.contentDOM,s.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(s.focusNode,s.focusOffset),u=a&&a.node==s.anchorNode&&a.offset==s.anchorOffset||!lm(e.contentDOM,s.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(s.anchorNode,s.anchorOffset),c=e.viewport;if((Te.ios||Te.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let f=Math.min(l,u),m=Math.max(l,u),p=c.from-f,h=c.to-m;(p==0||p==1||f==0)&&(h==0||h==-1||m==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=He.single(u,l)}}};function CT(r,e){let t,{newSel:n}=e,i=r.state.selection.main,o=r.inputState.lastKeyTime>Date.now()-100?r.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:s}=e.bounds,l=i.from,u=null;(o===8||Te.android&&e.text.length<s-a)&&(l=i.to,u="end");let c=t6(r.state.doc.sliceString(a,s,ia),e.text,l-a,u);c&&(Te.chrome&&o==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==ia+ia&&c.toB--,t={from:a+c.from,to:a+c.toA,insert:st.of(e.text.slice(c.from,c.toB).split(ia))})}else n&&(!r.hasFocus&&r.state.facet(In)||n.main.eq(i))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!i.empty&&n&&n.main.empty?t={from:i.from,to:i.to,insert:r.state.doc.slice(i.from,i.to)}:(Te.mac||Te.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&r.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=He.single(n.main.anchor-1,n.main.head-1)),t={from:t.from,to:t.to,insert:st.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:r.state.doc.slice(i.from,t.from).append(t.insert).append(r.state.doc.slice(t.to,i.to))}:Te.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&r.lineWrapping&&(n&&(n=He.single(n.main.anchor-1,n.main.head-1)),t={from:i.from,to:i.to,insert:st.of([" "])}),t)return Gm(r,t,n,o);if(n&&!n.main.eq(i)){let a=!1,s="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(a=!0),s=r.inputState.lastSelectionOrigin),r.dispatch({selection:n,scrollIntoView:a,userEvent:s}),!0}else return!1}function Gm(r,e,t,n=-1){if(Te.ios&&r.inputState.flushIOSKey(e))return!0;let i=r.state.selection.main;if(Te.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&r.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&No(r.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||n==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&No(r.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&No(r.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();r.inputState.composing>=0&&r.inputState.composing++;let a,s=()=>a||(a=e6(r,e,t));return r.state.facet(dT).some(l=>l(r,e.from,e.to,o,s))||r.dispatch(s()),!0}function e6(r,e,t){let n,i=r.state,o=i.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&r.inputState.composing<0){let s=o.from<e.from?i.sliceDoc(o.from,e.from):"",l=o.to>e.to?i.sliceDoc(e.to,o.to):"";n=i.replaceSelection(r.state.toText(s+e.insert.sliceString(0,void 0,r.state.lineBreak)+l))}else{let s=i.changes(e),l=t&&t.main.to<=s.newLength?t.main:void 0;if(i.selection.ranges.length>1&&r.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let u=r.state.sliceDoc(e.from,e.to),c,f=t&&AT(r,t.main.head);if(f){let h=e.insert.length-(e.to-e.from);c={from:f.from,to:f.to-h}}else c=r.state.doc.lineAt(o.head);let m=o.to-e.to,p=o.to-o.from;n=i.changeByRange(h=>{if(h.from==o.from&&h.to==o.to)return{changes:s,range:l||h.map(s)};let d=h.to-m,v=d-u.length;if(h.to-h.from!=p||r.state.sliceDoc(v,d)!=u||h.to>=c.from&&h.from<=c.to)return{range:h};let x=i.changes({from:v,to:d,insert:e.insert}),D=h.to-o.to;return{changes:x,range:l?He.range(Math.max(0,l.anchor+D),Math.max(0,l.head+D)):h.map(x)}})}else n={changes:s,selection:l&&i.selection.replaceRange(l)}}let a="input.type";return(r.composing||r.inputState.compositionPendingChange&&r.inputState.compositionEndedAt>Date.now()-50)&&(r.inputState.compositionPendingChange=!1,a+=".compose",r.inputState.compositionFirstChange&&(a+=".start",r.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:a,scrollIntoView:!0})}function t6(r,e,t,n){let i=Math.min(r.length,e.length),o=0;for(;o<i&&r.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&r.length==e.length)return null;let a=r.length,s=e.length;for(;a>0&&s>0&&r.charCodeAt(a-1)==e.charCodeAt(s-1);)a--,s--;if(n=="end"){let l=Math.max(0,o-Math.min(a,s));t-=a+l-o}if(a<o&&r.length<e.length){let l=t<=o&&t>=a?o-t:0;o-=l,s=o+(s-a),a=o}else if(s<o){let l=t<=o&&t>=s?o-t:0;o-=l,a=o+(a-s),s=o}return{from:o,toA:a,toB:s}}function r6(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:i,focusOffset:o}=r.observer.selectionRange;return t&&(e.push(new du(t,n)),(i!=t||o!=n)&&e.push(new du(i,o))),e}function n6(r,e){if(r.length==0)return null;let t=r[0].pos,n=r.length==2?r[1].pos:t;return t>-1&&n>-1?He.single(t+e,n+e):null}var Dm=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Te.safari&&e.contentDOM.addEventListener("input",()=>null),Te.gecko&&y6(e.contentDOM.ownerDocument)}handleEvent(e){!c6(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let i of n.observers)i(this.view,t);for(let i of n.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=i6(e),n=this.handlers,i=this.view.contentDOM;for(let o in t)if(o!="scroll"){let a=!t[o].handlers.length,s=n[o];s&&a!=!s.handlers.length&&(i.removeEventListener(o,this.handleEvent),s=null),s||i.addEventListener(o,this.handleEvent,{passive:a})}for(let o in n)o!="scroll"&&!t[o]&&i.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&MT.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Te.android&&Te.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Te.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=ET.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||o6.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,No(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Te.safari&&!Te.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function CM(r,e){return(t,n)=>{try{return e.call(r,n,t)}catch(i){fr(t.state,i)}}}function i6(r){let e=Object.create(null);function t(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of r){let i=n.spec,o=i&&i.plugin.domEventHandlers,a=i&&i.plugin.domEventObservers;if(o)for(let s in o){let l=o[s];l&&t(s).handlers.push(CM(n.value,l))}if(a)for(let s in a){let l=a[s];l&&t(s).observers.push(CM(n.value,l))}}for(let n in nn)t(n).handlers.push(nn[n]);for(let n in Gr)t(n).observers.push(Gr[n]);return e}var ET=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],o6="dthko",MT=[16,17,18,20,91,92,224,225],Ql=6;function eu(r){return Math.max(0,r)*.7+8}function a6(r,e){return Math.max(Math.abs(r.clientX-e.clientX),Math.abs(r.clientY-e.clientY))}var Sm=class{constructor(e,t,n,i){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=vR(e.contentDOM),this.atoms=e.state.facet($m).map(a=>a(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(_t.allowMultipleSelections)&&s6(e,t),this.dragging=u6(e,t)&&OT(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&a6(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,n=0,i=0,o=0,a=this.view.win.innerWidth,s=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:s}=this.scrollParents.y.getBoundingClientRect());let l=Wm(this.view);e.clientX-l.left<=i+Ql?t=-eu(i-e.clientX):e.clientX+l.right>=a-Ql&&(t=eu(e.clientX-a)),e.clientY-l.top<=o+Ql?n=-eu(o-e.clientY):e.clientY+l.bottom>=s-Ql&&(n=eu(e.clientY-s)),this.setScrollSpeed(t,n)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],o=null;if(i.empty){let a=su(this.atoms,i.from,0);a!=i.from&&(o=He.cursor(a,-1))}else{let a=su(this.atoms,i.from,-1),s=su(this.atoms,i.to,1);(a!=i.from||s!=i.to)&&(o=He.range(i.from==i.anchor?a:s,i.from==i.head?a:s))}o&&(t||(t=e.ranges.slice()),t[n]=o)}return t?He.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}};function s6(r,e){let t=r.state.facet(fT);return t.length?t[0](e):Te.mac?e.metaKey:e.ctrlKey}function l6(r,e){let t=r.state.facet(mT);return t.length?t[0](e):Te.mac?!e.altKey:!e.ctrlKey}function u6(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let n=fa(r.root);if(!n||n.rangeCount==0)return!0;let i=n.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let a=i[o];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function c6(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=wt.get(t))&&n.ignoreEvent(e))return!1;return!0}var nn=Object.create(null),Gr=Object.create(null),TT=Te.ie&&Te.ie_version<15||Te.ios&&Te.webkit_version<604;function f6(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),FT(r,t.value)},50)}function Du(r,e,t){for(let n of r.facet(e))t=n(t,r);return t}function FT(r,e){e=Du(r.state,Um,e);let{state:t}=r,n,i=1,o=t.toText(e),a=o.lines==t.selection.ranges.length;if(Am!=null&&t.selection.ranges.every(l=>l.empty)&&Am==o.toString()){let l=-1;n=t.changeByRange(u=>{let c=t.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let f=t.toText((a?o.line(i++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:f},range:He.cursor(u.from+f.length)}})}else a?n=t.changeByRange(l=>{let u=o.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:He.cursor(l.from+u.length)}}):n=t.replaceSelection(o);r.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Gr.scroll=r=>{r.inputState.lastScrollTop=r.scrollDOM.scrollTop,r.inputState.lastScrollLeft=r.scrollDOM.scrollLeft};nn.keydown=(r,e)=>(r.inputState.setSelectionOrigin("select"),e.keyCode==27&&r.inputState.tabFocusMode!=0&&(r.inputState.tabFocusMode=Date.now()+2e3),!1);Gr.touchstart=(r,e)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};Gr.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};nn.mousedown=(r,e)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let n of r.state.facet(pT))if(t=n(r,e),t)break;if(!t&&e.button==0&&(t=h6(r,e)),t){let n=!r.hasFocus;r.inputState.startMouseSelection(new Sm(r,e,t,n)),n&&r.observer.ignore(()=>{KM(r.contentDOM);let o=r.root.activeElement;o&&!o.contains(r.contentDOM)&&o.blur()});let i=r.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function EM(r,e,t,n){if(n==1)return He.cursor(e,t);if(n==2)return $R(r.state,e,t);{let i=jt.find(r.docView,e),o=r.state.doc.lineAt(i?i.posAtEnd:e),a=i?i.posAtStart:o.from,s=i?i.posAtEnd:o.to;return s<r.state.doc.length&&s==o.to&&s++,He.range(a,s)}}var MM=(r,e,t)=>e>=t.top&&e<=t.bottom&&r>=t.left&&r<=t.right;function m6(r,e,t,n){let i=jt.find(r.docView,e);if(!i)return 1;let o=e-i.posAtStart;if(o==0)return 1;if(o==i.length)return-1;let a=i.coordsAt(o,-1);if(a&&MM(t,n,a))return-1;let s=i.coordsAt(o,1);return s&&MM(t,n,s)?1:a&&a.bottom>=n?-1:1}function TM(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:m6(r,t,e.clientX,e.clientY)}}var p6=Te.ie&&Te.ie_version<=11,FM=null,OM=0,BM=0;function OT(r){if(!p6)return r.detail;let e=FM,t=BM;return FM=r,BM=Date.now(),OM=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(OM+1)%3:1}function h6(r,e){let t=TM(r,e),n=OT(e),i=r.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),i=i.map(o.changes))},get(o,a,s){let l=TM(r,o),u,c=EM(r,l.pos,l.bias,n);if(t.pos!=l.pos&&!a){let f=EM(r,t.pos,t.bias,n),m=Math.min(f.from,c.from),p=Math.max(f.to,c.to);c=m<c.from?He.range(m,p):He.range(p,m)}return a?i.replaceRange(i.main.extend(c.from,c.to)):s&&n==1&&i.ranges.length>1&&(u=d6(i,l.pos))?u:s?i.addRange(c):He.create([c])}}}function d6(r,e){for(let t=0;t<r.ranges.length;t++){let{from:n,to:i}=r.ranges[t];if(n<=e&&i>=e)return He.create(r.ranges.slice(0,t).concat(r.ranges.slice(t+1)),r.mainIndex==t?0:r.mainIndex-(r.mainIndex>t?1:0))}return null}nn.dragstart=(r,e)=>{let{selection:{main:t}}=r.state;if(e.target.draggable){let i=r.docView.nearest(e.target);if(i&&i.isWidget){let o=i.posAtStart,a=o+i.length;(o>=t.to||a<=t.from)&&(t=He.range(o,a))}}let{inputState:n}=r;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Du(r.state,Vm,r.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};nn.dragend=r=>(r.inputState.draggedContent=null,!1);function _M(r,e,t,n){if(t=Du(r.state,Um,t),!t)return;let i=r.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=r.inputState,a=n&&o&&l6(r,e)?{from:o.from,to:o.to}:null,s={from:i,insert:t},l=r.state.changes(a?[a,s]:s);r.focus(),r.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:a?"move.drop":"input.drop"}),r.inputState.draggedContent=null}nn.drop=(r,e)=>{if(!e.dataTransfer)return!1;if(r.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let n=Array(t.length),i=0,o=()=>{++i==t.length&&_M(r,e,n.filter(a=>a!=null).join(r.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let s=new FileReader;s.onerror=o,s.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(s.result)||(n[a]=s.result),o()},s.readAsText(t[a])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return _M(r,e,n,!0),!0}return!1};nn.paste=(r,e)=>{if(r.state.readOnly)return!0;r.observer.flush();let t=TT?null:e.clipboardData;return t?(FT(r,t.getData("text/plain")||t.getData("text/uri-list")),!0):(f6(r),!1)};function g6(r,e){let t=r.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),r.focus()},50)}function v6(r){let e=[],t=[],n=!1;for(let i of r.selection.ranges)i.empty||(e.push(r.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:o}of r.selection.ranges){let a=r.doc.lineAt(o);a.number>i&&(e.push(a.text),t.push({from:a.from,to:Math.min(r.doc.length,a.to+1)})),i=a.number}n=!0}return{text:Du(r,Vm,e.join(r.lineBreak)),ranges:t,linewise:n}}var Am=null;nn.copy=nn.cut=(r,e)=>{let{text:t,ranges:n,linewise:i}=v6(r.state);if(!t&&!i)return!1;Am=i?t:null,e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let o=TT?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(g6(r,t),!1)};var BT=tn.define();function _T(r,e){let t=[];for(let n of r.facet(gT)){let i=n(r,e);i&&t.push(i)}return t.length?r.update({effects:t,annotations:BT.of(!0)}):null}function kT(r){setTimeout(()=>{let e=r.hasFocus;if(e!=r.inputState.notifiedFocused){let t=_T(r.state,e);t?r.dispatch(t):r.update([])}},10)}Gr.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),kT(r)};Gr.blur=r=>{r.observer.clearSelectionRange(),kT(r)};Gr.compositionstart=Gr.compositionupdate=r=>{r.observer.editContext||(r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0))};Gr.compositionend=r=>{r.observer.editContext||(r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionPendingKey=!0,r.inputState.compositionPendingChange=r.observer.pendingRecords().length>0,r.inputState.compositionFirstChange=null,Te.chrome&&Te.android?r.observer.flushSoon():r.inputState.compositionPendingChange?Promise.resolve().then(()=>r.observer.flush()):setTimeout(()=>{r.inputState.composing<0&&r.docView.hasComposition&&r.update([])},50))};Gr.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};nn.beforeinput=(r,e)=>{var t,n;if(e.inputType=="insertReplacementText"&&r.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),a=e.getTargetRanges();if(o&&a.length){let s=a[0],l=r.posAtDOM(s.startContainer,s.startOffset),u=r.posAtDOM(s.endContainer,s.endOffset);return Gm(r,{from:l,to:u,insert:r.state.toText(o)},null),!0}}let i;if(Te.chrome&&Te.android&&(i=ET.find(o=>o.inputType==e.inputType))&&(r.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let o=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>o+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}return Te.ios&&e.inputType=="deleteContentForward"&&r.observer.flushSoon(),Te.safari&&e.inputType=="insertText"&&r.inputState.composing>=0&&setTimeout(()=>Gr.compositionend(r,e),20),!1};var kM=new Set;function y6(r){kM.has(r)||(kM.add(r),r.addEventListener("copy",()=>{}),r.addEventListener("cut",()=>{}))}var PM=["pre-wrap","normal","pre-line","break-spaces"],Co=!1;function IM(){Co=!1}var Nm=class{constructor(e){this.lineWrapping=e,this.doc=st.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return PM.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,n,i,o,a){let s=PM.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=n,this.textHeight=i,this.lineLength=o,l){this.heightSamples={};for(let u=0;u<a.length;u++){let c=a[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}},Cm=class{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}},gn=class r{constructor(e,t,n,i,o){this.from=e,this.length=t,this.top=n,this.height=i,this._content=o}get type(){return typeof this._content=="number"?yn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ai?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new r(this.from,this.length+e.length,this.top,this.height+e.height,t)}},At=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(At||(At={})),lu=.001,Br=class r{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>lu&&(Co=!0),this.height=e)}replace(e,t,n){return r.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,i){let o=this,a=n.doc;for(let s=i.length-1;s>=0;s--){let{fromA:l,toA:u,fromB:c,toB:f}=i[s],m=o.lineAt(l,At.ByPosNoHeight,n.setDoc(t),0,0),p=m.to>=u?m:o.lineAt(u,At.ByPosNoHeight,n,0,0);for(f+=p.to-u,u=p.to;s>0&&m.from<=i[s-1].toA;)l=i[s-1].fromA,c=i[s-1].fromB,s--,l<m.from&&(m=o.lineAt(l,At.ByPosNoHeight,n,0,0));c+=m.from-l,l=m.from;let h=Mm.build(n.setDoc(a),e,c,f);o=gu(o,o.replace(l,u,h))}return o.updateHeight(n,0)}static empty(){return new Wr(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,i=0,o=0;for(;;)if(t==n)if(i>o*2){let s=e[t-1];s.break?e.splice(--t,1,s.left,null,s.right):e.splice(--t,1,s.left,s.right),n+=1+s.break,i-=s.size}else if(o>i*2){let s=e[n];s.break?e.splice(n,1,s.left,null,s.right):e.splice(n,1,s.left,s.right),n+=2+s.break,o-=s.size}else break;else if(i<o){let s=e[t++];s&&(i+=s.size)}else{let s=e[--n];s&&(o+=s.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,n++),new Em(r.of(e.slice(0,t)),a,r.of(e.slice(n)))}};function gu(r,e){return r==e?r:(r.constructor!=e.constructor&&(Co=!0),e)}Br.prototype.size=1;var vu=class extends Br{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,i){return new gn(i,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,i,o){return this.blockAt(0,n,i,o)}forEachLine(e,t,n,i,o,a){e<=o+this.length&&t>=o&&a(this.blockAt(0,n,i,o))}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}},Wr=class r extends vu{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,i){return new gn(i,this.length,n,this.height,this.breaks)}replace(e,t,n){let i=n[0];return n.length==1&&(i instanceof r||i instanceof ii&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof ii?i=new r(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Br.of(n)}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},ii=class r extends Br{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,o=i-n+1,a,s=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*o);a=l/o,this.length>o+1&&(s=(this.height-l)/(this.length-o-1))}else a=this.height/o;return{firstLine:n,lastLine:i,perLine:a,perChar:s}}blockAt(e,t,n,i){let{firstLine:o,lastLine:a,perLine:s,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let u=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),c=t.doc.lineAt(u),f=s+c.length*l,m=Math.max(n,e-f/2);return new gn(c.from,c.length,m,f,0)}else{let u=Math.max(0,Math.min(a-o,Math.floor((e-n)/s))),{from:c,length:f}=t.doc.line(o+u);return new gn(c,f,n+s*u,s,0)}}lineAt(e,t,n,i,o){if(t==At.ByHeight)return this.blockAt(e,n,i,o);if(t==At.ByPosNoHeight){let{from:p,to:h}=n.doc.lineAt(e);return new gn(p,h-p,0,0,0)}let{firstLine:a,perLine:s,perChar:l}=this.heightMetrics(n,o),u=n.doc.lineAt(e),c=s+u.length*l,f=u.number-a,m=i+s*f+l*(u.from-o-f);return new gn(u.from,u.length,Math.max(i,Math.min(m,i+this.height-c)),c,0)}forEachLine(e,t,n,i,o,a){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:s,perLine:l,perChar:u}=this.heightMetrics(n,o);for(let c=e,f=i;c<=t;){let m=n.doc.lineAt(c);if(c==e){let h=m.number-s;f+=l*h+u*(e-o-h)}let p=l+u*m.length;a(new gn(m.from,m.length,f,p,0)),f+=p,c=m.to+1}}replace(e,t,n){let i=this.length-t;if(i>0){let o=n[n.length-1];o instanceof r?n[n.length-1]=new r(o.length+i):n.push(null,new r(i-1))}if(e>0){let o=n[0];o instanceof r?n[0]=new r(e+o.length):n.unshift(new r(e-1),null)}return Br.of(n)}decomposeLeft(e,t){t.push(new r(e-1),null)}decomposeRight(e,t){t.push(null,new r(this.length-e-1))}updateHeight(e,t=0,n=!1,i){let o=t+this.length;if(i&&i.from<=t+this.length&&i.more){let a=[],s=Math.max(t,i.from),l=-1;for(i.from>t&&a.push(new r(i.from-t-1).updateHeight(e,t));s<=o&&i.more;){let c=e.doc.lineAt(s).length;a.length&&a.push(null);let f=i.heights[i.index++];l==-1?l=f:Math.abs(f-l)>=lu&&(l=-2);let m=new Wr(c,f);m.outdated=!1,a.push(m),s+=c+1}s<=o&&a.push(null,new r(o-s).updateHeight(e,s));let u=Br.of(a);return(l<0||Math.abs(u.height-this.height)>=lu||Math.abs(l-this.heightMetrics(e,t).perLine)>=lu)&&(Co=!0),gu(this,u)}else(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},Em=class extends Br{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,i){let o=n+this.left.height;return e<o?this.left.blockAt(e,t,n,i):this.right.blockAt(e,t,o,i+this.left.length+this.break)}lineAt(e,t,n,i,o){let a=i+this.left.height,s=o+this.left.length+this.break,l=t==At.ByHeight?e<a:e<s,u=l?this.left.lineAt(e,t,n,i,o):this.right.lineAt(e,t,n,a,s);if(this.break||(l?u.to<s:u.from>s))return u;let c=t==At.ByPosNoHeight?At.ByPosNoHeight:At.ByPos;return l?u.join(this.right.lineAt(s,c,n,a,s)):this.left.lineAt(s,c,n,i,o).join(u)}forEachLine(e,t,n,i,o,a){let s=i+this.left.height,l=o+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,n,i,o,a),t>=l&&this.right.forEachLine(e,t,n,s,l,a);else{let u=this.lineAt(l,At.ByPos,n,i,o);e<u.from&&this.left.forEachLine(e,u.from-1,n,i,o,a),u.to>=e&&u.from<=t&&a(u),t>u.to&&this.right.forEachLine(u.to+1,t,n,s,l,a)}}replace(e,t,n){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,n));let o=[];e>0&&this.decomposeLeft(e,o);let a=o.length;for(let s of n)o.push(s);if(e>0&&RM(o,a-1),t<this.length){let s=o.length;this.decomposeRight(t,o),RM(o,s)}return Br.of(o)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Br.of(this.break?[e,null,t]:[e,t]):(this.left=gu(this.left,e),this.right=gu(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,i){let{left:o,right:a}=this,s=t+o.length+this.break,l=null;return i&&i.from<=t+o.length&&i.more?l=o=o.updateHeight(e,t,n,i):o.updateHeight(e,t,n),i&&i.from<=s+a.length&&i.more?l=a=a.updateHeight(e,s,n,i):a.updateHeight(e,s,n),l?this.balanced(o,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function RM(r,e){let t,n;r[e]==null&&(t=r[e-1])instanceof ii&&(n=r[e+1])instanceof ii&&r.splice(e-1,3,new ii(t.length+1+n.length))}var x6=5,Mm=class r{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Wr?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Wr(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,o=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let a=t-e;n.block?this.addBlock(new vu(a,i,n)):(a||o||i>=x6)&&this.addLineDeco(i,o,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Wr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new ii(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Wr)return e;let t=new Wr(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Wr)&&!this.isCovered?this.nodes.push(new Wr(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let i of this.nodes)i instanceof Wr&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(e,t,n,i){let o=new r(n,e);return kt.spans(t,n,i,o,0),o.finish(n)}};function b6(r,e,t){let n=new Tm;return kt.compare(r,e,t,n,0),n.changes}var Tm=class{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,i){(e<t||n&&n.heightRelevant||i&&i.heightRelevant)&&au(e,t,this.changes,5)}};function w6(r,e){let t=r.getBoundingClientRect(),n=r.ownerDocument,i=n.defaultView||window,o=Math.max(0,t.left),a=Math.min(i.innerWidth,t.right),s=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let u=r.parentNode;u&&u!=n.body;)if(u.nodeType==1){let c=u,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let m=c.getBoundingClientRect();o=Math.max(o,m.left),a=Math.min(a,m.right),s=Math.max(s,m.top),l=Math.min(u==r.parentNode?i.innerHeight:l,m.bottom)}u=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:o-t.left,right:Math.max(o,a)-t.left,top:s-(t.top+e),bottom:Math.max(s,l)-(t.top+e)}}function D6(r){let e=r.getBoundingClientRect(),t=r.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function S6(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}var ca=class{constructor(e,t,n,i){this.from=e,this.to=t,this.size=n,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],o=t[n];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e,t){return zt.replace({widget:new Fm(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}},Fm=class extends _i{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}},yu=class{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=LM,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Pt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Hm).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new Nm(t),this.stateDeco=e.facet(va).filter(n=>typeof n!="function"),this.heightMap=Br.empty().applyChanges(this.stateDeco,st.empty,this.heightOracle.setDoc(e.doc),[new xn(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=zt.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let i=n?t.head:t.anchor;if(!e.some(({from:o,to:a})=>i>=o&&i<=a)){let{from:o,to:a}=this.lineBlockAt(i);e.push(new Ao(o,a))}}return this.viewports=e.sort((n,i)=>n.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?LM:new Om(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(oa(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(va).filter(c=>typeof c!="function");let i=e.changedRanges,o=xn.extendWithRanges(i,b6(n,this.stateDeco,e?e.changes:Fr.empty(this.state.doc.length))),a=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);IM(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=a||Co)&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let l=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(PR)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),i=this.heightOracle,o=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?Pt.RTL:Pt.LTR;let a=this.heightOracle.mustRefreshForWrapping(o),s=t.getBoundingClientRect(),l=a||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let u=0,c=0;if(s.width&&s.height){let{scaleX:w,scaleY:b}=GM(t,s);(w>.005&&Math.abs(this.scaleX-w)>.005||b>.005&&Math.abs(this.scaleY-b)>.005)&&(this.scaleX=w,this.scaleY=b,u|=16,a=l=!0)}let f=(parseInt(n.paddingTop)||0)*this.scaleY,m=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=m)&&(this.paddingTop=f,this.paddingBottom=m,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=ZM(e.scrollDOM);let h=(this.printing?S6:w6)(t,this.paddingTop),d=h.top-this.pixelViewport.top,v=h.bottom-this.pixelViewport.bottom;this.pixelViewport=h;let x=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(x!=this.inView&&(this.inView=x,x&&(l=!0)),!this.inView&&!this.scrollTarget&&!D6(e.dom))return 0;let D=s.width;if((this.contentDOMWidth!=D||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),l){let w=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(w)&&(a=!0),a||i.lineWrapping&&Math.abs(D-this.contentDOMWidth)>i.charWidth){let{lineHeight:b,charWidth:y,textHeight:S}=e.docView.measureTextSize();a=b>0&&i.refresh(o,b,y,S,Math.max(5,D/y),w),a&&(e.docView.minWidth=0,u|=16)}d>0&&v>0?c=Math.max(d,v):d<0&&v<0&&(c=Math.min(d,v)),IM();for(let b of this.viewports){let y=b.from==this.viewport.from?w:e.docView.measureVisibleLineHeights(b);this.heightMap=(a?Br.empty().applyChanges(this.stateDeco,st.empty,this.heightOracle,[new xn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,a,new Cm(b.from,y))}Co&&(u|=2)}let g=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return g&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||g)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.heightOracle,{visibleTop:a,visibleBottom:s}=this,l=new Ao(i.lineAt(a-n*1e3,At.ByHeight,o,0,0).from,i.lineAt(s+(1-n)*1e3,At.ByHeight,o,0,0).to);if(t){let{head:u}=t.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(u,At.ByPos,o,0,0),m;t.y=="center"?m=(f.top+f.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&u<l.from?m=f.top:m=f.bottom-c,l=new Ao(i.lineAt(m-1e3/2,At.ByHeight,o,0,0).from,i.lineAt(m+c+1e3/2,At.ByHeight,o,0,0).to)}}return l}mapViewport(e,t){let n=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Ao(this.heightMap.lineAt(n,At.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,At.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,At.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,At.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:s}=this;return(e==0||i<=a-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||o>=s+Math.max(10,Math.min(n,250)))&&i>a-2*1e3&&o<s+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let i of e)t.touchesRange(i.from,i.to)||n.push(new ca(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,o=i>>1,a=i<<1;if(this.defaultTextDirection!=Pt.LTR&&!n)return[];let s=[],l=(c,f,m,p)=>{if(f-c<o)return;let h=this.state.selection.main,d=[h.from];h.empty||d.push(h.to);for(let x of d)if(x>c&&x<f){l(c,x-10,m,p),l(x+10,f,m,p);return}let v=N6(e,x=>x.from>=m.from&&x.to<=m.to&&Math.abs(x.from-c)<o&&Math.abs(x.to-f)<o&&!d.some(D=>x.from<D&&x.to>D));if(!v){if(f<m.to&&t&&n&&t.visibleRanges.some(g=>g.from<=f&&g.to>=f)){let g=t.moveToLineBoundary(He.cursor(f),!1,!0).head;g>c&&(f=g)}let x=this.gapSize(m,c,f,p),D=n||x<2e6?x:2e6;v=new ca(c,f,x,D)}s.push(v)},u=c=>{if(c.length<a||c.type!=yn.Text)return;let f=A6(c.from,c.to,this.stateDeco);if(f.total<a)return;let m=this.scrollTarget?this.scrollTarget.range.head:null,p,h;if(n){let d=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,x;if(m!=null){let D=ru(f,m),g=((this.visibleBottom-this.visibleTop)/2+d)/c.height;v=D-g,x=D+g}else v=(this.visibleTop-c.top-d)/c.height,x=(this.visibleBottom-c.top+d)/c.height;p=tu(f,v),h=tu(f,x)}else{let d=f.total*this.heightOracle.charWidth,v=i*this.heightOracle.charWidth,x=0;if(d>2e6)for(let y of e)y.from>=c.from&&y.from<c.to&&y.size!=y.displaySize&&y.from*this.heightOracle.charWidth+x<this.pixelViewport.left&&(x=y.size-y.displaySize);let D=this.pixelViewport.left+x,g=this.pixelViewport.right+x,w,b;if(m!=null){let y=ru(f,m),S=((g-D)/2+v)/d;w=y-S,b=y+S}else w=(D-v)/d,b=(g+v)/d;p=tu(f,w),h=tu(f,b)}p>c.from&&l(c.from,p,c,f),h<c.to&&l(h,c.to,c,f)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return s}gapSize(e,t,n,i){let o=ru(i,n)-ru(i,t);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){ca.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=zt.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];kt.spans(t,this.viewport.from,this.viewport.to,{span(o,a){n.push({from:o,to:a})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let o=0;o<n.length&&!(i&8);o++){let a=this.visibleRanges[o],s=n[o];(a.from!=s.from||a.to!=s.to)&&(i|=4,e&&e.mapPos(a.from,-1)==s.from&&e.mapPos(a.to,1)==s.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||oa(this.heightMap.lineAt(e,At.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||oa(this.heightMap.lineAt(this.scaler.fromDOM(e),At.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return oa(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},Ao=class{constructor(e,t){this.from=e,this.to=t}};function A6(r,e,t){let n=[],i=r,o=0;return kt.spans(t,r,e,{span(){},point(a,s){a>i&&(n.push({from:i,to:a}),o+=a-i),i=s}},20),i<e&&(n.push({from:i,to:e}),o+=e-i),{total:o,ranges:n}}function tu({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(r*t);for(let i=0;;i++){let{from:o,to:a}=e[i],s=a-o;if(n<=s)return o+n;n-=s}}function ru(r,e){let t=0;for(let{from:n,to:i}of r.ranges){if(e<=i){t+=e-n;break}t+=i-n}return t/r.total}function N6(r,e){for(let t of r)if(e(t))return t}var LM={toDOM(r){return r},fromDOM(r){return r},scale:1,eq(r){return r==this}},Om=class r{constructor(e,t,n){let i=0,o=0,a=0;this.viewports=n.map(({from:s,to:l})=>{let u=t.lineAt(s,At.ByPos,e,0,0).top,c=t.lineAt(l,At.ByPos,e,0,0).bottom;return i+=c-u,{from:s,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let s of this.viewports)s.domTop=a+(s.top-o)*this.scale,a=s.domBottom=s.domTop+(s.bottom-s.top),o=s.bottom}toDOM(e){for(let t=0,n=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return i+(e-n)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);n=o.bottom,i=o.domBottom}}fromDOM(e){for(let t=0,n=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return n+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);n=o.bottom,i=o.domBottom}}eq(e){return e instanceof r?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to):!1}};function oa(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),n=e.toDOM(r.bottom);return new gn(r.from,r.length,t,n-t,Array.isArray(r._content)?r._content.map(i=>oa(i,e)):r._content)}var nu=Ke.define({combine:r=>r.join(" ")}),Bm=Ke.define({combine:r=>r.indexOf(!0)>-1}),_m=$r.newName(),PT=$r.newName(),IT=$r.newName(),RT={"&light":"."+PT,"&dark":"."+IT};function km(r,e,t){return new $r(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,i=>{if(i=="&")return r;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):r+" "+n}})}var C6=km("."+_m,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},RT),E6={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},am=Te.ie&&Te.ie_version<=11,Pm=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new um,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);(Te.ie&&Te.ie_version<=11||Te.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Te.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Te.chrome&&Te.chrome_version<126)&&(this.editContext=new Im(e),e.state.facet(In)&&(e.contentDOM.editContext=this.editContext.editContext)),am&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(In)?n.root.activeElement!=this.dom:!ou(this.dom,i))return;let o=i.anchorNode&&n.docView.nearest(i.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Te.ie&&Te.ie_version<=11||Te.android&&Te.chrome)&&!n.state.selection.main.empty&&i.focusNode&&aa(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=fa(e.root);if(!t)return!1;let n=Te.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&M6(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let i=ou(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&xR(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,E6),am&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),am&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let i=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&No(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,i=!1;for(let o of e){let a=this.readMutation(o);a&&(a.typeOver&&(i=!0),t==-1?{from:t,to:n}=a:(t=Math.min(a.from,t),n=Math.max(a.to,n)))}return{from:t,to:n,typeOver:i}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),i=this.selectionChanged&&ou(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new wm(this.view,e,t,n);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,i=CT(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let n=zM(t,e.previousSibling||e.target.previousSibling,-1),i=zM(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(In)!=e.state.facet(In)&&(e.view.contentDOM.editContext=e.state.facet(In)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function zM(r,e,t){for(;e;){let n=wt.get(e);if(n&&n.parent==r)return n;let i=e.parentNode;e=i!=r.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function qM(r,e){let t=e.startContainer,n=e.startOffset,i=e.endContainer,o=e.endOffset,a=r.docView.domAtPos(r.state.selection.main.anchor);return aa(a.node,a.offset,i,o)&&([t,n,i,o]=[i,o,t,n]),{anchorNode:t,anchorOffset:n,focusNode:i,focusOffset:o}}function M6(r,e){if(e.getComposedRanges){let i=e.getComposedRanges(r.root)[0];if(i)return qM(r,i)}let t=null;function n(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return r.contentDOM.addEventListener("beforeinput",n,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",n,!0),t?qM(r,t):null}var Im=class{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let i=e.state.selection.main,{anchor:o,head:a}=i,s=this.toEditorPos(n.updateRangeStart),l=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:s,drifted:!1});let u={from:s,to:l,insert:st.of(n.text.split(`
`))};if(u.from==this.from&&o<this.from?u.from=o:u.to==this.to&&o>this.to&&(u.to=o),u.from==u.to&&!u.insert.length){let c=He.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));c.main.eq(i)||e.dispatch({selection:c,userEvent:"select"});return}if((Te.mac||Te.android)&&u.from==a-1&&/^\. ?$/.test(n.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:s,to:l,insert:st.of([n.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let c=this.to-this.from+(u.to-u.from+u.insert.length);Gm(e,u,He.single(this.toEditorPos(n.selectionStart,c),this.toEditorPos(n.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=n=>{let i=[],o=null;for(let a=this.toEditorPos(n.rangeStart),s=this.toEditorPos(n.rangeEnd);a<s;a++){let l=e.coordsForChar(a);o=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||o||new DOMRect,i.push(o)}t.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=n=>{let i=[];for(let o of n.getTextFormats()){let a=o.underlineStyle,s=o.underlineThickness;if(a!="None"&&s!="None"){let l=this.toEditorPos(o.rangeStart),u=this.toEditorPos(o.rangeEnd);if(l<u){let c=`text-decoration: underline ${a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${s=="Thin"?1:2}px`;i.push(zt.mark({attributes:{style:c}}).range(l,u))}}}e.dispatch({effects:xT.of(zt.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(e.state)}};for(let n in this.handlers)t.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let i=fa(n.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,i=this.pendingContextChange;return e.changes.iterChanges((o,a,s,l,u)=>{if(n)return;let c=u.length-(a-o);if(i&&a>=i.to)if(i.from==o&&i.to==a&&i.insert.eq(u)){i=this.pendingContextChange=null,t+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(o+=t,a+=t,a<=this.from)this.from+=c,this.to+=c;else if(o<this.to){if(o<this.from||a>this.to||this.to-this.from+u.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(a),u.toString()),this.to+=c}t+=c}),i&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(n,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}},rt=class r{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(i=>i.forEach(o=>n(o,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||yR(e.parent)||document,this.viewState=new yu(e.state||_t.create(e)),e.scrollTo&&e.scrollTo.is(jl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(So).map(i=>new ua(i));for(let i of this.plugins)i.update(this);this.observer=new Pm(this),this.inputState=new Dm(this),this.inputState.ensureHandlers(this.plugins),this.docView=new hu(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof ur?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,i,o=this.state;for(let m of e){if(m.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=m.state}if(this.destroyed){this.viewState.state=o;return}let a=this.hasFocus,s=0,l=null;e.some(m=>m.annotation(BT))?(this.inputState.notifiedFocused=a,s=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,l=_T(o,a),l||(s=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(c=null)):this.observer.clear(),o.facet(_t.phrases)!=this.state.facet(_t.phrases))return this.setState(o);i=pu.create(this,o,e),i.flags|=s;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let m of e){if(f&&(f=f.map(m.changes)),m.scrollIntoView){let{main:p}=m.state.selection;f=new la(p.empty?p:He.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of m.effects)p.is(jl)&&(f=p.value.clip(this.state))}this.viewState.update(i,f),this.bidiCache=xu.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(na)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(nu)!=i.state.facet(nu)&&(this.viewState.mustMeasureContent=!0),(t||n||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let m of this.state.facet(ym))try{m(i)}catch(p){fr(this.state,p,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!CT(this,c)&&u.force&&No(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new yu(e),this.plugins=e.facet(So).map(n=>new ua(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new hu(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(So),n=e.state.facet(So);if(t!=n){let i=[];for(let o of n){let a=t.indexOf(o);if(a<0)i.push(new ua(o));else{let s=this.plugins[a];s.mustUpdate=e,i.push(s)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(n){fr(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:a}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let s=0;;s++){if(a<0)if(ZM(n))o=-1,a=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(i);o=p.from,a=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(s>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(p=>{try{return p.read(this)}catch(h){return fr(this.state,h),UM}}),f=pu.create(this,this.state,[]),m=!1;f.flags|=l,t?t.flags|=l:t=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),m=this.docView.update(f),m&&this.docViewUpdate());for(let p=0;p<u.length;p++)if(c[p]!=UM)try{let h=u[p];h.write&&h.write(c[p],this)}catch(h){fr(this.state,h)}if(m&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let h=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-a;if(h>1||h<-1){i=i+h,n.scrollTop=i/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let s of this.state.facet(ym))s(t)}get themeClasses(){return _m+" "+(this.state.facet(Bm)?IT:PT)+" "+this.state.facet(nu)}updateAttrs(){let e=VM(this,bT,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(In)?"true":"false",class:"cm-content",style:`${Te.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),VM(this,Hm,t);let n=this.observer.ignore(()=>{let i=hm(this.contentDOM,this.contentAttrs,t),o=hm(this.dom,this.editorAttrs,e);return i||o});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let i of n.effects)if(i.is(r.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(na);let e=this.state.facet(r.cspNonce);$r.mount(this.root,this.styleModules.concat(C6).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return om(this,e,NM(this,e,t,n))}moveByGroup(e,t){return om(this,e,NM(this,e,t,n=>JR(this,e.head,n)))}visualLineSide(e,t){let n=this.bidiSpans(e),i=this.textDirectionAt(e.from),o=n[t?n.length-1:0];return He.cursor(o.side(t,i)+e.from,o.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,n=!0){return XR(this,e,t,n)}moveVertically(e,t,n){return om(this,e,jR(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),NT(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),o=this.bidiSpans(i),a=o[vn.find(o,e-i.from,-1,t)];return bu(n,a.dir==Pt.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(vT)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>T6)return uT(e.length);let t=this.textDirectionAt(e.from),n;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||lT(o.isolates,n=bM(this,e))))return o.order;n||(n=bM(this,e));let i=BR(e.text,t,n);return this.bidiCache.push(new xu(e.from,e.to,t,n,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Te.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{KM(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return jl.of(new la(typeof e=="number"?He.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return jl.of(new la(He.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Rn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Rn.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=$r.newName(),i=[nu.of(n),na.of(km(`.${n}`,e))];return t&&t.dark&&i.push(Bm.of(!0)),i}static baseTheme(e){return Ti.lowest(na.of(km("."+_m,e,RT)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),i=n&&wt.get(n)||wt.get(e);return((t=i?.rootView)===null||t===void 0?void 0:t.view)||null}};rt.styleModule=na;rt.inputHandler=dT;rt.clipboardInputFilter=Um;rt.clipboardOutputFilter=Vm;rt.scrollHandler=yT;rt.focusChangeEffect=gT;rt.perLineTextDirection=vT;rt.exceptionSink=hT;rt.updateListener=ym;rt.editable=In;rt.mouseSelectionStyle=pT;rt.dragMovesSelection=mT;rt.clickAddsSelectionRange=fT;rt.decorations=va;rt.outerDecorations=wT;rt.atomicRanges=$m;rt.bidiIsolatedRanges=DT;rt.scrollMargins=ST;rt.darkTheme=Bm;rt.cspNonce=Ke.define({combine:r=>r.length?r[0]:""});rt.contentAttributes=Hm;rt.editorAttributes=bT;rt.lineWrapping=rt.contentAttributes.of({class:"cm-lineWrapping"});rt.announce=dt.define();var T6=4096,UM={},xu=class r{constructor(e,t,n,i,o,a){this.from=e,this.to=t,this.dir=n,this.isolates=i,this.fresh=o,this.order=a}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let n=[],i=e.length?e[e.length-1].dir:Pt.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let a=e[o];a.dir==i&&!t.touchesRange(a.from,a.to)&&n.push(new r(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return n}};function VM(r,e,t){for(let n=r.state.facet(e),i=n.length-1;i>=0;i--){let o=n[i],a=typeof o=="function"?o(r):o;a&&pm(a,t)}return t}var F6=Te.mac?"mac":Te.windows?"win":Te.linux?"linux":"key";function O6(r,e){let t=r.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let i,o,a,s;for(let l=0;l<t.length-1;++l){let u=t[l];if(/^(cmd|meta|m)$/i.test(u))s=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))o=!0;else if(/^s(hift)?$/i.test(u))a=!0;else if(/^mod$/i.test(u))e=="mac"?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),a&&(n="Shift-"+n),n}function iu(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}var B6=Ti.default(rt.domEventHandlers({keydown(r,e){return I6(_6(e.state),r,e,"editor")}})),Km=Ke.define({enables:B6}),HM=new WeakMap;function _6(r){let e=r.facet(Km),t=HM.get(e);return t||HM.set(e,t=P6(e.reduce((n,i)=>n.concat(i),[]))),t}var ni=null,k6=4e3;function P6(r,e=F6){let t=Object.create(null),n=Object.create(null),i=(a,s)=>{let l=n[a];if(l==null)n[a]=s;else if(l!=s)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},o=(a,s,l,u,c)=>{var f,m;let p=t[a]||(t[a]=Object.create(null)),h=s.split(/ (?!$)/).map(x=>O6(x,e));for(let x=1;x<h.length;x++){let D=h.slice(0,x).join(" ");i(D,!0),p[D]||(p[D]={preventDefault:!0,stopPropagation:!1,run:[g=>{let w=ni={view:g,prefix:D,scope:a};return setTimeout(()=>{ni==w&&(ni=null)},k6),!0}]})}let d=h.join(" ");i(d,!1);let v=p[d]||(p[d]={preventDefault:!1,stopPropagation:!1,run:((m=(f=p._any)===null||f===void 0?void 0:f.run)===null||m===void 0?void 0:m.slice())||[]});l&&v.run.push(l),u&&(v.preventDefault=!0),c&&(v.stopPropagation=!0)};for(let a of r){let s=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let u of s){let c=t[u]||(t[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=a;for(let m in c)c[m].run.push(p=>f(p,Rm))}let l=a[e]||a.key;if(l)for(let u of s)o(u,l,a.run,a.preventDefault,a.stopPropagation),a.shift&&o(u,"Shift-"+l,a.shift,a.preventDefault,a.stopPropagation)}return t}var Rm=null;function I6(r,e,t,n){Rm=e;let i=mM(e),o=kn(i,0),a=ri(o)==i.length&&i!=" ",s="",l=!1,u=!1,c=!1;ni&&ni.view==t&&ni.scope==n&&(s=ni.prefix+" ",MT.indexOf(e.keyCode)<0&&(u=!0,ni=null));let f=new Set,m=v=>{if(v){for(let x of v.run)if(!f.has(x)&&(f.add(x),x(t)))return v.stopPropagation&&(c=!0),!0;v.preventDefault&&(v.stopPropagation&&(c=!0),u=!0)}return!1},p=r[n],h,d;return p&&(m(p[s+iu(i,e,!a)])?l=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Te.windows&&e.ctrlKey&&e.altKey)&&!(Te.mac&&e.altKey&&!e.ctrlKey)&&(h=Pn[e.keyCode])&&h!=i?(m(p[s+iu(h,e,!0)])||e.shiftKey&&(d=wo[e.keyCode])!=i&&d!=h&&m(p[s+iu(d,e,!1)]))&&(l=!0):a&&e.shiftKey&&m(p[s+iu(i,e,!0)])&&(l=!0),!l&&m(p._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),Rm=null,l}var tAe=/x/.unicode!=null?"gu":"g";var ra="-10000px",Lm=class{constructor(e,t,n,i){this.facet=t,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(a=>a);let o=null;this.tooltipViews=this.tooltips.map(a=>o=n(a,o))}update(e,t){var n;let i=e.state.facet(this.facet),o=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let a=[],s=t?[]:null;for(let l=0;l<o.length;l++){let u=o[l],c=-1;if(u){for(let f=0;f<this.tooltips.length;f++){let m=this.tooltips[f];m&&m.create==u.create&&(c=f)}if(c<0)a[l]=this.createTooltipView(u,l?a[l-1]:null),s&&(s[l]=!!u.above);else{let f=a[l]=this.tooltipViews[c];s&&(s[l]=t[c]),f.update&&f.update(e)}}}for(let l of this.tooltipViews)a.indexOf(l)<0&&(this.removeTooltipView(l),(n=l.destroy)===null||n===void 0||n.call(l));return t&&(s.forEach((l,u)=>t[u]=l),t.length=s.length),this.input=i,this.tooltips=o,this.tooltipViews=a,!0}};function R6(r){let e=r.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}var sm=Ke.define({combine:r=>{var e,t,n;return{position:Te.ios?"absolute":((e=r.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=r.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=r.find(i=>i.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||R6}}}),$M=new WeakMap,LT=Rn.fromClass(class{constructor(r){this.view=r,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=r.state.facet(sm);this.position=e.position,this.parent=e.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Lm(r,Ym,(t,n)=>this.createTooltip(t,n),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r,this.above);e&&this.observeIntersection();let t=e||r.geometryChanged,n=r.state.facet(sm);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(r,e){let t=r.create(this.view),n=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),r.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=ra,t.dom.style.left="0px",this.container.insertBefore(t.dom,n),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var r,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(r=n.destroy)===null||r===void 0||r.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(Te.gecko)t=o.offsetParent!=this.container.ownerDocument.body;else if(o.style.top==ra&&o.style.left=="0px"){let a=o.getBoundingClientRect();t=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(t||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(r=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:r,scaleY:e}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),i=Wm(this.view);return{visible:{left:n.left+i.left,top:n.top+i.top,right:n.right-i.right,bottom:n.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,a)=>{let s=this.manager.tooltipViews[a];return s.getCoords?s.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(sm).tooltipSpace(this.view),scaleX:r,scaleY:e,makeAbsolute:t}}writeMeasure(r){var e;if(r.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let s of this.manager.tooltipViews)s.dom.style.position="absolute"}let{visible:t,space:n,scaleX:i,scaleY:o}=r,a=[];for(let s=0;s<this.manager.tooltips.length;s++){let l=this.manager.tooltips[s],u=this.manager.tooltipViews[s],{dom:c}=u,f=r.pos[s],m=r.size[s];if(!f||l.clip!==!1&&(f.bottom<=Math.max(t.top,n.top)||f.top>=Math.min(t.bottom,n.bottom)||f.right<Math.max(t.left,n.left)-.1||f.left>Math.min(t.right,n.right)+.1)){c.style.top=ra;continue}let p=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,h=p?7:0,d=m.right-m.left,v=(e=$M.get(u))!==null&&e!==void 0?e:m.bottom-m.top,x=u.offset||z6,D=this.view.textDirection==Pt.LTR,g=m.width>n.right-n.left?D?n.left:n.right-m.width:D?Math.max(n.left,Math.min(f.left-(p?14:0)+x.x,n.right-d)):Math.min(Math.max(n.left,f.left-d+(p?14:0)-x.x),n.right-d),w=this.above[s];!l.strictSide&&(w?f.top-v-h-x.y<n.top:f.bottom+v+h+x.y>n.bottom)&&w==n.bottom-f.bottom>f.top-n.top&&(w=this.above[s]=!w);let b=(w?f.top-n.top:n.bottom-f.bottom)-h;if(b<v&&u.resize!==!1){if(b<this.view.defaultLineHeight){c.style.top=ra;continue}$M.set(u,v),c.style.height=(v=b)/o+"px"}else c.style.height&&(c.style.height="");let y=w?f.top-v-h-x.y:f.bottom+h+x.y,S=g+d;if(u.overlap!==!0)for(let C of a)C.left<S&&C.right>g&&C.top<y+v&&C.bottom>y&&(y=w?C.top-v-2-h:C.bottom+h+2);if(this.position=="absolute"?(c.style.top=(y-r.parent.top)/o+"px",WM(c,(g-r.parent.left)/i)):(c.style.top=y/o+"px",WM(c,g/i)),p){let C=f.left+(D?x.x:-x.x)-(g+14-7);p.style.left=C/i+"px"}u.overlap!==!0&&a.push({left:g,top:y,right:S,bottom:y+v}),c.classList.toggle("cm-tooltip-above",w),c.classList.toggle("cm-tooltip-below",!w),u.positioned&&u.positioned(r.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=ra}},{eventObservers:{scroll(){this.maybeMeasure()}}});function WM(r,e){let t=parseInt(r.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(r.style.left=e+"px")}var L6=rt.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),z6={x:0,y:0},Ym=Ke.define({enables:[LT,L6]});function Zm(r,e){let t=r.plugin(LT);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}var Ln=class extends rn{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}};Ln.prototype.elementClass="";Ln.prototype.toDOM=void 0;Ln.prototype.mapMode=lr.TrackBefore;Ln.prototype.startSide=Ln.prototype.endSide=-1;Ln.prototype.point=!0;var q6=0,ya=class{constructor(e,t){this.from=e,this.to=t}},ht=class{constructor(e={}){this.id=q6++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=_r.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}};ht.closedBy=new ht({deserialize:r=>r.split(" ")});ht.openedBy=new ht({deserialize:r=>r.split(" ")});ht.group=new ht({deserialize:r=>r.split(" ")});ht.isolate=new ht({deserialize:r=>{if(r&&r!="rtl"&&r!="ltr"&&r!="auto")throw new RangeError("Invalid value for isolate: "+r);return r||"auto"}});ht.contextHash=new ht({perNode:!0});ht.lookAhead=new ht({perNode:!0});ht.mounted=new ht({perNode:!0});var Eo=class{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[ht.mounted.id]}},U6=Object.create(null),_r=class r{constructor(e,t,n,i=0){this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):U6,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new r(e.name||"",t,e.id,n);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ht.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return n=>{for(let i=n.prop(ht.group),o=-1;o<(i?i.length:0);o++){let a=t[o<0?n.name:i[o]];if(a)return a}}}};_r.none=new _r("",Object.create(null),0,8);var Su=new WeakMap,zT=new WeakMap,Yt;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Yt||(Yt={}));var ar=class r{constructor(e,t,n,i,o){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[a,s]of o)this.props[typeof a=="number"?a:a.id]=s}}toString(){let e=Eo.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let i=n.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new wa(this.topNode,e)}cursorAt(e,t=0,n=0){let i=Su.get(this)||this.topNode,o=new wa(i);return o.moveTo(e,t),Su.set(this,o._tree),o}get topNode(){return new Dn(this,0,0,null)}resolve(e,t=0){let n=xa(Su.get(this)||this.topNode,e,t,!1);return Su.set(this,n),n}resolveInner(e,t=0){let n=xa(zT.get(this)||this.topNode,e,t,!0);return zT.set(this,n),n}resolveStack(e,t=0){return V6(this,e,t)}iterate(e){let{enter:t,leave:n,from:i=0,to:o=this.length}=e,a=e.mode||0,s=(a&Yt.IncludeAnonymous)>0;for(let l=this.cursor(a|Yt.IncludeAnonymous);;){let u=!1;if(l.from<=o&&l.to>=i&&(!s&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&n&&(s||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:rp(_r.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,i)=>new r(this.type,t,n,i,this.propValues),e.makeTree||((t,n,i)=>new r(_r.none,t,n,i)))}static build(e){return H6(e)}};ar.empty=new ar(_r.none,[],[],0);var Xm=class r{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new r(this.buffer,this.index)}},li=class r{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return _r.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,n==e)return o;let a=[];for(;e<n;)a.push(this.childString(e)),e=this.buffer[e+3];return o+"("+a.join(",")+")"}findChild(e,t,n,i,o){let{buffer:a}=this,s=-1;for(let l=e;l!=t&&!(VT(o,i,a[l+1],a[l+2])&&(s=l,n>0));l=a[l+3]);return s}slice(e,t,n){let i=this.buffer,o=new Uint16Array(t-e),a=0;for(let s=e,l=0;s<t;){o[l++]=i[s++],o[l++]=i[s++]-n;let u=o[l++]=i[s++]-n;o[l++]=i[s++]-e,a=Math.max(a,u)}return new r(o,a,this.set)}};function VT(r,e,t,n){switch(r){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function xa(r,e,t,n){for(var i;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let a=!n&&r instanceof Dn&&r.index<0?null:r.parent;if(!a)return r;r=a}let o=n?0:Yt.IgnoreOverlays;if(n)for(let a=r,s=a.parent;s;a=s,s=a.parent)a instanceof Dn&&a.index<0&&((i=s.enter(e,t,o))===null||i===void 0?void 0:i.from)!=a.from&&(r=s);for(;;){let a=r.enter(e,t,o);if(!a)return r;r=a}}var Nu=class{cursor(e=0){return new wa(this,e)}getChild(e,t=null,n=null){let i=qT(this,e,t,n);return i.length?i[0]:null}getChildren(e,t=null,n=null){return qT(this,e,t,n)}resolve(e,t=0){return xa(this,e,t,!1)}resolveInner(e,t=0){return xa(this,e,t,!0)}matchContext(e){return Jm(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}get node(){return this}get next(){return this.parent}},Dn=class r extends Nu{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i,o=0){for(let a=this;;){for(let{children:s,positions:l}=a._tree,u=t>0?s.length:-1;e!=u;e+=t){let c=s[e],f=l[e]+a.from;if(VT(i,n,f,f+c.length)){if(c instanceof li){if(o&Yt.ExcludeBuffers)continue;let m=c.findChild(0,c.buffer.length,t,n-f,i);if(m>-1)return new ba(new jm(a,c,e,f),null,m)}else if(o&Yt.IncludeAnonymous||!c.type.isAnonymous||tp(c)){let m;if(!(o&Yt.IgnoreMounts)&&(m=Eo.get(c))&&!m.overlay)return new r(m.tree,f,e,a);let p=new r(c,f,e,a);return o&Yt.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?c.children.length-1:0,t,n,i)}}}if(o&Yt.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let i;if(!(n&Yt.IgnoreOverlays)&&(i=Eo.get(this._tree))&&i.overlay){let o=e-this.from;for(let{from:a,to:s}of i.overlay)if((t>0?a<=o:a<o)&&(t<0?s>=o:s>o))return new r(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function qT(r,e,t,n){let i=r.cursor(),o=[];if(!i.firstChild())return o;if(t!=null){for(let a=!1;!a;)if(a=i.type.is(t),!i.nextSibling())return o}for(;;){if(n!=null&&i.type.is(n))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return n==null?o:[]}}function Jm(r,e,t=e.length-1){for(let n=r;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}var jm=class{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}},ba=class r extends Nu{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return o<0?null:new r(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&Yt.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new r(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new r(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new r(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,o=n.buffer[this.index+3];if(o>i){let a=n.buffer[this.index+1];e.push(n.slice(i,o,a)),t.push(0)}return new ar(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function HT(r){if(!r.length)return null;let e=0,t=r[0];for(let o=1;o<r.length;o++){let a=r[o];(a.from>t.from||a.to<t.to)&&(t=a,e=o)}let n=t instanceof Dn&&t.index<0?null:t.parent,i=r.slice();return n?i[e]=n:i.splice(e,1),new Qm(i,t)}var Qm=class{constructor(e,t){this.heads=e,this.node=t}get next(){return HT(this.heads)}};function V6(r,e,t){let n=r.resolveInner(e,t),i=null;for(let o=n instanceof Dn?n:n.context.parent;o;o=o.parent)if(o.index<0){let a=o.parent;(i||(i=[n])).push(a.resolve(e,t)),o=a}else{let a=Eo.get(o.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let s=new Dn(a.tree,a.overlay[0].from+o.from,-1,o);(i||(i=[n])).push(xa(s,e,t,!1))}}return i?HT(i):n}var wa=class{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Dn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof Dn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&Yt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Yt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Yt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let o=t+e,a=e<0?-1:n._tree.children.length;o!=a;o+=e){let s=n._tree.children[o];if(this.mode&Yt.IncludeAnonymous||s instanceof li||!s.type.isAnonymous||tp(s))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,o=this.stack.length;o>=0;){for(let a=e;a;a=a._parent)if(a.index==i){if(i==this.index)return a;t=a,n=o+1;break e}i=this.stack[--o]}for(let i=n;i<this.stack.length;i++)t=new ba(this.buffer,t,this.stack[i]);return this.bufferNode=new ba(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return Jm(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return Jm(this._tree,e,i);let a=n[t.buffer[this.stack[o]]];if(!a.isAnonymous){if(e[i]&&e[i]!=a.name)return!1;i--}}return!0}};function tp(r){return r.children.some(e=>e instanceof li||!e.type.isAnonymous||tp(e))}function H6(r){var e;let{buffer:t,nodeSet:n,maxBufferLength:i=1024,reused:o=[],minRepeatType:a=n.types.length}=r,s=Array.isArray(t)?new Xm(t,t.length):t,l=n.types,u=0,c=0;function f(b,y,S,C,A,E){let{id:M,start:F,end:k,size:I}=s,P=c,B=u;for(;I<0;)if(s.next(),I==-1){let Z=o[M];S.push(Z),C.push(F-b);return}else if(I==-3){u=M;return}else if(I==-4){c=M;return}else throw new RangeError(`Unrecognized record size: ${I}`);let O=l[M],q,_,K=F-b;if(k-F<=i&&(_=v(s.pos-y,A))){let Z=new Uint16Array(_.size-_.skip),W=s.pos-_.size,R=Z.length;for(;s.pos>W;)R=x(_.start,Z,R);q=new li(Z,k-_.start,n),K=_.start-b}else{let Z=s.pos-I;s.next();let W=[],R=[],X=M>=a?M:-1,ae=0,j=k;for(;s.pos>Z;)X>=0&&s.id==X&&s.size>=0?(s.end<=j-i&&(h(W,R,F,ae,s.end,j,X,P,B),ae=W.length,j=s.end),s.next()):E>2500?m(F,Z,W,R):f(F,Z,W,R,X,E+1);if(X>=0&&ae>0&&ae<W.length&&h(W,R,F,ae,F,j,X,P,B),W.reverse(),R.reverse(),X>-1&&ae>0){let U=p(O,B);q=rp(O,W,R,0,W.length,0,k-F,U,U)}else q=d(O,W,R,k-F,P-k,B)}S.push(q),C.push(K)}function m(b,y,S,C){let A=[],E=0,M=-1;for(;s.pos>y;){let{id:F,start:k,end:I,size:P}=s;if(P>4)s.next();else{if(M>-1&&k<M)break;M<0&&(M=I-i),A.push(F,k,I),E++,s.next()}}if(E){let F=new Uint16Array(E*4),k=A[A.length-2];for(let I=A.length-3,P=0;I>=0;I-=3)F[P++]=A[I],F[P++]=A[I+1]-k,F[P++]=A[I+2]-k,F[P++]=P;S.push(new li(F,A[2]-k,n)),C.push(k-b)}}function p(b,y){return(S,C,A)=>{let E=0,M=S.length-1,F,k;if(M>=0&&(F=S[M])instanceof ar){if(!M&&F.type==b&&F.length==A)return F;(k=F.prop(ht.lookAhead))&&(E=C[M]+F.length+k)}return d(b,S,C,A,E,y)}}function h(b,y,S,C,A,E,M,F,k){let I=[],P=[];for(;b.length>C;)I.push(b.pop()),P.push(y.pop()+S-A);b.push(d(n.types[M],I,P,E-A,F-E,k)),y.push(A-S)}function d(b,y,S,C,A,E,M){if(E){let F=[ht.contextHash,E];M=M?[F].concat(M):[F]}if(A>25){let F=[ht.lookAhead,A];M=M?[F].concat(M):[F]}return new ar(b,y,S,C,M)}function v(b,y){let S=s.fork(),C=0,A=0,E=0,M=S.end-i,F={size:0,start:0,skip:0};e:for(let k=S.pos-b;S.pos>k;){let I=S.size;if(S.id==y&&I>=0){F.size=C,F.start=A,F.skip=E,E+=4,C+=4,S.next();continue}let P=S.pos-I;if(I<0||P<k||S.start<M)break;let B=S.id>=a?4:0,O=S.start;for(S.next();S.pos>P;){if(S.size<0)if(S.size==-3)B+=4;else break e;else S.id>=a&&(B+=4);S.next()}A=O,C+=I,E+=B}return(y<0||C==b)&&(F.size=C,F.start=A,F.skip=E),F.size>4?F:void 0}function x(b,y,S){let{id:C,start:A,end:E,size:M}=s;if(s.next(),M>=0&&C<a){let F=S;if(M>4){let k=s.pos-(M-4);for(;s.pos>k;)S=x(b,y,S)}y[--S]=F,y[--S]=E-b,y[--S]=A-b,y[--S]=C}else M==-3?u=C:M==-4&&(c=C);return S}let D=[],g=[];for(;s.pos>0;)f(r.start||0,r.bufferStart||0,D,g,-1,0);let w=(e=r.length)!==null&&e!==void 0?e:D.length?g[0]+D[0].length:0;return new ar(l[r.topID],D.reverse(),g.reverse(),w)}var UT=new WeakMap;function Au(r,e){if(!r.isAnonymous||e instanceof li||e.type!=r)return 1;let t=UT.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=r||!(n instanceof ar)){t=1;break}t+=Au(r,n)}UT.set(e,t)}return t}function rp(r,e,t,n,i,o,a,s,l){let u=0;for(let h=n;h<i;h++)u+=Au(r,e[h]);let c=Math.ceil(u*1.5/8),f=[],m=[];function p(h,d,v,x,D){for(let g=v;g<x;){let w=g,b=d[g],y=Au(r,h[g]);for(g++;g<x;g++){let S=Au(r,h[g]);if(y+S>=c)break;y+=S}if(g==w+1){if(y>c){let S=h[w];p(S.children,S.positions,0,S.children.length,d[w]+D);continue}f.push(h[w])}else{let S=d[g-1]+h[g-1].length-b;f.push(rp(r,h,d,w,g,b,S,null,l))}m.push(b+D-o)}}return p(e,t,n,i,0),(s||l)(f,m,a)}var Pi=class r{constructor(e,t,n,i,o=!1,a=!1){this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(o?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let i=[new r(0,e.length,e,0,!1,n)];for(let o of t)o.to>e.length&&i.push(o);return i}static applyChanges(e,t,n=128){if(!t.length)return e;let i=[],o=1,a=e.length?e[0]:null;for(let s=0,l=0,u=0;;s++){let c=s<t.length?t[s]:null,f=c?c.fromA:1e9;if(f-l>=n)for(;a&&a.from<f;){let m=a;if(l>=m.from||f<=m.to||u){let p=Math.max(m.from,l)-u,h=Math.min(m.to,f)-u;m=p>=h?null:new r(p,h,m.tree,m.offset+u,s>0,!!c)}if(m&&i.push(m),a.to>f)break;a=o<e.length?e[o++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}},Cu=class{startParse(e,t,n){return typeof e=="string"&&(e=new ep(e)),n=n?n.length?n.map(i=>new ya(i.from,i.to)):[new ya(0,0)]:[new ya(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let o=i.advance();if(o)return o}}},ep=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};var iAe=new ht({perNode:!0});var $6=0,on=class r{constructor(e,t,n,i){this.name=e,this.set=t,this.base=n,this.modified=i,this.id=$6++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n=typeof e=="string"?e:"?";if(e instanceof r&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let i=new r(n,[],null,[]);if(i.set.push(i),t)for(let o of t.set)i.set.push(o);return i}static defineModifier(e){let t=new Fu(e);return n=>n.modified.indexOf(t)>-1?n:Fu.get(n.base||n,n.modified.concat(t).sort((i,o)=>i.id-o.id))}},W6=0,Fu=class r{constructor(e){this.name=e,this.instances=[],this.id=W6++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(s=>s.base==e&&G6(t,s.modified));if(n)return n;let i=[],o=new on(e.name,i,e,t);for(let s of t)s.instances.push(o);let a=K6(t);for(let s of e.set)if(!s.modified.length)for(let l of a)i.push(r.get(s,l));return o}};function G6(r,e){return r.length==e.length&&r.every((t,n)=>t==e[n])}function K6(r){let e=[[]];for(let t=0;t<r.length;t++)for(let n=0,i=e.length;n<i;n++)e.push(e[n].concat(r[t]));return e.sort((t,n)=>n.length-t.length)}function GT(r){let e=Object.create(null);for(let t in r){let n=r[t];Array.isArray(n)||(n=[n]);for(let i of t.split(" "))if(i){let o=[],a=2,s=i;for(let f=0;;){if(s=="..."&&f>0&&f+3==i.length){a=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!m)throw new RangeError("Invalid path: "+i);if(o.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),f+=m[0].length,f==i.length)break;let p=i[f++];if(f==i.length&&p=="!"){a=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);s=i.slice(f)}let l=o.length-1,u=o[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new Sa(n,a,l>0?o.slice(0,l):null);e[u]=c.sort(e[u])}}return Y6.add(e)}var Y6=new ht,Sa=class{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};Sa.empty=new Sa([],2,null);function op(r,e){let t=Object.create(null);for(let o of r)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let a of o.tag)t[a.id]=o.class;let{scope:n,all:i=null}=e||{};return{style:o=>{let a=i;for(let s of o)for(let l of s.set){let u=t[l.id];if(u){a=a?a+" "+u:u;break}}return a},scope:n}}var Ae=on.define,Eu=Ae(),ui=Ae(),$T=Ae(ui),WT=Ae(ui),ci=Ae(),Mu=Ae(ci),np=Ae(ci),Nn=Ae(),Ii=Ae(Nn),Sn=Ae(),An=Ae(),ip=Ae(),Da=Ae(ip),Tu=Ae(),Ce={comment:Eu,lineComment:Ae(Eu),blockComment:Ae(Eu),docComment:Ae(Eu),name:ui,variableName:Ae(ui),typeName:$T,tagName:Ae($T),propertyName:WT,attributeName:Ae(WT),className:Ae(ui),labelName:Ae(ui),namespace:Ae(ui),macroName:Ae(ui),literal:ci,string:Mu,docString:Ae(Mu),character:Ae(Mu),attributeValue:Ae(Mu),number:np,integer:Ae(np),float:Ae(np),bool:Ae(ci),regexp:Ae(ci),escape:Ae(ci),color:Ae(ci),url:Ae(ci),keyword:Sn,self:Ae(Sn),null:Ae(Sn),atom:Ae(Sn),unit:Ae(Sn),modifier:Ae(Sn),operatorKeyword:Ae(Sn),controlKeyword:Ae(Sn),definitionKeyword:Ae(Sn),moduleKeyword:Ae(Sn),operator:An,derefOperator:Ae(An),arithmeticOperator:Ae(An),logicOperator:Ae(An),bitwiseOperator:Ae(An),compareOperator:Ae(An),updateOperator:Ae(An),definitionOperator:Ae(An),typeOperator:Ae(An),controlOperator:Ae(An),punctuation:ip,separator:Ae(ip),bracket:Da,angleBracket:Ae(Da),squareBracket:Ae(Da),paren:Ae(Da),brace:Ae(Da),content:Nn,heading:Ii,heading1:Ae(Ii),heading2:Ae(Ii),heading3:Ae(Ii),heading4:Ae(Ii),heading5:Ae(Ii),heading6:Ae(Ii),contentSeparator:Ae(Nn),list:Ae(Nn),quote:Ae(Nn),emphasis:Ae(Nn),strong:Ae(Nn),link:Ae(Nn),monospace:Ae(Nn),strikethrough:Ae(Nn),inserted:Ae(),deleted:Ae(),changed:Ae(),invalid:Ae(),meta:Tu,documentMeta:Ae(Tu),annotation:Ae(Tu),processingInstruction:Ae(Tu),definition:on.defineModifier("definition"),constant:on.defineModifier("constant"),function:on.defineModifier("function"),standard:on.defineModifier("standard"),local:on.defineModifier("local"),special:on.defineModifier("special")};for(let r in Ce){let e=Ce[r];e instanceof on&&(e.name=r)}var sAe=op([{tag:Ce.link,class:"tok-link"},{tag:Ce.heading,class:"tok-heading"},{tag:Ce.emphasis,class:"tok-emphasis"},{tag:Ce.strong,class:"tok-strong"},{tag:Ce.keyword,class:"tok-keyword"},{tag:Ce.atom,class:"tok-atom"},{tag:Ce.bool,class:"tok-bool"},{tag:Ce.url,class:"tok-url"},{tag:Ce.labelName,class:"tok-labelName"},{tag:Ce.inserted,class:"tok-inserted"},{tag:Ce.deleted,class:"tok-deleted"},{tag:Ce.literal,class:"tok-literal"},{tag:Ce.string,class:"tok-string"},{tag:Ce.number,class:"tok-number"},{tag:[Ce.regexp,Ce.escape,Ce.special(Ce.string)],class:"tok-string2"},{tag:Ce.variableName,class:"tok-variableName"},{tag:Ce.local(Ce.variableName),class:"tok-variableName tok-local"},{tag:Ce.definition(Ce.variableName),class:"tok-variableName tok-definition"},{tag:Ce.special(Ce.variableName),class:"tok-variableName2"},{tag:Ce.definition(Ce.propertyName),class:"tok-propertyName tok-definition"},{tag:Ce.typeName,class:"tok-typeName"},{tag:Ce.namespace,class:"tok-namespace"},{tag:Ce.className,class:"tok-className"},{tag:Ce.macroName,class:"tok-macroName"},{tag:Ce.propertyName,class:"tok-propertyName"},{tag:Ce.operator,class:"tok-operator"},{tag:Ce.comment,class:"tok-comment"},{tag:Ce.meta,class:"tok-meta"},{tag:Ce.invalid,class:"tok-invalid"},{tag:Ce.punctuation,class:"tok-punctuation"}]);var ap,Na=new ht;var Z6=new ht,Kr=class{constructor(e,t,n=[],i=""){this.data=e,this.name=i,_t.prototype.hasOwnProperty("tree")||Object.defineProperty(_t.prototype,"tree",{get(){return Ca(this)}}),this.parser=t,this.extension=[Mo.of(this),_t.languageData.of((o,a,s)=>{let l=KT(o,a,s),u=l.type.prop(Na);if(!u)return[];let c=o.facet(u),f=l.type.prop(Z6);if(f){let m=l.resolve(a-l.from,s);for(let p of f)if(p.test(m,o)){let h=o.facet(p.facet);return p.type=="replace"?h:h.concat(c)}}return c})].concat(n)}isActiveAt(e,t,n=-1){return KT(e,t,n).type.prop(Na)==this.data}findRegions(e){let t=e.facet(Mo);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(o,a)=>{if(o.prop(Na)==this.data){n.push({from:a,to:a+o.length});return}let s=o.prop(ht.mounted);if(s){if(s.tree.prop(Na)==this.data){if(s.overlay)for(let l of s.overlay)n.push({from:l.from+a,to:l.to+a});else n.push({from:a,to:a+o.length});return}else if(s.overlay){let l=n.length;if(i(s.tree,s.overlay[0].from+a),n.length>l)return}}for(let l=0;l<o.children.length;l++){let u=o.children[l];u instanceof ar&&i(u,o.positions[l]+a)}};return i(Ca(e),0),n}get allowsNesting(){return!0}};Kr.setState=dt.define();function KT(r,e,t){let n=r.facet(Mo),i=Ca(r).topNode;if(!n||n.allowsNesting)for(let o=i;o;o=o.enter(e,t,Yt.ExcludeBuffers))o.type.isTop&&(i=o);return i}function Ca(r){let e=r.field(Kr.state,!1);return e?e.tree:ar.empty}var up=class{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}},Aa=null,cp=class r{constructor(e,t,n=[],i,o,a,s,l){this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=o,this.viewport=a,this.skipped=s,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new r(e,t,[],ar.empty,0,n,[],null)}startParse(){return this.parser.startParse(new up(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=ar.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Pi.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Pi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Aa;Aa=this;try{return e()}finally{Aa=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=YT(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:o,viewport:a,skipped:s}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,f,m)=>l.push({fromA:u,toA:c,fromB:f,toB:m})),n=Pi.applyChanges(n,l),i=ar.empty,o=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){s=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);c<f&&s.push({from:c,to:f})}}}return new r(this.parser,t,n,i,o,a,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:o}=this.skipped[n];i<e.to&&o>e.from&&(this.fragments=YT(this.fragments,i,o),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Cu{createParse(t,n,i){let o=i[0].from,a=i[i.length-1].to;return{parsedPos:o,advance(){let l=Aa;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=a,new ar(_r.none,[],[],a-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Aa}};function YT(r,e,t){return Pi.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}var Ea=class r{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new r(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=cp.create(e.facet(Mo).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new r(n)}};Kr.state=Or.define({create:Ea.init,update(r,e){for(let t of e.effects)if(t.is(Kr.setState))return t.value;return e.startState.facet(Mo)!=e.state.facet(Mo)?Ea.init(e.state):r.apply(e)}});var jT=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(jT=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});var sp=typeof navigator<"u"&&(!((ap=navigator.scheduling)===null||ap===void 0)&&ap.isInputPending)?()=>navigator.scheduling.isInputPending():null,X6=Rn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Kr.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Kr.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=jT(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,o=n.field(Kr.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!sp?Math.max(25,e.timeRemaining()-5):1e9),s=o.context.treeLen<i&&n.doc.length>i+1e3,l=o.context.work(()=>sp&&sp()||Date.now()>a,i+(s?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Kr.setState.of(new Ea(o.context))})),this.chunkBudget>0&&!(l&&!s)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>fr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Mo=Ke.define({combine(r){return r.length?r[0]:null},enables:r=>[Kr.state,X6,rt.contentAttributes.compute([r],e=>{let t=e.facet(r);return t&&t.name?{"data-language":t.name}:{}})]});var fp=class r{constructor(e,t){this.specs=e;let n;function i(s){let l=$r.newName();return(n||(n=Object.create(null)))["."+l]=s,l}let o=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,a=t.scope;this.scope=a instanceof Kr?s=>s.prop(Na)==a.data:a?s=>s==a:void 0,this.style=op(e.map(s=>({tag:s.tag,class:s.class||i(Object.assign({},s,{tag:null}))})),{all:o}).style,this.module=n?new $r(n):null,this.themeType=t.themeType}static define(e,t){return new r(e,t||{})}};var yAe=fp.define([{tag:Ce.meta,color:"#404740"},{tag:Ce.link,textDecoration:"underline"},{tag:Ce.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ce.emphasis,fontStyle:"italic"},{tag:Ce.strong,fontWeight:"bold"},{tag:Ce.strikethrough,textDecoration:"line-through"},{tag:Ce.keyword,color:"#708"},{tag:[Ce.atom,Ce.bool,Ce.url,Ce.contentSeparator,Ce.labelName],color:"#219"},{tag:[Ce.literal,Ce.inserted],color:"#164"},{tag:[Ce.string,Ce.deleted],color:"#a11"},{tag:[Ce.regexp,Ce.escape,Ce.special(Ce.string)],color:"#e40"},{tag:Ce.definition(Ce.variableName),color:"#00f"},{tag:Ce.local(Ce.variableName),color:"#30a"},{tag:[Ce.typeName,Ce.namespace],color:"#085"},{tag:Ce.className,color:"#167"},{tag:[Ce.special(Ce.variableName),Ce.macroName],color:"#256"},{tag:Ce.definition(Ce.propertyName),color:"#00c"},{tag:Ce.comment,color:"#940"},{tag:Ce.invalid,color:"#f00"}]);var J6=Object.create(null),ZT=[_r.none];var XT=[],JT=Object.create(null),j6=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])j6[r]=Q6(J6,e);function lp(r,e){XT.indexOf(r)>-1||(XT.push(r),console.warn(e))}function Q6(r,e){let t=[];for(let s of e.split(" ")){let l=[];for(let u of s.split(".")){let c=r[u]||Ce[u];c?typeof c=="function"?l.length?l=l.map(c):lp(u,`Modifier ${u} used at start of tag`):l.length?lp(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:lp(u,`Unknown highlighting tag ${u}`)}for(let u of l)t.push(u)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),i=n+" "+t.map(s=>s.id),o=JT[i];if(o)return o.id;let a=JT[i]=_r.define({id:ZT.length,name:n,props:[GT({[n]:t})]});return ZT.push(a),a.id}var xAe={rtl:zt.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:Pt.RTL}),ltr:zt.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:Pt.LTR}),auto:zt.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})};var Bu=class{constructor(e,t,n,i){this.state=e,this.pos=t,this.explicit=n,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=Ca(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),o=i.search(iF(e,!1));return o<0?null:{from:n+o,to:this.pos,text:i.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,n){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}};function QT(r){let e=Object.keys(r).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function e9(r){let e=Object.create(null),t=Object.create(null);for(let{label:i}of r){e[i[0]]=!0;for(let o=1;o<i.length;o++)t[i[o]]=!0}let n=QT(e)+QT(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function t9(r){let e=r.map(i=>typeof i=="string"?{label:i}:i),[t,n]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:e9(e);return i=>{let o=i.matchBefore(n);return o||i.explicit?{from:o?o.from:i.pos,options:e,validFor:t}:null}}var _u=class{constructor(e,t,n,i){this.completion=e,this.source=t,this.match=n,this.score=i}};function Ri(r){return r.selection.main.from}function iF(r,e){var t;let{source:n}=r,i=e&&n[0]!="^",o=n[n.length-1]!="$";return!i&&!o?r:new RegExp(`${i?"^":""}(?:${n})${o?"$":""}`,(t=r.flags)!==null&&t!==void 0?t:r.ignoreCase?"i":"")}var oF=tn.define();function r9(r,e,t,n){let{main:i}=r.selection,o=t-i.from,a=n-i.from;return{...r.changeByRange(s=>{if(s!=i&&t!=n&&r.sliceDoc(s.from+o,s.from+a)!=r.sliceDoc(t,n))return{range:s};let l=r.toText(e);return{changes:{from:s.from+o,to:n==i.from?s.to:s.from+a,insert:l},range:He.cursor(s.from+o+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}var eF=new WeakMap;function n9(r){if(!Array.isArray(r))return r;let e=eF.get(r);return e||eF.set(r,e=t9(r)),e}var ku=dt.define(),Ma=dt.define(),pp=class{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=kn(e,t),i=ri(n);this.chars.push(n);let o=e.slice(t,t+i),a=o.toUpperCase();this.folded.push(kn(a==o?o.toLowerCase():a,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:i,precise:o,byWord:a}=this;if(t.length==1){let D=kn(e,0),g=ri(D),w=g==e.length?0:-100;if(D!=t[0])if(D==n[0])w+=-200;else return null;return this.ret(w,[0,g])}let s=e.indexOf(this.pattern);if(s==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,u=0;if(s<0){for(let D=0,g=Math.min(e.length,200);D<g&&u<l;){let w=kn(e,D);(w==t[u]||w==n[u])&&(i[u++]=D),D+=ri(w)}if(u<l)return null}let c=0,f=0,m=!1,p=0,h=-1,d=-1,v=/[a-z]/.test(e),x=!0;for(let D=0,g=Math.min(e.length,200),w=0;D<g&&f<l;){let b=kn(e,D);s<0&&(c<l&&b==t[c]&&(o[c++]=D),p<l&&(b==t[p]||b==n[p]?(p==0&&(h=D),d=D+1,p++):p=0));let y,S=b<255?b>=48&&b<=57||b>=97&&b<=122?2:b>=65&&b<=90?1:0:(y=JE(b))!=y.toLowerCase()?1:y!=y.toUpperCase()?2:0;(!D||S==1&&v||w==0&&S!=0)&&(t[f]==b||n[f]==b&&(m=!0)?a[f++]=D:a.length&&(x=!1)),w=S,D+=ri(b)}return f==l&&a[0]==0&&x?this.result(-100+(m?-200:0),a,e):p==l&&h==0?this.ret(-200-e.length+(d==e.length?0:-100),[0,d]):s>-1?this.ret(-700-e.length,[s,s+this.pattern.length]):p==l?this.ret(-900-e.length,[h,d]):f==l?this.result(-100+(m?-200:0)+-700+(x?0:-1100),a,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,n){let i=[],o=0;for(let a of t){let s=a+(this.astral?ri(kn(n,a)):1);o&&i[o-1]==a?i[o-1]=s:(i[o++]=a,i[o++]=s)}return this.ret(e-n.length,i)}},hp=class{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}},Zt=Ke.define({combine(r){return Zl(r,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:i9,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>tF(e(n),t(n)),optionClass:(e,t)=>n=>tF(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function tF(r,e){return r?e?r+" "+e:r:e}function i9(r,e,t,n,i,o){let a=r.textDirection==Pt.RTL,s=a,l=!1,u="top",c,f,m=e.left-i.left,p=i.right-e.right,h=n.right-n.left,d=n.bottom-n.top;if(s&&m<Math.min(h,p)?s=!1:!s&&p<Math.min(h,m)&&(s=!0),h<=(s?m:p))c=Math.max(i.top,Math.min(t.top,i.bottom-d))-e.top,f=Math.min(400,s?m:p);else{l=!0,f=Math.min(400,(a?e.right:i.right-e.left)-30);let D=i.bottom-e.bottom;D>=d||D>e.top?c=t.bottom-e.top:(u="bottom",c=e.bottom-t.top)}let v=(e.bottom-e.top)/o.offsetHeight,x=(e.right-e.left)/o.offsetWidth;return{style:`${u}: ${c/v}px; max-width: ${f/x}px`,class:"cm-completionInfo-"+(l?a?"left-narrow":"right-narrow":s?"left":"right")}}function o9(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(t){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&n.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(t,n,i,o){let a=document.createElement("span");a.className="cm-completionLabel";let s=t.displayLabel||t.label,l=0;for(let u=0;u<o.length;){let c=o[u++],f=o[u++];c>l&&a.appendChild(document.createTextNode(s.slice(l,c)));let m=a.appendChild(document.createElement("span"));m.appendChild(document.createTextNode(s.slice(c,f))),m.className="cm-completionMatchedText",l=f}return l<s.length&&a.appendChild(document.createTextNode(s.slice(l))),a},position:50},{render(t){if(!t.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=t.detail,n},position:80}),e.sort((t,n)=>t.position-n.position).map(t=>t.render)}function mp(r,e,t){if(r<=t)return{from:0,to:r};if(e<0&&(e=0),e<=r>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let n=Math.floor((r-e)/t);return{from:r-(n+1)*t,to:r-n*t}}var dp=class{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:o,selected:a}=i.open,s=e.state.facet(Zt);this.optionContent=o9(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=mp(o.length,a,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(t).open;for(let c=l.target,f;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(f=/-(\d+)$/.exec(c.id))&&+f[1]<u.length){this.applyCompletion(e,u[+f[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Zt).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:Ma.of(null)})}),this.showOptions(o,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){let{options:o,selected:a,disabled:s}=n.open;(!i.open||i.open.options!=o)&&(this.range=mp(o.length,a,e.state.facet(Zt).maxRenderedOptions),this.showOptions(o,n.id)),this.updateSel(),s!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of t.split(" "))n&&this.dom.classList.add(n);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=mp(t.options.length,t.selected,this.view.state.facet(Zt).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:i}=n;if(!i)return;let o=typeof i=="string"?document.createTextNode(i):i(n);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,n)}).catch(a=>fr(this.view.state,a,"completion info")):this.addInfoPane(o,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:o}=e;n.appendChild(i),this.infoDestroy=o||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)n.nodeName!="LI"||!n.id?i--:i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&s9(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),o=this.space;if(!o){let a=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:a.clientWidth,bottom:a.clientHeight}}return i.top>Math.min(o.bottom,t.bottom)-10||i.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(Zt).positionInfo(this.view,t,i,n,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){let i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",a=>{a.target==i&&a.preventDefault()});let o=null;for(let a=n.from;a<n.to;a++){let{completion:s,match:l}=e[a],{section:u}=s;if(u){let m=typeof u=="string"?u:u.name;if(m!=o&&(a>n.from||n.from==0))if(o=m,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let p=i.appendChild(document.createElement("completion-section"));p.textContent=m}}let c=i.appendChild(document.createElement("li"));c.id=t+"-"+a,c.setAttribute("role","option");let f=this.optionClass(s);f&&(c.className=f);for(let m of this.optionContent){let p=m(s,this.view.state,this.view,l);p&&c.appendChild(p)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}};function a9(r,e){return t=>new dp(t,r,e)}function s9(r,e){let t=r.getBoundingClientRect(),n=e.getBoundingClientRect(),i=t.height/r.offsetHeight;n.top<t.top?r.scrollTop-=(t.top-n.top)/i:n.bottom>t.bottom&&(r.scrollTop+=(n.bottom-t.bottom)/i)}function rF(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function l9(r,e){let t=[],n=null,i=null,o=c=>{t.push(c);let{section:f}=c.completion;if(f){n||(n=[]);let m=typeof f=="string"?f:f.name;n.some(p=>p.name==m)||n.push(typeof f=="string"?{name:m}:f)}},a=e.facet(Zt);for(let c of r)if(c.hasResult()){let f=c.result.getMatch;if(c.result.filter===!1)for(let m of c.result.options)o(new _u(m,c.source,f?f(m):[],1e9-t.length));else{let m=e.sliceDoc(c.from,c.to),p,h=a.filterStrict?new hp(m):new pp(m);for(let d of c.result.options)if(p=h.match(d.label)){let v=d.displayLabel?f?f(d,p.matched):[]:p.matched,x=p.score+(d.boost||0);if(o(new _u(d,c.source,v,x)),typeof d.section=="object"&&d.section.rank==="dynamic"){let{name:D}=d.section;i||(i=Object.create(null)),i[D]=Math.max(x,i[D]||-1e9)}}}}if(n){let c=Object.create(null),f=0,m=(p,h)=>(p.rank==="dynamic"&&h.rank==="dynamic"?i[h.name]-i[p.name]:0)||(typeof p.rank=="number"?p.rank:1e9)-(typeof h.rank=="number"?h.rank:1e9)||(p.name<h.name?-1:1);for(let p of n.sort(m))f-=1e5,c[p.name]=f;for(let p of t){let{section:h}=p.completion;h&&(p.score+=c[typeof h=="string"?h:h.name])}}let s=[],l=null,u=a.compareCompletions;for(let c of t.sort((f,m)=>m.score-f.score||u(f.completion,m.completion))){let f=c.completion;!l||l.label!=f.label||l.detail!=f.detail||l.type!=null&&f.type!=null&&l.type!=f.type||l.apply!=f.apply||l.boost!=f.boost?s.push(c):rF(c.completion)>rF(l)&&(s[s.length-1]=c),l=c.completion}return s}var gp=class r{constructor(e,t,n,i,o,a){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=i,this.selected=o,this.disabled=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new r(this.options,nF(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,i,o,a){if(i&&!a&&e.some(u=>u.isPending))return i.setDisabled();let s=l9(e,t);if(!s.length)return i&&e.some(u=>u.isPending)?i.setDisabled():null;let l=t.facet(Zt).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let u=i.options[i.selected].completion;for(let c=0;c<s.length;c++)if(s[c].completion==u){l=c;break}}return new r(s,nF(n,l),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:h9,above:o.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new r(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new r(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}},vp=class r{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new r(m9,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,n=t.facet(Zt),o=(n.override||t.languageDataAt("autocomplete",Ri(t)).map(n9)).map(l=>(this.active.find(c=>c.source==l)||new zn(l,this.active.some(c=>c.state!=0)?1:0)).update(e,n));o.length==this.active.length&&o.every((l,u)=>l==this.active[u])&&(o=this.active);let a=this.open,s=e.effects.some(l=>l.is(xp));a&&e.docChanged&&(a=a.map(e.changes)),e.selection||o.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!u9(o,this.active)||s?a=gp.build(o,t,this.id,a,n,s):a&&a.disabled&&!o.some(l=>l.isPending)&&(a=null),!a&&o.every(l=>!l.isPending)&&o.some(l=>l.hasResult())&&(o=o.map(l=>l.hasResult()?new zn(l.source,0):l));for(let l of e.effects)l.is(sF)&&(a=a&&a.setSelected(l.value,this.id));return o==this.active&&a==this.open?this:new r(o,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?c9:f9}};function u9(r,e){if(r==e)return!0;for(let t=0,n=0;;){for(;t<r.length&&!r[t].hasResult();)t++;for(;n<e.length&&!e[n].hasResult();)n++;let i=t==r.length,o=n==e.length;if(i||o)return i==o;if(r[t++].result!=e[n++].result)return!1}}var c9={"aria-autocomplete":"list"},f9={};function nF(r,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return e>-1&&(t["aria-activedescendant"]=r+"-"+e),t}var m9=[];function aF(r,e){if(r.isUserEvent("input.complete")){let n=r.annotation(oF);if(n&&e.activateOnCompletion(n))return 12}let t=r.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:r.isUserEvent("delete.backward")?2:r.selection?8:r.docChanged?16:0}var zn=class r{constructor(e,t,n=!1){this.source=e,this.state=t,this.explicit=n}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let n=aF(e,t),i=this;(n&8||n&16&&this.touches(e))&&(i=new r(i.source,0)),n&4&&i.state==0&&(i=new r(this.source,1)),i=i.updateFor(e,n);for(let o of e.effects)if(o.is(ku))i=new r(i.source,1,o.value);else if(o.is(Ma))i=new r(i.source,0);else if(o.is(xp))for(let a of o.value)a.source==i.source&&(i=a);return i}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Ri(e.state))}},Pu=class r extends zn{constructor(e,t,n,i,o,a){super(e,3,t),this.limit=n,this.result=i,this.from=o,this.to=a}hasResult(){return!0}updateFor(e,t){var n;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),s=Ri(e.state);if(s>a||!i||t&2&&(Ri(e.startState)==this.from||s<this.limit))return new zn(this.source,t&4?1:0);let l=e.changes.mapPos(this.limit);return p9(i.validFor,e.state,o,a)?new r(this.source,this.explicit,l,i,o,a):i.update&&(i=i.update(i,o,a,new Bu(e.state,s,!1)))?new r(this.source,this.explicit,l,i,i.from,(n=i.to)!==null&&n!==void 0?n:Ri(e.state)):new zn(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new r(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new zn(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}};function p9(r,e,t,n){if(!r)return!1;let i=e.sliceDoc(t,n);return typeof r=="function"?r(i,t,n,e):iF(r,!0).test(i)}var xp=dt.define({map(r,e){return r.map(t=>t.map(e))}}),sF=dt.define(),mr=Or.define({create(){return vp.start()},update(r,e){return r.update(e)},provide:r=>[Ym.from(r,e=>e.tooltip),rt.contentAttributes.from(r,e=>e.attrs)]});function bp(r,e){let t=e.completion.apply||e.completion.label,n=r.state.field(mr).active.find(i=>i.source==e.source);return n instanceof Pu?(typeof t=="string"?r.dispatch({...r9(r.state,t,n.from,n.to),annotations:oF.of(e.completion)}):t(r,e.completion,n.from,n.to),!0):!1}var h9=a9(mr,bp);function Ou(r,e="option"){return t=>{let n=t.state.field(mr,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<t.state.facet(Zt).interactionDelay)return!1;let i=1,o;e=="page"&&(o=Zm(t,n.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:a}=n.open.options,s=n.open.selected>-1?n.open.selected+i*(r?1:-1):r?0:a-1;return s<0?s=e=="page"?0:a-1:s>=a&&(s=e=="page"?a-1:0),t.dispatch({effects:sF.of(s)}),!0}}var d9=r=>{let e=r.state.field(mr,!1);return r.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<r.state.facet(Zt).interactionDelay?!1:bp(r,e.open.options[e.open.selected])},To=r=>r.state.field(mr,!1)?(r.dispatch({effects:ku.of(!0)}),!0):!1,wp=r=>{let e=r.state.field(mr,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(r.dispatch({effects:Ma.of(null)}),!0)},yp=class{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}},g9=50,v9=1e3,y9=Rn.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of r.state.field(mr).active)e.isPending&&this.startQuery(e)}update(r){let e=r.state.field(mr),t=r.state.facet(Zt);if(!r.selectionSet&&!r.docChanged&&r.startState.field(mr)==e)return;let n=r.transactions.some(o=>{let a=aF(o,t);return a&8||(o.selection||o.docChanged)&&!(a&3)});for(let o=0;o<this.running.length;o++){let a=this.running[o];if(n||a.context.abortOnDocChange&&r.docChanged||a.updates.length+r.transactions.length>g9&&Date.now()-a.time>v9){for(let s of a.context.abortListeners)try{s()}catch(l){fr(this.view.state,l)}a.context.abortListeners=null,this.running.splice(o--,1)}else a.updates.push(...r.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),r.transactions.some(o=>o.effects.some(a=>a.is(ku)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(a=>a.active.source==o.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let o of r.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:r}=this.view,e=r.field(mr);for(let t of e.active)t.isPending&&!this.running.some(n=>n.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Zt).updateSyncTime))}startQuery(r){let{state:e}=this.view,t=Ri(e),n=new Bu(e,t,r.explicit,this.view),i=new yp(r,n);this.running.push(i),Promise.resolve(r.source(n)).then(o=>{i.context.aborted||(i.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Ma.of(null)}),fr(this.view.state,o)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Zt).updateSyncTime))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Zt),n=this.view.state.field(mr);for(let i=0;i<this.running.length;i++){let o=this.running[i];if(o.done===void 0)continue;if(this.running.splice(i--,1),o.done){let s=Ri(o.updates.length?o.updates[0].startState:this.view.state),l=Math.min(s,o.done.from+(o.active.explicit?0:1)),u=new Pu(o.active.source,o.active.explicit,l,o.done,o.done.from,(r=o.done.to)!==null&&r!==void 0?r:s);for(let c of o.updates)u=u.update(c,t);if(u.hasResult()){e.push(u);continue}}let a=n.active.find(s=>s.source==o.active.source);if(a&&a.isPending)if(o.done==null){let s=new zn(o.active.source,0);for(let l of o.updates)s=s.update(l,t);s.isPending||e.push(s)}else this.startQuery(a)}(e.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:xp.of(e)})}},{eventHandlers:{blur(r){let e=this.view.state.field(mr,!1);if(e&&e.tooltip&&this.view.state.facet(Zt).closeOnBlur){let t=e.open&&Zm(this.view,e.open.tooltip);(!t||!t.dom.contains(r.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Ma.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:ku.of(!1)}),20),this.composing=0}}}),x9=typeof navigator=="object"&&/Win/.test(navigator.platform),b9=Ti.highest(rt.domEventHandlers({keydown(r,e){let t=e.state.field(mr,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||r.key.length>1||r.ctrlKey&&!(x9&&r.altKey)||r.metaKey)return!1;let n=t.open.options[t.open.selected],i=t.active.find(a=>a.source==n.source),o=n.completion.commitCharacters||i.result.commitCharacters;return o&&o.indexOf(r.key)>-1&&bp(e,n),!1}})),w9=rt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});var lF=new class extends rn{};lF.startSide=1;lF.endSide=-1;var CAe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent);function uF(r={}){return[b9,mr,Zt.of(r),y9,S9,w9]}var D9=[{key:"Ctrl-Space",run:To},{mac:"Alt-`",run:To},{mac:"Alt-i",run:To},{key:"Escape",run:wp},{key:"ArrowDown",run:Ou(!0)},{key:"ArrowUp",run:Ou(!1)},{key:"PageDown",run:Ou(!0,"page")},{key:"PageUp",run:Ou(!1,"page")},{key:"Enter",run:d9}],S9=Ti.highest(Km.computeN([Zt],r=>r.facet(Zt).defaultKeymap?[D9]:[]));function Dp(r){let e=r.field(mr,!1);return e&&e.active.some(t=>t.isPending)?"pending":e&&e.active.some(t=>t.state!=0)?"active":null}var fF=require("obsidian"),mF=dt.define(),cF=Or.define({create:()=>0,update(r,e){for(let t of e.effects)if(t.is(mF))return t.value;return r}}),Iu=class{constructor(e){this.plugin=e,this.extension=[cF,uF({override:[t=>this.provideCompletions(t)],activateOnTyping:!0})]}notifyChanged(){let e=Date.now();this.plugin.app.workspace.iterateAllLeaves(t=>{let n=t.view?.editor?.cm;n&&(n.dispatch({effects:mF.of(e)}),Dp(n.state)&&To(n))})}updateEnabledState(){let e=this.plugin.settings.autocompleteEnabled;this.plugin.app.workspace.iterateAllLeaves(t=>{let n=t.view?.editor?.cm;n&&(e?Dp(n.state)&&To(n):wp(n))})}provideCompletions(e){if(e.state.field(cF),!this.plugin.settings.autocompleteEnabled||!this.isInCalcBlock(e))return null;let t=e.matchBefore(/[A-Za-z_][A-Za-z0-9_]*/);if(!t&&!e.explicit)return null;let i=e.state.field(fF.editorInfoField,!1)?.file?.path??null,o=this.plugin.getScopeCompletions(i);if(!o.length)return null;if(!t)return{from:e.pos,options:o};let a=t.text.toLowerCase(),s=o.filter(l=>l.label.toLowerCase().startsWith(a));return{from:t.from,options:s.length?s:o}}isInCalcBlock(e){let t=e.state.doc,n=t.lineAt(e.pos).number,i=!1;for(let o=1;o<=n;o++){let a=t.line(o).text.trim();if(!a.startsWith("```")&&!a.startsWith("~~~"))continue;let s=a.slice(3).trim().toLowerCase();i?i=!1:i=s==="calc"}return i}};var Ru=class extends it.Plugin{constructor(){super(...arguments);this.varsLeaf=null;this.currentScope=null;this.loadedGlobalVars={};this.modelViewerAvailable=!1;this.evalQueue=new Map;this.bypassThrottleUntil=0;this.diagramIntegrations=[{key:"excalidraw",name:"Excalidraw sketch",description:"Creates a new Excalidraw canvas and embeds it in the note.",pluginId:"obsidian-excalidraw-plugin",fileExtension:".excalidraw.md",defaultFolder:"Excalidraw",defaultFrontmatter:`---
excalidraw-plugin: parsed
---
`,embedPrefix:"![[",embedSuffix:"]]"},{key:"drawio",name:"Diagrams.net drawing",description:"Creates a Diagrams.net file placeholder for the Draw.io plugin.",pluginId:"drawio-obsidian",fileExtension:".drawio",defaultFolder:"Diagrams",embedPrefix:"![[",embedSuffix:"]]"},{key:"circuit",name:"Circuit sketch",description:"Prepares a Circuit Sketcher canvas and embeds it in the current note.",pluginId:"obsidian-circuit-sketcher",fileExtension:".circuit.md",defaultFolder:"Circuits",defaultFrontmatter:`---
plugin: circuit-sketcher
---
`,embedPrefix:"![[",embedSuffix:"]]"}]}async onload(){console.log("Loading Engineering Toolkit"),await this.loadSettings(),this.calc=new kl(this),this.calc.loadGlobalVars(this.loadedGlobalVars),this.exporter=new Ll(this),this.completionManager=new Iu(this),this.registerEditorExtension(this.completionManager.extension),this.refreshModelViewerAvailability(!0),this.updateAutocompleteSetting(),this.addSettingTab(new Ba(this.app,this)),this.registerView(Qn,t=>new Rl(t,this)),this.addCommand({id:"open-variables-view",name:"Open Variables Panel",callback:async()=>{await this.openVariablesView()}}),this.addCommand({id:"export-calculations-python",name:"Export calculations to Python",callback:async()=>{await this.exporter.exportActiveNoteOrSelection()}}),this.registerMarkdownCodeBlockProcessor("calc",async(t,n,i)=>{let o=this.getEvaluationKey(t,n,i),a=async()=>{let s=await this.calc.evaluateBlock(t,i);n.empty(),n.appendChild(s);let l=this.calc.getScope(i.sourcePath||"untitled");this.currentScope=l,this.refreshVariablesView(l)};this.shouldBypassThrottle()?await this.runEvaluationNow(o,a):await this.scheduleEvaluation(o,a)}),this.registerMarkdownPostProcessor(async(t,n)=>{let i=[],o=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),a;for(;a=o.nextNode();)i.push(a);let s=/(^|[^\S\r\n])=\s+([^=\n]+?)(?=(?:\s{2,}|\n|[.,;:!?](?![0-9A-Za-z])|$))/g,l=n.sourcePath||"untitled",u=!1;for(let c of i){let f=c.parentElement;if(!f||f.closest("code, pre, .calc-output, .calc-inline"))continue;let m=c.nodeValue;if(!m)continue;s.lastIndex=0;let p=0,h,d=!1,v=document.createDocumentFragment();for(;(h=s.exec(m))!==null;){d=!0;let D=h[1]??"",g=h.index,w=m.slice(p,g)+D;w&&v.appendChild(document.createTextNode(w));let b=h[2].trim(),y=await this.calc.evaluateInline(b,n);v.appendChild(y),p=s.lastIndex}if(!d)continue;let x=m.slice(p);x&&v.appendChild(document.createTextNode(x)),c.replaceWith(v),u=!0}u&&(this.currentScope=this.calc.getScope(l),this.refreshVariablesView(this.currentScope))}),this.addCommand({id:"recalculate-note",name:"Recalculate current note",callback:async()=>{this.bypassThrottleUntil=Date.now()+Math.max(2*this.settings.evaluationThrottleMs,500),await this.recalculateActiveNote()}}),this.addCommand({id:"reset-current-scope",name:"Reset current note scope",callback:()=>{let t=this.app.workspace.getActiveFile();if(!t){new it.Notice("Open a note before resetting the scope.");return}this.calc.clearScope(t.path),this.currentScope=null,this.refreshVariablesView(null),new it.Notice("Cleared stored variables for this note.")}}),this.addCommand({id:"toggle-auto-recalc",name:"Toggle auto recalc",callback:async()=>{this.settings.autoRecalc=!this.settings.autoRecalc,await this.saveSettings();let t=this.settings.autoRecalc?"enabled":"disabled",n=this.settings.autoRecalc?"Calculations will refresh automatically.":"Existing results will persist until you manually recalculate.";new it.Notice(`Auto recalc ${t}. ${n}`)}}),this.addCommand({id:"new-experiment-note",name:"New Experiment Note",callback:async()=>{if(!this.settings.labJournalEnabled){new it.Notice("Lab journal helpers are disabled in settings.");return}await IE(this)}}),this.addCommand({id:"insert-unit-conversion",name:"Insert unit conversion",editorCallback:async t=>{let n=await this.prompt("Enter value and unit to convert (e.g., 5 m)");if(!n)return;let i=await this.prompt("Enter target unit (e.g., ft)");if(!i)return;let o=t.getCursor(),a=`${n.trim()} -> ${i.trim()}`;t.replaceRange(`${a}
`,o),t.setCursor({line:o.line+1,ch:0})}}),this.addCommand({id:"open-unit-picker",name:"Insert Unit from Picker",callback:()=>{new Il(this).open()}}),this.addCommand({id:"insert-diagram-placeholder",name:"Insert engineering diagram",callback:async()=>{await this.insertDiagramFlow()}});for(let t of this.diagramIntegrations)this.addCommand({id:`insert-diagram-${t.key}`,name:`Insert ${t.name}`,callback:async()=>{await this.insertDiagramFlow(t.key)}});this.addCommand({id:"insert-model-viewer-embed",name:"Insert Model Viewer embed",callback:async()=>{await this.handleInsertModelViewerCommand()}}),this.registerEvent(this.app.workspace.on("file-open",async t=>{t&&this.refreshVariablesView(null)})),await this.applyFeatureToggles()}async openVariablesView(){if(!this.settings.variablesPanelEnabled){new it.Notice("Variables panel is disabled in settings.");return}(!this.varsLeaf||this.varsLeaf?.getViewState().type!==Qn)&&(this.varsLeaf=this.app.workspace.getRightLeaf(!1),await this.varsLeaf.setViewState({type:Qn,active:!0})),this.app.workspace.revealLeaf(this.varsLeaf),this.refreshVariablesView(this.currentScope)}refreshVariablesView(t){if(!this.settings.variablesPanelEnabled)return;let n=this.app.workspace.getLeavesOfType(Qn);for(let i of n)i.view.renderScope(t||void 0)}getGlobalVariables(){return this.calc?.getGlobalVariables()??new Map}handleScopeChanged(t){this.completionManager&&this.settings.autocompleteEnabled&&this.completionManager.notifyChanged()}updateAutocompleteSetting(){this.completionManager&&(this.completionManager.updateEnabledState(),this.settings.autocompleteEnabled&&this.completionManager.notifyChanged())}getScopeCompletions(t){let n=[],i=new Set,o=(a,s,l)=>{i.has(a)||(i.add(a),n.push({label:a,detail:s,type:l}))};if(t){let a=this.calc.peekScope(t);if(a)for(let s of a.vars.keys())o(s,"Local variable","variable")}if(this.settings.globalVarsEnabled)for(let[a]of this.calc.listGlobalVars())o(a,"Global variable","variable");for(let a of this.calc.listKnownUnits())o(a,"Unit","constant");return n}getEvaluationKey(t,n,i){let o=i.sourcePath||"untitled",a=i.getSectionInfo?.(n);return a?`${o}::${a.lineStart}-${a.lineEnd}`:`${o}::${C9(t)}`}shouldBypassThrottle(){return Date.now()<this.bypassThrottleUntil}async runEvaluationNow(t,n){let i=this.evalQueue.get(t);if(!i)return n();window.clearTimeout(i.timerId),this.evalQueue.delete(t);try{await n(),i.resolve()}catch(o){throw i.reject(o),o}}scheduleEvaluation(t,n){let i=this.evalQueue.get(t);if(i)return i.evaluate=n,window.clearTimeout(i.timerId),i.timerId=window.setTimeout(()=>this.flushEvaluation(t),this.settings.evaluationThrottleMs),i.promise;let o,a,s=new Promise((u,c)=>{o=u,a=c}),l=window.setTimeout(()=>this.flushEvaluation(t),this.settings.evaluationThrottleMs);return this.evalQueue.set(t,{evaluate:n,promise:s,resolve:o,reject:a,timerId:l}),s}async flushEvaluation(t){let n=this.evalQueue.get(t);if(n){this.evalQueue.delete(t);try{await n.evaluate(),n.resolve()}catch(i){n.reject(i)}}}async insertDiagramFlow(t){if(!this.settings.diagramHelpersEnabled){new it.Notice("Diagram helpers are disabled in settings.");return}let n=this.app.workspace.getActiveViewOfType(it.MarkdownView)?.editor;if(!n){new it.Notice("Open a Markdown note before inserting a diagram placeholder.");return}let i=t?this.diagramIntegrations.find(m=>m.key===t):await this.selectDiagramIntegration();if(!i)return;if(!this.isPluginAvailable(i.pluginId)){new it.Notice(`${i.name} requires the companion plugin (${i.pluginId}) to be enabled.`);return}let a=(await this.prompt(`Enter file name for the ${i.name}:`))?.trim();if(!a)return;let l=(await this.prompt(`Target folder (default: ${i.defaultFolder}):`))?.trim()||i.defaultFolder,u=await this.prompt("Template path (optional, leave blank to use default placeholder):"),c;try{c=await this.createDiagramFile(i,a,l,u?.trim()||null)}catch(m){new it.Notice(m?.message||"Failed to prepare diagram file.");return}let f=`${i.embedPrefix||"![["}${c}${i.embedSuffix||"]]"}`;n.replaceSelection(f)}async selectDiagramIntegration(){return this.diagramIntegrations.length===1?this.diagramIntegrations[0]:new Promise(t=>{let n=new class extends it.SuggestModal{constructor(o){super(o.app);this.plugin=o;this.resolved=!1}getSuggestions(o){let a=o.toLowerCase();return this.plugin.diagramIntegrations.filter(s=>!o||s.name.toLowerCase().includes(a)||s.key.toLowerCase().includes(a))}renderSuggestion(o,a){a.createEl("div",{text:o.name}),o.description&&a.createEl("small",{text:o.description})}onChooseSuggestion(o){this.resolved=!0,t(o)}onClose(){this.resolved||t(null)}}(this);n.setPlaceholder("Select diagram type"),n.open()})}isPluginAvailable(t){let n=this.app.plugins;return n?n.enabledPlugins instanceof Set?n.enabledPlugins.has(t):!!n.plugins?.[t]:!1}async createDiagramFile(t,n,i,o){let a=this.app.vault,s=(0,it.normalizePath)(i||".");s!=="."&&!a.getAbstractFileByPath(s)&&await a.createFolder(s).catch(()=>{});let l=t.fileExtension.startsWith(".")?t.fileExtension:`.${t.fileExtension}`,u=n.replace(/[\\/:*?"<>|]/g,"-"),c=(0,it.normalizePath)(s==="."?`${u}${l}`:`${s}/${u}${l}`);if(a.getAbstractFileByPath(c))throw new Error("A diagram with that name already exists.");let f=t.defaultFrontmatter??"";if(o){let m=(0,it.normalizePath)(o),p=a.getAbstractFileByPath(m);if(!(p instanceof it.TFile))throw new Error("Template file was not found.");f=await a.read(p)}return await a.create(c,f),c}refreshModelViewerAvailability(t=!1){return this.modelViewerAvailable=this.isModelViewerPluginAvailable(),!this.modelViewerAvailable&&t&&new it.Notice("Model Viewer plugin not detected. Install and enable it to render inserted 3D models."),this.modelViewerAvailable}isModelViewerPluginAvailable(){let t=this.app.plugins;return t?["model-viewer","obsidian-model-viewer"].some(i=>t.enabledPlugins?.has(i)||t.getPlugin?.(i)):!1}async handleInsertModelViewerCommand(){if(!this.settings.modelEmbedsEnabled){new it.Notice("Model embeds are disabled in settings.");return}if(!this.refreshModelViewerAvailability(!0))return;let t=(await this.prompt("Enter model file path or URL"))?.trim();if(!t){new it.Notice("Model source is required to insert a viewer embed.");return}let n=this.app.workspace.getActiveViewOfType(it.MarkdownView);if(!n||!n.editor){new it.Notice("Open a Markdown note to insert a Model Viewer embed.");return}let i=n.editor,o=this.buildModelViewerMarkup(t),s=i.getCursor("from").ch>0?`
`:"";i.replaceSelection(`${s}${o}
`)}buildModelViewerMarkup(t){let n=this.settings.modelViewerDefaults,i=[`src="${t}"`];n.altText?.trim()&&i.push(`alt="${n.altText.trim()}"`),n.cameraControls&&i.push("camera-controls"),n.autoRotate&&i.push("auto-rotate"),n.environmentImage?.trim()&&i.push(`environment-image="${n.environmentImage.trim()}"`),n.exposure?.trim()&&i.push(`exposure="${n.exposure.trim()}"`);let o=[];n.backgroundColor?.trim()&&o.push(`background-color: ${n.backgroundColor.trim()};`);let a=o.length?` style="${o.join(" ")}"`:"";return`<model-viewer ${i.join(" ")}${a}></model-viewer>`}async updateVariableAssignment(t,n,i,o){let a=this.app.workspace.getActiveViewOfType(it.MarkdownView);if(!a)return!1;let s=a.editor,l=s.getValue().split(/\r?\n/),u=h=>{let d=l[h],v=d.indexOf("=");if(v===-1)return!1;let x=d.slice(0,v+1),D=d.slice(v+1),g=N9(D),w=n.trim();if(!w)return!1;let b=i.trim(),y=b?`${w} ${b}`:w,S=`${g.leading}${y}`,C=`${x}${S}${g.comment}`;return s.replaceRange(C,{line:h,ch:0},{line:h,ch:d.length}),!0},c=h=>{let d=null;for(let v=0;v<l.length;v++){let x=l[v],D=x.trim();if(D.startsWith("```")||D.startsWith("~~~")){d===null?d=D.slice(3).trim().toLowerCase()||"":d=null;continue}if(d==="calc"&&h(x))return v}return-1},f=o?.trim(),m=-1;if(f&&(m=c(h=>h.trim()===f)),m===-1){let h=new RegExp(`^\\s*${A9(t)}\\s*=`,"i");m=c(d=>h.test(d))}return m===-1||!u(m)?!1:(await this.recalculateActiveNote(),!0)}async recalculateActiveNote(){let t=this.app.workspace.getActiveFile();if(!t){new it.Notice("No active file to recalculate.");return}let n=this.settings.autoRecalc;try{let i=await this.app.vault.read(t),o=/```calc(?:[^\n]*)\n([\s\S]*?)```/g,a=[],s;for(;(s=o.exec(i))!==null;)a.push(s[1]);if(!a.length){this.calc.clearScope(t.path),this.currentScope=null,this.refreshVariablesView(null),new it.Notice("No calc blocks found in this note.");return}this.calc.clearScope(t.path),n||(this.settings.autoRecalc=!0);let l={sourcePath:t.path,docId:t.path,frontmatter:this.app.metadataCache.getFileCache(t)?.frontmatter??null,getSectionInfo:()=>null,addChild:()=>{}},u=[];for(let c of a)(await this.calc.evaluateBlock(c,l)).querySelectorAll(".calc-error").forEach(p=>{let h=p.textContent?.trim();h&&u.push(h)});if(this.currentScope=this.calc.getScope(t.path),this.refreshVariablesView(this.currentScope),u.length){let[c]=u;new it.Notice(`Recalculated with ${u.length} error${u.length===1?"":"s"}. ${c}`)}else new it.Notice("Calc blocks recalculated successfully.")}catch(i){console.error("Failed to recalculate note",i),new it.Notice(`Failed to recalculate: ${i?.message??i}`)}finally{this.settings.autoRecalc=n}}async onunload(){console.log("Unloading Engineering Toolkit");for(let t of this.evalQueue.values())window.clearTimeout(t.timerId);this.evalQueue.clear(),this.app.workspace.getLeavesOfType(Qn).forEach(t=>t.detach())}insertUnitIntoActiveEditor(t){let n=this.app.workspace.getActiveViewOfType(it.MarkdownView);return n?(n.editor.replaceSelection(t),!0):!1}async loadSettings(){let t=await this.loadData();if(t&&"settings"in t)this.settings=Object.assign({},hr,t.settings??{}),this.loadedGlobalVars=t.globalVars??{};else{this.settings=Object.assign({},hr,t??{});let n=t;this.loadedGlobalVars=n?.globalVars??{}}this.settings.modelViewerDefaults=Object.assign({},hr.modelViewerDefaults,this.settings.modelViewerDefaults??{}),typeof this.settings.variablesPanelEnabled!="boolean"&&(this.settings.variablesPanelEnabled=hr.variablesPanelEnabled),typeof this.settings.labJournalEnabled!="boolean"&&(this.settings.labJournalEnabled=hr.labJournalEnabled),typeof this.settings.diagramHelpersEnabled!="boolean"&&(this.settings.diagramHelpersEnabled=hr.diagramHelpersEnabled),typeof this.settings.modelEmbedsEnabled!="boolean"&&(this.settings.modelEmbedsEnabled=hr.modelEmbedsEnabled),typeof this.settings.autocompleteEnabled!="boolean"&&(this.settings.autocompleteEnabled=hr.autocompleteEnabled),Number.isFinite(this.settings.evaluationThrottleMs)||(this.settings.evaluationThrottleMs=hr.evaluationThrottleMs),this.settings.labIndexPath||(this.settings.labIndexPath=hr.labIndexPath),this.settings.labNoteTemplate||(this.settings.labNoteTemplate=hr.labNoteTemplate),this.settings.labNoteTemplatePresetId||(this.settings.labNoteTemplatePresetId=hr.labNoteTemplatePresetId),typeof this.settings.latexFormatting!="boolean"&&(this.settings.latexFormatting=hr.latexFormatting)}async saveSettings(){await this.saveToolkitData()}async applyFeatureToggles(){this.settings.variablesPanelEnabled||(this.app.workspace.getLeavesOfType(Qn).forEach(t=>t.detach()),this.varsLeaf=null)}async saveToolkitData(){let t={settings:this.settings,globalVars:this.calc?this.calc.serializeGlobalVars():this.loadedGlobalVars};this.loadedGlobalVars=t.globalVars,await this.saveData(t)}getCalcEngine(){return this.calc}async prompt(t){return new Promise(n=>{new class extends window.Modal{constructor(){super(...arguments);this.value=""}onOpen(){let{contentEl:a}=this;a.empty(),a.createEl("h3",{text:t});let s=a.createEl("input",{type:"text"});s.focus(),s.onkeydown=u=>{u.key==="Enter"&&(this.value=s.value,this.close())};let l=a.createEl("button",{text:"OK"});l.onclick=()=>{this.value=s.value,this.close()}}onClose(){n(this.value||null)}}(this.app).open()})}};function A9(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function N9(r){let e=r,t="",n=["//","#"],i=-1;for(let a of n){let s=e.indexOf(a);s!==-1&&(i===-1||s<i)&&(i=s)}return i!==-1&&(t=e.slice(i),e=e.slice(0,i)),{leading:e.match(/^\s*/)?.[0]??"",comment:t}}function C9(r){let e=0;for(let t=0;t<r.length;t++)e=(e<<5)-e+r.charCodeAt(t),e|=0;return Math.abs(e).toString(36)}
/*! Bundled license information:

decimal.js/decimal.mjs:
  (*!
   *  decimal.js v10.6.0
   *  An arbitrary-precision Decimal type for JavaScript.
   *  https://github.com/MikeMcl/decimal.js
   *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
   *  MIT Licence
   *)

fraction.js/fraction.js:
  (**
   * @license Fraction.js v4.3.7 31/08/2023
   * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
   *
   * Copyright (c) 2023, Robert Eisele (robert@raw.org)
   * Dual licensed under the MIT or GPL Version 2 licenses.
   **)
*/
